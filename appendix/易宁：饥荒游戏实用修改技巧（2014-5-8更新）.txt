            易宁：饥荒游戏实用修改技巧（请自行备份原文件）


 适用于巨人的统治DLC游戏100795版，去掉修改路径中的DLC0001\可用于非DLC版

    最新版下载地址：http://bbs.3dmgame.com/thread-3859071-1-1.html

2014年5月8日更新：增加“三一０.疯狂躲避球（用浣熊尾巴种躲避球场，在圈内60秒不被球打到，赢50个黄金）”，应“随心活着”要求修复“二八九.自动取款机（用活木头种自动取款机，存入的黄金每天给3%利息）”路径，应“”要求修复“三六九.使不能堆叠的物品可堆叠”路径




索引：

一.全人物解锁
二.提高主角血量10倍
三.主角自动回血
四.增加食物及料理补血量10倍
五.菩萨低眉（主角受怪物攻击毫发无伤，怪物反暴毙）
六.复活石无限使用（主角永生）
七.主角自动补脑（妈妈再也不用担心我的学习）
八.主角不会饿
九.延缓冻、饿死亡时间
十.主角不怕火、无惧黑暗
十一.提高主角攻击力
十二.主角可渡海（没有什么可以阻挡，你对自由的向往）
十三.主角跑得更快
十四.背猪皮包、穿大理石盔甲行走速度不减慢
十五.提高拿手杖行走速度
十六.解锁全科技（全人物不用机器就可造全部物品）
十七.快速制造物品
十八.地图全开（游戏中按Ctrl+1）
十九.加大单格堆叠数量
二十.增加主角物品条的格子
二十一.双层主角物品条（60格）
二十二.同时携带多个背包（背包可库存）
二十三.背包格子增大至39格
二十四.制造坎普斯背包

二十五.伍迪砍树不会变海狸
二十六.伍迪吃疯肉立即变海狸且随身物品不掉落
二十七.图书管理员不再失眠（老太太可以睡帐篷）
二十八.麦斯威尔用魔法书召唤分身不减脑上限
二十九.瓦丝格雷斯可以吃蔬菜
三十.韦伯不被当成怪物

三十一.全部物品无限使用（工具、武器、盔甲、魔杖、护身符、衣服、帽子、照明物品等全部无限使用）
三十二.修改装备使用次数及时间
三十三.武器伤害值加大
三十四.盔甲在就不掉血（盔甲100%吸收伤害值）
三十五.提高盔甲耐久力
三十六.盔甲永固（永远100%）

三十七.一次采集五个
三十八.快速采集草、树枝、浆果
三十九.远程采集和拾起物品
四十.收割者（吹排箫一次采集周边所有植物）
四十一.用普通种子种胡萝卜且一次采10个（胡萝卜田）
四十二.用便便种曼德拉草
四十三.一斧砍倒一棵树、一镐开掉一块石
四十四.砍树多掉3倍木头
四十五.砍树无树桩
四十六.树桩继续长成树
四十七.采矿时50%概率挖出宝石和铥矿石
四十八.采矿时多掉黄金
四十九.无限开石头（石头不消失）

五十.挖草一次得10个长草簇
五十一.种草不用施肥
五十二.挖果树丛一次得10个果树丛根
五十三.种果树丛不用施肥
五十四.摘浆果不出现火鸡
五十五.摘仙人掌不扎手
五十六.挖树苗一次得10个树苗根
五十七.用芦苇种植芦苇（芦苇可移植）
五十八.挖尖刺灌木一次得10个尖刺灌木根
五十九.栽种尖刺灌木产黄油（植物黄油）
六十.花瓣种花（花可移植）
六十一.用树枝种香蕉树
六十二.用蘑菇种蘑菇（蘑菇可移植）
六十三.用苔藓种苔藓（苔藓可移植）
六十四.用荧光果种三朵洞穴花
六十五.铲掉洞穴花得荧光果
六十六.缩短草、树杈、尖刺灌木、洞穴花、苔藓、浆果、芦苇长出时间
六十七.冬天草、树杈、蘑菇、香蕉树、苔藓、浆果、芦苇也生长
六十八.生命号角（吹牛角让农田和植物迅速长出）

六十九.农田收获更多产品
七十.农作物1秒长出来
七十一.冬天农作物也生长
七十二.农田不用施肥

七十三.煮一锅收多个料理
七十四.缩短煮料理时间
七十五.冰箱容量增加3倍（27格）
七十六.冰箱永久保鲜
七十七.背包可冷藏食品
七十八.晾肉无需等待（将肉放在晾肉架上即干）
七十九.晾肉架一次收多块干肉
八十.木箱容量增加9倍（81格）
八十一.蜻蜓箱子容量增加9倍（108格）
八十二.精炼选项里的物品一次造10个

八十三.喂鸟蔬菜多掉种子
八十四.冬天野外的鸟也掉种子
八十五.种子腐烂变慢
八十六.收获蜂箱不被蛰
八十七.蜂箱容量增加10倍（最多可采60个蜂蜜）
八十八.蜂箱快速产蜂蜜
八十九.萤火虫不怕人（人靠近不会灭、白天也可看见）
九十.空手抓蜜蜂、杀人蜂、蝴蝶、萤火虫（用橙色护身符可以快速吸取）
九十一.快速找到牛（牛在地图上显示）
九十二.牛产便便速度增加1倍
九十三.喂牛蔬菜无限产黄油
九十四.牛醒着也可剪牛毛
九十五.游牧生涯（带牛毛帽让牛群跟随，牛不集体攻击主角）
九十六.养殖牛（用牛毛种小牛）
九十七.养殖兔子（用兔子种兔子洞、兔子可堆叠）
九十八.养殖火鸡（用鸡蛋种会下蛋且不用圈养的火鸡）
九十九.养殖大象（用兔人尾巴种大象）
一００.养殖高鸟（种高鸟蛋得不攻击、下高鸟蛋的大高鸟）

一０一.下钩就上鱼（无限刷鱼）
一０二.用腐烂食物种普通池塘
一０三.用蛙腿种可钓鳗鱼池塘
一０四.用铲子挖掉池塘
一０五.冬天池塘不上冻
一０六.池塘不生青蛙、蚊子
一０七.青蛙不偷东西
一０八.池塘边长满曼德拉草

一０九.主角可夜视（按键盘H键开关夜视功能）
一一０.火炬不用尽（用到剩0%不消失，可继续用）
一一一.矿工灯无限使用
一一二.提灯改用木头、树杈、牛粪等可燃物作燃料
一一三.提灯可以点50天
一一四.南瓜灯永不坏（无限使用）
一一五.用硝石种麦斯威尔灯（靠近自动点燃、远离自动灭）
一一六.石头营火永不灭
一一七.光明世界（地上、洞穴、远古遗址都永无黑暗）

一一八.机器可携带
一一九.建造机器零距离
一二０.用黄金种远古祭坛（以解锁远古科技）
一二一.增加墙的耐久力
一二二.墙自动回血
一二三.墙壁永固（自己可砸，怪物无法破坏）
一二四.建造农田、蜂箱、晾肉架零距离
一二五.在海上盖建筑
一二六.围海造田（建造岛屿）
一二七.用岩石种海洋（建造护城河）
一二八.地板一次造4个
一二九.增加15种可造地皮（1根草造10块）
一三０.眼睛炮塔建在地上后可搬运
一三一.眼睛炮塔一次造10个（无须犀牛角、巨鹿眼球）
一三二.靠近盆栽可补脑、可采蜂蜜，盆栽会发光

一三三.牙齿陷阱自动重置（1秒自动重置）
一三四.部署牙齿陷阱零距离
一三五.回旋镖自动接住且无限使用
一三六.装备回旋镖召唤猎物（打猎游戏）
一三七.一支吹箭用20次（按百分比使用）
一三八.吹箭无限使用（射中目标后自动回到手中）
一三九.快速找到骨眼（骨眼在地图上显示）
一四０.切斯特（狗箱）跑得快
一四一.切斯特（狗箱）不死
一四二.切斯特（狗箱）容量增加9倍（81格）
一四三.保温石保温时间延长1倍
一四四.建造肉块雕像不罚血（正常要从血的上限减30）
一四五.白天也能睡帐篷，睡帐篷不减饥饿
一四六.睡草席卷可补血
一四七.护身符装备在帽子格（省出身体格穿盔甲或带背包）
一四八.橙色护身符吸取物品加速、范围加大、不吸常用物品
一四九.用紫色魔杖传送不降脑
一五０.在地下也能使用紫色魔杖传送到传送核心
一五一.传送核心自由开关（不消耗紫宝石）
一五二.延长蓝色魔杖冻住敌人时间
一五三.蓝色魔杖升级版（一打冻住一大片）

一五四.全人物可制造打火机（原来只有薇洛专用）
一五五.全人物可制造伍迪的斧子（8下砍倒1棵树，普通斧子15下）
一五六.全人物可制造魔法书
一五七.全民吹气球（气球威力大、不伤主角、不降脑、彩色光、分散怪物注意力）
一五八.全人物可制造瓦丝格雷斯矛、瓦丝格雷斯帽

一五九.瑞士手杖（砍树、凿石、锤墙、挖草、祛暑、取暖、防雨、补脑、瞬移、10倍攻击力、2倍速度、照明）
一六０.神之矛（矛攻击时召唤闪电雷击敌人）
一六一.钓金龟（用鱼竿将敌人变成黄金雕像）
一六二.萌时代（扔蜂蜜将怪物变回童年）
一六三.犬牙手雷（扔犬牙炸倒一大片）
一六四.高爆地雷（指南针放在地上作地雷）
一六五.死神之光（拿提灯时右键点空地，满屏敌人通杀）
一六六.魔之双臂（狼牙棒左键抓来敌人并致死、右键抓地移动主角）
一六七.致命的毒箭（中吹箭的敌人不知不觉流血至死）
一六八.电击枪（用橙色魔杖远程电晕敌人，使其任你宰割）
一六九.速射步枪（黄色魔杖左键点射、右键连射蜂刺子弹）
一七０.反物质制造机（绿魔杖左键点敌人，生成敌人反物质分身自相残杀）
一七一.收妖镜（装备铥矿奖章对敌人按右键，将其收入镜中）
一七二.溜溜球（用陷阱种溜溜球，连续打击多个目标，打完自动回到手中）
一七三.千斤锤（用火腿短棍攻击时，天降巨石将敌人拍扁）
一七四.霸王枪（瓦丝格雷斯矛升级为霸王枪，鼠标左键远距离突刺并撤回，右键挑飞敌人，敌人会喷血）
一七五.霸王斧（用蜻蜓鳞片种霸王斧，攻击敌人时震开并伤害周围敌人，可吸敌人的血）
一七六.霸王盔（用猪皮种霸王盔，吸收99%伤害，挨打时弹开并反伤敌人，可照明、防雨、防冻、防暑、补脑、奔跑加速）
一七七.活捉手杖（装备龙卷风魔杖，鼠标左键点鸟、鼹鼠等小动物，可远程活捉）

一七八.巨人帽（带猪皮帽变巨人，攻击、防御上升，可撞毁建筑、树、石头）
一七九.防弹背包（装备背包吸收99%伤害值）
一八０.芦苇吹出催眠曲（在携带的芦苇上按鼠标右键，可催眠怪物）
一八一.隐身背心（穿小巧背心可隐身）
一八二.泡泡糖（吃黄油吹个保护泡泡）
一八三.迷魂花阵（戴花环周围出现食人花眼睛保护主角）
一八四.家园防御系统（暗夜照明灯自动向靠近的敌人发射炮弹）
一八五.音浪太强（戴兔耳罩周围形成音浪，敌人被弹开）
一八六.智能围墙（按键盘F11键造一圈大理石围墙，点围墙可开门，5秒自动关门，夜晚启动照明）
一八七.高压电避难所（按小键盘加号键筑一圈带高压电的玄武岩墙，按减号键消失）
一八八.口袋蜂箱（用噩梦燃料种口袋蜂箱，放在地上飞出杀人蜂攻击敌人）
一八九.避魔圈（按键盘F9键在地上画避魔圈，任何生物靠近都将被弹开，再按F9键取消）

一九０.近卫军（主角受攻击自动出现机械护卫，不要与“菩萨低眉”一同修改）
一九一.火炬召唤亡灵（阿比盖尔）
一九二.毒龙兵团（装备暗影剑召唤坎普斯士兵）
一九三.我的小伙伴（用火炬召唤其他主角一起工作战斗）
一九四.宠物双子星（用齿轮种宠物狗，用海象牙种宠物海狸）
一九五.口袋猴子（用蜂蜜绷带种猴子，帮你活捉兔子、鸟、鼹鼠等小动物）
一九六.口袋浣熊（用纸种口袋浣熊，捕猎、战斗好帮手，喂鱼变身超级浣熊）
一九七.吸地牛（用大理石种吸地牛，地面物品自动吸入肚中，可开矿、砍树）
一九八.找矿蜗牛（用蜗牛龟盔甲种找矿蜗牛，为你勘探新石矿）
一九九.人工女友（用蜂刺种三个女友之一，可背东西、做饭、换衣帽）
二００.养育孩子（主角逝去则孩子接班，一代一代生存下去）
二０一.私家军（用火药种私家军，可装备盔甲、帽子，需要支付工资）
二０二.天使蝴蝶（用雨衣种天使蝴蝶，为你照亮，电击来犯之敌，可收入物品栏）
二０三.宠物熊（用黄色护身符种宠物熊，是战场好帮手，左键点击可停在原地，喂大肉可补血）
二０四.宠物蜻蜓（用蜻蜓盔甲种宠物蜻蜓，攻击力超强，鼠标右键点击可帮你捡地上的物品）
二０五.统御战狼（按键盘X键召唤战狼，誓死护卫你，给5块疯肉升级为金刚战狼）
二０六.糖豆敢死队（按键盘T键召唤糖豆敢死队，对敌发动自杀式爆炸，鼠标左键点击可退钱）

二０七.斗牛场（用牛角种斗牛场，与公牛搏斗赢奖金，观众会向场内扔额外赏金）
二０八.鱼人入侵（每个傍晚都可能遭到众多鱼人的伏击）
二０九.宝物猎人（地面每天出宝贝，限时寻宝赢奖金）
二一０.无尽的任务（点路牌接任务，讨伐怪物赚赏金）
二一一.无限进化（给远古祭坛500个黄金，升级主角血量、饥饿、脑最大值各100点）
二一二.许愿池（给池塘黄金消顽皮值，天上有机会下黄金雨，接到就是你的）
二一三.红胡子强盗团（强盗团通过冒险之门入侵，烧杀抢掠，打死强盗可得黄金、武器）
二一四.饥饿的儿童（不时有孤儿向你乞讨，施舍黄金后离开，否则跟随你直到午夜冻饿而死）
二一五.猪族崛起（大陆上不定期出现猪族部落，他们将与你争夺资源，如何与之相处呢？）
二一六.鬼影重重（夜晚墓地有大量亡魂游荡，购买亡魂之心让主角变身亡魂）
二一七.角斗场（用铥矿石种角斗场，参与生死角斗赚奖金，也可观看比赛）
二一八.潘多拉魔盒（用硬骨头种潘多拉魔盒，每60秒有一批怪物来袭，展开塔防吧）
二一九.铁血蛮族（蛮族霸占虫洞，打死可得肉类、装备，带瓦丝格雷斯帽不被攻击，用大肉收买蛮族做手下）
二二０.象之树（用紫色护身符种象之树，白天周围有巨象群活动，狩猎它们吧）

二二一.变身传奇（主角吃疯肉变身其他主角）
二二二.我是巨鹿（按键盘HOME键主角变身巨鹿，按END键还原）
二二三.我是神龙（按键盘L键主角变身神龙，能吐火，再按L键变回人）
二二四.我是龙卷风（按键盘U键主角变身龙卷风，掠过之处尽毁，敌人靠近会被冻伤，再按U键变回人）
二二五.荒野之狼（吃蜗牛龟粘液变成狼，打败别的狼成为领袖）
二二六.遁形术（按键盘I键主角变身随机小动物，敌人会失去攻击目标，再按I键变回人）

二二七.人工降水（开关雨量计夏天下雨、冬天下雪，可以灭火）
二二八.人工换季（鼠标左键点寒冬温度计切换季节）
二二九.光阴似箭（对指南针按右键跳到下个时段）
二三０.五彩木箱（找东西直接看木箱颜色，木箱可搬动）
二三一.随笔涂鸦（用蓝魔杖为物品涂上色彩）
二三二.移动垃圾桶（狗箱增加删除物品按钮作垃圾桶）
二三三.垃圾洞（用饥饿腰带种垃圾洞，不想要的物品可扔进去销毁，夜晚自燃，白天熄灭）
二三四.生物传送机（探矿杖左键点生物，右键传送到任意地点）
二三五.极速快递（拿着背包对地面点右键，将它传送回家）
二三六.帽子戏法（高礼帽放在地上随机变出几十种宝物）
二三七.节日礼花（点燃荧光果放礼花）
二三八.璀璨流星雨（给远古盔甲10个黄金或荧光果，为你下场流星雨）
二三九.高尔夫球（用蜗牛壳碎片种高尔夫球，锤子作球杆，将球打进兔子洞吧）
二四０.完好如初（红色魔杖可修复物品、回复新鲜度、补充燃料及治愈同伴）
二四一.我的小屋（用巨鹿眼球种小屋，左键点击可睡觉，右键点击打开库房，点按钮可修理装备、恢复食物新鲜、烘干物品）
二四二.自动门（用木盔甲种自动门，进出自动开关）
二四三.新移民（白天石头营火附近出现新移民，自动打怪，可与他们做买卖）
二四四.神奇跳跃（按键盘R键主角可向前跳跃）
二四五.如来神掌（按键盘J键，主角飞起并砸向地面，引发威力巨大的地震）
二四六.警戒模式（按键盘F8键主角自动巡逻并战斗，再按F8键恢复手动控制）
二四七.观赏秃鹫（用蛛丝种笼中的秃鹫，喂腐烂食物产种子，喂肉生高鸟蛋）
二四八.迷你花坛（用燧石种花坛，给种子长出花朵，每晚招来萤火虫）
二四九.橡树盆栽（用化肥种橡树盆栽，每天掉落橡果，靠近可补脑，鼠标左键点击树叶可变色）
二五０.小油灯（用蜘蛛腺体种小油灯，放在地上自动点燃，无限燃烧，可烧炭、烤食物、取暖、照明）
二五一.我的王国（用远古短棒种国王雕像，可获得税收，有警察巡逻并听你调遣）
二五二.鲜果龙树（用蝙蝠棒种龙树，每天掉落水果，可上树）
二五三.小病小灾（主角会感冒、食物中毒，吃曼德拉草可痊愈）
二五四.噩梦草（用鸟粪种噩梦草，可采噩梦燃料，有一定概率出现地下巨人）
二五五.天然温泉（用触手皮种温泉，可恢复生命和脑，可抓鱼）
二五六.小冰山（用铥矿碎片种小冰山，靠近可解暑，无限开采冰和永冻冰，吃了能降温）
二五七.生物克隆机（用夜魔盔甲种克隆机，随身携带，大量克隆各种生物）
二五八.强迫症标尺（按键盘Insert键在地上画坐标，方便建造、种植，再按Insert键消失）
二五九.制冰机（用草伞种制冰机，下雨时自动制冰，可加工成大冰块永久保存，大冰块可砸碎成冰）
二六０.奶报箱（用苔藓种奶报箱，放入黄金，每天清晨送来报纸和5瓶牛奶，读报纸可补脑）
二六一.智能路灯（用蓝色护身符种智能路灯，夜晚自动点亮，白天熄灭，可手动开关、防雷击）

二六二.传送石（右键点装备的保温石，将主角传送到另一块保温石处）
二六三.御风飞翔（装备羽毛飞翔10秒）
二六四.风力滑板车（饥荒世界陆上交通工具）
二六五.动力飞行帽（戴羽毛帽在天空自由飞翔）
二六六.虫洞地铁（虫洞可以搬到任意地点，搭建地铁网络）
二六七.蜘蛛座骑（按键盘PageUP键召唤蜘蛛座骑，按PageDown键取消）
二六八.喷气虫座骑（用夏日背心种喷气虫座骑，左键点虫可骑乘，右键点主角可下来，给草让它原地等待）
二六九.公车站（用草席卷种公车站，买票坐到下一站）
二七０.筋斗云（按键盘Z键召唤筋斗云在天上飞行，再按Z键落地）

二七一.全自动播种机（给避雷针植物，自动种下一百多个）
二七二.智能播种机器人（将独奏乐器扔在地上自动种100棵香蕉树）
二七三.磁悬浮建筑机器人（将针线包扔在地上自动建50块农田）
二七四.电动斧子（拿黄金斧子自动放倒身边的树）
二七五.电动镐（拿黄金镐自动凿开身边的石头）
二七六.电动草叉（拿草叉自动铲起脚下的地皮）
二七七.电动铺路铲（拿黄金铲自动将脚下的空地皮铺成路）
二七八.地皮改造机（用排箫种地皮改造机，一次铺70块地皮）
二七九.小型温室（用蝴蝶翅膀种小型温室，放入种子，10秒长出果实）
二八０.随身灭火器（用寒冬背心种随身灭火器，装备后可灭火）

二八一.菜市场（在兔房买卖农产品）
二八二.肉食店（在猪房买卖肉类）
二八三.流动商贩（在猪村、兔村摆地摊）
二八四.杂货收购行（将料理、帽子、绳子等杂货卖给帐篷换黄金）
二八五.收藏品黑市（在鱼人房买收藏品卖给猪王赚差价）
二八六.收藏品期货市场（制造栏增加期货市场选项，炒作收藏品）
二八七.巨型超市（在主角制造栏中增加商店选项，用黄金买珍贵物品）
二八八.刮刮乐（给路牌黄金买刮刮乐彩票中大奖）
二八九.自动取款机（用活木头种自动取款机，存入的黄金每天给3%利息）
二九０.逝者的赌局（绳子种人骨，用黄金下注猪拳击手生死战）
二九一.小酒馆（用剃刀种小酒馆，听音乐、喝烧酒、吃料理、小憩一下）
二九二.野球拳赌场（用火腿短棍种野球拳赌场，与庄家玩剪刀、石头、布赢奖金）
二九三.网上宠宠店（将鸟、兔子、昆虫、鼹鼠放入网店销售箱在线销售）
二九四.采矿场（用多功能工具种采矿场，打工赚黄金，买卖宝石）
二九五.雇佣兵工厂（用大理石盔甲种兵工厂，打工赚黄金，购买机械雇佣兵）
二九六.企鹅养殖场（用蜂巢种企鹅养殖场，买小企鹅，养大后卖出赚黄金）
二九七.临时工市场（用噩梦花瓣种临时工市场，雇临时工帮你采摘、收获、砍树、开矿）
二九八.我的果汁店（用治疗药膏种果汁店，自己制作果汁，顾客上门购买）
二九九.跳蚤市场（用木炭种跳蚤市场摊位，上百种商品30秒刷新一次，全场一律3个黄金）
三００.小诊所（用毛皮铺盖种小诊所，可买药、住院、做手术）
三０一.斗蜘蛛（用啜食者皮种斗蜘蛛场，购买迷你蜘蛛与庄家PK，赢奖金）
三０二.经营动物园（用黄油种动物园，买卖、繁殖小动物，赚门票钱）
三０三.良种山羊（用闪电羊角种良种山羊，会生小羊，能跟随、产羊奶）
三０四.商业采矿机（用晶体管种商业采矿机，20个黄金租用一次，收购采出的矿石，赔钱、赚钱天注定）
三０五.环保公司（用草种环保公司，将接收的垃圾搬到粉碎区，点铃粉碎后得黄金）
三０六.生鲜售卖机（用木板种生鲜售卖机，放入生鲜产品，每天清晨自动卖出换黄金）
三０七.炸弹客（用红色护身符种炸弹客，购买遥控炸弹，放在地上按键盘Delete键引爆）
三０八.百变存钱罐（用鱼竿种百变存钱罐，每天获得3个黄金的零花钱，可变外型、防雷击、照明、补脑）
三０九.度假营地（按键盘B键租赁度假营地，各种设施一应俱全，再按B键退房）
三一０.疯狂躲避球（用浣熊尾巴种躲避球场，在圈内60秒不被球打到，赢50个黄金）

三一一.快速孵化高鸟蛋（游戏中1小时孵出小高鸟）
三一二.青年高鸟不长大，增加血量及攻击力，喂食可重新认人
三一三.喂自养高鸟产便便
三一四.自养高鸟不用喂食
三一五.牙齿陷阱不伤害自养高鸟
三一六.主角带肉不被兔人攻击
三一七.快速刷兔人（兔人死后兔房立刻生新兔人）
三一八.快速刷猪人（猪死后猪房立刻生新猪）
三一九.猪人永久跟随
三二０.猪守卫不主动攻击主角

三二一.修改敌人生命值
三二二.修改敌人攻击力
三二三.修改敌人攻击节奏
三二四.打地面蜘蛛巢掉3个蜘蛛卵
三二五.增加树精出现概率
三二六.除掉全部企鹅及企鹅冰（世界从此清静了）
三二七.地面不长食人花
三二八.下雨不掉青蛙
三二九.下雨不长花
三三０.打死火狗不着火
三三一.不出现猎犬攻击
三三二.用木板种鱼人房
三三三.用犬牙种海象窝
三三四.海象窝可烧掉
三三五.用铥矿碎片种猴子桶
三三六.吃触手皮周围生触手
三三七.用蜂蜜种野生蜂窝
三三八.用蜂刺种杀人蜂窝
三三九.用猪皮种猪火炬
三四０.增大巨鹿出现概率

三四一.让游戏中的一天更漫长（1天从真实世界的8分钟修改为16分钟）
三四二.修改白天、黑夜、傍晚占一天的比例
三四三.温暖之国（最低气温10度，最高气温25度）
三四四.夏季建筑、植物不自燃
三四五.夏天植物、农田不枯萎
三四六.停止刮风（让游戏不再因刮风而卡顿）
三四七.闪电不伤主角
三四八.扩大地图尺寸
三四九.游戏不自动保存
三五０.手动存档（游戏中按F5保存）
三五一.快速读档（游戏中按F6快速读取之前存档）
三五二.死亡自动读档（死亡不删档）
三五三.彩色物品栏（每次进游戏物品栏底图呈不同颜色）
三五四.纯净的屏幕（按键盘Enter键隐藏制造栏、背包栏等标识）
三五五.隐藏地图图标（按键盘M键隐藏地图图标，再按M键恢复）
三五六.地图不显示已探索区域（按键盘Ctrl+2关闭地图显示，再按一次解锁）
三五七.定格边框（按键盘P键定格边框，主角可以跑到画面任意位置）
三五八.冒险视角（按键盘F7键切换30度视角，再按一次返回）
三五九.修复游戏Mods按钮（解决按Mods按钮卡住问题）
三六０.无限刷洞穴（用石砖种洞穴入口，用铲子可挖掉洞穴入口）
三六一.洞穴不发生地震
三六二.地面也发生地震
三六三.地震掉落物品不摔碎
三六四.无限挖坟刷宝物
三六五.快速找到传送机零件（转送机零件在地图上显示）
三六六.杀小动物不受惩罚（小偷坎普斯不出现）
三六七.简单制造铃（用1个木头、1个黄金制造铃）

三六八.延长燃料燃烧时间
三六九.使不能堆叠的物品可堆叠
三七０.使不可燃物品可作燃料（烧毁不用的道具）
三七一.让物品不腐坏
三七二.用物品种物品

三七三.修改主角开局携带物品（举例开局携带3个鸡蛋火腿）
三七四.修改制作道具的配方
三七五.修改料理食谱（含全部料理精确食谱）
三七六.常用物品中英文名称






一.全人物解锁

    用记事本打开游戏目录\data\scripts\playerprofile.lua文件，将下列内容：

		return true -- mod character
	end

	return false

    替换为：

		return true -- mod character
	end

	return true

    即可解锁全人物进行游戏




二.提高主角血量10倍

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，

    1.将local wilson_health = 150替换为local wilson_health = 1500

    2.将WX78_MIN_HEALTH = 100,替换为WX78_MIN_HEALTH = 1000,

    3.将WX78_MAX_HEALTH = 400,替换为WX78_MAX_HEALTH = 4000,

    4.将下列内容：

		WOLFGANG_HEALTH_MIGHTY = 300,
		WOLFGANG_HEALTH_NORMAL = 200,
		WOLFGANG_HEALTH_WIMPY = 150,

    替换为：

		WOLFGANG_HEALTH_MIGHTY = 3000,
		WOLFGANG_HEALTH_NORMAL = 2000,
		WOLFGANG_HEALTH_WIMPY = 1500,

    5.将WATHGRITHR_HEALTH = 200,替换为WATHGRITHR_HEALTH = 2000,

    6.将WEBBER_HEALTH = 175,替换为WEBBER_HEALTH = 1750,

    即可让全部主角血量提高10倍，修改这里也使盔甲的耐久度同步上升10倍




三.主角自动回血

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst.components.health:SetMaxHealth(TUNING.WILSON_HEALTH)的下一行插入以下内容：

        inst.components.health:StartRegen(30, 10)

    即可让主角自动回血，其中30为血量，10为10秒回血一次，可自行调整




四.增加食物及料理补血量10倍

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：

	    HEALING_TINY = 1,
	    HEALING_SMALL = 3,
	    HEALING_MEDSMALL = 8,
	    HEALING_MED = 20,
	    HEALING_MEDLARGE = 30,
	    HEALING_LARGE = 40,
	    HEALING_HUGE = 60,
	    HEALING_SUPERHUGE = 100,

    替换为：

	    HEALING_TINY = 10,
	    HEALING_SMALL = 30,
	    HEALING_MEDSMALL = 80,
	    HEALING_MED = 200,
	    HEALING_MEDLARGE = 300,
	    HEALING_LARGE = 400,
	    HEALING_HUGE = 600,
	    HEALING_SUPERHUGE = 1000,

    即可增加食物及料理补血量10倍




五.菩萨低眉（主角受怪物攻击毫发无伤，怪物反暴毙）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将下列内容：

        inst:AddComponent("grue")
        inst.components.grue:SetSounds("dontstarve/charlie/warn","dontstarve/charlie/attack")

    替换为：

local function OnAttacked(inst, data)
    inst.components.health:DoDelta(inst.components.health.maxhealth)
    inst.components.sanity:DoDelta(inst.components.sanity.max)
    if data.attacker.components.health then
       data.attacker.components.health:DoDelta(-3000)
    end
end
    inst:ListenForEvent("attacked", OnAttacked)

    即可让主角受攻击时不掉血、不伤脑，怪物反暴毙，并且主角在黑暗中不会被杀死。这是献给不杀生派玩家的礼物，慈悲也是一种力量。不要与“近卫军”一同修改




六.复活石无限使用（主角永生）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\resurrectionstone.lua文件，在inst:Remove()的下一行插入以下内容：

        SpawnPrefab("resurrectionstone").Transform:SetPosition(inst.Transform:GetWorldPosition())

    主角复活后，再点身下的复活石，可使复活石再次完整




七.主角自动补脑（妈妈再也不用担心我的学习）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将下列内容：

		SANITY_DAY_GAIN = 0,--100/(day_time*32),
		
		SANITY_NIGHT_LIGHT = -100/(night_time*20),
		SANITY_NIGHT_MID = -100/(night_time*20),
		SANITY_NIGHT_DARK = -100/(night_time*2),

    替换为：

		SANITY_DAY_GAIN = 100/(day_time),

		SANITY_NIGHT_LIGHT = 100/(night_time),
		SANITY_NIGHT_MID = 100/(night_time),
		SANITY_NIGHT_DARK = 100/(night_time),

    即可让主角自动补脑，地洞里也不例外




八.主角不会饿

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将local calories_per_day = 75替换为local calories_per_day = 0

    即可从每天减75饥饿值变为不减




九.延缓冻、饿死亡时间

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：

	    FREEZING_KILL_TIME = 120,
	    STARVE_KILL_TIME = 120,

    替换为：

	    FREEZING_KILL_TIME = 1200,
	    STARVE_KILL_TIME = 1200,

    即可延缓冻、饿死亡时间10倍




十.主角不怕火、无惧黑暗

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将下列内容：

        inst:AddComponent("grue")
        inst.components.grue:SetSounds("dontstarve/charlie/warn","dontstarve/charlie/attack")

    替换为：

        --inst:AddComponent("grue")
        --inst.components.grue:SetSounds("dontstarve/charlie/warn","dontstarve/charlie/attack")
	inst.components.health.fire_damage_scale = 0

    即可让主角不怕火、无惧黑暗




十一.提高主角攻击力

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将local wilson_attack = 34替换为local wilson_attack = 500

    即可将主角攻击力由34提高到500，数字可自行调整




十二.主角可渡海（没有什么可以阻挡，你对自由的向往）

    用记事本打开游戏目录\data\DLC0001\scripts\components\playeractionpicker.lua文件，将共2句passable = tile ~= GROUND.IMPASSABLE均替换为passable = tile >= GROUND.IMPASSABLE

    即可让主角能通过橙色魔杖、瑞士手杖（见本修改技巧）传送到海上（装备橙色魔杖、瑞士手杖后鼠标右键点海面），并能够行在水上，连地下的沟壑也无法阻挡。注意要替换的语句有2句，千万别只替换了1句哦




十三.主角跑得更快

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：

	    WILSON_WALK_SPEED = 4,
	    WILSON_RUN_SPEED = 6,

    替换为：

	    WILSON_WALK_SPEED = 8,
	    WILSON_RUN_SPEED = 12,

    即可让主角跑步速度增加1倍




十四.背猪皮包、穿大理石盔甲行走速度不减慢

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，

    1.将PIGGYBACK_SPEED_MULT = 0.9,替换为PIGGYBACK_SPEED_MULT = 1,

    2.将ARMORMARBLE_SLOW = 0.7,替换为ARMORMARBLE_SLOW = 1,

    即可背猪皮包、穿大理石盔甲行走速度不减慢




十五.提高拿手杖行走速度

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将CANE_SPEED_MULT = 1.25,替换为CANE_SPEED_MULT = 2.5,

    即可将拿手杖行走速度提高1倍




十六.解锁全科技（全人物不用机器就可造全部物品）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("builder")下一行插入以下内容：

	inst.components.builder.science_bonus = 3
	inst.components.builder.magic_bonus = 3
	inst.components.builder.ancient_bonus = 4

    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wickerbottom.lua文件，将inst.components.builder.science_bonus = 1替换为--inst.components.builder.science_bonus = 1

    即可让全人物不用机器就可造全部物品，远古物品也不用靠近祭坛就可制造




十七.快速制造物品

    用记事本打开游戏目录\data\DLC0001\scripts\actions.lua文件，将BUILD = Action(),替换为BUILD = Action(0, true),

    即可跳过制造物品的动画，快速制造物品




十八.地图全开（游戏中按Ctrl+1）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("resurrectable")下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_1, function()
    if TheInput:IsKeyDown(KEY_CTRL) then
       local map = TheSim:FindFirstEntityWithTag("minimap")
       local x,y,z = GetPlayer().Transform:GetWorldPosition()
       map.MiniMap:ShowArea(x, y, z, 10000)
    end
end)

    即可在游戏中按Ctrl + 1使地图全开




十九.加大单格堆叠数量

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：
		STACK_SIZE_LARGEITEM = 10,
		STACK_SIZE_MEDITEM = 20,
		STACK_SIZE_SMALLITEM = 40,

    替换为：

		STACK_SIZE_LARGEITEM = 999,
		STACK_SIZE_MEDITEM = 999,
		STACK_SIZE_SMALLITEM = 999,

    即可加大单格堆叠数量至999




二十.增加主角物品条的格子

    用记事本打开游戏目录\data\DLC0001\scripts\components\inventory.lua文件，将local MAXSLOTS = 15替换为local MAXSLOTS = 25

    即可将主角物品条的格子由15个增加到25个




二十一.双层主角物品条（60格）

    1.用记事本打开游戏目录\data\DLC0001\scripts\components\inventory.lua文件，将local MAXSLOTS = 15替换为local MAXSLOTS = 60

    2.用记事本打开游戏目录\data\scripts\widgets\inventorybar.lua文件，将self.bg:SetScale(1.15,1,1)替换为self.bg:SetScale(1.86,1.85,1)

    3.将下列内容：

    local num_intersep = math.floor(num_slots / 5) + 1 
    local total_w = (num_slots + num_equip)*(W) + (num_slots + num_equip - 2 - num_intersep) *(SEP) + INTERSEP*num_intersep
    
    for k, v in ipairs(self.equipslotinfo) do
        local slot = EquipSlot(v.slot, v.atlas, v.image, self.owner)
        self.equip[v.slot] = self.toprow:AddChild(slot)
        local x = -total_w/2 + (num_slots)*(W)+num_intersep*(INTERSEP - SEP) + (num_slots-1)*SEP + INTERSEP + W*(k-1) + SEP*(k-1)
        slot:SetPosition(x,0,0)
        table.insert(eslot_order, slot)
        
		local item = self.owner.components.inventory:GetEquippedItem(v.slot)
		if item then
			slot:SetTile(ItemTile(item))
		end

    end    

    for k = 1,num_slots do
        local slot = InvSlot(k, HUD_ATLAS, "inv_slot.tex", self.owner, self.owner.components.inventory)
        self.inv[k] = self.toprow:AddChild(slot)
        local interseps = math.floor((k-1) / 5)
        local x = -total_w/2 + W/2 + interseps*(INTERSEP - SEP) + (k-1)*W + (k-1)*SEP
        slot:SetPosition(x,0,0)
        
		slot.top_align_tip = W*0.5 + YSEP

		local item = self.owner.components.inventory:GetItemInSlot(k)
		if item then
			slot:SetTile(ItemTile(item))
		end
        
    end

    替换为：

    local num_intersep = math.floor(num_slots / 10) + 1 
    local total_w = (num_slots -30.85)*(W) + (num_slots -30.85 - 2 - num_intersep) *(SEP) + INTERSEP*num_intersep
    
    for k, v in ipairs(self.equipslotinfo) do
        local slot = EquipSlot(v.slot, v.atlas, v.image, self.owner)
        self.equip[v.slot] = self.toprow:AddChild(slot)
        local x = -total_w/2 + (num_slots*0+14.07)*(W)+num_intersep*(INTERSEP - SEP) + (num_slots-1)*SEP + INTERSEP + W*(k-1) + SEP*(k-1)
        slot:SetPosition(x+341,190,0)
        table.insert(eslot_order, slot)
        
		local item = self.owner.components.inventory:GetEquippedItem(v.slot)
		if item then
			slot:SetTile(ItemTile(item))
		end

    end    

    for k = 1,30 do
        local slot = InvSlot(k, HUD_ATLAS, "inv_slot.tex", self.owner, self.owner.components.inventory)
        self.inv[k] = self.toprow:AddChild(slot)
        local interseps = math.floor((k-1) / 10)
        local x = -total_w/2 + W/2 + interseps*(INTERSEP - SEP) + (k-1)*W + (k-1)*SEP
        slot:SetPosition(x,0,0)
        
		local item = self.owner.components.inventory:GetItemInSlot(k)
		if item then
			slot:SetTile(ItemTile(item))
		end
        
    end

    for k = 31,60 do
        local slot = InvSlot(k, HUD_ATLAS, "inv_slot.tex", self.owner, self.owner.components.inventory)
        self.inv[k] = self.toprow:AddChild(slot)
        local interseps = math.floor((k-1-30) / 10)
        local x = -total_w/2 + W/2 + interseps*(INTERSEP - SEP) + (k-1-30)*W + (k-1-30)*SEP
        slot:SetPosition(x,80,0)
        
		local item = self.owner.components.inventory:GetItemInSlot(k)
		if item then
			slot:SetTile(ItemTile(item))
		end
        
    end

    即可获得双层主角物品条（60格），注意必须将游戏设置（options） - （Settings） - HUD size项设为0，即显示最小物品条，才可完整显示60格哦




二十二.同时携带多个背包（背包可库存）

    1.同时携带多个普通背包：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua文件，将inst.components.inventoryitem.cangoincontainer = false替换为inst.components.inventoryitem.cangoincontainer = true

    2.同时携带多个小猪包：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\piggyback.lua文件，将inst.components.inventoryitem.cangoincontainer = false替换为inst.components.inventoryitem.cangoincontainer = true

    3.同时携带多个坎普斯背包：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\krampus_sack.lua文件，将inst.components.inventoryitem.cangoincontainer = false替换为inst.components.inventoryitem.cangoincontainer = true

    4.同时携带多个冰包：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\icepack.lua文件，将inst.components.inventoryitem.cangoincontainer = false替换为inst.components.inventoryitem.cangoincontainer = true

    即可同时携带多个背包




二十三.背包格子增大至39格

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua文件，

    1.将下列内容：

for y = 0, 3 do
	table.insert(slotpos, Vector3(-162, -y*75 + 114 ,0))
	table.insert(slotpos, Vector3(-162 +75, -y*75 + 114 ,0))

    替换为：

for y = 0, 12 do
	table.insert(slotpos, Vector3(-162, -y*75 + 435 ,0))
	table.insert(slotpos, Vector3(-162 +75, -y*75 + 435 ,0))
	table.insert(slotpos, Vector3(-162 +150, -y*75 + 435 ,0))

    2.将下列内容：

    inst.components.container.widgetanimbank = "ui_backpack_2x4"
    inst.components.container.widgetanimbuild = "ui_backpack_2x4"
    inst.components.container.widgetpos = Vector3(-5,-70,0)

    替换为：

    --inst.components.container.widgetanimbank = "ui_backpack_2x4"
    --inst.components.container.widgetanimbuild = "ui_backpack_2x4"
    inst.components.container.widgetpos = Vector3(-25,-50,0)

    即可让普通背包格子增大至39格




二十四.制造坎普斯背包

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("piggyback", {Ingredient("pigskin", 4), Ingredient("silk", 6), Ingredient("rope", 2)}, RECIPETABS.SURVIVAL, TECH.SCIENCE_TWO)的下一行插入以下内容：

Recipe("krampus_sack", {Ingredient("cutgrass", 5),Ingredient("twigs", 5)}, RECIPETABS.SURVIVAL, TECH.NONE)

    即可在生存选项（画着绳套）下，用5个草、5个树杈制造坎普斯背包。不要与“巨型超市”一同修改，因为“巨型超市”中已经有坎普斯背包出售




二十五.伍迪砍树不会变海狸

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\woodie.lua文件，将inst.components.beaverness:DoDelta(3)替换为inst.components.beaverness:DoDelta(0)

    即可让伍迪砍树不会变海狸




二十六.伍迪吃疯肉立即变海狸且随身物品不掉落

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\woodie.lua文件，

    1.将inst.components.inventory:DropEverything()替换为--inst.components.inventory:DropEverything()


    2.在inst.Light:SetColour(245/255,40/255,0/255)的下一行插入以下内容：

local function OnEat(inst, food)
    if food.prefab == "monstermeat" and not inst.components.beaverness:IsBeaver() then
       if not inst.components.beaverness.doing_transform then
          inst.components.beaverness:SetPercent(1)
       end
    end
end
    inst.components.eater:SetOnEatFn(OnEat)

    即可让伍迪吃疯肉立即变海狸，随身物品还保留在身上（只是看不见），等变回伍迪即可使用。不要在伍迪佩戴橙色护身符时变海狸，否则砍的木头都自动被吸走，海狸无法吃到。不要与“小病小灾”一同修改




二十七.图书管理员不再失眠（老太太可以睡帐篷）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wickerbottom.lua文件，将inst:AddTag("insomniac")替换为--inst:AddTag("insomniac")

    即可让老太太也可以睡帐篷




二十八.麦斯威尔用魔法书召唤分身不减脑上限

    1.用记事本打开游戏目录\data\scripts\prefabs\waxwelljournal.lua文件，将reader.components.sanity:RecalculatePenalty()替换为--reader.components.sanity:RecalculatePenalty()


    2.用记事本打开游戏目录\data\scripts\prefabs\shadowwaxwell.lua文件，将下列内容：

    inst:ListenForEvent("death", ondeath)

	inst:AddComponent("inventory")
    inst.components.inventory.dropondeath = false

    inst:AddComponent("sanityaura")
    inst.components.sanityaura.penalty = TUNING.SHADOWWAXWELL_SANITY_PENALTY

    替换为：

    --inst:ListenForEvent("death", ondeath)

	inst:AddComponent("inventory")
    inst.components.inventory.dropondeath = false

    --inst:AddComponent("sanityaura")
    --inst.components.sanityaura.penalty = TUNING.SHADOWWAXWELL_SANITY_PENALTY

    即可在麦斯威尔用魔法书召唤分身时不减脑上限




二十九.瓦丝格雷斯可以吃蔬菜

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wathgrithr.lua文件，将inst.components.eater:SetCarnivore(true)替换为--inst.components.eater:SetCarnivore(true)

    即可让红发妹瓦丝格雷斯不止可以吃肉，也可以吃蔬菜




三十.韦伯不被当成怪物

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\webber.lua文件，将inst:AddTag("monster")替换为--inst:AddTag("monster")

    即可让韦伯不被当成怪物，猪人、兔人等中立动物不会主动攻击你




三十一.全部物品无限使用（工具、武器、盔甲、魔杖、护身符、衣服、帽子、照明物品等全部无限使用）

    1.用记事本打开游戏目录\data\DLC0001\scripts\widgets\itemtile.lua文件，将下列内容：

    if invitem.components.fueled then
        self:SetPercent(invitem.components.fueled:GetPercent())
    end

    if invitem.components.finiteuses then
        self:SetPercent(invitem.components.finiteuses:GetPercent())
    end


    if invitem.components.perishable then
        if self:HasSpoilage() then
            self:SetPerishPercent(invitem.components.perishable:GetPercent())
        else
            self:SetPercent(invitem.components.perishable:GetPercent())
        end
    end
    
    if invitem.components.armor then
        self:SetPercent(invitem.components.armor:GetPercent())
    end

    替换为：

    --if invitem.components.fueled then
        --self:SetPercent(invitem.components.fueled:GetPercent())
    --end

    --if invitem.components.finiteuses then
        --self:SetPercent(invitem.components.finiteuses:GetPercent())
    --end


    if invitem.components.perishable then
        if self:HasSpoilage() then
            self:SetPerishPercent(invitem.components.perishable:GetPercent())
        else
            self:SetPercent(invitem.components.perishable:GetPercent())
        end
    end
    
    --if invitem.components.armor then
        --self:SetPercent(invitem.components.armor:GetPercent())
    --end


    2.用记事本打开游戏目录\data\scripts\components\finiteuses.lua文件，将self:SetUses(self.current - (num or 1))替换为self:SetUses(self.current - 0)


    3.用记事本打开游戏目录\data\DLC0001\scripts\components\fueled.lua文件，将self.consuming = true替换为self.consuming = false


    4.用记事本打开游戏目录\data\scripts\components\armor.lua文件，将下列内容：

function Armor:SetCondition(amount)
    self.condition = amount

替换为：

function Armor:SetCondition(amount)
    self.condition = self.maxcondition

    即可让全部物品无限使用。其中火堆和石头营火会无限燃烧，直到睡过帐篷或下地洞后熄灭




三十二.修改装备使用次数及时间

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

斧头	    AXE_USES = 100,
锤	    HAMMER_USES = 75,
铲子	    SHOVEL_USES = 25,
草叉	    PITCHFORK_USES = 25,
镐	    PICKAXE_USES = 33,
捕虫网	    BUGNET_USES = 10,
矛	    SPEAR_USES = 150,
瓦丝格雷斯矛	    WATHGRITHR_SPEAR_USES = 200,
狼牙棒	    SPIKE_USES = 100,
鱼杆	    FISHINGROD_USES = 9,
陷阱	    TRAP_USES = 8,
回旋镖	    BOOMERANG_USES = 10,
暗影剑	    NIGHTSWORD_USES = 100,
冰魔杖	    ICESTAFF_USES = 20,
火魔杖	    FIRESTAFF_USES = 20,
传送魔杖	    TELESTAFF_USES = 5,
黄色魔杖		YELLOWSTAFF_USES = 20,
橙色魔杖		ORANGESTAFF_USES = 20,
绿色魔杖		GREENSTAFF_USES = 5,
龙卷风魔杖	    TORNADOSTAFF_USES = 15,
火腿短棍	    HAMBAT_USES = 100,
蝙蝠棒	    BATBAT_USES = 75,
多功能工具斧头和锄头	    MULTITOOL_AXE_PICKAXE_USES = 400,
远古短棒	    RUINS_BAT_USES = 150,
红色护身符	    REDAMULET_USES = 20,
蓝色护身符	    BLUEAMULET_FUEL = total_day_time * 0.75,
紫色护身符	    PURPLEAMULET_FUEL = total_day_time * 0.4,
黄色护身符		YELLOWAMULET_FUEL = total_day_time,
橙色护身符		ORANGEAMULET_USES = 225,
绿色护身符		GREENAMULET_USES = 5,
排箫	    PANFLUTE_USES = 10,
牛角	    HORN_USES = 10,
牙齿陷阱	    TRAP_TEETH_USES = 10,
帐篷		TENT_USES = 6,
午睡小屋		SIESTA_CANOPY_USES = 6,
伞（攻击次数）		UMBRELLA_USES = 20,
针线包		SEWINGKIT_USES = 5,
肥料		FERTILIZER_USES = 10,
铃		GLOMMERBELL_USES = 3,
火炬	    TORCH_FUEL = night_time*1.25,
夜棍	    NIGHTSTICK_FUEL = night_time*6,
矿工帽	    MINERHAT_LIGHTTIME = (night_time+dusk_time)*2.6,
提灯	    LANTERN_LIGHTTIME = (night_time+dusk_time)*2.6,
蜘蛛帽	    SPIDERHAT_PERISHTIME = 4*seg_time,
独奏乐器	    ONEMANBAND_PERISHTIME = 6*seg_time,
草伞	    GRASS_UMBRELLA_PERISHTIME = 2*total_day_time*perish_warp,
伞	    UMBRELLA_PERISHTIME = total_day_time*6,
眼睛帽	    EYEBRELLA_PERISHTIME = total_day_time*9,
草帽		STRAWHAT_PERISHTIME = total_day_time*5,
兔耳罩		EARMUFF_PERISHTIME = total_day_time*5,
冬帽		WINTERHAT_PERISHTIME = total_day_time*10,
牛毛帽		BEEFALOHAT_PERISHTIME = total_day_time*10,
寒冬背心	TRUNKVEST_PERISHTIME = total_day_time*15,
反射背心		REFLECTIVEVEST_PERISHTIME = total_day_time*8,
夏威夷衬衫		HAWAIIANSHIRT_PERISHTIME = total_day_time*15,
小巧背心	SWEATERVEST_PERISHTIME = total_day_time*10,
饥饿腰带		HUNGERBELT_PERISHTIME = total_day_time*8,
熊背心		BEARGERVEST_PERISHTIME = total_day_time*7,
雨衣		RAINCOAT_PERISHTIME = total_day_time*10,
海象帽子	WALRUSHAT_PERISHTIME = total_day_time*25,
羽毛帽	FEATHERHAT_PERISHTIME = total_day_time*8,
高礼帽		TOPHAT_PERISHTIME = total_day_time*8,
冰帽		ICEHAT_PERISHTIME = total_day_time*4,
鼹鼠帽		MOLEHAT_PERISHTIME = total_day_time*1.5,
防雨帽		RAINHAT_PERISHTIME = total_day_time*10,
浣熊帽		CATCOONHAT_PERISHTIME = total_day_time*10,
羽毛扇	    FEATHER_FAN_USES = 15,

    加大每行的数字，即可增加该装备使用次数及时间。如让牛毛帽使用时间增加10倍，就将BEEFALOHAT_PERISHTIME = total_day_time*10,替换为BEEFALOHAT_PERISHTIME = total_day_time*100,




三十三.武器伤害值加大

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

空手	    UNARMED_DAMAGE = 10,
暗影剑	    NIGHTSWORD_DAMAGE = wilson_attack*2,
蝙蝠棒	    BATBAT_DAMAGE = wilson_attack * 1.25,
枯竭蝙蝠棒	    BATBAT_DRAIN = wilson_attack * 0.2,
狼牙棒	    SPIKE_DAMAGE = wilson_attack*1.5,
火腿短棍	    HAMBAT_DAMAGE = wilson_attack*1.75,
矛	    SPEAR_DAMAGE = wilson_attack,
瓦丝格雷斯矛	    WATHGRITHR_SPEAR_DAMAGE = wilson_attack * 1.25,
斧头	    AXE_DAMAGE = wilson_attack*.8,
镐	    PICK_DAMAGE = wilson_attack*.8,
回旋镖	    BOOMERANG_DAMAGE = wilson_attack*.8,
火炬	    TORCH_DAMAGE = wilson_attack*.5,
锤	    HAMMER_DAMAGE = wilson_attack*.5,
铲子	    SHOVEL_DAMAGE = wilson_attack*.5,
草叉	    PITCHFORK_DAMAGE = wilson_attack*.5,
捕虫网	    BUGNET_DAMAGE = wilson_attack*.125,
鱼杆	    FISHINGROD_DAMAGE = wilson_attack*.125,
雨伞	    UMBRELLA_DAMAGE = wilson_attack*.5,
手杖	    CANE_DAMAGE = wilson_attack*.5,
多功能工具	    MULTITOOL_DAMAGE = wilson_attack*.9,
远古短棒	    RUINS_BAT_DAMAGE = wilson_attack * 1.75,
夜棍	    NIGHTSTICK_DAMAGE = wilson_attack*.85, -- Due to the damage being electric, it will get multiplied by 1.5 against any mob
吹箭	    PIPE_DART_DAMAGE = 100,
牙齿陷阱	    TRAP_TEETH_DAMAGE = 60,
火药		GUNPOWDER_DAMAGE = 200,
打火机	    LIGHTER_DAMAGE = wilson_attack*.5,
眼睛炮塔	    EYETURRET_DAMAGE = 65,
龙卷风	    TORNADO_DAMAGE = 7,

    加大每行最后的数字，即可增大各种武器的伤害值，游戏中的伤害值是你修改的数字乘34（主角攻击力）。如将暗影剑的伤害值增大10倍，就将NIGHTSWORD_DAMAGE = wilson_attack*2,替换为NIGHTSWORD_DAMAGE = wilson_attack*20,




三十四.盔甲在就不掉血（盔甲100%吸收伤害值）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，

    1.草盔甲：将ARMORGRASS_ABSORPTION = .6,替换为ARMORGRASS_ABSORPTION = 1,

    2.木盔甲：将ARMORWOOD_ABSORPTION = .8,替换为ARMORWOOD_ABSORPTION = 1,

    3.大理石盔甲：将ARMORMARBLE_ABSORPTION = .95,替换为ARMORMARBLE_ABSORPTION = 1,

    4.蜗牛龟盔甲：将ARMORSNURTLESHELL_ABSORPTION = 0.6,替换为ARMORSNURTLESHELL_ABSORPTION = 1,

    5.远古盔甲：将ARMORRUINS_ABSORPTION = 0.9,替换为ARMORRUINS_ABSORPTION = 1,

    6.饥饿腰带：将ARMORSLURPER_ABSORPTION = 0.6,替换为ARMORSLURPER_ABSORPTION = 1,

    7.猪皮帽：将ARMOR_FOOTBALLHAT_ABSORPTION = .8,替换为ARMOR_FOOTBALLHAT_ABSORPTION = 1,

    8.蜻蜓盔甲：将ARMORDRAGONFLY_ABSORPTION = 0.7,替换为ARMORDRAGONFLY_ABSORPTION = 1,

    9.瓦丝格雷斯帽：将ARMOR_WATHGRITHRHAT_ABSORPTION = .8,替换为ARMOR_WATHGRITHRHAT_ABSORPTION = 1,

    10.远古王冠：将ARMOR_RUINSHAT_ABSORPTION = 0.9,替换为ARMOR_RUINSHAT_ABSORPTION = 1,

    11.蜗牛帽：将ARMOR_SLURTLEHAT_ABSORPTION = 0.9,替换为ARMOR_SLURTLEHAT_ABSORPTION = 1,

    12.蜂帽：将ARMOR_BEEHAT_ABSORPTION = .8,替换为ARMOR_BEEHAT_ABSORPTION = 1,

    13.夜魔盔甲：将ARMOR_SANITY_ABSORPTION = .95,替换为ARMOR_SANITY_ABSORPTION = 1,

    即可让盔甲100%吸收伤害值




三十五.提高盔甲耐久力

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

草盔甲	    ARMORGRASS = wilson_health*1.5,
木盔甲	    ARMORWOOD = wilson_health*3,
大理石盔甲		ARMORMARBLE = wilson_health*7,
蜗牛龟盔甲		ARMORSNURTLESHELL = wilson_health*7,
远古盔甲		ARMORRUINS = wilson_health * 12,
饥饿腰带		ARMORSLURPER = wilson_health * 4,
猪皮帽	    ARMOR_FOOTBALLHAT = wilson_health*3,
蜻蜓盔甲		ARMORDRAGONFLY = wilson_health * 9,
瓦丝格雷斯帽		ARMOR_WATHGRITHRHAT = wilson_health * 5,
远古王冠		ARMOR_RUINSHAT = wilson_health*8,
蜗牛帽		ARMOR_SLURTLEHAT = wilson_health*5,
蜂帽	    ARMOR_BEEHAT = wilson_health*5,
夜魔盔甲		ARMOR_SANITY = wilson_health * 5,

    加大每行最后的数字，即可提高盔甲耐久力。如让草盔甲耐久力增大10倍，则将ARMORGRASS = wilson_health*1.5,替换为ARMORGRASS = wilson_health*15,




三十六.盔甲永固（永远100%）

    用记事本打开游戏目录\data\scripts\components\armor.lua文件，将下列内容：

function Armor:SetCondition(amount)
    self.condition = amount

    替换为：

function Armor:SetCondition(amount)
    self.condition = self.maxcondition

    即可让盔甲永固




三十七.一次采集五个

    用记事本打开游戏目录\data\DLC0001\scripts\components\pickable.lua文件，将self.numtoharvest = number or 1替换为self.numtoharvest = 5

    即可让全部采集品一次采集5个，数字可自行调整。也可单独修改某项物品一次采集五个：

    1.草：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\grass.lua文件，将inst.components.pickable:SetUp("cutgrass", TUNING.GRASS_REGROW_TIME)替换为inst.components.pickable:SetUp("cutgrass", TUNING.GRASS_REGROW_TIME, 5)

    2.树枝：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\sapling.lua文件，将inst.components.pickable:SetUp("twigs", TUNING.SAPLING_REGROW_TIME)替换为inst.components.pickable:SetUp("twigs", TUNING.SAPLING_REGROW_TIME, 5)

    3.蘑菇：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\mushrooms.lua文件，将inst.components.pickable:SetUp(data.pickloot, nil)替换为inst.components.pickable:SetUp(data.pickloot, nil, 5)

    4.胡萝卜：用记事本打开游戏目录\data\scripts\prefabs\carrot.lua文件，将inst.components.pickable:SetUp("carrot", 10)替换为inst.components.pickable:SetUp("carrot", 10, 5)

    5.芦苇：用记事本打开游戏目录\data\scripts\prefabs\reeds.lua文件，将inst.components.pickable:SetUp("cutreeds", TUNING.REEDS_REGROW_TIME)替换为inst.components.pickable:SetUp("cutreeds", TUNING.REEDS_REGROW_TIME, 5)

    6.浆果：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，将inst.components.pickable:SetUp("berries", TUNING.BERRY_REGROW_TIME)替换为inst.components.pickable:SetUp("berries", TUNING.BERRY_REGROW_TIME, 5)

    7.花：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\flower.lua文件，将inst.components.pickable:SetUp("petals", 10)替换为inst.components.pickable:SetUp("petals", 10, 5)

    8.恶魔花：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\flower_evil.lua文件，将inst.components.pickable:SetUp("petals_evil", 10)替换为inst.components.pickable:SetUp("petals_evil", 10, 5)

    9.洞穴花：用记事本打开游戏目录\data\scripts\prefabs\flower_cave.lua文件，将inst.components.pickable:SetUp("lightbulb", TUNING.FLOWER_CAVE_REGROW_TIME)替换为inst.components.pickable:SetUp("lightbulb", TUNING.FLOWER_CAVE_REGROW_TIME, 5)

    10.香蕉：用记事本打开游戏目录\data\scripts\prefabs\cave_banana_tree.lua文件，将inst.components.pickable:SetUp("cave_banana", TUNING.CAVE_BANANA_GROW_TIME)替换为inst.components.pickable:SetUp("cave_banana", TUNING.CAVE_BANANA_GROW_TIME, 5)

    11.蕨类：用记事本打开游戏目录\data\scripts\prefabs\cave_fern.lua文件，将inst.components.pickable:SetUp("foliage", 10)替换为inst.components.pickable:SetUp("foliage", 10, 5)

    12.木炭：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\evergreens.lua文件，将inst.components.lootdropper:SpawnLootPrefab("charcoal")替换为下列内容：

    inst.components.lootdropper:SpawnLootPrefab("charcoal")
    inst.components.lootdropper:SpawnLootPrefab("charcoal")
    inst.components.lootdropper:SpawnLootPrefab("charcoal")
    inst.components.lootdropper:SpawnLootPrefab("charcoal")
    inst.components.lootdropper:SpawnLootPrefab("charcoal")

    13.曼德拉草：用记事本打开游戏目录\data\scripts\prefabs\mandrake.lua文件，在inst:AddComponent("pickable")的下一行插入inst.components.pickable:SetUp("mandrake", 10, 4)

    即可单独修改某项物品一次采集五个




三十八.快速采集草、树枝、浆果

    1.草：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\grass.lua文件，在inst:AddComponent("pickable")的下一行插入inst.components.pickable.quickpick = true

    2.树枝：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\sapling.lua文件，在inst:AddComponent("pickable")的下一行插入inst.components.pickable.quickpick = true

    3.浆果：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，在inst:AddComponent("pickable")的下一行插入inst.components.pickable.quickpick = true




三十九.远程采集和拾起物品

    用记事本打开游戏目录\data\DLC0001\scripts\actions.lua文件，将下列内容：

    PICK = Action(),
    PICKUP = Action(1),

    替换为：

    PICK = Action(0, true, false, 20),
    PICKUP = Action(1, true, false, 20),

    即可用鼠标左键点击草、树杈等物品，直接采集或捡起，主角不必跑过去，大大节约了时间




四十.收割者（吹排箫一次采集周边所有植物）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\panflute.lua文件，

    1.将下列内容：

local function HearPanFlute(inst, musician, instrument)
	if inst.components.sleeper then
	    inst.components.sleeper:AddSleepiness(10, TUNING.PANFLUTE_SLEEPTIME)
	end
end

    替换为：

local function HearPanFlute(inst, musician, instrument)
    local pos = Vector3(inst.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
    for k,v in pairs(ents) do
        if v.components.pickable and v.prefab ~= "flower" then
           v.components.pickable:Pick(GetPlayer())
        end
        if v.components.crop then
           v.components.crop:Harvest(GetPlayer())
        end
    end
end


    2.将下列内容：

    inst.components.instrument.range = TUNING.PANFLUTE_SLEEPRANGE
    inst.components.instrument:SetOnHeardFn(HearPanFlute)
    
    inst:AddComponent("tool")
    inst.components.tool:SetAction(ACTIONS.PLAY)
    
    inst:AddComponent("finiteuses")
    inst.components.finiteuses:SetMaxUses(TUNING.PANFLUTE_USES)
    inst.components.finiteuses:SetUses(TUNING.PANFLUTE_USES)
    inst.components.finiteuses:SetOnFinished( onfinished)
    inst.components.finiteuses:SetConsumption(ACTIONS.PLAY, 1)

    替换为：

    inst.components.instrument:SetOnHeardFn(HearPanFlute)
    inst:AddComponent("tool")
    inst.components.tool:SetAction(ACTIONS.PLAY)

    即可吹排箫一次采集周边所有植物（除了花），包括农田也可以收割，排箫原有催眠功能取消。排箫在魔法选项（画着红骷髅）下用5个芦苇、1个曼德拉草、1个绳子制造。如果觉得曼德拉草不好找，可以按本修改技巧“用便便种曼德拉草”修改一下




四十一.用普通种子种胡萝卜且一次采10个（胡萝卜田）

    1.用记事本打开游戏目录\data\scripts\prefabs\seeds.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("carrot_planted").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\scripts\prefabs\carrot.lua文件，将inst.components.pickable:SetUp("carrot", 10)替换为inst.components.pickable:SetUp("carrot", 10, 10)

    即可用普通种子种胡萝卜且一次采10个。拿起种子在空地上按鼠标右键即可种植，冬天也有青菜吃




四十二.用便便种曼德拉草

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\poop.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("mandrake").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用便便种曼德拉草，种一块曼德拉草田吧




四十三.一斧砍倒一棵树、一镐开掉一块石

    1.用记事本打开游戏目录\data\scripts\prefabs\axe.lua文件，将inst.components.tool:SetAction(ACTIONS.CHOP)替换为inst.components.tool:SetAction(ACTIONS.CHOP, 15)

    2.用记事本打开游戏目录\data\scripts\prefabs\pickaxe.lua文件，将inst.components.tool:SetAction(ACTIONS.MINE)替换为inst.components.tool:SetAction(ACTIONS.MINE, 15)

    即可一斧砍倒一棵树、一镐开掉一块石




四十四.砍树多掉3倍木头

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\evergreens.lua文件，

    1.将下列内容：

                normal_loot = {"log", "log", "pinecone"},
                short_loot = {"log"},
                tall_loot = {"log", "log", "log", "pinecone", "pinecone"},

    替换为：

                normal_loot = {"log", "log", "log", "log", "log", "log", "pinecone"},
                short_loot = {"log", "log", "log"},
                tall_loot = {"log", "log", "log", "log", "log", "log", "log", "log", "log", "pinecone", "pinecone"},


    2.将下列内容：

                normal_loot = {"log","log"},
                short_loot = {"log"},
                tall_loot = {"log", "log","log"},

    替换为：

                normal_loot = {"log","log","log","log", "log", "log"},
                short_loot = {"log","log", "log"},
                tall_loot = {"log", "log","log","log","log","log", "log", "log", "log"},

    即可砍树多掉3倍木头




四十五.砍树无树桩

    1.砍普通树无树桩：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\evergreens.lua文件，在inst.AnimState:PushAnimation(inst.anims.stump)的下一行插入inst:Remove()


    2.砍橡树无树桩：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\deciduoustrees.lua文件，在inst.AnimState:PushAnimation(inst.anims.stump)的下一行插入inst:Remove()

    即可砍树无树桩，节省了挖树桩的时间。不要与“树桩继续长成树”一同修改




四十六.树桩继续长成树

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\evergreens.lua文件，

    1.将下列内容：

local function chop_down_tree(inst, chopper)
    inst:RemoveComponent("burnable")
    MakeSmallBurnable(inst)
    inst:RemoveComponent("propagator")
    MakeSmallPropagator(inst)
    inst:RemoveComponent("workable")

    替换为：

    MakeLargeBurnable(inst)
    MakeLargePropagator(inst)


    2.将下列内容：

    RemovePhysicsColliders(inst)
    inst.AnimState:PushAnimation(inst.anims.stump)
	
	inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.DIG)
    inst.components.workable:SetOnFinishCallback(dig_up_stump)
    inst.components.workable:SetWorkLeft(1)
    
    inst:AddTag("stump")
    if inst.components.growable then
        inst.components.growable:StopGrowing()
    end

    替换为：

    inst.AnimState:PushAnimation(inst.anims.stump)

    即可让树桩继续长成树，取消用铲子挖树桩，如果不想要树桩了，烧掉即可。注意这种再生树不会烧成枯树，烧完只会剩一团灰。不要与“砍树无树桩”一同修改




四十七.采矿时50%概率挖出宝石和铥矿石

    用记事本打开游戏目录\data\scripts\prefabs\rocks.lua文件，将下列内容：

SetSharedLootTable( 'rock1',
{
    {'rocks',  1.00},
    {'rocks',  1.00},
    {'rocks',  1.00},
    {'nitre',  1.00},
    {'flint',  1.00},
    {'nitre',  0.25},
    {'flint',  0.60},
})

SetSharedLootTable( 'rock2',
{
    {'rocks',     	1.00},
    {'rocks',     	1.00},
    {'rocks',     	1.00},
    {'goldnugget',  1.00},
    {'flint',     	1.00},
    {'goldnugget',  0.25},
    {'flint',     	0.60},
})

SetSharedLootTable( 'rock_flintless',
{
    {'rocks',   1.0},
    {'rocks',   1.0},
    {'rocks',   1.0},
    {'rocks',  	1.0},
    {'rocks',   0.6},
})

SetSharedLootTable( 'rock_flintless_med',
{
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 0.4},
})


SetSharedLootTable( 'rock_flintless_low',
{
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 0.2},
})

    替换为：

SetSharedLootTable( 'rock1',
{
    {'rocks',  1.00},
    {'rocks',  1.00},
    {'rocks',  1.00},
    {'nitre',  1.00},
    {'flint',  1.00},
    {'nitre',  0.25},
    {'flint',  0.60},
    {'bluegem',  0.50},
    {'redgem',  0.50},
    {'orangegem',  0.50},
    {'yellowgem',  0.50},
    {'greengem',  0.50},
    {'purplegem',  0.50},
    {'thulecite',  0.50},
})

SetSharedLootTable( 'rock2',
{
    {'rocks',     	1.00},
    {'rocks',     	1.00},
    {'rocks',     	1.00},
    {'goldnugget',  1.00},
    {'flint',     	1.00},
    {'goldnugget',  0.25},
    {'flint',     	0.60},
    {'bluegem',  0.50},
    {'redgem',  0.50},
    {'orangegem',  0.50},
    {'yellowgem',  0.50},
    {'greengem',  0.50},
    {'purplegem',  0.50},
    {'thulecite',  0.50},
})

SetSharedLootTable( 'rock_flintless',
{
    {'rocks',   1.0},
    {'rocks',   1.0},
    {'rocks',   1.0},
    {'rocks',  	1.0},
    {'rocks',   0.6},
    {'bluegem',  0.50},
    {'redgem',  0.50},
    {'orangegem',  0.50},
    {'yellowgem',  0.50},
    {'greengem',  0.50},
    {'purplegem',  0.50},
    {'thulecite',  0.50},
})

SetSharedLootTable( 'rock_flintless_med',
{
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 0.4},
    {'bluegem',  0.50},
    {'redgem',  0.50},
    {'orangegem',  0.50},
    {'yellowgem',  0.50},
    {'greengem',  0.50},
    {'purplegem',  0.50},
    {'thulecite',  0.50},
})


SetSharedLootTable( 'rock_flintless_low',
{
    {'rocks', 1.0},
    {'rocks', 1.0},
    {'rocks', 0.2},
    {'bluegem',  0.50},
    {'redgem',  0.50},
    {'orangegem',  0.50},
    {'yellowgem',  0.50},
    {'greengem',  0.50},
    {'purplegem',  0.50},
    {'thulecite',  0.50},
})

    即可在采矿时50%概率挖出宝石和铥矿石。也可将bluegem（蓝宝石）、redgem（红宝石）、orangegem（橙宝石）、yellowgem（黄宝石）、greengem（绿宝石）、purplegem（紫宝石）、thulecite（铥矿石）换成其他物品，比如koalefant_summer（红象）、koalefant_winter（冬象），并调整0.50的出现概率为你想要的数字




四十八.采矿时多掉黄金

    用记事本打开游戏目录\data\scripts\prefabs\rocks.lua文件，

    1.在{'nitre',  0.25},的下一行插入以下内容：

    {'goldnugget',  1.00},
    {'goldnugget',  1.00},
    {'goldnugget',  1.00},

    2.在{'goldnugget',  0.25},的下一行插入以下内容：

    {'goldnugget',  1.00},
    {'goldnugget',  1.00},
    {'goldnugget',  1.00},

    3.在{'rocks',   0.6},的下一行插入以下内容：

    {'goldnugget',  1.00},
    {'goldnugget',  1.00},
    {'goldnugget',  1.00},

    4.在{'rocks', 0.4},的下一行插入以下内容：

    {'goldnugget',  1.00},
    {'goldnugget',  1.00},
    {'goldnugget',  1.00},

    5.在{'rocks', 0.2},的下一行插入以下内容：

    {'goldnugget',  1.00},
    {'goldnugget',  1.00},
    {'goldnugget',  1.00},

    即可在采矿时多掉3块黄金




四十九.无限开石头（石头不消失）

    用记事本打开游戏目录\data\scripts\prefabs\rocks.lua文件，将inst:Remove()替换为inst.components.workable.workleft = 10

    即可在开矿时既掉落矿石，石头本身又不消失，可以无限开石头




五十.挖草一次得10个长草簇

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\grass.lua文件，在inst:Remove()的下一行插入以下内容：

	inst.components.lootdropper:SetLoot({"dug_grass", "dug_grass", "dug_grass", "dug_grass", "dug_grass", "dug_grass", "dug_grass", "dug_grass", "dug_grass"})
	local pt = Point(inst.Transform:GetWorldPosition())
	inst.components.lootdropper:DropLoot(pt)

    即可挖草一次得10个长草簇，长草簇是用来种草的




五十一.种草不用施肥

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\grass.lua文件，

    1.将下列内容：

local function ontransplantfn(inst)
	if inst.components.pickable then
		inst.components.pickable:MakeBarren()
	end
end

    替换为：

local function ontransplantfn(inst)
	--if inst.components.pickable then
		--inst.components.pickable:MakeBarren()
	--end
end


    2.在local function onpickedfn(inst)的下一行插入以下内容：

	inst.components.pickable.cycles_left = 20
 
    即可种草不用施肥




五十二.挖果树丛一次得10个果树丛根

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，在inst.components.lootdropper:SpawnLootPrefab("dug_"..bushname)的下一行插入以下内容：

	inst.components.lootdropper:SetLoot({"dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname, "dug_"..bushname})
	local pt = Point(inst.Transform:GetWorldPosition())
	inst.components.lootdropper:DropLoot(pt)

    即可挖果树丛一次得10个果树丛根，果树丛根是用来种果树丛的




五十三.种果树丛不用施肥

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，

    1.将inst.components.pickable:MakeBarren()替换为--inst.components.pickable:MakeBarren()


    2.在local function onpickedfn(inst, picker)的下一行插入inst.components.pickable.cycles_left = 5

    即可种果树丛不用施肥，采浆果也不会使果树丛渐渐枯萎




五十四.摘浆果不出现火鸡

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，将inst:DoTaskInTime(3+math.random()*3, spawnperd)替换为--inst:DoTaskInTime(3+math.random()*3, spawnperd)

    即可摘浆果不再出现讨厌的火鸡




五十五.摘仙人掌不扎手

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cactus.lua文件，将下列内容：

        picker.components.combat:GetAttacked(inst, TUNING.CACTUS_DAMAGE)
        picker:PushEvent("thorns")

    替换为：

        --picker.components.combat:GetAttacked(inst, TUNING.CACTUS_DAMAGE)
        --picker:PushEvent("thorns")

    即可摘仙人掌不扎手




五十六.挖树苗一次得10个树苗根

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\sapling.lua文件，在inst:Remove()的下一行插入以下内容：

	inst.components.lootdropper:SetLoot({"dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling", "dug_sapling"})
	local pt = Point(inst.Transform:GetWorldPosition())
	inst.components.lootdropper:DropLoot(pt)

    即可挖树苗一次得10个树苗根，树苗根是用来种树杈的




五十七.用芦苇种植芦苇（芦苇可移植）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cutreeds.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("reeds").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\scripts\prefabs\reeds.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function dig_up(inst, chopper)
    inst.components.lootdropper:SpawnLootPrefab("cutreeds")
    inst:Remove()
end
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.DIG)
    inst.components.workable:SetOnFinishCallback(dig_up)
    inst.components.workable:SetWorkLeft(1)
    inst:AddComponent("lootdropper")

    即可让芦苇可以被铲子铲掉得芦苇，用芦苇可种芦苇，使芦苇可移植




五十八.挖尖刺灌木一次得10个尖刺灌木根

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\marsh_bush.lua文件，在inst:Remove()的下一行插入以下内容：

	inst.components.lootdropper:SetLoot({"dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush", "dug_marsh_bush"})
	local pt = Point(inst.Transform:GetWorldPosition())
	inst.components.lootdropper:DropLoot(pt)

    即可挖尖刺灌木一次得10个尖刺灌木根，尖刺灌木根是用来种尖刺灌木的，采集获得树杈，且会被扎一下




五十九.栽种尖刺灌木产黄油（植物黄油）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\marsh_bush.lua文件，

    1.将picker.components.combat:GetAttacked(inst, TUNING.MARSHBUSH_DAMAGE)替换为--picker.components.combat:GetAttacked(inst, TUNING.MARSHBUSH_DAMAGE)


    2.将inst.components.pickable:SetUp("twigs", TUNING.MARSHBUSH_REGROW_TIME)替换为inst.components.pickable:SetUp("butter", TUNING.MARSHBUSH_REGROW_TIME*.25,3)

    即可让栽种的尖刺灌木不产树杈而改产3块黄油，并且1天长1次，还不扎手哦。尖刺灌木一般生长在沼泽里，用铲子挖下来就可以栽种，无须施肥，冬夏皆长




六十.花瓣种花（花可移植）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\petals.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("flower").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用花瓣种花，使花可方便移植




六十一.用树枝种香蕉树

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\twigs.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("cave_banana_tree").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用树枝种香蕉树




六十二.用蘑菇种蘑菇（蘑菇可移植）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\mushrooms.lua文件，在inst.AnimState:PlayAnimation(data.animname.."_cap")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab(data.animname.."_mushroom").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用红蘑菇种红蘑菇，用蓝蘑菇种蓝蘑菇，用绿蘑菇种绿蘑菇，即蘑菇可移植




六十三.用苔藓种苔藓（苔藓可移植）

    用记事本打开游戏目录\data\scripts\prefabs\cutlichen.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("lichen").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用苔藓种苔藓，使苔藓可移植。不要与“奶报箱（用苔藓种奶报箱，放入黄金，每天清晨送来报纸和5瓶牛奶，读报纸可补脑）”一同修改




六十四.用荧光果种三朵洞穴花

    用记事本打开游戏目录\data\scripts\prefabs\lightbulb.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("flower_cave_triple").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用荧光果种三朵洞穴花




六十五.铲掉洞穴花得荧光果

    用记事本打开游戏目录\data\scripts\prefabs\flower_cave.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function dig_up(inst, chopper)
    inst.components.lootdropper:SpawnLootPrefab("lightbulb")
    inst:Remove()
end
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.DIG)
    inst.components.workable:SetOnFinishCallback(dig_up)
    inst.components.workable:SetWorkLeft(1)

    即可用铲子铲掉洞穴花得荧光果，使洞穴花可以被移除




六十六.缩短草、树杈、尖刺灌木、洞穴花、苔藓、浆果、芦苇长出时间

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，

    1.将下列内容：

	    GRASS_REGROW_TIME = total_day_time*3,
	    SAPLING_REGROW_TIME = total_day_time*4,
	    MARSHBUSH_REGROW_TIME = total_day_time*4,
	    CACTUS_REGROW_TIME = total_day_time*4,
	    FLOWER_CAVE_REGROW_TIME = total_day_time*3,
	    LICHEN_REGROW_TIME = total_day_time*5,
	    
	    BERRY_REGROW_TIME = total_day_time*3,

    替换为：

	    GRASS_REGROW_TIME = total_day_time*1,
	    SAPLING_REGROW_TIME = total_day_time*1,
	    MARSHBUSH_REGROW_TIME = total_day_time*1,
	    CACTUS_REGROW_TIME = total_day_time*1,
	    FLOWER_CAVE_REGROW_TIME = total_day_time*1,
	    LICHEN_REGROW_TIME = total_day_time*1,
	    
	    BERRY_REGROW_TIME = total_day_time*1,


    2.将REEDS_REGROW_TIME = total_day_time*3,替换为REEDS_REGROW_TIME = total_day_time*1,

    即可让这些植物1天长1次




六十七.冬天草、树杈、蘑菇、香蕉树、苔藓、浆果、芦苇也生长

    用记事本打开游戏目录\data\DLC0001\scripts\standardcomponents.lua文件，将inst.components.pickable:Pause()替换为inst.components.pickable:Resume()

    即可让植物冬天也生长。注意如果存档已经是冬天，植物已经停止生长，那么只有将植物挖起来再种下，才会在冬天继续生长




六十八.生命号角（吹牛角让农田和植物迅速长出）

    用记事本打开游戏目录\data\scripts\prefabs\horn.lua文件，

    1.在下列内容：

local function onfinished(inst)
    inst:Remove()
end

    的下一行插入以下内容：

function growfn(inst, reader)
    local pos = Vector3(reader.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
    for k,v in pairs(ents) do
        if v.components.pickable then
           v.components.pickable:FinishGrowing()
        end
        if v.components.crop then
           v.components.crop:DoGrow(TUNING.TOTAL_DAY_TIME*3)
        end
        if v:HasTag("tree") and v.components.growable and not v:HasTag("stump") then
           v.components.growable:DoGrowth()
        end
    end
end

    2.将下列内容：

    inst.components.instrument.range = TUNING.HORN_RANGE
    inst.components.instrument:SetOnHeardFn(HearHorn)

    替换为：

    inst.components.instrument.onheard = growfn

    即可在采集过的植物根附近吹牛角，使植物瞬间生长出来，小树也可以长成大树，牛角原有让牛跟随功能失效




六十九.农田收获更多产品

    用记事本打开游戏目录\data\DLC0001\scripts\components\crop.lua文件，将以下内容：

        harvester.components.inventory:GiveItem(product)

    替换为：

        harvester.components.inventory:GiveItem(SpawnPrefab(self.product_prefab))
        harvester.components.inventory:GiveItem(SpawnPrefab(self.product_prefab))
        harvester.components.inventory:GiveItem(SpawnPrefab(self.product_prefab))

    即可一次收获3个产品，想收获多少，就复制多少行harvester.components.inventory:GiveItem(SpawnPrefab(self.product_prefab))即可




七十.农作物1秒长出来

    1.用记事本打开游戏目录\data\scripts\prefabs\seeds.lua文件，将inst.components.plantable.growtime = TUNING.SEEDS_GROW_TIME替换为inst.components.plantable.growtime = TUNING.SEEDS_GROW_TIME*0


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\veggies.lua文件，将inst.components.plantable.growtime = TUNING.SEEDS_GROW_TIME替换为inst.components.plantable.growtime = TUNING.SEEDS_GROW_TIME*0

    即可让所有农作物1秒长出




七十一.冬天农作物也生长

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将MIN_CROP_GROW_TEMP = 5,替换为MIN_CROP_GROW_TEMP = -100,

    即可让农作物在冬天也生长




七十二.农田不用施肥

    用记事本打开游戏目录\data\DLC0001\scripts\components\grower.lua文件，将self.cycles_left = self.cycles_left - 1替换为self.cycles_left = self.cycles_left

    即可让农田不用施肥




七十三.煮一锅收多个料理

    用记事本打开游戏目录\data\DLC0001\scripts\components\stewer.lua文件，将以下内容：

harvester.components.inventory:GiveItem(loot, nil, Vector3(TheSim:GetScreenPos(self.inst.Transform:GetWorldPosition())))

    替换为：

harvester.components.inventory:GiveItem(SpawnPrefab(self.product))
harvester.components.inventory:GiveItem(SpawnPrefab(self.product))
harvester.components.inventory:GiveItem(SpawnPrefab(self.product))

    即可煮一锅收3个料理，想收多少，就复制多少行harvester.components.inventory:GiveItem(SpawnPrefab(self.product))即可




七十四.缩短煮料理时间

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将BASE_COOK_TIME = night_time*.3333,替换为BASE_COOK_TIME = seg_time*.01,

    即可使料理瞬间煮熟




七十五.冰箱容量增加3倍（27格）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\icebox.lua文件，

    1.将for y = 2, 0, -1 do替换为for y = 8, 0, -1 do


    2.将下列内容：

    inst.components.container.widgetanimbank = "ui_chest_3x3"
    inst.components.container.widgetanimbuild = "ui_chest_3x3"
    inst.components.container.widgetpos = Vector3(0,200,0)

    替换为：

    --inst.components.container.widgetanimbank = "ui_chest_3x3"
    --inst.components.container.widgetanimbuild = "ui_chest_3x3"
    inst.components.container.widgetpos = Vector3(0,100,0)

    即可让冰箱容量增加3倍至27格




七十六.冰箱永久保鲜

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将PERISH_FRIDGE_MULT = .5,替换为PERISH_FRIDGE_MULT = 0,

    即可让放入冰箱的食物永久保鲜。如果将0改为负数比如-5，则可使不新鲜的食物回复新鲜度




七十七.背包可冷藏食品

    1.普通背包可冷藏食品：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddTag("fridge")


    2.小猪包可冷藏食品：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\piggyback.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddTag("fridge")


    3.坎普斯背包可冷藏食品：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\krampus_sack.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddTag("fridge")

    即可让背包具备冰箱功能




七十八.晾肉无需等待（将肉放在晾肉架上即干）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将下列内容：

		DRY_FAST = total_day_time,
		DRY_MED = 2*total_day_time,

    替换为：

		DRY_FAST = total_day_time*0,
		DRY_MED = 2*total_day_time*0,

    即可晾肉无需等待，肉放在晾肉架上即干




七十九.晾肉架一次收多块干肉

    用记事本打开游戏目录\data\DLC0001\scripts\components\dryer.lua文件，将以下内容：

harvester.components.inventory:GiveItem(loot, nil, Vector3(TheSim:GetScreenPos(self.inst.Transform:GetWorldPosition())))

    替换为：

harvester.components.inventory:GiveItem(SpawnPrefab(self.product))
harvester.components.inventory:GiveItem(SpawnPrefab(self.product))
harvester.components.inventory:GiveItem(SpawnPrefab(self.product))

    即可晾1块肉收3块干肉，想收多少，就复制多少行harvester.components.inventory:GiveItem(SpawnPrefab(self.product))即可




八十.木箱容量增加9倍（81格）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\treasurechest.lua文件，

    1.将下列内容：

for y = 2, 0, -1 do
	for x = 0, 2 do

    替换为：

for y = 8, 0, -1 do
	for x = 0, 8 do


    2.将下列内容：

		inst.components.container.widgetanimbank = "ui_chest_3x3"
		inst.components.container.widgetanimbuild = "ui_chest_3x3"
		inst.components.container.widgetpos = Vector3(0,200,0)

    替换为：

		--inst.components.container.widgetanimbank = "ui_chest_3x3"
		--inst.components.container.widgetanimbuild = "ui_chest_3x3"
		inst.components.container.widgetpos = Vector3(0,100,0)

    即可让木箱容量增加9倍至81格




八十一.蜻蜓箱子容量增加9倍（108格）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\dragonfly_chest.lua文件，

    1.将下列内容：

for y = 2.5, -0.5, -1 do
    for x = 0, 2 do

    替换为：

for y = 8, 0, -1 do
    for x = 0, 11 do


    2.将下列内容：

    inst.components.container.widgetanimbank = "ui_chester_shadow_3x4"
    inst.components.container.widgetanimbuild = "ui_chester_shadow_3x4"	
    inst.components.container.widgetpos = Vector3(0,200,0)

    替换为：

    --inst.components.container.widgetanimbank = "ui_chester_shadow_3x4"
    --inst.components.container.widgetanimbuild = "ui_chester_shadow_3x4"	
    inst.components.container.widgetpos = Vector3(-200,100,0)

    即可使蜻蜓箱子容量增加9倍至108格




八十二.精炼选项里的物品一次造10个

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，将下列内容：

Recipe("rope", {Ingredient("cutgrass", 3)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE)
Recipe("boards", {Ingredient("log", 4)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE)
Recipe("cutstone", {Ingredient("rocks", 3)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE)
Recipe("papyrus", {Ingredient("cutreeds", 4)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE)
Recipe("nightmarefuel", {Ingredient("petals_evil", 4)}, RECIPETABS.REFINE, TECH.MAGIC_TWO)
Recipe("purplegem", {Ingredient("redgem",1), Ingredient("bluegem", 1)}, RECIPETABS.REFINE, TECH.MAGIC_TWO)

    替换为：

Recipe("rope", {Ingredient("cutgrass", 3)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE,nil,nil,nil,10)
Recipe("boards", {Ingredient("log", 4)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE,nil,nil,nil,10)
Recipe("cutstone", {Ingredient("rocks", 3)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE,nil,nil,nil,10)
Recipe("papyrus", {Ingredient("cutreeds", 4)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE,nil,nil,nil,10)
Recipe("nightmarefuel", {Ingredient("petals_evil", 4)}, RECIPETABS.REFINE, TECH.MAGIC_TWO,nil,nil,nil,10)
Recipe("purplegem", {Ingredient("redgem",1), Ingredient("bluegem", 1)}, RECIPETABS.REFINE, TECH.MAGIC_TWO,nil,nil,nil,10)

    即可让精炼选项（画着白色宝石）里的绳子、木板、石砖、纸、噩梦燃料、紫宝石一次造10个




八十三.喂鸟蔬菜多掉种子

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\birdcage.lua文件，将local num_seeds = math.random(2)替换为local num_seeds = 10

    即可喂鸟一次蔬菜掉10个种子，数字可随意调整




八十四.冬天野外的鸟也掉种子

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\birds.lua文件，将return not GetWorld().components.seasonmanager:IsWinter()替换为return true

    即可让野外的鸟在冬天也掉种子




八十五.种子腐烂变慢

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将PERISH_SUPERSLOW = 40*total_day_time*perish_warp,替换为PERISH_SUPERSLOW = 200*total_day_time*perish_warp,

    即可让种子腐烂时间延缓5倍




八十六.收获蜂箱不被蛰

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\beebox.lua文件，将inst.components.childspawner:ReleaseAllChildren(picker)替换为--inst.components.childspawner:ReleaseAllChildren(picker)

    即可在收获蜂箱不被蛰




八十七.蜂箱容量增加10倍（最多可采60个蜂蜜）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\beebox.lua文件，

    1.将下列内容：

    { amount=6, idle="honey3", hit="hit_honey3" },
    { amount=3, idle="honey2", hit="hit_honey2" },
    { amount=1, idle="honey1", hit="hit_honey1" },

    替换为：

    { amount=60, idle="honey3", hit="hit_honey3" },
    { amount=30, idle="honey2", hit="hit_honey2" },
    { amount=10, idle="honey1", hit="hit_honey1" },


    2.将inst.components.harvestable:SetUp("honey", 6, nil, onharvest, updatelevel)替换为inst.components.harvestable:SetUp("honey", 60, nil, onharvest, updatelevel)

    即可让蜂箱容量增加10倍，可减少照管的时间




八十八.蜂箱快速产蜂蜜

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\beebox.lua文件，

    1.将下列内容：

	        inst.components.harvestable:SetGrowTime(TUNING.BEEBOX_HONEY_TIME)
	        inst.components.harvestable:StartGrowing()
	    end
	end
end

local function stopsleep(inst)
	if not inst:HasTag("burnt") then
	    if inst.components.harvestable then
	        inst.components.harvestable:SetGrowTime(nil)
	        inst.components.harvestable:StopGrowing()

    替换为：

	        inst.components.harvestable:SetGrowTime(TUNING.BEEBOX_HONEY_TIME*.01)
	        inst.components.harvestable:StartGrowing()
	    end
	end
end

local function stopsleep(inst)
	if not inst:HasTag("burnt") then
	    if inst.components.harvestable then
	        inst.components.harvestable:SetGrowTime(TUNING.BEEBOX_HONEY_TIME*.01)
	        inst.components.harvestable:StartGrowing()


    2.将inst:ListenForEvent( "dusktime", StopSpawningFn(inst), GetWorld())替换为inst:ListenForEvent( "dusktime", StartSpawningFn(inst), GetWorld())

    即可让蜂箱快速产蜂蜜，几秒钟一箱就满了




八十九.萤火虫不怕人（人靠近不会灭、白天也可看见）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\fireflies.lua文件，将下列内容：

        inst:AddTag("NOCLICK")
        if inst.lighton then
            fadeout(inst)
        end
        inst.lighton = false

    替换为：

        if not inst.lighton then
            fadein(inst)
        end
        inst.lighton = true

    即可让萤火虫不怕人




九十.空手抓蜜蜂、杀人蜂、蝴蝶、萤火虫（用橙色护身符可以快速吸取）

    1.空手抓蜜蜂、杀人蜂：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bee.lua文件，将inst.components.inventoryitem.canbepickedup = false替换为inst.components.inventoryitem.canbepickedup = true


    2.空手抓蝴蝶：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\butterfly.lua文件，将inst.components.inventoryitem.canbepickedup = false替换为inst.components.inventoryitem.canbepickedup = true


    3.空手抓萤火虫：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\fireflies.lua文件，将共2句inst.components.inventoryitem.canbepickedup = false均替换为inst.components.inventoryitem.canbepickedup = true

    即可空手抓蜜蜂、杀人蜂、蝴蝶、萤火虫，也可以用橙色护身符快速吸取




九十一.快速找到牛（牛在地图上显示）

    用记事本打开游戏目录\data\scripts\prefabs\beefalo.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "beemine.png" )

    即可在地图上看到牛的位置，显示为炸弹图标，因为你不知道它什么时候会发狂




九十二.牛产便便速度增加1倍

    用记事本打开游戏目录\data\scripts\prefabs\beefalo.lua文件，将inst.components.periodicspawner:SetRandomTimes(40, 60)替换为inst.components.periodicspawner:SetRandomTimes(20, 30)

    即可让牛产便便速度增加1倍，约20至30秒产一次。牛的附近如果有便便，就不会再拉了，要勤捡起哦




九十三.喂牛蔬菜无限产黄油

    用记事本打开游戏目录\data\scripts\prefabs\beefalo.lua文件，在inst.components.eater:SetVegetarian()的下一行插入以下内容：

local function OnGetItemFromPlayer(inst, giver, item)
    if item.components.edible.foodtype == "VEGGIE" then
       SpawnPrefab("butter").Transform:SetPosition(inst.Transform:GetWorldPosition())	
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer

    即可喂牛胡罗卜、浆果等蔬菜无限产黄油，相当于挤牛奶




九十四.牛醒着也可剪牛毛

    用记事本打开游戏目录\data\scripts\prefabs\beefalo文件，将下列内容：

    inst.components.beard.canshavetest = function() if not inst.components.sleeper:IsAsleep() then return false, "AWAKEBEEFALO" end return true end

    替换为：

    inst.components.beard.canshavetest = function() if not inst.components.sleeper:IsAsleep() then return true, "AWAKEBEEFALO" end return true end

    即可在牛醒着时也可剪牛毛




九十五.游牧生涯（带牛毛帽让牛群跟随，牛不集体攻击主角）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

    local function beefalo_equip(inst, owner)
        onequip(inst, owner)
        owner:AddTag("beefalo")
    end
    local function beefalo_unequip(inst, owner)
        onunequip(inst, owner)
        owner:RemoveTag("beefalo")
    end
    local function beefalo()
        local inst = simple()
        inst.components.equippable:SetOnEquip( beefalo_equip )
        inst.components.equippable:SetOnUnequip( beefalo_unequip )

        inst:AddComponent("insulator")
        inst.components.insulator:SetInsulation(TUNING.INSULATION_LARGE)

        inst:AddComponent("waterproofer")
        inst.components.waterproofer:SetEffectiveness(TUNING.WATERPROOFNESS_SMALL)
        
        inst:AddComponent("fueled")
        inst.components.fueled.fueltype = "USAGE"
        inst.components.fueled:InitializeFuelLevel(TUNING.BEEFALOHAT_PERISHTIME)
        inst.components.fueled:SetDepletedFn(generic_perish)
        
        
        return inst
    end

    替换为：

    local function beefalo_disable(inst)
        if inst.updatetask then
            inst.updatetask:Cancel()
            inst.updatetask = nil
        end
        local owner = inst.components.inventoryitem and inst.components.inventoryitem.owner
            owner.components.leader:RemoveFollowersByTag("beefalo")
    end
    local function beefalo_update(inst)
        local owner = inst.components.inventoryitem and inst.components.inventoryitem.owner
        if owner and owner.components.leader then
            local x,y,z = owner.Transform:GetWorldPosition()
            local ents = TheSim:FindEntities(x,y,z, TUNING.SPIDERHAT_RANGE, {"beefalo"})
            for k,v in pairs(ents) do
                if v.components.follower and not v.components.follower.leader and not owner.components.leader:IsFollower(v) and owner.components.leader.numfollowers < 50 then
                    owner.components.leader:AddFollower(v)
                end
            end
        end
    end
    local function beefalo_enable(inst)
        inst.updatetask = inst:DoPeriodicTask(0.5, beefalo_update, 1)
    end
    local function beefalo_equip(inst, owner)
        onequip(inst, owner)
        beefalo_enable(inst)
        owner:AddTag("beefalo")
    end
    local function beefalo_unequip(inst, owner)
        onunequip(inst, owner)
        beefalo_disable(inst)
        owner:RemoveTag("beefalo")
    end
    local function beefalo_perish(inst)
        beefalo_disable(inst)
        inst:Remove()
    end
    local function beefalo()
        local inst = simple()
        inst.components.equippable:SetOnEquip( beefalo_equip )
        inst.components.equippable:SetOnUnequip( beefalo_unequip )
        inst:AddComponent("insulator")
        inst.components.insulator.insulation = TUNING.INSULATION_LARGE
        inst:AddComponent("waterproofer")
        inst.components.waterproofer:SetEffectiveness(TUNING.WATERPROOFNESS_SMALL)
        inst:AddComponent("fueled")
        inst.components.fueled.fueltype = "USAGE"
        inst.components.fueled:InitializeFuelLevel(TUNING.BEEFALOHAT_PERISHTIME)
        inst.components.fueled:SetDepletedFn(beefalo_perish)
        return inst
    end


    2.用记事本打开游戏目录\data\scripts\prefabs\beefalo.lua文件，将return not guy:HasTag("beefalo") and替换为return not guy:HasTag("beefalo") and not guy:HasTag("player") and


    3.将return dude:HasTag("beefalo") and not dude:HasTag("player") and not dude.components.health:IsDead()替换为return dude:HasTag("beefalo") and dude:HasTag("player") and not dude.components.health:IsDead()


    4.将inst.components.locomotor.walkspeed = 1.5替换为inst.components.locomotor.walkspeed = 3

    即可带牛毛帽让牛群跟随，杀牛它们不会集体反击，也提高了牛走路的速度。加上“牛产便便速度增加1倍”、“喂牛蔬菜无限产黄油”、“牛醒着也可剪牛毛”的修改（见本修改技巧），就可以烧着便便取暖，吃牛肉、黄油，经营自己的牛群吧




九十六.养殖牛（用牛毛种小牛）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\beefalowool.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("babybeefalo").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用牛毛种小牛，人工繁育自己的牛群




九十七.养殖兔子（用兔子种兔子洞、兔子可堆叠）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rabbit.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("rabbithole").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = TUNING.STACK_SIZE_LARGEITEM

    即可种兔子得兔子洞、兔子可堆叠




九十八.养殖火鸡（用鸡蛋种会下蛋且不用圈养的火鸡）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\egg.lua文件，在inst.components.cookable.product = "bird_egg_cooked"的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("perd").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\scripts\prefabs\perd.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("periodicspawner")
    inst.components.periodicspawner:SetPrefab("bird_egg")
    inst.components.periodicspawner:SetRandomTimes(360, 480)
    inst.components.periodicspawner:Start()


    3.用记事本打开游戏目录\data\scripts\brains\perdbrain.lua文件，将下列内容：

        WhileNode(function() return clock and not clock:IsDay() end, "IsNight",
            DoAction(self.inst, GoHomeAction, "Go Home", true )),
        DoAction(self.inst, EatFoodAction, "Eat Food"),
        RunAway(self.inst, "scarytoprey", SEE_PLAYER_DIST, STOP_RUN_DIST),
        DoAction(self.inst, PickBerriesAction, "Pick Berries", true),
        Wander(self.inst, HomePos, MAX_WANDER_DIST),

    替换为：

        DoAction(self.inst, EatFoodAction, "Eat Food"),
        RunAway(self.inst, "scarytoprey", SEE_PLAYER_DIST/2.5, STOP_RUN_DIST/3),

    即可用鸡蛋种会下蛋且不用圈养的火鸡，火鸡不会乱跑，养在果树丛旁也不会消失，一天左右下一个蛋




九十九.养殖大象（用兔人尾巴种大象）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\manrabbit_tail.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local names = {"koalefant_summer","koalefant_winter"}
    inst.name = names[math.random(#names)]
    SpawnPrefab(inst.name).Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用兔人尾巴种大象，品种随机，可能是冬象、也可能是夏象




一００.养殖高鸟（种高鸟蛋得不攻击、下高鸟蛋的大高鸟）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tallbirdegg.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("tallbird").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = TUNING.STACK_SIZE_SMALLITEM


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tallbird.lua文件，将inst.components.combat:SetRange(TUNING.TALLBIRD_ATTACK_RANGE)替换为inst.components.combat:SetRange(TUNING.TALLBIRD_ATTACK_RANGE*0)


    3.在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("periodicspawner")
    inst.components.periodicspawner:SetPrefab("tallbirdegg")
    inst.components.periodicspawner:SetRandomTimes(80, 110)
    inst.components.periodicspawner:SetDensityInRange(20, 2)
    inst.components.periodicspawner:SetMinimumSpacing(8)
    inst.components.periodicspawner:Start()

    即可种高鸟蛋得大高鸟，高鸟无攻击行为、下高鸟蛋，高鸟蛋可堆叠




一０一.下钩就上鱼（无限刷鱼）

    1.用记事本打开游戏目录\data\scripts\prefabs\fishingrod.lua文件，将inst.components.fishingrod:SetWaitTimes(4, 40)替换为inst.components.fishingrod:SetWaitTimes(0, 0)


    2.用记事本打开游戏目录\data\scripts\components\fishable.lua文件，将self.fishleft = self.fishleft - 1替换为self.fishleft = self.fishleft

    即可在池塘钓鱼时，下钩就上鱼，且无限刷鱼。游戏原设定为钓10条需等一段时间才会再有鱼




一０二.用腐烂食物种普通池塘

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\spoiledfood.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("pond").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用腐烂食物种普通池塘




一０三.用蛙腿种可钓鳗鱼池塘

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\froglegs.lua文件，在inst.AnimState:PlayAnimation("idle")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("pond_cave").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用蛙腿种可钓鳗鱼池塘




一０四.用铲子挖掉池塘

    用记事本打开游戏目录\data\scripts\prefabs\pond.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function dig_up(inst, chopper)
    inst:Remove()
end
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.DIG)
    inst.components.workable:SetOnFinishCallback(dig_up)
    inst.components.workable:SetWorkLeft(1)

    即可用铲子挖掉池塘




一０五.冬天池塘不上冻

    用记事本打开游戏目录\data\scripts\prefabs\pond.lua文件，将if snow_cover > thresh and not inst.frozen then替换为if snow_cover > thresh and inst.frozen then

    即可冬天池塘不上冻，在冬天也能钓鱼




一０六.池塘不生青蛙、蚊子

    用记事本打开游戏目录\data\scripts\prefabs\pond.lua文件，

    1.将inst.components.childspawner.childname = "mosquito"替换为--inst.components.childspawner.childname = "mosquito"


    2.将inst.components.childspawner.childname = "frog"替换为--inst.components.childspawner.childname = "frog"

    即可让池塘不生讨厌的青蛙、蚊子，怡然自得地垂钓吧




一０七.青蛙不偷东西

    用记事本打开游戏目录\data\scripts\prefabs\frog.lua文件，将inst.components.combat.onhitotherfn = function(inst, other, damage) inst.components.thief:StealItem(other) end替换为--inst.components.combat.onhitotherfn = function(inst, other, damage) inst.components.thief:StealItem(other) end

    即可让青蛙在攻击主角时，主角不掉物品




一０八.池塘边长满曼德拉草

    用记事本打开游戏目录\data\scripts\prefabs\pond.lua文件，将共2句inst.planttype = "marsh_plant"均替换为inst.planttype = "mandrake"

    即可让池塘边长曼德拉草，采完过一段时间后又会长出一批。注意一共要替换2句哦




一０九.主角可夜视（按键盘H键开关夜视功能）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

local function lightson(inst)
    inst.components.machine.ison = true
    inst.Light:Enable(true)
end
local function lightsoff(inst)
    inst.components.machine.ison = false
    inst.Light:Enable(false)
end
    local light = inst.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:Enable(false)
    light:SetColour(0/255, 255/255, 0/255)
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = lightson
    inst.components.machine.turnofffn = lightsoff
TheInput:AddKeyUpHandler(KEY_H, function() if inst.components.machine:IsOn() then inst.components.machine:TurnOff() else inst.components.machine:TurnOn() end end )

    即可在游戏中按键盘H键开关主角夜视功能，不再需要火炬、矿工灯




一一０.火炬不用尽（用到剩0%不消失，可继续用）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\torch.lua文件，

    1.将inst:Remove()替换为--inst:Remove()


    2.将inst.components.fueled:SetDepletedFn(function(inst) inst:Remove() end)替换为--inst.components.fueled:SetDepletedFn(function(inst) inst:Remove() end)

    即可让火炬用到剩0%后不消失，可继续用。在语句前加入--的功能就是将该句废掉




一一一.矿工灯无限使用

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

            inst.components.fueled:StartConsuming()
            inst.SoundEmitter:PlaySound("dontstarve/common/minerhatAddFuel")

    替换为：

            inst.components.fueled:StopConsuming()
            inst.SoundEmitter:PlaySound("dontstarve/common/minerhatAddFuel")

    即可让矿工灯无限使用




一一二.提灯改用木头、树杈、牛粪等可燃物作燃料

    用记事本打开游戏目录\data\scripts\prefabs\mininglantern.lua文件，将inst.components.fueled.fueltype = "CAVE"替换为--inst.components.fueled.fueltype = "CAVE"

    即可在提灯没有燃料时，添加木头、树杈、牛粪等可燃物作燃料，不用添加荧光果了




一一三.提灯可以点50天

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，

    1.将MED_LARGE_FUEL = seg_time * 3,替换为MED_LARGE_FUEL = total_day_time*50,


    2.将LANTERN_LIGHTTIME = (night_time+dusk_time)*2.6,替换为LANTERN_LIGHTTIME = total_day_time*50,

    即可使提灯可以点50天。当然改999天也行，只要把两句的50改为999即可




一一四.南瓜灯永不坏（无限使用）

    用记事本打开游戏目录\data\scripts\prefabs\pumpkin_lantern.lua文件，

    1.将共2句inst.components.perishable:StopPerishing()均替换为--inst.components.perishable:StopPerishing()


    2.将下列内容：

    inst:AddComponent("perishable")
    inst.components.perishable:SetPerishTime(30*TUNING.SEG_TIME)
    inst.components.perishable:SetOnPerishFn(onperish)
    inst.components.inventoryitem:SetOnDroppedFn(function(inst)
		inst.components.perishable:StartPerishing()

    替换为：

    --inst:AddComponent("perishable")
    --inst.components.perishable:SetPerishTime(30*TUNING.SEG_TIME)
    --inst.components.perishable:SetOnPerishFn(onperish)
    inst.components.inventoryitem:SetOnDroppedFn(function(inst)
		--inst.components.perishable:StartPerishing()

    即可让南瓜灯无限使用




一一五.用硝石种麦斯威尔灯（靠近自动点燃、远离自动灭）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\nitre.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("maxwelllight").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\scripts\prefabs\maxwelllight.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onhammered(inst, worker)
    SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
    SpawnPrefab("nitre").Transform:SetPosition(inst.Transform:GetWorldPosition())
    inst:Remove()
end

    inst:AddComponent("playerprox")
    inst.components.playerprox:SetDist(17, 27 )
    inst.components.playerprox:SetOnPlayerNear(function() if not inst.components.burnable:IsBurning() then inst.components.burnable:Ignite() end end)
    inst.components.playerprox:SetOnPlayerFar(extinguish)
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(1)
    inst.components.workable:SetOnFinishCallback(onhammered)


    3.用记事本打开游戏目录\data\scripts\prefabs\maxwelllight_flame.lua文件，将下列内容：

    {anim="level1", sound="dontstarve/common/maxlight", radius=1, intensity=.75, falloff= 1, colour = {207/255,234/255,245/255}, soundintensity=.1},
    {anim="level2", sound="dontstarve/common/maxlight", radius=1.5, intensity=.8, falloff=.9, colour = {207/255,234/255,245/255}, soundintensity=.3},
    {anim="level3", sound="dontstarve/common/maxlight", radius=2, intensity=.8, falloff=.8, colour = {207/255,234/255,245/255}, soundintensity=.6},
    {anim="level4", sound="dontstarve/common/maxlight", radius=2.5, intensity=.9, falloff=.7, colour = {207/255,234/255,245/255}, soundintensity=1},
    {anim="level1", sound="dontstarve/common/maxlight", radius=2, intensity=.75, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.1},
    {anim="level2", sound="dontstarve/common/maxlight", radius=3, intensity=.8, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.3},
    {anim="level3", sound="dontstarve/common/maxlight", radius=4, intensity=.8, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.6},
    {anim="level4", sound="dontstarve/common/maxlight", radius=6, intensity=.9, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=1},

    替换为：

    {anim="level1", sound="dontstarve/common/maxlight", radius=5, intensity=.75, falloff= 1, colour = {207/255,234/255,245/255}, soundintensity=.1},
    {anim="level2", sound="dontstarve/common/maxlight", radius=7.5, intensity=.8, falloff=.9, colour = {207/255,234/255,245/255}, soundintensity=.3},
    {anim="level3", sound="dontstarve/common/maxlight", radius=10, intensity=.8, falloff=.8, colour = {207/255,234/255,245/255}, soundintensity=.6},
    {anim="level4", sound="dontstarve/common/maxlight", radius=12.5, intensity=.9, falloff=.7, colour = {207/255,234/255,245/255}, soundintensity=1},
    {anim="level1", sound="dontstarve/common/maxlight", radius=10, intensity=.75, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.1},
    {anim="level2", sound="dontstarve/common/maxlight", radius=15, intensity=.8, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.3},
    {anim="level3", sound="dontstarve/common/maxlight", radius=20, intensity=.8, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=.6},
    {anim="level4", sound="dontstarve/common/maxlight", radius=30, intensity=.9, falloff=.4, colour = {207/255,234/255,245/255}, soundintensity=1},

    即可用硝石种麦斯威尔灯，靠近自动点燃、远离自动灭，不想要时用锤子砸毁即可。其中inst.components.playerprox:SetDist(17, 27 )语句中的17为靠近点燃距离，27为远离熄灭距离，可自行调整




一一六.石头营火永不灭

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\firepit.lua文件，将if section == 0 then替换为if section < 0 then

    即可让石头营火永不灭，但睡觉、下地洞后系统还是会将其熄灭，随便填块燃料即可又保持不灭




一一七.光明世界（地上、洞穴、远古遗址都永无黑暗）

    1.用记事本打开游戏目录\data\DLC0001\scripts\components\clock.lua文件，将下列内容：

    self.dayColour =         Point(255/255, 230/255, 158/255)
    self.duskColour =        Point(100/255, 100/255, 100/255)
    self.nightColour =       Point(0/255,   0/255,   0/255)
    self.fullMoonColour =    Point(84/255,  122/255, 156/255)
    self.caveColour =        Point(0/255,   0/255,   0/255)
    self.dayNightVisionColour =         Point(200/255,  200/255, 200/255)
    self.duskNightVisionColour =        Point(120/255,  120/255, 120/255)
    self.nightNightVisionColour =       Point(200/255,  200/255, 200/255)
    self.fullMoonNightVisionColour =    Point(200/255,  200/255, 200/255)
    self.caveNightVisionColour =        Point(200/255,  200/255, 200/255)

    替换为：

    self.dayColour =         Point(255/255, 230/255, 158/255)
    self.duskColour =        Point(255/255, 230/255, 158/255)
    self.nightColour =       Point(255/255, 230/255, 158/255)
    self.fullMoonColour =    Point(255/255, 230/255, 158/255)
    self.caveColour =        Point(255/255, 230/255, 158/255)
    self.dayNightVisionColour =         Point(255/255, 230/255, 158/255)
    self.duskNightVisionColour =        Point(255/255, 230/255, 158/255)
    self.nightNightVisionColour =       Point(255/255, 230/255, 158/255)
    self.fullMoonNightVisionColour =    Point(255/255, 230/255, 158/255)
    self.caveNightVisionColour =        Point(255/255, 230/255, 158/255)


    2.用记事本打开游戏目录\data\scripts\components\nightmareclock.lua文件，将下列内容：

	self.calmColour = Point(0, 0, 0)
	self.warnColour = Point(0, 0, 0)
	self.nightmareColour = Point(0, 0, 0)
	self.dawnColour = Point(0, 0, 0)

    替换为：

	self.calmColour = Point(255/255, 230/255, 158/255)
	self.warnColour = Point(255/255, 230/255, 158/255)
	self.nightmareColour = Point(255/255, 230/255, 158/255)
	self.dawnColour = Point(255/255, 230/255, 158/255)

    即可拥有一个光明世界，不需要为照明而点火了




一一八.机器可携带

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\scienceprototyper.lua文件，将MakeObstaclePhysics(inst, .4)替换为以下内容：

local function turnon(inst)
    inst.components.machine.ison = true
    inst:AddComponent("inventoryitem")
end
local function turnoff(inst)
    inst.components.machine.ison = false
    inst:RemoveComponent("inventoryitem")
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff
    inst:AddComponent("equippable")


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\magicprototyper.lua文件，将MakeObstaclePhysics(inst, .4)替换为以下内容：

local function turnon(inst)
    inst.components.machine.ison = true
    inst:AddComponent("inventoryitem")
end
local function turnoff(inst)
    inst.components.machine.ison = false
    inst:RemoveComponent("inventoryitem")
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff
    inst:AddComponent("equippable")

    即可在机器上按鼠标右键解除固定，再按鼠标左键点击即可带在身上。想固定机器时，将机器放在地上，在机器上按鼠标右键即可固定在地上




一一九.建造机器零距离

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，

    1.将下列内容：

Recipe("researchlab", {Ingredient("goldnugget", 1),Ingredient("log", 4),Ingredient("rocks", 4)}, RECIPETABS.SCIENCE, TECH.NONE, "researchlab_placer")
Recipe("researchlab2", {Ingredient("boards", 4),Ingredient("cutstone", 2), Ingredient("transistor", 2)}, RECIPETABS.SCIENCE,  TECH.SCIENCE_ONE, "researchlab2_placer")

    替换为：

Recipe("researchlab", {Ingredient("goldnugget", 1),Ingredient("log", 4),Ingredient("rocks", 4)}, RECIPETABS.SCIENCE, TECH.NONE, "researchlab_placer",1)
Recipe("researchlab2", {Ingredient("boards", 4),Ingredient("cutstone", 2), Ingredient("transistor", 2)}, RECIPETABS.SCIENCE,  TECH.SCIENCE_ONE, "researchlab2_placer",1)


    2.将下列内容：

Recipe("researchlab4", {Ingredient("rabbit", 4), Ingredient("boards", 4), Ingredient("tophat", 1)}, RECIPETABS.MAGIC, TECH.SCIENCE_ONE, "researchlab4_placer")
Recipe("researchlab3", {Ingredient("livinglog", 3), Ingredient("purplegem", 1), Ingredient("nightmarefuel", 7)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO, "researchlab3_placer")

    替换为：

Recipe("researchlab4", {Ingredient("rabbit", 4), Ingredient("boards", 4), Ingredient("tophat", 1)}, RECIPETABS.MAGIC, TECH.SCIENCE_ONE, "researchlab4_placer",1)
Recipe("researchlab3", {Ingredient("livinglog", 3), Ingredient("purplegem", 1), Ingredient("nightmarefuel", 7)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO, "researchlab3_placer",1)

    即可让机器挨着建造，节省空间




一二０.用黄金种远古祭坛（以解锁远古科技）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\goldnugget.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("ancient_altar").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用黄金种远古祭坛，想造远古装备不用再去地下2层了




一二一.增加墙的耐久力

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：

		HAYWALL_HEALTH = 100,
		WOODWALL_HEALTH = 200,
		STONEWALL_HEALTH = 400,
		RUINSWALL_HEALTH = 800,

    替换为：

		HAYWALL_HEALTH = 1000,
		WOODWALL_HEALTH = 2000,
		STONEWALL_HEALTH = 4000,
		RUINSWALL_HEALTH = 8000,

    即可增加墙的耐久力10倍




一二二.墙自动回血

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\walls.lua文件，在if old_percent > 0 and new_percent <= 0 then clearobstacle(inst) end的下一行插入以下内容：

		if new_percent < 1 then inst.components.health:StartRegen(200, 1) end
		if new_percent >= 1 then inst.components.health:StopRegen() end

    即可让墙自动回血，其中200和1为每1秒回200的血，数字可自行调整




一二三.墙壁永固（自己可砸，怪物无法破坏）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\walls.lua文件，在inst:AddTag("noauradamage")的下一行插入以下内容：

    inst.components.health:SetInvincible(true)

    即可让墙壁永固




一二四.建造农田、蜂箱、晾肉架零距离

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，

    1.将下列内容：

Recipe("slow_farmplot", {Ingredient("cutgrass", 8),Ingredient("poop", 4),Ingredient("log", 4)}, RECIPETABS.FARM,  TECH.SCIENCE_ONE, "slow_farmplot_placer")
Recipe("fast_farmplot", {Ingredient("cutgrass", 10),Ingredient("poop", 6),Ingredient("rocks", 4)}, RECIPETABS.FARM,  TECH.SCIENCE_TWO, "fast_farmplot_placer")

    替换为：

Recipe("slow_farmplot", {Ingredient("cutgrass", 8),Ingredient("poop", 4),Ingredient("log", 4)}, RECIPETABS.FARM,  TECH.SCIENCE_ONE, "slow_farmplot_placer", 1)
Recipe("fast_farmplot", {Ingredient("cutgrass", 10),Ingredient("poop", 6),Ingredient("rocks", 4)}, RECIPETABS.FARM,  TECH.SCIENCE_TWO, "fast_farmplot_placer", 1)


    2.将下列内容：

Recipe("beebox", {Ingredient("boards", 2),Ingredient("honeycomb", 1),Ingredient("bee", 4)}, RECIPETABS.FARM, TECH.SCIENCE_ONE, "beebox_placer")
Recipe("meatrack", {Ingredient("twigs", 3),Ingredient("charcoal", 2), Ingredient("rope", 3)}, RECIPETABS.FARM, TECH.SCIENCE_ONE, "meatrack_placer")

    替换为：

Recipe("beebox", {Ingredient("boards", 2),Ingredient("honeycomb", 1),Ingredient("bee", 4)}, RECIPETABS.FARM, TECH.SCIENCE_ONE, "beebox_placer", 1)
Recipe("meatrack", {Ingredient("twigs", 3),Ingredient("charcoal", 2), Ingredient("rope", 3)}, RECIPETABS.FARM, TECH.SCIENCE_ONE, "meatrack_placer", 1)

    即可让农田、蜂箱、晾肉架紧挨着建造，节省空间




一二五.在海上盖建筑

    用记事本打开游戏目录\data\DLC0001\scripts\components\builder.lua文件，将下列内容：
	
	if tile == GROUND.IMPASSABLE then
		return false

    替换为：

	if tile == GROUND.IMPASSABLE then
		return true

    即可在海上盖建筑，当然要先修改“主角可渡海”（见本修改技巧），才能到海上来哦。注意不要在海上造墙和农田，除非你的计算机硬件配置很高




一二六.围海造田（建造岛屿）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\turfs.lua文件，将return tiletype == GROUND.DIRT or inst.data.tile == "webbing"替换为return tiletype >= GROUND.IMPASSABLE or inst.data.tile == "webbing"

    即可在海中用草叉挖出陆地（前提是已经修改了“主角可渡海”和“在海上盖建筑”，见本修改技巧），将喜欢的地皮铺在上面，建一个属于自己的岛屿吧




一二七.用岩石种海洋（建造护城河）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\inv_rocks.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ondeploy(inst, pt, deployer)
    local ground = GetWorld()
    if ground then
       local original_tile_type = ground.Map:GetTileAtPoint(pt.x, pt.y, pt.z)
       local x, y = ground.Map:GetTileCoordsAtPoint(pt.x, pt.y, pt.z)
       if x and y then
          ground.Map:SetTile(x,y, GROUND.IMPASSABLE)
          ground.Map:RebuildLayer( original_tile_type, x, y )
          ground.Map:RebuildLayer( GROUND.IMPASSABLE, x, y )
       end
       local minimap = TheSim:FindFirstEntityWithTag("minimap")
       if minimap then
          minimap.MiniMap:RebuildLayer( original_tile_type, x, y )
          minimap.MiniMap:RebuildLayer( GROUND.IMPASSABLE, x, y )
       end
    end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = ondeploy
    inst.components.deployable.min_spacing = 0
    inst.components.deployable.placer = "gridplacer"

    即可用岩石种海洋，建造护城河。如果对自己建的岛不满意，也可以用岩石修改哦。岩石种过海洋后，会保留岸边的贴图，存档退出后再进入游戏就正常了。不要将海洋建在路底下




一二八.地板一次造10个

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，将下列内容：

Recipe("turf_road", {Ingredient("turf_rocky", 1), Ingredient("boards", 1)}, RECIPETABS.TOWN,  TECH.SCIENCE_TWO)
Recipe("turf_woodfloor", {Ingredient("boards", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO)
Recipe("turf_checkerfloor", {Ingredient("marble", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO)
Recipe("turf_carpetfloor", {Ingredient("boards", 1), Ingredient("beefalowool", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO)

    替换为：

Recipe("turf_road", {Ingredient("turf_rocky", 1), Ingredient("boards", 1)}, RECIPETABS.TOWN,  TECH.SCIENCE_TWO,nil,nil,nil,10)
Recipe("turf_woodfloor", {Ingredient("boards", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO,nil,nil,nil,10)
Recipe("turf_checkerfloor", {Ingredient("marble", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO,nil,nil,nil,10)
Recipe("turf_carpetfloor", {Ingredient("boards", 1), Ingredient("beefalowool", 1)}, RECIPETABS.TOWN, TECH.SCIENCE_TWO,nil,nil,nil,10)

    即可让地板一次造10个，调整每行最后的数字10为其他数字，可以改变一次造出的数量




一二九.增加15种可造地皮（1根草造10块）

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("pottedfern", {Ingredient("foliage", 5), Ingredient("slurtle_shellpieces",1 )}, RECIPETABS.TOWN, TECH.SCIENCE_TWO, "pottedfern_placer", 0.9)的下一行插入以下内容：

Recipe("turf_rocky", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_forest", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_marsh", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_grass", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_savanna", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_dirt", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_cave", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_fungus", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_fungus_red", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_fungus_green", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_sinkhole", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_underrock", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_mud", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_deciduous", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)
Recipe("turf_desertdirt", {Ingredient("cutgrass", 1)}, RECIPETABS.TOWN, TECH.NONE,nil,nil,nil,10)

    即可在建造选项（画着木锤子）下，增加15种可造地皮，且1根草造10块




一三０.眼睛炮塔建在地上后可搬运

    用记事本打开游戏目录\data\scripts\prefabs\eyeturret.lua文件，

    1.在inst:AddComponent("inventoryitem")的下一行插入以下内容：

    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = TUNING.STACK_SIZE_SMALLITEM


    2.将下列内容：

    inst.components.health:SetMaxHealth(TUNING.EYETURRET_HEALTH) 
    inst.components.health:StartRegen(TUNING.EYETURRET_REGEN, 1)
    
    inst:AddComponent("combat")
    inst.components.combat:SetRange(TUNING.EYETURRET_RANGE)
    inst.components.combat:SetDefaultDamage(TUNING.EYETURRET_DAMAGE)

    替换为：

    inst.components.health:SetMaxHealth(TUNING.EYETURRET_HEALTH*10) 
    inst.components.health:StartRegen(TUNING.EYETURRET_REGEN*10, 1)
    inst:AddComponent("combat")
    inst.components.combat:SetRange(TUNING.EYETURRET_RANGE)
    inst.components.combat:SetDefaultDamage(TUNING.EYETURRET_DAMAGE*10)
local function turnon(inst)
    inst.components.machine.ison = true
    inst:Remove()
    SpawnPrefab("eyeturret_item").Transform:SetPosition(inst.Transform:GetWorldPosition())
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon

    即可在眼睛炮塔建在地上后仍能搬运，对其按鼠标右键即可解除部署，再按鼠标左键即可带走，到别处重新部署吧。另外将眼睛炮塔的生命值、回血效率、攻击力均提高了10倍，并且可堆叠




一三一.眼睛炮塔一次造10个（无须犀牛角、巨鹿眼球）

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，将Recipe("eyeturret_item", {Ingredient("deerclops_eyeball", 1), Ingredient("minotaurhorn", 1), Ingredient("thulecite", 5)}, RECIPETABS.ANCIENT, TECH.ANCIENT_FOUR, nil, nil, true)替换为以下内容：

Recipe("eyeturret_item", {Ingredient("thulecite", 5)}, RECIPETABS.ANCIENT, TECH.ANCIENT_FOUR, nil, nil, nil,10)

    即可在远古选项（画着远古祭坛）下用5个铥矿石一次造10个眼睛炮塔，不需要靠近远古遗迹就可制造




一三二.靠近盆栽可补脑、可采蜂蜜，盆栽会发光

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pottedfern.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddTag("flower")
    inst:AddComponent("sanityaura")
    inst.components.sanityaura.aura = TUNING.SANITYAURA_SMALL
    inst:AddComponent("pickable")
    inst.components.pickable.picksound = "dontstarve/wilson/pickup_plants"
    inst.components.pickable:SetUp("honey", 30)
    local light = inst.entity:AddLight()
    light:SetFalloff(0.5)
    light:SetIntensity(.8)
    light:SetRadius(1.0)
    light:SetColour(146/255, 225/255, 146/255)
    light:Enable(true)

    即可靠近盆栽可补脑、可采蜂蜜（30秒生一次），还会招蜂引蝶，发出微光，让你的家多一份温馨。盆栽在建造选项（画着锤子）下，用5个叶子、1个蜗牛壳碎片建造




一三三.牙齿陷阱自动重置（1秒自动重置）

    用记事本打开游戏目录\data\scripts\prefabs\trap_teeth.lua文件，在 inst.components.finiteuses:Use(1)的下一行插入以下内容：

    end
    if inst.components.mine then
       inst:DoTaskInTime(1, function() inst.components.mine:Reset() end )

    即可让牙齿陷阱在触发后1秒钟自动重置。修改其中的1为任意数字，即可设置几秒钟自动重置




一三四.部署牙齿陷阱零距离

    用记事本打开游戏目录\data\scripts\prefabs\trap_teeth.lua文件，将inst.components.deployable.min_spacing = .75替换为inst.components.deployable.min_spacing = 0

    即可在部署牙齿陷阱时没有最小距离限制




一三五.回旋镖自动接住且无限使用

    用记事本打开游戏目录\data\scripts\prefabs\boomerang.lua文件，

    1.在owner.SoundEmitter:PlaySound("dontstarve/wilson/boomerang_return")的下一行插入owner.components.inventory:Equip(inst)


    2.将下列内容：

    inst:AddComponent("finiteuses")
    inst.components.finiteuses:SetMaxUses(TUNING.BOOMERANG_USES)
    inst.components.finiteuses:SetUses(TUNING.BOOMERANG_USES)

    inst.components.finiteuses:SetOnFinished(OnFinished)

    替换为：

    --inst:AddComponent("finiteuses")
    --inst.components.finiteuses:SetMaxUses(TUNING.BOOMERANG_USES)
    --inst.components.finiteuses:SetUses(TUNING.BOOMERANG_USES)

    --inst.components.finiteuses:SetOnFinished(OnFinished)

    即可让回旋镖自动接住且无限使用




一三六.装备回旋镖召唤猎物（打猎游戏）

    用记事本打开游戏目录\data\scripts\prefabs\boomerang.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function cancreatelight(staff, caster, target, pos)
    local ground = GetWorld()
    if ground and pos then
       local tile = ground.Map:GetTileAtPoint(pos.x, pos.y, pos.z)
       return tile ~= GROUND.IMPASSIBLE and tile < GROUND.UNDERGROUND
    end
    return false
end
local function createlight(staff, target, pos)
    local names = {"crow","robin","robin_winter","frog","mosquito","bee","killerbee","butterfly","rabbit","babybeefalo"}
    local name = names[math.random(#names)]
    local prey = SpawnPrefab(name)
    prey.Transform:SetPosition(pos.x, pos.y, pos.z)
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false

    即可在装备回旋镖后，在空地上点鼠标右键召唤猎物，包括鸟、昆虫、青蛙、兔子、小牛，尽情捕猎吧




一三七.一支吹箭用20次（按百分比使用）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\blowdart.lua文件，

    1.将下列内容：

local function onhit(inst, attacker, target)
    local impactfx = SpawnPrefab("impact")
    if impactfx and attacker then
	    local follower = impactfx.entity:AddFollower()
	    follower:FollowSymbol(target.GUID, target.components.combat.hiteffectsymbol, 0, 0, 0 )
        impactfx:FacePoint(attacker.Transform:GetWorldPosition())
    end
    inst:Remove()
end

    替换为：

local function onfinished(inst)
    inst:Remove()
end
local function onhit(inst, attacker, target)
    local impactfx = SpawnPrefab("impact")
    if impactfx and attacker then
       local follower = impactfx.entity:AddFollower()
       follower:FollowSymbol(target.GUID, target.components.combat.hiteffectsymbol, 0, 0, 0 )
       impactfx:FacePoint(attacker.Transform:GetWorldPosition())
    end
    if inst.components.finiteuses.current > 0 then
       if inst.prefab == "blowdart_walrus" then
          inst:Remove()
       else
          attacker.components.inventory:Equip(inst)
       end
    end
end


    2.在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("finiteuses")
    inst.components.finiteuses:SetOnFinished( onfinished )
    inst.components.finiteuses:SetMaxUses(20)
    inst.components.finiteuses:SetUses(20)

    即可让一支吹箭使用20次，每次击中敌人后自动回到手中，可以修改其中2处数字20为想要的使用次数。不要与“吹箭无限使用（射中目标后自动回到手中）”一同修改




一三八.吹箭无限使用（射中目标后自动回到手中）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\blowdart.lua文件，将下列内容：

        impactfx:FacePoint(attacker.Transform:GetWorldPosition())
    end
    inst:Remove()

    替换为：

        impactfx:FacePoint(attacker.Transform:GetWorldPosition())
    end
    if inst.prefab == "blowdart_walrus" then
       inst:Remove()
    else
       attacker.components.inventory:Equip(inst)
    end

    即可让吹箭射中目标后自动回到手中，不要与“一支吹箭用20次（按百分比使用）”一同修改




一三九.快速找到骨眼（骨眼在地图上显示）

    用记事本打开游戏目录\data\scripts\prefabs\chester_eyebone.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "chester.png" )

    即可在地图上看到骨眼的位置，显示为切斯特，生出切斯特后，则地图上有两个切斯特图标，一个是切斯特，一个是骨眼




一四０.切斯特（狗箱）跑得快

    用记事本打开游戏目录\data\scripts\prefabs\chester.lua文件，将下列内容：

    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 7

    替换为：

    inst.components.locomotor.walkspeed = 9
    inst.components.locomotor.runspeed = 21

    即可让切斯特运动速度提高3倍




一四一.切斯特（狗箱）不死

    用记事本打开游戏目录\data\scripts\prefabs\chester.lua文件，在inst:AddTag("noauradamage")的下一行插入inst.components.health:SetInvincible(true)

    即可让切斯特不死




一四二.切斯特（狗箱）容量增加9倍（81格）

    用记事本打开游戏目录\data\scripts\prefabs\chester.lua文件，

    1.将下列内容：

for y = 2, 0, -1 do
    for x = 0, 2 do

    替换为：

for y = 8, 0, -1 do
    for x = 0, 8 do


    2.将下列内容：

    inst.components.container.widgetanimbank = "ui_chest_3x3"
    inst.components.container.widgetanimbuild = "ui_chest_3x3"
    inst.components.container.widgetpos = Vector3(0,200,0)

    替换为：

    --inst.components.container.widgetanimbank = "ui_chest_3x3"
    --inst.components.container.widgetanimbuild = "ui_chest_3x3"
    inst.components.container.widgetpos = Vector3(0,100,0)

    即可让切斯特（狗箱）容量增加9倍至81格




一四三.保温石保温时间延长1倍

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\heatrock.lua文件，将下列内容：

	inst.components.temperature.inherentinsulation = TUNING.INSULATION_MED
	inst.components.temperature.inherentsummerinsulation = TUNING.INSULATION_MED

    替换为：

	inst.components.temperature.inherentinsulation = TUNING.INSULATION_MED*2
	inst.components.temperature.inherentsummerinsulation = TUNING.INSULATION_MED*2

    即可让保温石保温时间延长1倍，将2这个数字调整为其他数字，可自行调整保温时间延长几倍




一四四.建造肉块雕像不罚血（正常要从血的上限减30）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将EFFIGY_HEALTH_PENALTY = 30,替换为EFFIGY_HEALTH_PENALTY = 0,

    即可建造肉块雕像不罚血，修改为负数比如-30则可加血的上限




一四五.白天也能睡帐篷，睡帐篷不减饥饿

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tent.lua文件，

    1.删除下列内容：

	if GetClock():IsDay() then
		local tosay = "ANNOUNCE_NODAYSLEEP"
		if GetWorld():IsCave() then
			tosay = "ANNOUNCE_NODAYSLEEP_CAVE"
		end
		if sleeper.components.talker then
			sleeper.components.talker:Say(GetString(inst.prefab, tosay))
			return
		end
	end


    2.删除下列内容：

		if GetClock():IsDay() then

			local tosay = "ANNOUNCE_NODAYSLEEP"
			if GetWorld():IsCave() then
				tosay = "ANNOUNCE_NODAYSLEEP_CAVE"
			end

			if sleeper.components.talker then				
				sleeper.components.talker:Say(GetString(inst.prefab, tosay))
				sleeper.components.health:SetInvincible(false)
				sleeper.components.playercontroller:Enable(true)
				return
			end
		end


    3.将sleeper.components.hunger:DoDelta(-TUNING.CALORIES_HUGE, false, true)替换为--sleeper.components.hunger:DoDelta(-TUNING.CALORIES_HUGE, false, true)

    即可白天也能睡帐篷，睡帐篷不减饥饿




一四六.睡草席卷可补血

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bedroll_straw.lua文件，在sleeper.sg:GoToState("wakeup")的下一行插入以下内容：

		if sleeper.components.health then
			sleeper.components.health:DoDelta(TUNING.HEALING_MED, false, "tent", true)
		end

    即可睡草席卷可补血，补血量小于毛皮铺盖和帐篷




一四七.护身符装备在帽子格（省出身体格穿盔甲或带背包）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，将inst.components.equippable.equipslot = EQUIPSLOTS.BODY替换为inst.components.equippable.equipslot = EQUIPSLOTS.HEAD

    即可让护身符装备在帽子格，在佩戴护身符的同时，穿盔甲或带背包




一四八.橙色护身符吸取物品加速、范围加大、不吸常用物品

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，

    1.吸取物品加速10倍：将inst.task = inst:DoPeriodicTask(TUNING.ORANGEAMULET_ICD, function() pickup(inst, owner) end)替换为以下内容：

    inst.task = inst:DoPeriodicTask(TUNING.ORANGEAMULET_ICD*.1, function() pickup(inst, owner) end)


    2.吸取物品范围加大5倍：将local ents = TheSim:FindEntities(pt.x, pt.y, pt.z, TUNING.ORANGEAMULET_RANGE)替换为以下内容：

    local ents = TheSim:FindEntities(pt.x, pt.y, pt.z, TUNING.ORANGEAMULET_RANGE*5)


    3.不吸常用物品：将v.components.inventoryitem:IsHeld() then替换为以下内容：

            v.components.inventoryitem:IsHeld() and not v:HasTag("trap") and not v:HasTag("light") and not v:HasTag("blowdart") and not v:HasTag("projectile") then

    即可让橙色护身符吸取物品加速、范围加大，不吸陷阱、提灯，也可以在佩戴时使用远程武器




一四九.用紫色魔杖传送不降脑

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，将caster.components.sanity:DoDelta(-TUNING.SANITY_HUGE)替换为caster.components.sanity:DoDelta(TUNING.SANITY_HUGE)

    即可用紫色魔杖传送不降脑




一五０.在地下也能使用紫色魔杖传送到传送核心

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，将下列内容：

    if ground.topology.level_type == "cave" then
        TheCamera:Shake("FULL", 0.3, 0.02, .5, 40)
        ground.components.quaker:MiniQuake(3, 5, 1.5, teleportee)     
        return
    end

    替换为：

    --if ground.topology.level_type == "cave" then
        --TheCamera:Shake("FULL", 0.3, 0.02, .5, 40)
        --ground.components.quaker:MiniQuake(3, 5, 1.5, teleportee)     
        --return
    --end

    即可在地下也能使用紫色魔杖传送到传送核心，但只会传送到地下建的传送核心，而不会传送到地上




一五一.传送核心自由开关（不消耗紫宝石）

    用记事本打开游戏目录\data\scripts\prefabs\telebase_gemsocket.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function turnon(inst)
    inst.components.machine.ison = true
    OnGemGiven(inst)
end
local function turnoff(inst)
    inst.components.machine.ison = false
    OnGemGiven(inst)
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff

    即可对空宝石槽按鼠标右键，自动出现紫宝石，使每次传送无须消耗紫宝石了。因为宝石槽上的宝石可以拿走，也可以无限刷紫宝石




一五二.延长蓝色魔杖冻住敌人时间

    用记事本打开游戏目录\data\DLC0001\scripts\components\freezable.lua文件，将self.wearofftime = 10替换为self.wearofftime = 50000000

    即可延长蓝色魔杖冻住敌人时间至存档退出游戏。手动解冻用任何武器打击冰冻敌人即可




一五三.蓝色魔杖升级版（一打冻住一大片）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，将下列内容：

local function onattack_blue(inst, attacker, target)

    if attacker and attacker.components.sanity then
        attacker.components.sanity:DoDelta(-TUNING.SANITY_SUPERTINY)
    end
    
    if target.components.freezable then
        target.components.freezable:AddColdness(1)
        target.components.freezable:SpawnShatterFX()
    end

    替换为：

local function onattack_blue(inst, attacker, target)
    local pos = Vector3(target.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 15)
    for k,v in pairs(ents) do
        if v.components.freezable and not v:HasTag("player") then
           v.components.freezable:AddColdness(10)
           v.components.freezable:SpawnShatterFX()
        end
    end

    即可让蓝色魔杖冻住一大片敌人，将其中15调整为更大数字，就可以加大冻住敌人的范围




一五四.全人物可制造打火机（原来只有薇洛专用）

    1.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("torch", {Ingredient("cutgrass", 2),Ingredient("twigs", 2)}, RECIPETABS.LIGHT, TECH.NONE)的下一行插入Recipe("lighter", {Ingredient("goldnugget", 1),Ingredient("nitre", 1)}, RECIPETABS.LIGHT, TECH.NONE)


    2.用记事本打开游戏目录\data\scripts\prefabs\lighter.lua文件，将下列内容：

    inst:AddComponent("characterspecific")
    inst.components.characterspecific:SetOwner("willow")

    替换为：

    --inst:AddComponent("characterspecific")
    --inst.components.characterspecific:SetOwner("willow")


    3.将inst:DoTaskInTime(0, function() if not GetPlayer() or GetPlayer().prefab ~= "willow" then inst:Remove() end end)替换为--inst:DoTaskInTime(0, function() if not GetPlayer() or GetPlayer().prefab ~= "willow" then inst:Remove() end end)

    即可在照明选项（画着火）下，用1个黄金、1个硝石制造打火机




一五五.全人物可制造伍迪的斧子（8下砍倒1棵树，普通斧子15下）

    1.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("razor", {Ingredient("twigs", 2), Ingredient("flint", 2)}, RECIPETABS.TOOLS,  TECH.SCIENCE_ONE)的下一行插入Recipe("Lucy", {Ingredient("twigs", 4), Ingredient("goldnugget", 4)}, RECIPETABS.TOOLS,  TECH.SCIENCE_ONE)


    2.用记事本打开游戏目录\data\scripts\prefabs\lucy.lua文件，将下列内容：

    inst:AddComponent("sentientaxe")
    
    inst:AddComponent("characterspecific")
    inst.components.characterspecific:SetOwner("woodie")

    替换为：

    --inst:AddComponent("sentientaxe")
    
    --inst:AddComponent("characterspecific")
    --inst.components.characterspecific:SetOwner("woodie")

    即可在工具选项（画着斧子和镐）下，用4个树杈、4个黄金制造伍迪的斧子




一五六.全人物可制造魔法书

    1.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("batbat", {Ingredient("batwing", 5), Ingredient("livinglog", 2), Ingredient("purplegem", 1)}, RECIPETABS.MAGIC, TECH.MAGIC_THREE)的下一行插入以下内容：

Recipe("book_birds", {Ingredient("papyrus", 2), Ingredient("bird_egg", 2)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO)
Recipe("book_gardening", {Ingredient("papyrus", 2), Ingredient("seeds", 1), Ingredient("poop", 1)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO)
Recipe("book_sleep", {Ingredient("papyrus", 2), Ingredient("nightmarefuel", 2)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO)
Recipe("book_brimstone", {Ingredient("papyrus", 2), Ingredient("redgem", 1)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO)
Recipe("book_tentacles", {Ingredient("papyrus", 2), Ingredient("tentaclespots", 1)}, RECIPETABS.MAGIC, TECH.MAGIC_TWO)


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("temperature")的下一行插入inst:AddComponent("reader")


    3.用记事本打开游戏目录\data\scripts\prefabs\books.lua文件，将下列内容：

        inst:AddComponent("characterspecific")
        inst.components.characterspecific:SetOwner("wickerbottom")

    替换为：

        --inst:AddComponent("characterspecific")
        --inst.components.characterspecific:SetOwner("wickerbottom")

    即可在魔法选项（画着红骷髅）下制造魔法书




一五七.全民吹气球（气球威力大、不伤主角、不降脑、彩色光、分散怪物注意力）

    1.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("heatrock", {Ingredient("rocks", 10),Ingredient("pickaxe", 1),Ingredient("flint", 3)}, RECIPETABS.SURVIVAL, TECH.SCIENCE_TWO)的下一行插入以下内容：

Recipe("balloons_empty", {Ingredient("cutgrass", 1)}, RECIPETABS.SURVIVAL, TECH.NONE)


    2.用记事本打开游戏目录\data\DLC0001\scripts\actions.lua文件，将act.doer.components.sanity:DoDelta(-TUNING.SANITY_TINY)替换为act.doer.components.sanity:DoDelta(TUNING.SANITY_TINY)


    3.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\balloons_empty.lua文件，将下列内容：

    inst:AddComponent("characterspecific")
    inst.components.characterspecific:SetOwner("wes")

    替换为：

    --inst:AddComponent("characterspecific")
    --inst.components.characterspecific:SetOwner("wes")


    4.将inst:DoTaskInTime(0, function() if not GetPlayer() or GetPlayer().prefab ~= "wes" then inst:Remove() end end)替换为以下内容：

    --inst:DoTaskInTime(0, function() if not GetPlayer() or GetPlayer().prefab ~= "wes" then inst:Remove() end end)


    5.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\balloon.lua文件，将inst.components.combat:DoAreaAttack(inst, 2)替换为inst.components.combat:DoAreaAttack(inst, 8)


    6.将inst.components.combat:SetDefaultDamage(5)替换为以下内容：

    inst.components.combat.playerdamagepercent = 0
    inst.components.combat:SetDefaultDamage(500)
    local light = inst.entity:AddLight() 
    light:SetIntensity(.8)
    light:SetRadius(2)
    light:SetFalloff(.6)
    light:Enable(true)
    light:SetColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3])
    inst:AddTag("character")

    即可让全部主角吹进化版气球，空气球在生存选项（画着绳套）下，用1个草制造。官方原本的气球只有wes有，且功能很烂，所以我改造了一下




一五八.全人物可制造瓦丝格雷斯矛、瓦丝格雷斯帽

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("trap_teeth", {Ingredient("log", 1),Ingredient("rope", 1),Ingredient("houndstooth", 1)}, RECIPETABS.WAR,  TECH.SCIENCE_TWO)的下一行插入以下内容：

Recipe("spear_wathgrithr", {Ingredient("twigs", 2), Ingredient("flint", 2), Ingredient("goldnugget", 2)}, RECIPETABS.WAR, TECH.SCIENCE_ONE, nil, nil, nil, nil, true)
Recipe("wathgrithrhat", {Ingredient("goldnugget", 2), Ingredient("rocks", 2)}, RECIPETABS.WAR, TECH.SCIENCE_ONE, nil, nil, nil, nil, true)

    即可在战斗选项（画着两把剑）下，用2个树枝、2个燧石、2个黄金制造瓦丝格雷斯矛，用2个黄金、2个石头制造瓦丝格雷斯帽




一五九.瑞士手杖（砍树、凿石、锤墙、挖草、祛暑、取暖、防雨、补脑、瞬移、10倍攻击力、2倍速度、照明）

    用记事本打开游戏目录\data\scripts\prefabs\cane.lua文件，

    1.在local function onequip(inst, owner)的下一行插入以下内容：

    inst.Light:Enable(true)
    GetPlayer().components.temperature:SetTemp(20)
    GetPlayer():PushEvent("stopfreezing")
    GetPlayer():PushEvent("stopoverheating")
    GetPlayer().components.moisture:SetMoistureLevel(0)


    2.在local function onunequip(inst, owner)的下一行插入以下内容：

    inst.Light:Enable(false)
    GetPlayer().components.temperature:SetTemp(nil)


    3.在anim:PlayAnimation("idle")的下一行插入以下内容：

    inst:AddComponent("tool")
    inst.components.tool:SetAction(ACTIONS.CHOP, 15)
    inst.components.tool:SetAction(ACTIONS.MINE, 15)
    inst.components.tool:SetAction(ACTIONS.HAMMER,15)
    inst.components.tool:SetAction(ACTIONS.DIG)
    inst:AddComponent("waterproofer")
    inst.components.waterproofer:SetEffectiveness(TUNING.WATERPROOFNESS_ABSOLUTE)
    inst:AddComponent("blinkstaff")
    local light = inst.entity:AddLight()
    light:SetFalloff(0.4)
    light:SetIntensity(.7)
    light:SetRadius(2.5)
    light:SetColour(180/255, 195/255, 150/255)
    light:Enable(true)


    4.将inst.components.weapon:SetDamage(TUNING.CANE_DAMAGE)替换为inst.components.weapon:SetDamage(TUNING.CANE_DAMAGE*10)


    5.将inst.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT替换为以下内容：

    inst.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT*2
    inst.components.equippable.dapperness = TUNING.DAPPERNESS_HUGE

    即可让手杖拥有瑞士军刀般的多功能。装备手杖时，在空地上点鼠标右键可瞬移，借此可跳过较窄沟壑，少走冤枉路




一六０.神之矛（矛攻击时召唤闪电雷击敌人）

    用记事本打开游戏目录\data\scripts\prefabs\spear.lua文件，

    1.在local function onequip(inst, owner)的下一行插入以下内容：

    if owner.components.playerlightningtarget then
       owner:AddTag("nolightning")
       owner:RemoveComponent("playerlightningtarget")
    end


    2.在local function onunequip(inst, owner)的下一行插入以下内容：

    if owner:HasTag("nolightning") then
       owner:RemoveTag("nolightning")
       owner:AddComponent("playerlightningtarget")
    end


    3.将inst:AddComponent("weapon")替换为以下内容：

local function onattack(inst, attacker, target)
    inst:StartThread(function()
        for k = 1, 5 do
            local pos = target:GetPosition()
            GetSeasonManager():DoLightningStrike(pos)
            target.components.health:DoDelta(-100)
            Sleep(0.3)
        end
    end)
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetRange(20, 25)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可让矛在攻击时召唤5道闪电，连续雷击敌人，会烧着附近的敌人。因为神之矛太过凶猛，请远离自己的基地使用，也千万不要在带同伴时使用




一六一.钓金龟（用鱼竿将敌人变成黄金雕像）

    用记事本打开游戏目录\data\scripts\prefabs\fishingrod.lua文件，将下列内容：

    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(TUNING.FISHINGROD_DAMAGE)
    inst.components.weapon.attackwear = 4

    替换为：

local function onattack(inst, attacker, target)
    SpawnPrefab("ruins_statue_mage").Transform:SetPosition(target.Transform:GetWorldPosition())
    SpawnPrefab("collapse_small").Transform:SetPosition(target.Transform:GetWorldPosition())
    target:Remove()
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(12, 15)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可用鱼竿远距离攻击敌人时，把敌人变成黄金雕像，用锤子砸碎雕像可得宝石和铥矿石。鱼竿在生存选项（画着绳套）下，用2个树杈、2个蛛丝制造




一六二.萌时代（扔蜂蜜将怪物变回童年）

    用记事本打开游戏目录\data\scripts\prefabs\honey.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onhit(inst, attacker, target)
    inst:Remove()
    SpawnPrefab("collapse_small").Transform:SetPosition(target.Transform:GetWorldPosition())
    target.Transform:SetScale(0.7, 0.7, 0.7)
    if target.components.health then
       target.components.health.currenthealth = 1
       target.components.health.maxhealth = 1
    end
    if target.components.combat then
       target.components.combat:SetDefaultDamage(0)
       target.components.combat.target = nil
    end
    if target.components.locomotor then
       target.components.locomotor.runspeed = 1
       target.components.locomotor.walkspeed = 1
    end
end
local function onthrown(inst, data)
    inst.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(20, 25)
    inst:AddComponent("equippable")
    inst.components.equippable.equipstack = true
    inst:AddComponent("projectile")
    inst.components.projectile:SetSpeed(60)
    inst.components.projectile:SetOnHitFn(onhit)
    inst:ListenForEvent("onthrown", onthrown)

    即可扔蜂蜜将怪物变成无害的童年怪物，怪物体型变小、生命值为1、没有攻击力、行走缓慢。因为蜂蜜可装备，如果主角也想吃蜂蜜，请拿起蜂蜜对主角按鼠标右键




一六三.犬牙手雷（扔犬牙炸倒一大片）

    用记事本打开游戏目录\data\scripts\prefabs\houndstooth.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onhit(inst, attacker, target)
    SpawnPrefab("collapse_small").Transform:SetPosition(target.Transform:GetWorldPosition())
    SpawnPrefab("explode_small").Transform:SetPosition(target.Transform:GetWorldPosition())
    local pos = Vector3(target.Transform:GetWorldPosition())
    GetClock():DoLightningLighting()
    GetPlayer().components.playercontroller:ShakeCamera(target, "FULL", 0.7, 0.02, .5, 40)
    inst.components.combat:DoAreaAttack(target, 8)
    inst:Remove()
end
local function onthrown(inst, data)
    inst.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(3000)
    inst.components.weapon:SetRange(15, 18)
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(3000)
    inst.components.combat.playerdamagepercent = 0
    inst:AddComponent("equippable")
    inst.components.equippable.equipstack = true
    inst:AddComponent("projectile")
    inst.components.projectile:SetSpeed(60)
    inst.components.projectile:SetOnHitFn(onhit)
    inst:ListenForEvent("onthrown", onthrown)

    即可在装备犬牙时，对一群敌人扔出（远距离对敌人按鼠标左键）炸倒一大片。犬牙手雷不会伤到主角




一六四.高爆地雷（指南针放在地上作地雷）

    用记事本打开游戏目录\data\scripts\prefabs\compass.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容

    inst.components.inventoryitem:SetOnDroppedFn(function()
        inst:RemoveTag("startkill")
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst.components.inventoryitem:SetOnPickupFn(function()
        inst:RemoveTag("startkill")
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst.components.inventoryitem:SetOnPutInInventoryFn(function()
        inst:RemoveTag("startkill")
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
local function OnDeploy (inst, pt)
    inst:AddTag("startkill")
    inst.Physics:Teleport(pt:Get())
    inst.task = inst:DoPeriodicTask(0.1, function(inst)
        local target = FindEntity(inst, 2, function(guy) 
            return guy.components.combat and guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") and not guy:HasTag("smallbird") and not guy:HasTag("chester")
        end )
        if target then
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
           SpawnPrefab("explode_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
           local pos = Vector3(inst.Transform:GetWorldPosition())
           GetClock():DoLightningLighting()
           GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.7, 0.02, .5, 40)
           target.components.health:DoDelta(-3000)
           inst:Remove()
        end
    end )
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst.components.deployable.min_spacing = 2
    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = 999
local function onsave(inst, data)
    if inst:HasTag("startkill") then
        data.startkill = true
    end
end
local function onload(inst, data)
  if data and data.startkill then
    inst:AddTag("startkill")
    inst.task = inst:DoPeriodicTask(0.1, function(inst)
        local target = FindEntity(inst, 2, function(guy) 
            return guy.components.combat and guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") and not guy:HasTag("smallbird") and not guy:HasTag("chester")
        end )
        if target then
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
           SpawnPrefab("explode_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
           local pos = Vector3(inst.Transform:GetWorldPosition())
           GetClock():DoLightningLighting()
           GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.7, 0.02, .5, 40)
           target.components.health:DoDelta(-3000)
           inst:Remove()
        end
    end )
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可拿起指南针用鼠标右键部署在空地上，敌人踩上后会爆炸，主角、自养高鸟、狗箱不会触发。指南针在生存选项（画着绳套）下，用1个黄金、1张纸制造




一六五.死神之光（拿提灯时右键点空地，满屏敌人通杀）

    用记事本打开游戏目录\data\scripts\prefabs\mininglantern.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function cancreatelight(staff, caster, target, pos)
    local fuelpercent = inst.components.fueled:GetPercent()
    if fuelpercent > 0.5 then
       return true
    else
       return false
    end
end
local function createlight(staff, target, pos)
    local SHAKE_DIST = 40
    local player = GetClosestInstWithTag("player", inst, SHAKE_DIST)
    if player then
       player.components.playercontroller:ShakeCamera(inst, "VERTICAL", 1, 0.03, 2, SHAKE_DIST)
    end
    inst:DoTaskInTime(0, function() 
        inst.components.combat:DoAreaAttack(inst, 30)
    end)
    GetClock():DoLightningLighting()
    inst.components.fueled.currentfuel = 50
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(3000)
    inst.components.combat.playerdamagepercent = 0

    即可拿提灯时右键点空地，满屏敌人通杀。注意提灯燃料超过50%时，才能释放死神之光，释放后提灯燃料接近耗尽，想再释放需要向提灯中填充荧光果（拿荧光果对装备格中的提灯按右键），大约3颗即可




一六六.魔之双臂（狼牙棒左键抓来敌人并致死、右键抓地移动主角）

    用记事本打开游戏目录\data\scripts\prefabs\tentaclespike.lua文件，将下列内容：

    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(TUNING.SPIKE_DAMAGE)
    
    -------
    
    inst:AddComponent("finiteuses")
    inst.components.finiteuses:SetMaxUses(TUNING.SPIKE_USES)
    inst.components.finiteuses:SetUses(TUNING.SPIKE_USES)
    
    inst.components.finiteuses:SetOnFinished( onfinished )

    替换为：

local function onattack(inst, owner, target)
    local pt = owner:GetPosition()
    if target.components.health then
       target.Transform:SetPosition(pt.x+1, pt.y, pt.z)
    end
    inst:DoTaskInTime(0.1, function() 
        target.components.health:DoDelta(-3000)
    end)
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(20, 25)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetProjectile("bishop_charge")
    inst:AddComponent("blinkstaff")

    即可在装备狼牙棒时，对敌人点左键将其抓过来并致死；对空地点右键，抓地移动主角，使狼牙棒既可杀伤敌人，又可有效闪避。用来抓鸟、兔、火鸡、大象等会逃跑的动物也很实用哦。狼牙棒靠打沼泽里的触手获得




一六七.致命的毒箭（中吹箭的敌人不知不觉流血至死）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\blowdart.lua文件，在inst.components.weapon:SetDamage(TUNING.PIPE_DART_DAMAGE)的下一行插入以下内容：

local function pipeonhit(inst, attacker, target)
    target.components.health:StartRegen(-100, 1)
    target.components.combat.target = nil
    target.AnimState:SetMultColour(255/255,0/255,0/255,1)
    attacker.components.inventory:Equip(inst)
end
    inst.components.weapon:SetRange(20, 25)
    inst.components.projectile:SetOnHitFn(pipeonhit)

    即可让中吹箭的敌人变成红色，每秒减100点血直至死亡，被射中的敌人不会反击主角。吹箭为无限使用，吹出后自动回到手中




一六八.电击枪（用橙色魔杖远程电晕敌人，使其任你宰割）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，将inst.components.blinkstaff.onblinkfn = onblink替换为以下内容：

local function onattack_orange(inst, owner, target)
    if target.brain then
       target.brain:Stop()
    end
    if target.components.combat then
       target.components.combat:SetTarget(nil)
    end
    if target.components.locomotor then
       target.components.locomotor:Stop()
    end
    target.AnimState:SetMultColour(125/255,125/255,125/255,1)
    SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(10)
    inst.components.weapon:SetRange(20, 25)
    inst.components.weapon:SetOnAttack(onattack_orange)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可在装备橙色魔杖时，对敌人按鼠标左键将其电晕，其会失去行动能力，任你处置。对猴子、青蛙等比较讨厌的敌人很适用。橙色魔杖在远古选项（画着远古祭坛）下，用2个噩梦燃料、1个步行手杖、2个橙色宝石制造，制造时需要靠近远古祭坛




一六九.速射步枪（黄色魔杖左键点射、右键连射蜂刺子弹）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，将下列内容：

local function yellow()
    local inst = commonfn("yellow")
    inst.fxcolour = {223/255, 208/255, 69/255}
    inst.castsound = "dontstarve/common/staffteleport"

    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false

    inst:AddComponent("reticule")
    inst.components.reticule.targetfn = function() 
        return Vector3(GetPlayer().entity:LocalToWorldSpace(5,0,0))
    end
    inst.components.reticule.ease = true

    inst.components.finiteuses:SetMaxUses(TUNING.YELLOWSTAFF_USES)
    inst.components.finiteuses:SetUses(TUNING.YELLOWSTAFF_USES)
    inst:AddTag("nopunch")

    return inst
end

    替换为：

local function yellow()
    local inst = commonfn("yellow")
    inst.fxcolour = {223/255, 208/255, 69/255}
    inst.castsound = "dontstarve/common/staffteleport"
local function canattack(inst, target)
    if GetPlayer().components.inventory:Has("stinger", 1) and TheInput:IsMouseDown(MOUSEBUTTON_RIGHT) then
       inst.components.weapon:LaunchProjectile(inst, target)
    end
    if GetPlayer().components.inventory:Has("stinger", 1) then
       return true
    end
end
local function onattack_yellow(inst, owner, target)
    owner.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
    SpawnPrefab("die_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
    TheCamera:Shake("FULL", 0.2, 0.02, .5, 40)
    owner.components.inventory:ConsumeByName("stinger", 1)
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(100)
    inst.components.weapon:SetRange(25, 30)
    inst.components.weapon:SetOnAttack(onattack_yellow)
    inst.components.weapon:SetCanAttack(canattack)
    inst.components.weapon:SetProjectile("fire_projectile")
    inst.components.finiteuses:SetMaxUses(TUNING.YELLOWSTAFF_USES*1000)
    inst.components.finiteuses:SetUses(TUNING.YELLOWSTAFF_USES*1000)
    return inst
end

    即可在装备黄色魔杖时，对敌人按鼠标左键点射，按鼠标右键连射，身上没有蜂刺时无法射击（不要光顾着按住右键扫射，时不时关注一下还有多少子弹）。黄色魔杖在远古选项（画着远古祭坛）下，用4个噩梦燃料、2个活木头、2个黄色宝石制造，制造时需要靠近远古祭坛。黄色魔杖原有种小星星功能取消




一七０.反物质制造机（绿魔杖左键点敌人，生成敌人反物质分身自相残杀）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，在local inst = commonfn("green")的下一行插入以下内容：

local function onattack_green(inst, owner, target)
    if target.prefab == "bee" or target.prefab == "killerbee" or target.prefab == "flies" or target.prefab == "mosquito" or target.prefab == "frog" or target.prefab == "beefalo" or target.prefab == "lightninggoat" or target.prefab == "pigman" or target.prefab == "pigguard" or target.prefab == "bunnyman" or target.prefab == "merm" or target.prefab == "spider_hider" or target.prefab == "spider_spitter" or target.prefab == "spider" or target.prefab == "spider_warrior" or target.prefab == "spiderqueen" or target.prefab == "spider_dropper" or target.prefab == "hound" or target.prefab == "firehound" or target.prefab == "icehound" or target.prefab == "leif" or target.prefab == "leif_sparse" or target.prefab == "walrus" or target.prefab == "little_walrus" or target.prefab == "smallbird" or target.prefab == "teenbird" or target.prefab == "tallbird" or target.prefab == "koalefant_summer" or target.prefab == "koalefant_winter" or target.prefab == "penguin" or target.prefab == "slurtle" or target.prefab == "snurtle" or target.prefab == "bat" or target.prefab == "rocky" or target.prefab == "monkey" or target.prefab == "buzzard" or target.prefab == "catcoon" or target.prefab == "knight" or target.prefab == "bishop" or target.prefab == "rook" or target.prefab == "crawlinghorror" or target.prefab == "terrorbeak" or target.prefab == "deerclops" or target.prefab == "minotaur" or target.prefab == "worm" or target.prefab == "abigail" or target.prefab == "ghost" or target.prefab == "krampus" or target.prefab == "moose" or target.prefab == "dragonfly" or target.prefab == "warg" or target.prefab == "bearger" then
       local copy = SpawnPrefab(target.prefab)
       copy.Transform:SetPosition(target.Transform:GetWorldPosition())
       copy.AnimState:SetMultColour(0/255,0/255,0/255,0.5)
       if copy:HasTag("monster") then copy:RemoveTag("monster") end
       copy.task = copy:DoPeriodicTask(1, function() copy.components.combat.target = target end)
       target:ListenForEvent("death", function()
           if not copy.components.health:IsDead() then
              copy:Remove()
           end
       end )
       copy:DoTaskInTime(60, function() 
           if not copy.components.health:IsDead() then
              copy:Remove()
           end
       end )
    else
       local copy = SpawnPrefab("leif")
       copy.Transform:SetPosition(target.Transform:GetWorldPosition())
       copy.AnimState:SetMultColour(0/255,0/255,0/255,0.5)
       copy.Transform:SetScale(0.5, 0.5, 0.5)
       copy:RemoveTag("monster")
       copy.components.combat:SetAttackPeriod(1)
       copy.task = copy:DoPeriodicTask(1, function() copy.components.combat.target = target end)
       target:ListenForEvent("death", function()
           if not copy.components.health:IsDead() then
              copy:Remove()
           end
       end )
       copy:DoTaskInTime(60, function() 
           if not copy.components.health:IsDead() then
              copy:Remove()
           end
       end )
    end
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(30, 35)
    inst.components.weapon:SetOnAttack(onattack_green)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可装备绿魔杖时，按鼠标左键点敌人，生成敌人的反物质分身，与敌人自相残杀。敌人有多强大，其反物质分身就有多强大，主角只须观战即可。反物质分身最多存在60秒，当敌人死去时，反物质分身也将消失。中立的小动物、修改技巧创生的生物，将生成反物质树精




一七一.收妖镜（装备铥矿奖章对敌人按右键，将其收入镜中）

    用记事本打开游戏目录\data\scripts\prefabs\nightmare_timepiece.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onequip(inst, owner) 
    owner.components.inventory:SetOverflow(inst)
    inst.components.container:Open(owner)
end
local function onunequip(inst, owner) 
    owner.components.inventory:SetOverflow(nil)
    inst.components.container:Close(owner)
end
local function itemtest(inst, item, slot)
    if item:HasTag("catched") then
       return true
    end
    return false
end
local slotpos = {}
for y = 0, 9 do
    table.insert(slotpos, Vector3(-162, -y*75 + 170 ,0))
end
local function cancatchmonster(inst, caster, target)
    if target then
       return target.components.locomotor and target.components.health and not target.components.health:IsDead() and not target:HasTag("smallbird") and not target:HasTag("chester")
    end
    return true
end
local function catchmonster(staff, target, pos)
    if not inst.components.container:IsFull() then
       if target.components.stackable then target:RemoveComponent("stackable") end
       if target.components.inventoryitem then target:RemoveComponent("inventoryitem") end
       target:AddComponent("inventoryitem")
       target.components.inventoryitem.nobounce = true
       target.components.inventoryitem.canbepickedup = true
       target.components.inventoryitem:ChangeImageName("beard_monster")
       target.components.health.canmurder = true
       target:AddTag("catched")
       target.components.inventoryitem:SetOnDroppedFn(function(target)
          target:RemoveComponent("inventoryitem")
          target:RemoveTag("catched")
          if target.brain then target.brain:Start() end
          if target.sg then target.sg:Start() end
       end )
       target.components.inventoryitem:SetOnPutInInventoryFn(function(target)
          if target.sg then target.sg:GoToState("idle") end
          if target.SoundEmitter then target.SoundEmitter:KillAllSounds() end
       end )
       inst.components.container:GiveItem(target)
    end
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(catchmonster)
    inst.components.spellcaster:SetSpellTestFn(cancatchmonster)
    inst.components.spellcaster.canuseontargets = true
    inst.components.spellcaster.canusefrominventory = false

    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HANDS
    inst.components.equippable:SetOnEquip( onequip )
    inst.components.equippable:SetOnUnequip( onunequip )

    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(18,50,0)
    inst.components.container.side_widget = true
    inst.components.container.itemtestfn = itemtest
    inst.components.container.acceptsstacks = false

    即可在装备铥矿奖章时，对敌人按鼠标右键，将敌人收入镜中（画面右边的格子中，显示为烧焦的兔子），如果想杀死它，就对格子中的敌人按鼠标右键，会获得战利品；如果想释放它，就拿出敌人放在地上。“收妖镜”的格子全满后，无法再收新的敌人，可以将敌人放在物品栏或其他背包后再收妖。在存档退出前，请处置（杀掉或释放）全部收来的敌人，否则读档后，敌人将全部被放出。铥矿奖章在远古选项（画着远古祭坛）下，用2个铥矿石、2个噩梦燃料制造，制造时需要靠近远古祭坛




一七二.溜溜球（用陷阱种溜溜球，连续打击多个目标，打完自动回到手中）

    用记事本打开游戏目录\data\scripts\prefabs\trap.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local colours=
{
    {198/255,43/255,43/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {233/255,208/255,69/255},
    {109/255,50/255,163/255},
    {222/255,126/255,39/255},
}
local function OnDeploy (inst, pt)
    local ball = SpawnPrefab("trap")
    ball.Transform:SetPosition(pt.x, pt.y, pt.z)
    ball.AnimState:SetBank("bulb")
    ball.AnimState:SetBuild("bulb")
    ball.AnimState:PlayAnimation("idle")
    ball.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    ball:ClearStateGraph()
    RemovePhysicsColliders(ball)
    ball.components.inventoryitem:ChangeImageName("lightbulb")
    ball.colour_idx = math.random(#colours)
    ball.AnimState:SetMultColour(colours[ball.colour_idx][1],colours[ball.colour_idx][2],colours[ball.colour_idx][3],1)
    ball:RemoveComponent("finiteuses")
    ball:RemoveComponent("trap")
    ball:RemoveComponent("deployable")
    ball:RemoveTag("trap")
    ball:AddComponent("weapon")
    ball.components.weapon:SetDamage(30)
    ball.components.weapon:SetRange(20, 25)
    ball:AddComponent("equippable")
    ball.components.equippable.equipslot = EQUIPSLOTS.HANDS
    ball.components.equippable:SetOnEquip(function(ball)
        ball.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
    end )
    ball:AddComponent("projectile")
    ball.components.projectile:SetSpeed(25)
    ball.components.projectile:SetOnHitFn(function(ball, owner, target)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
        local target0 = FindEntity(owner, 25, function(guy) 
            if guy.components.combat and guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
               return guy.components.combat.target == owner or owner.components.combat.target == guy or guy:HasTag("monster")
            end
        end )
        if target0 then
           ball.components.projectile:Throw(owner, target0)
        else
           owner.components.inventory:Equip(ball)
        end
    end )
    ball.components.projectile:SetOnMissFn(function(ball, owner)
        owner.components.inventory:Equip(ball)
    end )
    ball:ListenForEvent("onthrown", function(ball)
        local pt = ball:GetPosition()
        ball.Transform:SetPosition(pt.x, 2, pt.z)
        ball.SoundEmitter:PlaySound("dontstarve/wilson/boomerang_throw")
    end )
    ball:AddComponent("workable")
    ball.components.workable:SetWorkAction(ACTIONS.HAMMER)
    ball.components.workable:SetWorkLeft(3)
    ball.components.workable:SetOnFinishCallback(function(ball)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(ball.Transform:GetWorldPosition())
        ball:Remove()
    end )
    ball:AddTag("projectile")
    ball:AddTag("balls")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("balls") then
       data.balls = true
    end
    data.colour_idx = inst.colour_idx
end
local function onload(inst, data)
  if data and data.balls then
    inst.AnimState:SetBank("bulb")
    inst.AnimState:SetBuild("bulb")
    inst.AnimState:PlayAnimation("idle")
    inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    inst:ClearStateGraph()
    RemovePhysicsColliders(inst)
    inst.components.inventoryitem:ChangeImageName("lightbulb")
    inst:RemoveComponent("finiteuses")
    inst:RemoveComponent("trap")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("trap")
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(30)
    inst.components.weapon:SetRange(20, 25)
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HANDS
    inst.components.equippable:SetOnEquip(function(inst)
        inst.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
    end )
    inst:AddComponent("projectile")
    inst.components.projectile:SetSpeed(25)
    inst.components.projectile:SetOnHitFn(function(inst, owner, target)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
        local target0 = FindEntity(owner, 25, function(guy) 
            if guy.components.combat and guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
               return guy.components.combat.target == owner or owner.components.combat.target == guy or guy:HasTag("monster")
            end
        end )
        if target0 then
           inst.components.projectile:Throw(owner, target0)
        else
           owner.components.inventory:Equip(inst)
        end
    end )
    inst.components.projectile:SetOnMissFn(function(inst, owner)
        owner.components.inventory:Equip(inst)
    end )
    inst:ListenForEvent("onthrown", function(inst)
        local pt = inst:GetPosition()
        inst.Transform:SetPosition(pt.x, 2, pt.z)
        inst.SoundEmitter:PlaySound("dontstarve/wilson/boomerang_throw")
    end )
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst:Remove()
    end )
    inst:AddTag("projectile")
    inst:AddTag("balls")
  end
  if data and data.colour_idx then
     inst.colour_idx = math.min(#colours, data.colour_idx)
     inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用陷阱种溜溜球（颜色随机），装备后对敌人按鼠标左键，可以扔出并连续打击附近所有敌人，消灭敌人后自动回到手中，完美代替回旋镖。不想要溜溜球时，用锤子砸掉即可。陷阱在生存选项（画着绳套）下，用2个树枝、6个草制造




一七三.千斤锤（用火腿短棍攻击时，天降巨石将敌人拍扁）

    用记事本打开游戏目录\data\scripts\prefabs\hambat.lua文件，将inst:AddComponent("weapon")替换为以下内容：

local function onattack(inst, owner, target)
    local pt = target:GetPosition()
    local boulder = SpawnPrefab("thulecite")
    RemovePhysicsColliders(boulder)
    boulder.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    boulder.Transform:SetScale(3,3,3)
    boulder:RemoveComponent("inventoryitem")
    boulder.Transform:SetPosition(pt.x, 10, pt.z)
    boulder.falling = boulder:DoPeriodicTask(.01, function() boulder.Physics:SetMotorVelOverride(0,-55,0) end)
    boulder:DoTaskInTime(0.1, function()
        if boulder.falling then boulder.falling:Cancel() boulder.falling = nil end
        GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
        GetPlayer().components.playercontroller:ShakeCamera(boulder, "FULL", 0.5, 0.05, 2, 40)
        SpawnPrefab("collapse_big").Transform:SetPosition(boulder.Transform:GetWorldPosition())
        target:AddTag("NOCLICK")
        MakeInventoryPhysics(target)
        target.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
        target.AnimState:SetLayer( LAYER_BACKGROUND )
        target.AnimState:SetSortOrder( 1 )
        target.AnimState:SetPercent("hit", math.random())
        if target.brain then target:SetBrain(nil) end
        if target.components.locomotor then target.components.locomotor:Stop() end
        if target.components.combat then target.components.combat:SetTarget(nil) end
        if target.components.health then target.components.health:SetInvincible(false) end
        target:DoTaskInTime(5, function() target.components.health:Kill() end )
        local pos = Vector3(boulder.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,0,pos.z, 5)
        for k,v in pairs(ents) do
            if v.components.workable and v.components.workable.workleft > 0 and not v.components.inventoryitem then
               v.components.workable:Destroy(boulder)
            end
        end
        boulder:DoTaskInTime(0.5, function()
            GetPlayer().SoundEmitter:PlaySound("dontstarve/common/stone_drop")
            SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(boulder.Transform:GetWorldPosition())
            boulder:Remove()
        end )
    end )
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetRange(20, 25)
    inst.components.weapon:SetOnAttack(onattack)

    即可在用火腿短棍攻击时，天降巨石将敌人拍扁，并震毁附近的建筑、石头、植物，敌人将在5秒后死亡。火腿短棍在战斗选项（画着两把剑）下，用1个猪皮、2个树枝、2个大肉制造




一七四.霸王枪（瓦丝格雷斯矛升级为霸王枪，鼠标左键远距离突刺并撤回，右键挑飞敌人，敌人会喷血）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\spear_wathgrithr.lua文件，

    1.在local function onequip(inst, owner)的下一行插入以下内容：

    inst.fire = SpawnPrefab( "campfirefire" )
    local follower = inst.fire.entity:AddFollower()
    follower:FollowSymbol( owner.GUID, "swap_object", 20, -88, 1 )
    inst.fire.AnimState:SetMultColour(255/255,0/255,0/255,1)
    inst.fire.Transform:SetScale(0.8, 0.8, 0.8)
    inst.fire:RemoveComponent("heater")
    inst.fire.persists = false


    2.在local function onunequip(inst, owner)的下一行插入以下内容：

    inst.fire:Remove()
    inst.fire = nil


    3.将下列内容：

    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(TUNING.WATHGRITHR_SPEAR_DAMAGE)
    
    -------
    
    inst:AddComponent("finiteuses")
    inst.components.finiteuses:SetMaxUses(TUNING.WATHGRITHR_SPEAR_USES)
    inst.components.finiteuses:SetUses(TUNING.WATHGRITHR_SPEAR_USES)
    
    inst.components.finiteuses:SetOnFinished( onfinished )

    替换为：

local function canattack(inst, target)
    if TheInput:IsMouseDown(MOUSEBUTTON_RIGHT) then
       GetPlayer().AnimState:PlayAnimation("atk")
       SpawnPrefab("groundpoundring_fx").Transform:SetPosition(GetPlayer().Transform:GetWorldPosition())
       SpawnPrefab("explode_small").Transform:SetPosition(target.Transform:GetWorldPosition())
       GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
       local pt01 = GetPlayer():GetPosition()
       local pt02 = target:GetPosition()
       target.Transform:SetPosition((pt02.x-pt01.x)*0.5+pt02.x, 0, (pt02.z-pt01.z)*0.5+pt02.z)
       local blood = SpawnPrefab("splash")
       blood.Transform:SetPosition(target.Transform:GetWorldPosition())
       blood.AnimState:SetMultColour(255/255,0/255,0/255,1)
       blood.Transform:SetScale(2, 2, 2)
       if target.components.locomotor then target.components.locomotor:Stop() end
       if target.components.combat then target.components.combat:SetTarget(GetPlayer()) end
       if target.components.health then
          target.components.health:DoDelta(-100)
          if target.components.health:GetPercent() < 0.3 then
             target.AnimState:SetMultColour(255/255,0/255,0/255,1)
          end
       end
    end
    return true
end
local function onattack(inst, attacker, target)
    local pt1 = attacker:GetPosition()
    local pt2 = target:GetPosition()
    GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
    attacker:DoTaskInTime(0.01, function()
        attacker.Transform:SetPosition(pt2.x, pt2.y, pt2.z)
        SpawnPrefab("explode_small").Transform:SetPosition(target.Transform:GetWorldPosition())
        SpawnPrefab("groundpoundring_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
        if target.components.locomotor then target.components.locomotor:Stop() end
        attacker:StartThread(function()
            for k = 1, 3 do
                local blood = SpawnPrefab("splash")
                blood.Transform:SetPosition(pt2.x, 1.5, pt2.z)
                blood.AnimState:SetMultColour(255/255,0/255,0/255,1)
                blood.Transform:SetScale(2, 2, 2)
                Sleep(.1)
            end
        end )
        if target.components.health and target.components.health:GetPercent() < 0.3 then
           target.AnimState:SetMultColour(255/255,0/255,0/255,1)
        end
    end )
    attacker:DoTaskInTime(0.3, function()
        attacker.Transform:SetPosition(pt1.x, pt1.y, pt1.z)
    end )
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(300)
    inst.components.weapon:SetRange(15, 20)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetCanAttack(canattack)

    即可让瓦丝格雷斯矛升级为霸王枪，装备霸王枪，鼠标左键点敌人（按住可连续攻击），会远距离突刺敌人，刺中后迅速撤回原位，不给敌人还击的机会。鼠标右键点敌人，可将敌人挑飞，按住右键扫过一群敌人，可防止被围攻。使用霸王枪时，敌人会喷血，场面极其惨烈，如果你是儿童，请捂住眼睛使用。瓦丝格雷斯矛可修改“全人物可制造瓦丝格雷斯矛、瓦丝格雷斯帽”获得




一七五.霸王斧（用蜻蜓鳞片种霸王斧，攻击敌人时震开并伤害周围敌人，可吸敌人的血）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\dragon_scales.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local bigaxe = SpawnPrefab("dragon_scales")
    bigaxe.Transform:SetPosition(pt.x, pt.y, pt.z)
    bigaxe.AnimState:SetBank("Lucy_axe")
    bigaxe.AnimState:SetBuild("Lucy_axe")
    bigaxe.AnimState:PlayAnimation("idle")
    bigaxe.components.inventoryitem:ChangeImageName("lucy")
    bigaxe:AddComponent("named")
    bigaxe.components.named:SetName("Poleaxe")
    bigaxe:RemoveComponent("stackable")
    bigaxe:RemoveComponent("deployable")
    bigaxe:AddComponent("equippable")
    bigaxe.components.equippable.equipslot = EQUIPSLOTS.HANDS
    bigaxe.components.equippable:SetOnEquip(function(bigaxe, owner)
        owner.AnimState:OverrideSymbol("swap_object", "swap_lucy_axe", "swap_lucy_axe")
        owner.AnimState:Show("ARM_carry")
        owner.AnimState:Hide("ARM_normal")
        bigaxe.fire = SpawnPrefab( "campfirefire" )
        local follower = bigaxe.fire.entity:AddFollower()
        follower:FollowSymbol( owner.GUID, "swap_object", -2, -135, 1 )
        bigaxe.fire.AnimState:SetMultColour(255/255,0/255,0/255,1)
        bigaxe.fire:RemoveComponent("heater")
        bigaxe.fire.persists = false
    end )
    bigaxe.components.equippable:SetOnUnequip(function(bigaxe, owner)
        owner.AnimState:Hide("ARM_carry") 
        owner.AnimState:Show("ARM_normal") 
        bigaxe.fire:Remove()
        bigaxe.fire = nil
    end )
    bigaxe:AddComponent("weapon")
    bigaxe.components.weapon:SetDamage(500)
    bigaxe.components.weapon:SetOnAttack(function(bigaxe, attacker, target)
        GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
        SpawnPrefab("groundpoundring_fx").Transform:SetPosition(attacker.Transform:GetWorldPosition())
        GetPlayer().components.playercontroller:ShakeCamera(attacker, "FULL", 0.5, 0.05, 2, 40)
        if target.components.locomotor then target.components.locomotor:Stop() end
        if target.components.health:GetPercent() < 0.3 then
           target.AnimState:SetMultColour(255/255,0/255,0/255,1)
        end
        attacker.components.health:DoDelta(150)
        attacker:StartThread(function()
            for k = 1, 3 do
                local blood = SpawnPrefab("splash")
                blood.Transform:SetPosition(target.Transform:GetWorldPosition())
                blood.AnimState:SetMultColour(255/255,0/255,0/255,1)
                blood.Transform:SetScale(2, 2, 2)
                Sleep(.1)
            end
        end )
        target:AddTag("nomove")
        target:DoTaskInTime(0.4, function() target:RemoveTag("nomove") end )
        local pos = Vector3(attacker.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 8)
        for k,v in pairs(ents) do
            if v.components.health and v.components.combat and not v.components.health:IsDead() and not v:HasTag("nomove") then
               if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") then
                  SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
                  v.components.health:DoDelta(-300)
                  local pt01 = attacker:GetPosition()
                  local pt02 = v:GetPosition()
                  v.Transform:SetPosition((pt02.x-pt01.x)*1.5+pt02.x, 0, (pt02.z-pt01.z)*1.5+pt02.z)
                  if v.components.locomotor then v.components.locomotor:Stop() end
                  if v.components.health:GetPercent() < 0.3 then
                     v.AnimState:SetMultColour(255/255,0/255,0/255,1)
                  end
               end
            end
        end
    end )
    bigaxe:AddComponent("tool")
    bigaxe.components.tool:SetAction(ACTIONS.CHOP, 15)
    bigaxe:AddTag("bigaxes")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("bigaxes") then
       data.bigaxes = true
    end
end
local function onload(inst, data)
  if data and data.bigaxes then
    inst.AnimState:SetBank("Lucy_axe")
    inst.AnimState:SetBuild("Lucy_axe")
    inst.AnimState:PlayAnimation("idle")
    inst.components.inventoryitem:ChangeImageName("lucy")
    inst:AddComponent("named")
    inst.components.named:SetName("Poleaxe")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("deployable")
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HANDS
    inst.components.equippable:SetOnEquip(function(inst, owner)
        owner.AnimState:OverrideSymbol("swap_object", "swap_lucy_axe", "swap_lucy_axe")
        owner.AnimState:Show("ARM_carry")
        owner.AnimState:Hide("ARM_normal")
        inst.fire = SpawnPrefab( "campfirefire" )
        local follower = inst.fire.entity:AddFollower()
        follower:FollowSymbol( owner.GUID, "swap_object", -2, -135, 1 )
        inst.fire.AnimState:SetMultColour(255/255,0/255,0/255,1)
        inst.fire:RemoveComponent("heater")
        inst.fire.persists = false
    end )
    inst.components.equippable:SetOnUnequip(function(inst, owner)
        owner.AnimState:Hide("ARM_carry") 
        owner.AnimState:Show("ARM_normal") 
        inst.fire:Remove()
        inst.fire = nil
    end )
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(500)
    inst.components.weapon:SetOnAttack(function(inst, attacker, target)
        GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
        SpawnPrefab("groundpoundring_fx").Transform:SetPosition(attacker.Transform:GetWorldPosition())
        GetPlayer().components.playercontroller:ShakeCamera(attacker, "FULL", 0.5, 0.05, 2, 40)
        if target.components.locomotor then target.components.locomotor:Stop() end
        if target.components.health:GetPercent() < 0.3 then
           target.AnimState:SetMultColour(255/255,0/255,0/255,1)
        end
        attacker.components.health:DoDelta(150)
        attacker:StartThread(function()
            for k = 1, 3 do
                local blood = SpawnPrefab("splash")
                blood.Transform:SetPosition(target.Transform:GetWorldPosition())
                blood.AnimState:SetMultColour(255/255,0/255,0/255,1)
                blood.Transform:SetScale(2, 2, 2)
                Sleep(.1)
            end
        end )
        target:AddTag("nomove")
        target:DoTaskInTime(0.4, function() target:RemoveTag("nomove") end )
        local pos = Vector3(attacker.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 8)
        for k,v in pairs(ents) do
            if v.components.health and v.components.combat and not v.components.health:IsDead() and not v:HasTag("nomove") then
               if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") then
                  SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
                  v.components.health:DoDelta(-300)
                  local pt01 = attacker:GetPosition()
                  local pt02 = v:GetPosition()
                  v.Transform:SetPosition((pt02.x-pt01.x)*1.5+pt02.x, 0, (pt02.z-pt01.z)*1.5+pt02.z)
                  if v.components.locomotor then v.components.locomotor:Stop() end
                  if v.components.health:GetPercent() < 0.3 then
                     v.AnimState:SetMultColour(255/255,0/255,0/255,1)
                  end
               end
            end
        end
    end )
    inst:AddComponent("tool")
    inst.components.tool:SetAction(ACTIONS.CHOP, 15)
    inst:AddTag("bigaxes")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜻蜓鳞片种霸王斧，装备霸王斧攻击时，自动会吸取敌人的血，补充主角生命值，同时震开并伤害周围的敌人（区域攻击），减少你被围殴的机会。霸王斧用来砍树也极其锋利，一斧便可砍倒一棵。蜻蜓鳞片靠打蜻蜓获得，也可在“巨型超市”花9-11个黄金购得




一七六.霸王盔（用猪皮种霸王盔，吸收99%伤害，挨打时弹开并反伤敌人，可照明、防雨、防冻、防暑、补脑、奔跑加速）

    用记事本打开游戏目录\data\scripts\prefabs\pigskin.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local helmet = SpawnPrefab("pigskin")
    helmet.Transform:SetPosition(pt.x, pt.y, pt.z)
    helmet.AnimState:SetBank("wathgrithrhat")
    helmet.AnimState:SetBuild("hat_wathgrithr")
    helmet.AnimState:PlayAnimation("anim")
    helmet.components.inventoryitem:ChangeImageName("wathgrithrhat")
    helmet:RemoveComponent("stackable")
    helmet:RemoveComponent("tradable")
    helmet:RemoveComponent("edible")
    helmet:RemoveComponent("burnable")
    helmet:RemoveComponent("propagator")
    helmet:RemoveComponent("deployable")
    helmet:AddComponent("equippable")
    helmet.components.equippable.equipslot = EQUIPSLOTS.HEAD
    helmet.components.equippable.walkspeedmult = 2.5
    helmet.components.equippable.dapperness = TUNING.DAPPERNESS_HUGE*32
    helmet.components.equippable:SetOnEquip(function(helmet, owner)
        owner.AnimState:OverrideSymbol("swap_hat", "hat_wathgrithr", "swap_hat")
        owner.AnimState:Show("HAT")
        owner.AnimState:Show("HAT_HAIR")
        owner.AnimState:Hide("HAIR_NOHAT")
        owner.AnimState:Hide("HAIR")
        if owner == GetPlayer() then
           owner.AnimState:Hide("HEAD")
           owner.AnimState:Show("HEAD_HAIR")
           owner.components.temperature:SetTemp(20)
           owner:PushEvent("stopfreezing")
           owner:PushEvent("stopoverheating")
           owner.components.moisture:SetMoistureLevel(0)
           helmet.fire = SpawnPrefab( "campfirefire" )
           local follower = helmet.fire.entity:AddFollower()
           follower:FollowSymbol( owner.GUID, "swap_hat", -6, -196, 0 )
           helmet.fire.AnimState:SetMultColour(255/255,0/255,0/255,1)
           helmet.fire.Transform:SetScale(1.3, 1.3, 1.3)
           helmet.fire:RemoveComponent("heater")
           helmet.fire.persists = false
           helmet.helmetfn = function(attacked, data)
               if data and data.attacker and data.attacker.components.health then
                  SpawnPrefab("groundpoundring_fx").Transform:SetPosition(owner.Transform:GetWorldPosition())
                  data.attacker.components.health:DoDelta(-300)
                  local pt01 = owner:GetPosition()
                  local pt02 = data.attacker:GetPosition()
                  data.attacker.Transform:SetPosition((pt02.x-pt01.x)*1.5+pt02.x, 0, (pt02.z-pt01.z)*1.5+pt02.z)
                  if data.attacker.components.locomotor then data.attacker.components.locomotor:Stop() end
                  if data.attacker.components.health:GetPercent() < 0.3 then
                     data.attacker.AnimState:SetMultColour(255/255,0/255,0/255,1)
                  end
               end 
           end
           helmet:ListenForEvent("attacked", helmet.helmetfn, owner)
           owner:AddTag("goodsavages")
        end
    end )
    helmet.components.equippable:SetOnUnequip(function(helmet, owner)
        owner.AnimState:Hide("HAT")
        owner.AnimState:Hide("HAT_HAIR")
        owner.AnimState:Show("HAIR_NOHAT")
        owner.AnimState:Show("HAIR")
        if owner == GetPlayer() then
           owner.AnimState:Show("HEAD")
           owner.AnimState:Hide("HEAD_HAIR")
           owner.components.temperature:SetTemp(nil)
           helmet.fire:Remove()
           helmet.fire = nil
           helmet:RemoveEventCallback("attacked", helmet.helmetfn, owner)
           owner:RemoveTag("goodsavages")
        end

    end )
    helmet:AddComponent("armor")
    helmet.components.armor:InitCondition(20000, 0.99)
    helmet:AddComponent("waterproofer")
    helmet.components.waterproofer:SetEffectiveness(1)
    helmet:AddTag("helmets")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("helmets") then
       data.helmets = true
    end
end
local function onload(inst, data)
  if data and data.helmets then
    inst.AnimState:SetBank("wathgrithrhat")
    inst.AnimState:SetBuild("hat_wathgrithr")
    inst.AnimState:PlayAnimation("anim")
    inst.components.inventoryitem:ChangeImageName("wathgrithrhat")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HEAD
    inst.components.equippable.walkspeedmult = 2.5
    inst.components.equippable.dapperness = TUNING.DAPPERNESS_HUGE*32
    inst.components.equippable:SetOnEquip(function(inst, owner)
        owner.AnimState:OverrideSymbol("swap_hat", "hat_wathgrithr", "swap_hat")
        owner.AnimState:Show("HAT")
        owner.AnimState:Show("HAT_HAIR")
        owner.AnimState:Hide("HAIR_NOHAT")
        owner.AnimState:Hide("HAIR")
        if owner == GetPlayer() then
           owner.AnimState:Hide("HEAD")
           owner.AnimState:Show("HEAD_HAIR")
           owner.components.temperature:SetTemp(20)
           owner:PushEvent("stopfreezing")
           owner:PushEvent("stopoverheating")
           owner.components.moisture:SetMoistureLevel(0)
           inst.fire = SpawnPrefab( "campfirefire" )
           local follower = inst.fire.entity:AddFollower()
           follower:FollowSymbol( owner.GUID, "swap_hat", -6, -196, 0 )
           inst.fire.AnimState:SetMultColour(255/255,0/255,0/255,1)
           inst.fire.Transform:SetScale(1.3, 1.3, 1.3)
           inst.fire:RemoveComponent("heater")
           inst.fire.persists = false
           inst.helmetfn = function(attacked, data)
               if data and data.attacker and data.attacker.components.health then
                  SpawnPrefab("groundpoundring_fx").Transform:SetPosition(owner.Transform:GetWorldPosition())
                  data.attacker.components.health:DoDelta(-300)
                  local pt01 = owner:GetPosition()
                  local pt02 = data.attacker:GetPosition()
                  data.attacker.Transform:SetPosition((pt02.x-pt01.x)*1.5+pt02.x, 0, (pt02.z-pt01.z)*1.5+pt02.z)
                  if data.attacker.components.locomotor then data.attacker.components.locomotor:Stop() end
                  if data.attacker.components.health:GetPercent() < 0.3 then
                     data.attacker.AnimState:SetMultColour(255/255,0/255,0/255,1)
                  end
               end 
           end
           inst:ListenForEvent("attacked", inst.helmetfn, owner)
           owner:AddTag("goodsavages")
        end
    end )
    inst.components.equippable:SetOnUnequip(function(inst, owner)
        owner.AnimState:Hide("HAT")
        owner.AnimState:Hide("HAT_HAIR")
        owner.AnimState:Show("HAIR_NOHAT")
        owner.AnimState:Show("HAIR")
        if owner == GetPlayer() then
           owner.AnimState:Show("HEAD")
           owner.AnimState:Hide("HEAD_HAIR")
           owner.components.temperature:SetTemp(nil)
           inst.fire:Remove()
           inst.fire = nil
           inst:RemoveEventCallback("attacked", inst.helmetfn, owner)
           owner:RemoveTag("goodsavages")
        end

    end )
    inst:AddComponent("armor")
    inst.components.armor:InitCondition(20000, 0.99)
    inst:AddComponent("waterproofer")
    inst.components.waterproofer:SetEffectiveness(1)
    inst:AddTag("helmets")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用猪皮种霸王盔，吸收99%伤害，敌人攻击你时会被弹开，并遭到反伤，让你流的每一滴血，都收到百倍利息。霸王盔可照明、防雨、防冻、防暑、补脑，并使奔跑加速，与“霸王枪”并称饥荒世界两大神器，助你在乱世中百战百胜。佩戴霸王盔时，“铁血蛮族”不敢主动攻击你。不要与“用猪皮种猪火炬”一同修改




一七七.活捉手杖（装备龙卷风魔杖，鼠标左键点鸟、鼹鼠等小动物，可远程活捉）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff_tornado.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function canattack(inst, target)
    if target.prefab == "bee" or target.prefab == "killerbee" or target.prefab == "crow" or target.prefab == "robin" or target.prefab == "robin_winter" or target.prefab == "butterfly" or target.prefab == "mole" or target.prefab == "mosquito" or target.prefab == "rabbit" then
       return true
    end
    return false
end
local function onattack(inst, attacker, target)
    if target.prefab == "bee" then
       local prey = SpawnPrefab("bee")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "killerbee" then
       local prey = SpawnPrefab("killerbee")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "crow" then
       local prey = SpawnPrefab("crow")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "robin" then
       local prey = SpawnPrefab("robin")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "robin_winter" then
       local prey = SpawnPrefab("robin_winter")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "butterfly" then
       local prey = SpawnPrefab("butterfly")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "mole" then
       local prey = SpawnPrefab("mole")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "mosquito" then
       local prey = SpawnPrefab("mosquito")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    if target.prefab == "rabbit" then
       local prey = SpawnPrefab("rabbit")
       GetPlayer().components.inventory:GiveItem(prey)
    end
    target:Remove()
end
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(25, 30)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetCanAttack(canattack)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可将龙卷风魔杖升级为活捉手杖，装备活捉手杖，鼠标左键点小动物，可远距离活捉它们。可活捉的小动物包括蜜蜂、杀人蜂、鸟、蝴蝶、鼹鼠、蚊子、兔子。龙卷风魔杖右键召唤龙卷风的功能保留。龙卷风魔杖在战斗选项下，用10个鹿鸭羽毛、1个闪电羊角、1个齿轮制造




一七八.巨人帽（带猪皮帽变巨人，攻击、防御上升，可撞毁建筑、树、石头）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

    local function football()
        local inst = simple()
		inst:AddComponent("armor")

        inst:AddComponent("waterproofer")
        inst.components.waterproofer:SetEffectiveness(TUNING.WATERPROOFNESS_SMALL)
		
        inst.components.armor:InitCondition(TUNING.ARMOR_FOOTBALLHAT, TUNING.ARMOR_FOOTBALLHAT_ABSORPTION)
		return inst
    end

    替换为：

local function football_equip(inst, owner)
    onequip(inst, owner)
    if owner == GetPlayer() then
       owner.Transform:SetScale(3, 3, 3)
       owner.components.combat:SetDefaultDamage(500)
       owner.Physics:SetCollisionCallback(function(owner, other)
           if other and other.components.workable and other.components.workable.workleft > 0 then
              other.components.workable:Destroy(owner)
           end
       end)
    end
end
local function football_unequip(inst, owner)
    onunequip(inst, owner)
    if owner == GetPlayer() then
       owner.Transform:SetScale(1, 1, 1)
       owner.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
       owner.Physics:SetCollisionCallback( nil )
    end
end
local function football()
    local inst = simple()
    inst:AddComponent("armor")
    inst.components.armor:InitCondition(TUNING.ARMOR_FOOTBALLHAT, 0.95)
    inst:AddComponent("waterproofer")
    inst.components.waterproofer:SetEffectiveness(TUNING.WATERPROOFNESS_SMALL)
    inst.components.equippable:SetOnEquip( football_equip )
    inst.components.equippable:SetOnUnequip( football_unequip )
    return inst
end

    即可戴猪皮帽变巨人，空手攻击力达到500点（空手按Ctrl + 鼠标左键攻击，或按住F反击），防御敌人95%的伤害（只掉5%的血），可撞毁建筑、树、石头。猪皮帽在战斗选项（画着两把剑）下，用1个绳子、1个猪皮制造，制造时须靠近炼金术引擎




一七九.防弹背包（装备背包吸收99%伤害值）

    1.普通背包作盔甲：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("armor")
    inst.components.armor:InitCondition(TUNING.ARMORMARBLE, 0.99)


    2.小猪包作盔甲：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\piggyback.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("armor")
    inst.components.armor:InitCondition(TUNING.ARMORMARBLE, 0.99)


    3.坎普斯背包作盔甲：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\krampus_sack.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("armor")
    inst.components.armor:InitCondition(TUNING.ARMORMARBLE, 0.99)


    4.冰包作盔甲：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\icepack.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("armor")
    inst.components.armor:InitCondition(TUNING.ARMORMARBLE, 0.99)


    5.盔甲永固：用记事本打开游戏目录\data\scripts\components\armor.lua文件，将下列内容：

function Armor:SetCondition(amount)
    self.condition = amount

    替换为：

function Armor:SetCondition(amount)
    self.condition = self.maxcondition

    即可装备背包就拥有盔甲防护作用，且99%吸收伤害值，还无限使用哦




一八０.芦苇吹出催眠曲（在携带的芦苇上按鼠标右键，可催眠怪物）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cutreeds.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容：

    inst:AddTag("flute")
local function HearPanFlute(inst, musician, instrument)
    if inst.components.sleeper then
       inst.components.sleeper:AddSleepiness(10, TUNING.PANFLUTE_SLEEPTIME*1)
    end
end
    inst:AddComponent("tool")
    inst.components.tool:SetAction(ACTIONS.PLAY)
    inst:AddComponent("instrument")
    inst.components.instrument.range = TUNING.PANFLUTE_SLEEPRANGE*2
    inst.components.instrument:SetOnHeardFn(HearPanFlute)

    即可在携带的芦苇上按鼠标右键，可催眠一片怪物。其中*1为催眠时间20秒，想催眠60秒就*3即可。其中*2为催眠范围30格，想扩大至60格就*4即可




一八一.隐身背心（穿小巧背心可隐身）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\sweatervest.lua文件，将下列内容：

local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_body", "armor_sweatervest", "swap_body")
    inst.components.fueled:StartConsuming()
end

local function onunequip(inst, owner) 
    owner.AnimState:ClearOverrideSymbol("swap_body")
    inst.components.fueled:StopConsuming()
end

    替换为：

local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_body", "armor_sweatervest", "swap_body")
    inst.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT*2
    owner:Hide()
    local shadow = GetPlayer().entity:AddDynamicShadow()
    shadow:SetSize( 0, 0 )
end
local function onunequip(inst, owner) 
    owner.AnimState:ClearOverrideSymbol("swap_body")
    owner:Show()
    local shadow = GetPlayer().entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
end

    即可穿上小巧背心隐身，你可以攻击敌人，敌人找不到你，连鸟、兔子都可以直接攻击哦。小巧背心在穿戴选项（画着礼帽）下，用8个犬牙、6个蛛丝制造




一八二.泡泡糖（吃黄油吹个保护泡泡）

    用记事本打开游戏目录\data\scripts\prefabs\butter.lua文件，在inst.components.edible.hungervalue = TUNING.CALORIES_MED的下一行插入以下内容：

    local function proc(inst, eater)
        eater.components.health:SetInvincible(true)
        inst:AddTag("forcefield")
        local fx = SpawnPrefab("forcefieldfx")
        fx.entity:SetParent(eater.entity)
        fx.Transform:SetPosition(0, 0.2, 0)
        local fx_hitanim = function()
            fx.AnimState:PlayAnimation("hit")
            fx.AnimState:PushAnimation("idle_loop")
        end
        fx:ListenForEvent("blocked", fx_hitanim, eater)
        inst.active = true
        eater:DoTaskInTime(60, function()
            fx:RemoveEventCallback("blocked", fx_hitanim, eater)
            fx.kill_fx(fx)
            if inst:IsValid() then
                eater.components.health:SetInvincible(false)
                inst:RemoveTag("forcefield")
                eater:DoTaskInTime(5, function() inst.active = false end)
            end
        end)
    end
local function oneaten(inst, eater)
	proc(inst, eater)
end
       	inst.components.edible:SetOnEatenFn(oneaten)

    即可吃黄油后60秒内身边环绕一个保护泡，敌人无法伤到主角。黄油可以靠杀蝴蝶掉落，也可以用本修改技巧的“栽种尖刺灌木产黄油”得到




一八三.迷魂花阵（戴花环周围出现食人花眼睛保护主角）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

		inst:AddComponent("perishable")
		inst.components.perishable:SetPerishTime(TUNING.PERISH_FAST)
		inst.components.perishable:StartPerishing()
		inst.components.perishable:SetOnPerishFn(generic_perish)
        inst.components.equippable:SetOnEquip( opentop_onequip )

    替换为：

local function flower_equip(inst, owner)
    opentop_onequip(inst, owner)
    inst:AddComponent("minionspawner")
    inst.components.minionspawner.miniontype = "eyeplant"
    inst.components.minionspawner.maxminions = 27
    inst.components.minionspawner.minionspawntime = {min = 0.01, max = 0.01}
    inst.components.minionspawner.numminions = 10
    inst.components.minionspawner.shouldspawn = true
    inst.components.minionspawner:StartNextSpawn()
end
local function flower_unequip(inst, owner)
    onunequip(inst, owner)
    inst.components.minionspawner.shouldspawn = false
    inst.components.minionspawner:KillAllMinions()
    inst:RemoveComponent("minionspawner")
end
    inst.components.equippable:SetOnEquip( flower_equip )
    inst.components.equippable:SetOnUnequip( flower_unequip )


    2.用记事本打开游戏目录\data\scripts\prefabs\eyeplant.lua文件，将下列内容：

            return (guy:HasTag("character") or guy:HasTag("monster") or guy:HasTag("animal") or guy:HasTag("prey") or guy:HasTag("eyeplant") or guy:HasTag("lureplant")) and not checkmaster(guy, inst)

    替换为：

            return (guy:HasTag("character") or guy:HasTag("monster") or guy:HasTag("animal") or guy:HasTag("prey") or guy:HasTag("eyeplant") or guy:HasTag("lureplant")) and not guy:HasTag("player") and not checkmaster(guy, inst)

    即可戴花环周围出现食人花眼睛保护主角，食人花眼睛被敌人打死一个又会再生一个。摘下花环，食人花眼睛立即消失




一八四.家园防御系统（暗夜照明灯自动向靠近的敌人发射炮弹）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\nightlight.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onattack(inst)
    local pos = Vector3(inst.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
    for k,v in pairs(ents) do
        if v.components.health and v.components.combat and not v.components.health:IsDead() then
           if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") then
              inst.components.weapon:LaunchProjectile(inst, v)
              v.components.health:DoDelta(-5000)
              inst.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
              SpawnPrefab("collapse_small").Transform:SetPosition(v.Transform:GetWorldPosition())
              SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
              GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.7, 0.02, .5, 40)
              inst.components.fueled:InitializeFuelLevel(1000)
           end
        end
    end
end
local function turnon(inst)
    inst.components.machine.ison = true
    inst.task = inst:DoPeriodicTask(.5, function() onattack(inst) end)
    inst.components.burnable:IsBurning()
    inst.components.fueled:InitializeFuelLevel(1000)
    end
local function turnoff(inst)
    inst.components.machine.ison = false
    if inst.task then inst.task:Cancel() inst.task = nil end
    inst.components.burnable:Extinguish()
    inst.components.fueled:InitializeFuelLevel(0)
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetProjectile("eye_charge")

    即可对暗夜照明灯按鼠标右键开启家园防御系统，自动向靠近的敌人发射炮弹（不会攻击同伴），再按鼠标右键关闭。建在基地附近，无惧任何敌人。暗影照明灯在魔法选项（画着红骷髅）下，用8个黄金、2个噩梦燃料、1个红宝石建造




一八五.音浪太强（戴兔耳罩周围形成音浪，敌人被弹开）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

    local function earmuffs()
        local inst = simple()
        inst:AddComponent("insulator")
        inst.components.insulator.insulation = TUNING.INSULATION_SMALL
        inst.components.equippable:SetOnEquip( opentop_onequip )
        inst:AddComponent("fueled")
        inst.components.fueled.fueltype = "USAGE"
        inst.components.fueled:InitializeFuelLevel(TUNING.EARMUFF_PERISHTIME)
        inst.components.fueled:SetDepletedFn(generic_perish)
		inst.AnimState:SetRayTestOnBB(true)
		return inst
    end

    替换为：

local colours=
{
    {198/255,43/255,43/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {233/255,208/255,69/255},
    {109/255,50/255,163/255},
    {222/255,126/255,39/255},
}
local function pickup(inst, owner)
    inst.colour_idx = math.random(#colours)
    local light = inst.entity:AddLight() 
    light:SetIntensity(.8)
    light:SetRadius(3)
    light:SetFalloff(1)
    light:Enable(true)
    light:SetColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3])
    local pt = Vector3(owner.Transform:GetWorldPosition())
    local result_offset = FindValidPositionByFan(math.random()*2*PI, 10, 75, function(offset)
          local x,y,z = (pt + offset):Get()
          local ents = TheSim:FindEntities(x,y,z , 1)
          return not next(ents) 
    end)
    local ents2 = TheSim:FindEntities(pt.x,pt.y,pt.z, 8)
    for k,v in pairs(ents2) do
        if v.components.health and not v.components.health:IsDead() and not v:HasTag("player") and not v:HasTag("smallbird") and not v:HasTag("chester") and not v:HasTag("wall") and not v:HasTag("structure") then
           v.Transform:SetPosition((pt + result_offset):Get())
        end
    end
end
local function earmuffs_onequip(inst, owner)
    inst.task = inst:DoPeriodicTask(.033, function() pickup(inst, owner) end)
    GetPlayer().SoundEmitter:PlaySound("dontstarve/music/music_hoedown", "beavermusic")
    opentop_onequip(inst, owner)
end
local function earmuffs_onunequip(inst, owner)
    if inst.task then inst.task:Cancel() inst.task = nil end
    GetPlayer().SoundEmitter:KillSound("beavermusic")
    onunequip(inst, owner)
    inst.Light:Enable(false)
end
local function earmuffs()
    local inst = simple()
    inst:AddComponent("insulator")
    inst.components.insulator.insulation = TUNING.INSULATION_SMALL
    inst.components.equippable:SetOnEquip( earmuffs_onequip )
    inst.components.equippable:SetOnUnequip( earmuffs_onunequip )
    inst.AnimState:SetRayTestOnBB(true)
    return inst
end

    即可在戴兔耳罩时，周围形成音浪，敌人靠近会被弹开，拆杀人蜂窝、偷高鸟蛋毫发无伤。兔耳罩在穿戴选项（画着礼帽）下，用2个兔子、1个树枝制造




一八六.智能围墙（按键盘F11键造一圈大理石围墙，点围墙可开门，5秒自动关门，夜晚启动照明）

    1.用记事本打开游戏目录\data\scripts\prefabs\marblepillar.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function GetStatus(inst, viewer)
    local pt = inst:GetPosition()
    inst:Remove()
    inst:DoTaskInTime(5, function() 
        SpawnPrefab("marblepillar").Transform:SetPosition(pt.x, pt.y, pt.z)
        inst.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end)
end
local function LightsOn(inst)
    inst.Light:Enable(true)
end
local function LightsOff(inst)
    inst.Light:Enable(false)
end
    local light = inst.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:Enable(false)
    light:SetColour(180/255, 195/255, 50/255)
    inst.components.inspectable.getstatus = GetStatus
    inst:ListenForEvent( "daytime", function() LightsOff(inst) end, GetWorld())
    inst:ListenForEvent( "dusktime", function() LightsOn(inst) end, GetWorld())


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_F11, function()
    local player = GetPlayer()
    local pt = Vector3(player.Transform:GetWorldPosition())
        for k = 1, 75 do
            local theta = 1 * 2 * PI
            local radius = 18
            local result_offset = FindValidPositionByFan(theta, radius, 75, function(offset)
                local x,y,z = (pt + offset):Get()
                local ents = TheSim:FindEntities(x,y,z , 1)
                return not next(ents) 
            end)
            if result_offset then
                local tentacle = SpawnPrefab("marblepillar")
                tentacle.Transform:SetPosition((pt + result_offset):Get())
                GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            end
            inst.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        end
end)
TheInput:AddKeyUpHandler(KEY_F12, function()
    local player = GetPlayer()
    local range = 30
    local pos = Vector3(player.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v.prefab == "marblepillar" then
           v:Remove()
        end
    end
    inst.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
end)

    即可在开阔的空地上按键盘F11键，建造一圈大理石围墙，按F12键可消去。对围墙按鼠标左键可开门，5秒后自动关门，夜晚自动启动照明系统，用作自宅围墙或圈养动物都适宜。注意不要拿着镐点围墙，除非你想获得大理石




一八七.高压电避难所（按小键盘加号键筑一圈带高压电的玄武岩墙，按减号键消失）

    1.用记事本打开游戏目录\data\scripts\prefabs\basalt.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnExplode(inst, target)
    if target and not target:HasTag("smallbird") and not target:HasTag("chester") then
       SpawnPrefab("lightning_rod_fx").Transform:SetPosition(inst.Transform:GetWorldPosition())
       SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
       inst.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
       target.components.health:DoDelta(-3000)
    end
    inst:DoTaskInTime(.1, function() inst.components.mine:Reset() end )
end
	inst:AddComponent("mine")
	inst.components.mine:SetRadius(4)
	inst.components.mine:SetAlignment("player")
	inst.components.mine:SetOnExplodeFn(OnExplode)
	inst.components.mine:Reset()


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("catcher")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_KP_PLUS, function()
    local player = GetPlayer()
    local pt = Vector3(player.Transform:GetWorldPosition())
        for k = 1, 50 do
            local theta = 1 * 2 * PI
            local radius = 8
            local result_offset = FindValidPositionByFan(theta, radius, 50, function(offset)
                local x,y,z = (pt + offset):Get()
                local ents = TheSim:FindEntities(x,y,z , 1)
                return not next(ents) 
            end)
            if result_offset then
                local tentacle = SpawnPrefab("basalt_pillar")
                tentacle.Transform:SetPosition((pt + result_offset):Get())
                GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                local fx = SpawnPrefab("lightning_rod_fx")
                local pos = pt + result_offset
                fx.Transform:SetPosition(pos.x, pos.y, pos.z)
            end
            inst.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
        end
end)
TheInput:AddKeyUpHandler(KEY_KP_MINUS, function()
    local player = GetPlayer()
    local range = 15
    local pos = Vector3(player.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v.prefab == "basalt_pillar" then
            SpawnPrefab("lightning_rod_fx").Transform:SetPosition(v.Transform:GetWorldPosition())
            v:Remove()
        end
    end
    inst.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
end)

    即可按小键盘加号键，在主角周围筑起一圈带高压电的玄武岩墙，怪物靠近会被电死，按小键盘减号键自动消失。注意不要离怪物太近时按加号键，会把怪物也圈进来或使墙有缺口。如果使用橙色魔杖或“瑞士手杖”（见本修改技巧），就可以自由出入各个避难所，把家具、农田放在里面，再也不怕狗和巨鹿了




一八八.口袋蜂箱（用噩梦燃料种口袋蜂箱，放在地上飞出杀人蜂攻击敌人）

    用记事本打开游戏目录\data\scripts\prefabs\nightmarefuel.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local killersounds = 
{
    takeoff = "dontstarve/bee/killerbee_takeoff",
    attack = "dontstarve/bee/killerbee_attack",
    buzz = "dontstarve/bee/killerbee_fly_LP",
    hit = "dontstarve/bee/killerbee_hurt",
    death = "dontstarve/bee/killerbee_death",
}
local function OnDeploy (inst, pt)
  if GetPlayer().components.inventory:Has("goldnugget", 500) then 
    GetPlayer().components.inventory:ConsumeByName("goldnugget", 500)
    local box = SpawnPrefab("nightmarefuel")
    box.Transform:SetPosition(pt.x, pt.y, pt.z)
    box.AnimState:SetBank("bee_box")
    box.AnimState:SetBuild("bee_box")
    box.AnimState:PlayAnimation("idle")
    box.AnimState:SetMultColour(255/255,0/255,0/255,1)
    box.Transform:SetScale(0.5, 0.5, 0.5)
    local sound = box.entity:AddSoundEmitter()
    local minimap = box.entity:AddMiniMapEntity()
    minimap:SetIcon( "beebox.png" )
    box.components.inventoryitem:ChangeImageName("beebox")
    box:RemoveComponent("stackable")
    box:RemoveComponent("fuel")
    box:RemoveComponent("deployable")
    box:AddComponent("workable")
    box.components.workable:SetWorkAction(ACTIONS.HAMMER)
    box.components.workable:SetWorkLeft(3)
    box.components.workable:SetOnFinishCallback(function(box)
	 SpawnPrefab("collapse_small").Transform:SetPosition(box.Transform:GetWorldPosition())
	 box.SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
	 box:Remove()
    end )
    box.task = box:DoPeriodicTask(2, function(box)
        box.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        box:DoTaskInTime(1, function() box.AnimState:SetBloomEffectHandle("") end )
        local pos = Vector3(box.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
        for k,v in pairs(ents) do
            if v.components.health and not v.components.health:IsDead() and not v:HasTag("player") then
               if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") or v.prefab == "beefalo" or v.prefab == "bunnyman" or v.prefab == "pigman" or v.prefab == "pigguard" or v.prefab == "merm" or v.prefab == "monkey" or v.prefab == "tallbird" or v.prefab == "walrus" or v.prefab == "little_walrus" or v.prefab == "wasphive" then
                  local pt1 = box:GetPosition()
                  local killerbee = SpawnPrefab("nightmarefuel")
                  killerbee.Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                  killerbee.AnimState:SetBank("bee")
                  killerbee.AnimState:SetBuild("bee_angry_build")
                  killerbee.AnimState:PlayAnimation("idle")
                  killerbee.AnimState:SetRayTestOnBB(true)
                  killerbee.AnimState:SetMultColour(255/255,255/255,255/255,1)
                  killerbee.entity:AddSoundEmitter()
                  killerbee.entity:AddLightWatcher()
                  killerbee.entity:AddDynamicShadow()
                  killerbee.DynamicShadow:SetSize( .8, .5 )
                  killerbee.Transform:SetFourFaced()
                  MakeCharacterPhysics(killerbee, 1, .3)
                  killerbee.Physics:SetCollisionGroup(COLLISION.FLYERS)
                  killerbee.Physics:ClearCollisionMask()
                  killerbee.Physics:CollidesWith(COLLISION.WORLD)
                  killerbee.Physics:CollidesWith(COLLISION.FLYERS)
                  killerbee:AddTag("killerbee")
                  killerbee:AddComponent("locomotor")
                  killerbee.components.locomotor:EnableGroundSpeedMultiplier(false)
                  killerbee.components.locomotor:SetTriggersCreep(false)
                  killerbee:SetStateGraph("SGbee")
                  killerbee:AddComponent("health")
                  killerbee.components.health:SetMaxHealth(200)
                  killerbee:AddComponent("combat")
                  killerbee.components.combat:SetTarget(v)
                  killerbee.components.combat:SetDefaultDamage(20)
                  killerbee.components.combat:SetAttackPeriod(0.1)
                  killerbee.components.combat.hiteffectsymbol = "body"
                  killerbee.components.combat:SetRetargetFunction(1, function(killerbee)
                      if not killerbee.components.health:IsDead() then
                         return FindEntity(box, 30, function(guy)
                             if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
                                return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy.prefab == "beefalo" or guy.prefab == "bunnyman" or guy.prefab == "pigman" or guy.prefab == "pigguard" or guy.prefab == "merm" or guy.prefab == "monkey" or guy.prefab == "tallbird" or guy.prefab == "walrus" or guy.prefab == "little_walrus" or guy.prefab == "wasphive"
                             end
                         end)
                      end
                  end )
                  local killerbrain = require("brains/killerbeebrain")
                  killerbee:SetBrain(killerbrain)
                  killerbee.sounds = killersounds
                  killerbee:AddComponent("knownlocations")
                  killerbee:ListenForEvent("attacked", function(killerbee, data) killerbee.components.combat:SetTarget(data.attacker) end )
                  killerbee:RemoveComponent("stackable")
                  killerbee:RemoveComponent("fuel")
                  killerbee:RemoveComponent("deployable")
                  killerbee:RemoveComponent("inventoryitem")
                  killerbee:DoTaskInTime(30, function() killerbee:Remove() end )
                  v:ListenForEvent("death", function() killerbee:Remove() end )
               end
            end
        end
    end )
    box.components.inventoryitem:SetOnPutInInventoryFn(function(box)
        box:RemoveTag("doings")
        if box.task then box.task:Cancel() box.task = nil end
        local pos = Vector3(box.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
        for k,v in pairs(ents) do
            if v:HasTag("killerbee") then
               v:Remove()
            end
        end
    end )
    box.components.inventoryitem:SetOnDroppedFn(function(box)
        box:AddTag("doings")
        box.task = box:DoPeriodicTask(2, function(box)
            box.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            box:DoTaskInTime(1, function() box.AnimState:SetBloomEffectHandle("") end )
            local pos = Vector3(box.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
            for k,v in pairs(ents) do
                if v.components.health and not v.components.health:IsDead() and not v:HasTag("player") then
                   if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") or v.prefab == "beefalo" or v.prefab == "bunnyman" or v.prefab == "pigman" or v.prefab == "pigguard" or v.prefab == "merm" or v.prefab == "monkey" or v.prefab == "tallbird" or v.prefab == "walrus" or v.prefab == "little_walrus" or v.prefab == "wasphive" then
                      local pt1 = box:GetPosition()
                      local killerbee = SpawnPrefab("nightmarefuel")
                      killerbee.Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                      killerbee.AnimState:SetBank("bee")
                      killerbee.AnimState:SetBuild("bee_angry_build")
                      killerbee.AnimState:PlayAnimation("idle")
                      killerbee.AnimState:SetRayTestOnBB(true)
                      killerbee.AnimState:SetMultColour(255/255,255/255,255/255,1)
                      killerbee.entity:AddSoundEmitter()
                      killerbee.entity:AddLightWatcher()
                      killerbee.entity:AddDynamicShadow()
                      killerbee.DynamicShadow:SetSize( .8, .5 )
                      killerbee.Transform:SetFourFaced()
                      MakeCharacterPhysics(killerbee, 1, .3)
                      killerbee.Physics:SetCollisionGroup(COLLISION.FLYERS)
                      killerbee.Physics:ClearCollisionMask()
                      killerbee.Physics:CollidesWith(COLLISION.WORLD)
                      killerbee.Physics:CollidesWith(COLLISION.FLYERS)
                      killerbee:AddTag("killerbee")
                      killerbee:AddComponent("locomotor")
                      killerbee.components.locomotor:EnableGroundSpeedMultiplier(false)
                      killerbee.components.locomotor:SetTriggersCreep(false)
                      killerbee:SetStateGraph("SGbee")
                      killerbee:AddComponent("health")
                      killerbee.components.health:SetMaxHealth(200)
                      killerbee:AddComponent("combat")
                      killerbee.components.combat:SetTarget(v)
                      killerbee.components.combat:SetDefaultDamage(20)
                      killerbee.components.combat:SetAttackPeriod(0.1)
                      killerbee.components.combat.hiteffectsymbol = "body"
                      killerbee.components.combat:SetRetargetFunction(1, function(killerbee)
                          if not killerbee.components.health:IsDead() then
                             return FindEntity(box, 30, function(guy)
                                 if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
                                    return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy.prefab == "beefalo" or guy.prefab == "bunnyman" or guy.prefab == "pigman" or guy.prefab == "pigguard" or guy.prefab == "merm" or guy.prefab == "monkey" or guy.prefab == "tallbird" or guy.prefab == "walrus" or guy.prefab == "little_walrus" or guy.prefab == "wasphive"
                                 end
                             end)
                          end
                      end )
                      local killerbrain = require("brains/killerbeebrain")
                      killerbee:SetBrain(killerbrain)
                      killerbee.sounds = killersounds
                      killerbee:AddComponent("knownlocations")
                      killerbee:ListenForEvent("attacked", function(killerbee, data) killerbee.components.combat:SetTarget(data.attacker) end )
                      killerbee:RemoveComponent("stackable")
                      killerbee:RemoveComponent("fuel")
                      killerbee:RemoveComponent("deployable")
                      killerbee:RemoveComponent("inventoryitem")
                      killerbee:DoTaskInTime(30, function() killerbee:Remove() end )
                      v:ListenForEvent("death", function() killerbee:Remove() end )
                   end
                end
            end
        end )
    end )
    box:AddTag("doings")
    box:AddTag("boxs")
  end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("boxs") then
        data.boxs = true
    end
    if inst:HasTag("doings") then
        data.doings = true
    end
    if inst:HasTag("killerbee") then
        data.killerbee = true
    end
end
local function onload(inst, data)
  if data and data.boxs then
     inst.AnimState:SetBank("bee_box")
     inst.AnimState:SetBuild("bee_box")
     inst.AnimState:PlayAnimation("idle")
     inst.AnimState:SetMultColour(255/255,0/255,0/255,1)
     inst.Transform:SetScale(0.5, 0.5, 0.5)
     local sound = inst.entity:AddSoundEmitter()
     local minimap = inst.entity:AddMiniMapEntity()
     minimap:SetIcon( "beebox.png" )
     inst.components.inventoryitem:ChangeImageName("beebox")
     inst:RemoveComponent("stackable")
     inst:RemoveComponent("fuel")
     inst:RemoveComponent("deployable")
     inst:AddComponent("workable")
     inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
     inst.components.workable:SetWorkLeft(3)
     inst.components.workable:SetOnFinishCallback(function(inst)
	  SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
	  inst.SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
	  inst:Remove()
     end )
     inst.components.inventoryitem:SetOnPutInInventoryFn(function(inst)
         inst:RemoveTag("doings")
         if inst.task then inst.task:Cancel() inst.task = nil end
         local pos = Vector3(inst.Transform:GetWorldPosition())
         local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
         for k,v in pairs(ents) do
             if v:HasTag("killerbee") then
                v:Remove()
             end
         end
     end )
     inst.components.inventoryitem:SetOnDroppedFn(function(inst)
         inst:AddTag("doings")
         inst.task = inst:DoPeriodicTask(2, function(inst)
             inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
             inst:DoTaskInTime(1, function() inst.AnimState:SetBloomEffectHandle("") end )
             local pos = Vector3(inst.Transform:GetWorldPosition())
             local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
             for k,v in pairs(ents) do
                 if v.components.health and not v.components.health:IsDead() and not v:HasTag("player") then
                    if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") or v.prefab == "beefalo" or v.prefab == "bunnyman" or v.prefab == "pigman" or v.prefab == "pigguard" or v.prefab == "merm" or v.prefab == "monkey" or v.prefab == "tallbird" or v.prefab == "walrus" or v.prefab == "little_walrus" or v.prefab == "wasphive" then
                       local pt1 = inst:GetPosition()
                       local killerbee = SpawnPrefab("nightmarefuel")
                       killerbee.Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                       killerbee.AnimState:SetBank("bee")
                       killerbee.AnimState:SetBuild("bee_angry_build")
                       killerbee.AnimState:PlayAnimation("idle")
                       killerbee.AnimState:SetRayTestOnBB(true)
                       killerbee.AnimState:SetMultColour(255/255,255/255,255/255,1)
                       killerbee.entity:AddSoundEmitter()
                       killerbee.entity:AddLightWatcher()
                       killerbee.entity:AddDynamicShadow()
                       killerbee.DynamicShadow:SetSize( .8, .5 )
                       killerbee.Transform:SetFourFaced()
                       MakeCharacterPhysics(killerbee, 1, .3)
                       killerbee.Physics:SetCollisionGroup(COLLISION.FLYERS)
                       killerbee.Physics:ClearCollisionMask()
                       killerbee.Physics:CollidesWith(COLLISION.WORLD)
                       killerbee.Physics:CollidesWith(COLLISION.FLYERS)
                       killerbee:AddTag("killerbee")
                       killerbee:AddComponent("locomotor")
                       killerbee.components.locomotor:EnableGroundSpeedMultiplier(false)
                       killerbee.components.locomotor:SetTriggersCreep(false)
                       killerbee:SetStateGraph("SGbee")
                       killerbee:AddComponent("health")
                       killerbee.components.health:SetMaxHealth(200)
                       killerbee:AddComponent("combat")
                       killerbee.components.combat:SetTarget(v)
                       killerbee.components.combat:SetDefaultDamage(20)
                       killerbee.components.combat:SetAttackPeriod(0.1)
                       killerbee.components.combat.hiteffectsymbol = "body"
                       killerbee.components.combat:SetRetargetFunction(1, function(killerbee)
                           if not killerbee.components.health:IsDead() then
                              return FindEntity(inst, 30, function(guy)
                                  if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
                                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy.prefab == "beefalo" or guy.prefab == "bunnyman" or guy.prefab == "pigman" or guy.prefab == "pigguard" or guy.prefab == "merm" or guy.prefab == "monkey" or guy.prefab == "tallbird" or guy.prefab == "walrus" or guy.prefab == "little_walrus" or guy.prefab == "wasphive"
                                  end
                              end)
                           end
                       end )
                       local killerbrain = require("brains/killerbeebrain")
                       killerbee:SetBrain(killerbrain)
                       killerbee.sounds = killersounds
                       killerbee:AddComponent("knownlocations")
                       killerbee:ListenForEvent("attacked", function(killerbee, data) killerbee.components.combat:SetTarget(data.attacker) end )
                       killerbee:RemoveComponent("stackable")
                       killerbee:RemoveComponent("fuel")
                       killerbee:RemoveComponent("deployable")
                       killerbee:RemoveComponent("inventoryitem")
                       killerbee:DoTaskInTime(30, function() killerbee:Remove() end )
                       v:ListenForEvent("death", function() killerbee:Remove() end )
                    end
                 end
             end
         end )
     end )
     inst:AddTag("boxs")
  end
  if data and data.doings then
     inst.task = inst:DoPeriodicTask(2, function(inst)
         inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
         inst:DoTaskInTime(1, function() inst.AnimState:SetBloomEffectHandle("") end )
         local pos = Vector3(inst.Transform:GetWorldPosition())
         local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
         for k,v in pairs(ents) do
             if v.components.health and not v.components.health:IsDead() and not v:HasTag("player") then
                if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v:HasTag("monster") or v.prefab == "beefalo" or v.prefab == "bunnyman" or v.prefab == "pigman" or v.prefab == "pigguard" or v.prefab == "merm" or v.prefab == "monkey" or v.prefab == "tallbird" or v.prefab == "walrus" or v.prefab == "little_walrus" or v.prefab == "wasphive" then
                   local pt1 = inst:GetPosition()
                   local killerbee = SpawnPrefab("nightmarefuel")
                   killerbee.Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                   killerbee.AnimState:SetBank("bee")
                   killerbee.AnimState:SetBuild("bee_angry_build")
                   killerbee.AnimState:PlayAnimation("idle")
                   killerbee.AnimState:SetRayTestOnBB(true)
                   killerbee.AnimState:SetMultColour(255/255,255/255,255/255,1)
                   killerbee.entity:AddSoundEmitter()
                   killerbee.entity:AddLightWatcher()
                   killerbee.entity:AddDynamicShadow()
                   killerbee.DynamicShadow:SetSize( .8, .5 )
                   killerbee.Transform:SetFourFaced()
                   MakeCharacterPhysics(killerbee, 1, .3)
                   killerbee.Physics:SetCollisionGroup(COLLISION.FLYERS)
                   killerbee.Physics:ClearCollisionMask()
                   killerbee.Physics:CollidesWith(COLLISION.WORLD)
                   killerbee.Physics:CollidesWith(COLLISION.FLYERS)
                   killerbee:AddTag("killerbee")
                   killerbee:AddComponent("locomotor")
                   killerbee.components.locomotor:EnableGroundSpeedMultiplier(false)
                   killerbee.components.locomotor:SetTriggersCreep(false)
                   killerbee:SetStateGraph("SGbee")
                   killerbee:AddComponent("health")
                   killerbee.components.health:SetMaxHealth(200)
                   killerbee:AddComponent("combat")
                   killerbee.components.combat:SetTarget(v)
                   killerbee.components.combat:SetDefaultDamage(20)
                   killerbee.components.combat:SetAttackPeriod(0.1)
                   killerbee.components.combat.hiteffectsymbol = "body"
                   killerbee.components.combat:SetRetargetFunction(1, function(killerbee)
                       if not killerbee.components.health:IsDead() then
                          return FindEntity(inst, 30, function(guy)
                              if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("player") then
                                 return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy.prefab == "beefalo" or guy.prefab == "bunnyman" or guy.prefab == "pigman" or guy.prefab == "pigguard" or guy.prefab == "merm" or guy.prefab == "monkey" or guy.prefab == "tallbird" or guy.prefab == "walrus" or guy.prefab == "little_walrus" or guy.prefab == "wasphive"
                              end
                          end)
                       end
                   end )
                   local killerbrain = require("brains/killerbeebrain")
                   killerbee:SetBrain(killerbrain)
                   killerbee.sounds = killersounds
                   killerbee:AddComponent("knownlocations")
                   killerbee:ListenForEvent("attacked", function(killerbee, data) killerbee.components.combat:SetTarget(data.attacker) end )
                   killerbee:RemoveComponent("stackable")
                   killerbee:RemoveComponent("fuel")
                   killerbee:RemoveComponent("deployable")
                   killerbee:RemoveComponent("inventoryitem")
                   killerbee:DoTaskInTime(30, function() killerbee:Remove() end )
                   v:ListenForEvent("death", function() killerbee:Remove() end )
                end
             end
         end
     end )
     inst:AddTag("doings")
  end
  if data and data.killerbee then
     inst:Remove()
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在攒够500个黄金时，用噩梦燃料种口袋蜂箱，将消费500个黄金，身上黄金数不足时不会种出来。蜂箱放在地上时，如果周围有敌人，会不断飞出杀人蜂攻击敌人，直至敌人死亡为止，且杀人蜂不会攻击主角及同伴（不包括猪人、兔人）。鼠标左键点口袋蜂箱，可将其放入物品栏，显示为蜂箱的图标，所有飞出的杀人蜂将消失。口袋蜂箱类似于导弹防御系统，既可以帮助主角作战，也可以保护基地，无论周围有多少敌人，都会派出足够数量的杀人蜂去攻击，因此只种一个即可，否则对电脑硬件要求较高。可以通过小地图查询口袋蜂箱的位置，显示为蜂箱的图标。不想要口袋蜂箱时，用锤子砸掉即可




一八九.避魔圈（按键盘F9键在地上画避魔圈，任何生物靠近都将被弹开，再按F9键取消）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_F9, function()
    if not inst:HasTag("havelifebuoy") then
       inst:AddTag("havelifebuoy")
       inst.components.locomotor:Stop()
       inst.AnimState:PlayAnimation("give")
       inst.components.health:DoDelta(-10)
       GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.7, 0.02, .5, 40)
       GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
       SpawnPrefab("groundpoundring_fx").Transform:SetPosition(inst.Transform:GetWorldPosition())
       SpawnPrefab("tauntfire_fx").Transform:SetPosition(inst.Transform:GetWorldPosition())
       inst:DoTaskInTime(0.5, function() 
           local pt = inst:GetPosition()
           local lifebuoy = SpawnPrefab("firesuppressor_placer")
           lifebuoy.Transform:SetPosition(pt.x, 0, pt.z)
           lifebuoy.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
           lifebuoy.AnimState:SetLayer( LAYER_BACKGROUND )
           lifebuoy.AnimState:SetSortOrder( 1 )
           lifebuoy.Transform:SetScale(1.1, 1.1, 1.1)
           lifebuoy.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           lifebuoy.AnimState:SetMultColour(255/255,0/255,0/255,1)
           lifebuoy.persists = false
           lifebuoy:DoPeriodicTask(0.3, function()
               local pos = Vector3(lifebuoy.Transform:GetWorldPosition())
               local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
               for k,v in pairs(ents) do
                   if v.components.health and v.components.combat and not v.components.health:IsDead() and not v:HasTag("player") and not v:HasTag("wall") then
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                      SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
                      v.components.health:DoDelta(-200)
                      local pt1 = lifebuoy:GetPosition()
                      local pt2 = v:GetPosition()
                      v.Transform:SetPosition((pt2.x-pt1.x)*1.5+pt2.x, 0, (pt2.z-pt1.z)*1.5+pt2.z)
                   end
               end
           end )
           lifebuoy:AddTag("NOCLICK")
           lifebuoy:AddTag("lifebuoy")
       end )
    else
       inst:RemoveTag("havelifebuoy")
       inst.components.locomotor:Stop()
       inst.AnimState:PlayAnimation("give")
       GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
       SpawnPrefab("tauntfire_fx").Transform:SetPosition(inst.Transform:GetWorldPosition())
       local pos = Vector3(inst.Transform:GetWorldPosition())
       local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
       for k,v in pairs(ents) do
           if v:HasTag("lifebuoy") then
              v:Remove()
           end
       end
    end
end )

    即可按键盘F9键在地上画避魔圈，主角站在圈中，任何生物靠近都将被弹开，并杀伤其生命值，再次按键盘F9键收掉避魔圈。避魔圈是一种血魔法，每画一次，主角将消耗10点生命，在生命值较低时，请勿施法




一九０.近卫军（主角受攻击自动出现机械护卫，不要与“菩萨低眉”一同修改）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst.Transform:SetFourFaced()的下一行插入以下内容：

local function OnAttacked(inst, data)
    local spawn = ""
    if math.random()<.1 then
        spawn = "rook_nightmare"
    elseif math.random()<.5 then
        spawn = "bishop_nightmare"
    else
        spawn = "knight_nightmare"
    end
    SpawnAt("maxwell_smoke",inst)
    local it = SpawnAt(spawn,inst)
    if it.components.follower then
       it.components.follower:SetLeader(GetPlayer())
    end
end
    inst:ListenForEvent("attacked", OnAttacked)

    即可在主角受到攻击时，自动产生机械兵（共三种）保护主角。如果主角强制攻击（按Ctrl + 鼠标左键）其中一个机械兵，则其他机械兵会帮主角清理门户




一九一.火炬召唤亡灵（阿比盖尔）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\torch.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function cancreatelight(staff, caster, target, pos)
    local ground = GetWorld()
    if ground and pos then
        local tile = ground.Map:GetTileAtPoint(pos.x, pos.y, pos.z)
        return tile ~= GROUND.IMPASSIBLE and tile < GROUND.UNDERGROUND
    end
    return false
end
local function createlight(staff, target, pos)
    local light = SpawnPrefab("abigail")
    light.Transform:SetPosition(pos.x, pos.y, pos.z)
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false

    即可在装备火炬时，在空地上按鼠标右键召唤亡灵，亡灵会保护你。想取消亡灵，召唤两个以上（一个追不上它），对其中一个按ctrl + 鼠标左键，即可取消全部亡灵。不要与“我的小伙伴”一同修改




一九二.毒龙兵团（装备暗影剑召唤坎普斯士兵）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\nightsword.lua文件，将inst.components.equippable.dapperness = TUNING.CRAZINESS_MED替换为以下内容：

local function cancreatelight(staff, caster, target, pos)
    local ground = GetWorld()
    if ground and pos then
        local tile = ground.Map:GetTileAtPoint(pos.x, pos.y, pos.z)
        return tile ~= GROUND.IMPASSIBLE and tile < GROUND.UNDERGROUND
    end
    return false
end
local function createlight(staff, target, pos)
    local light = SpawnPrefab("krampus")
    light.Transform:SetPosition(pos.x, pos.y, pos.z)
    local caster = staff.components.inventoryitem.owner
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false


    2.用记事本打开游戏目录\data\scripts\prefabs\krampus.lua文件，将下列内容：

local function OnAttacked(inst, data)
    inst.components.combat:SetTarget(data.attacker)
    --inst.components.combat:ShareTarget(data.attacker, SEE_DIST, function(dude) return dude:HasTag("hound") and not dude.components.health:IsDead() end, 5)
end

    替换为：

local function Retarget(inst)
    local newtarget = FindEntity(inst, 20, function(guy)
            return  guy.components.combat and 
                    inst.components.combat:CanTarget(guy) and
                    (guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy)
    end)
    return newtarget
end
local function OnAttacked(inst, data)
    local attacker = data.attacker
    if attacker and attacker:HasTag("player") then
        inst.components.health:SetVal(0)
    else
        inst.components.combat:SetTarget(attacker)
    end
end


    3.将local brain = require "brains/krampusbrain"替换为local brain = require "brains/abigailbrain"


    4.将下列内容：

    inst:AddComponent("sleeper")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(TUNING.KRAMPUS_HEALTH)
    
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "krampus_torso"
    inst.components.combat:SetDefaultDamage(TUNING.KRAMPUS_DAMAGE)
    inst.components.combat:SetAttackPeriod(TUNING.KRAMPUS_ATTACK_PERIOD)

    替换为：

    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(TUNING.KRAMPUS_HEALTH*10)
    inst:AddComponent("follower")
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "krampus_torso"
    inst.components.combat:SetDefaultDamage(TUNING.KRAMPUS_DAMAGE*10)
    inst.components.combat:SetAttackPeriod(TUNING.KRAMPUS_ATTACK_PERIOD*.1)
    inst.components.combat:SetRetargetFunction(3, Retarget)
    inst.AnimState:Hide("SACK")
    inst.AnimState:Show("ARM")

    即可装备暗影剑时，在空地上按鼠标右键召唤坎普斯士兵。坎普斯经过了深度改造，不会偷东西，只会为主角浴血奋战。不想要坎普斯跟随时，杀死它即可，它虽然强悍，但主角对它一击毙命




一九三.我的小伙伴（用火炬召唤其他主角一起工作战斗）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\torch.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function cancreatelight(staff, caster, target, pos)
    local ground = GetWorld()
    if ground and pos then
        local tile = ground.Map:GetTileAtPoint(pos.x, pos.y, pos.z)
        return tile ~= GROUND.IMPASSIBLE and tile < GROUND.UNDERGROUND
    end
    return false
end
local function createlight(staff, target, pos)
    local light = SpawnPrefab("shadowwaxwell")
    light.Transform:SetPosition(pos.x, pos.y, pos.z)
    local caster = staff.components.inventoryitem.owner
    light.components.follower:SetLeader(caster)
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createlight)
    inst.components.spellcaster:SetSpellTestFn(cancreatelight)
    inst.components.spellcaster.canuseonpoint = true
    inst.components.spellcaster.canusefrominventory = false


    2.用记事本打开游戏目录\data\scripts\prefabs\shadowwaxwell.lua文件，将下列内容：

	anim:SetBuild("waxwell_shadow_mod")
	anim:PlayAnimation("idle")

    anim:Hide("ARM_carry")
    anim:Hide("hat")
    anim:Hide("hat_hair")

    inst:AddTag("scarytoprey")
    inst:AddTag("NOCLICK")

	inst:AddComponent("colourtweener")
	inst.components.colourtweener:StartTween({0,0,0,.5}, 0)

	inst:AddComponent("locomotor")
    inst.components.locomotor:SetSlowMultiplier( 0.6 )
    inst.components.locomotor.pathcaps = { ignorecreep = true }
    inst.components.locomotor.runspeed = TUNING.SHADOWWAXWELL_SPEED

    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "torso"
    -- inst.components.combat:SetRetargetFunction(1, Retarget)
    inst.components.combat:SetKeepTargetFunction(KeepTarget)
    inst.components.combat:SetAttackPeriod(TUNING.SHADOWWAXWELL_ATTACK_PERIOD)
    inst.components.combat:SetRange(2, 3)
    inst.components.combat:SetDefaultDamage(TUNING.SHADOWWAXWELL_DAMAGE)

    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(TUNING.SHADOWWAXWELL_LIFE)
    inst.components.health.nofadeout = true
    inst:ListenForEvent("death", ondeath)

	inst:AddComponent("inventory")
    inst.components.inventory.dropondeath = false

    inst:AddComponent("sanityaura")
    inst.components.sanityaura.penalty = TUNING.SHADOWWAXWELL_SANITY_PENALTY

    替换为：

	local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
	inst.animname = names[math.random(#names)]
	anim:SetBuild(inst.animname)
	anim:PlayAnimation("idle")
    anim:Hide("ARM_carry")
    anim:Hide("hat")
    anim:Hide("hat_hair")
	inst:AddComponent("locomotor")
    inst.components.locomotor.pathcaps = { ignorecreep = true }
    inst.components.locomotor.runspeed = TUNING.SHADOWWAXWELL_SPEED*2
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "torso"
    inst.components.combat:SetKeepTargetFunction(KeepTarget)
    inst.components.combat:SetAttackPeriod(TUNING.SHADOWWAXWELL_ATTACK_PERIOD*.1)
    inst.components.combat:SetRange(2, 3)
    inst.components.combat:SetDefaultDamage(TUNING.SHADOWWAXWELL_DAMAGE*10)
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(TUNING.SHADOWWAXWELL_LIFE*10)
    inst.components.health.nofadeout = true
	inst:AddComponent("inventory")
    inst.components.inventory.dropondeath = false

    即可装备火炬在空地上点鼠标右键，随机召唤其他主角，一起砍树、开矿、战斗。不想要伙伴时，对其按Ctrl + 鼠标左键杀掉即可，不杀掉几天后其也会自然死去，想要就再召唤吧。不要与“火炬召唤亡灵”一同修改，使用麦斯威尔作主角时不要修改本条




一九四.宠物双子星（用齿轮种宠物狗，用海象牙种宠物海狸）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\gears.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local dog = SpawnPrefab("teenbird")
    dog.Transform:SetPosition(pt.x, pt.y, pt.z)
    dog.AnimState:SetBank("hound")
    dog.AnimState:SetBuild("hound_ice")
    dog:SetStateGraph("SGhound")
    dog.components.follower:SetLeader(GetPlayer())
    dog.Transform:SetScale(0.6, 0.6, 0.6)
    dog:AddTag("dogs")
    dog.components.health:SetMaxHealth(10000)
    dog.components.locomotor.runspeed = 20
    dog:RemoveComponent("growable")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\scripts\prefabs\walrus_tusk.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local beaver = SpawnPrefab("teenbird")
    beaver.Transform:SetPosition(pt.x, pt.y, pt.z)
    beaver.AnimState:SetBank("werebeaver")
    beaver.AnimState:SetBuild("werebeaver_build")
    beaver:SetStateGraph("SGwerebeaver")
    beaver.components.follower:SetLeader(GetPlayer())
    beaver.Transform:SetScale(0.6, 0.6, 0.6)
    beaver:AddTag("beavers")
    beaver.components.eater:SetVegetarian()
    beaver.components.health:SetMaxHealth(10000)
    beaver.components.locomotor.runspeed = 20
    beaver:RemoveComponent("growable")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    3.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\smallbird.lua文件，在Asset("ANIM", "anim/smallbird_basic.zip"),的下一行插入以下内容：

    Asset("ANIM", "anim/werebeaver_build.zip"),
    Asset("ANIM", "anim/werebeaver_basic.zip"),


    4.在inst:AddTag("teenbird")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("dogs") then
        data.dogs = true
    end
    if inst:HasTag("beavers") then
        data.beavers = true
    end
end
local function onload(inst, data)
    if data.dogs then
       inst.AnimState:SetBank("hound")
       inst.AnimState:SetBuild("hound_ice")
       inst:SetStateGraph("SGhound")
       inst.components.follower:SetLeader(GetPlayer())
       inst.Transform:SetScale(0.6, 0.6, 0.6)
       inst.components.health:SetMaxHealth(10000)
       inst.components.locomotor.runspeed = 20
       inst:RemoveComponent("growable")
       inst:AddTag("dogs")
    end
    if data.beavers then
       inst.AnimState:SetBank("werebeaver")
       inst.AnimState:SetBuild("werebeaver_build")
       inst:SetStateGraph("SGwerebeaver")
       inst.components.follower:SetLeader(GetPlayer())
       inst.Transform:SetScale(0.6, 0.6, 0.6)
       inst.components.health:SetMaxHealth(10000)
       inst.components.eater:SetVegetarian()
       inst.components.locomotor.runspeed = 20
       inst:RemoveComponent("growable")
       inst:AddTag("beavers")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用齿轮种宠物狗，用海象牙种宠物海狸，它们可以陪伴你，帮你打怪，是活力十足的小淘气。宠物需要喂食，不然会咬你（轻轻的），宠物狗喜欢吃肉，宠物海狸喜欢吃蔬菜，通过喂食可以为它们补血。最好在家的角落里扔一些食物，让它们随饿随吃




一九五.口袋猴子（用蜂蜜绷带种猴子，帮你活捉兔子、鸟、鼹鼠等小动物）

    用记事本打开游戏目录\data\scripts\prefabs\bandage.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local helper = SpawnPrefab("bandage")
    helper.Transform:SetPosition(pt.x, pt.y, pt.z)
    helper.AnimState:SetBank("kiki")
    helper.AnimState:SetBuild("kiki_basic")
    helper.AnimState:PlayAnimation("idle_loop", true)
    helper.Transform:SetFourFaced()
    helper.Transform:SetScale(0.8, 0.8, 0.8)
    helper:RemoveComponent("stackable")
    helper:RemoveComponent("healer")
    local sound = helper.entity:AddSoundEmitter()	
    helper.soundtype = ""
    local brain = require "brains/abigailbrain"
    helper:SetBrain(brain)
    helper:AddComponent("locomotor")
    helper.components.locomotor:SetTriggersCreep(false)
    helper.components.locomotor.pathcaps = { ignorecreep = false }
    helper.components.locomotor.walkspeed = 12
    helper:SetStateGraph("SGmonkey")
    helper:AddComponent("follower")
    GetPlayer().components.leader:AddFollower(helper)
    helper:AddComponent("combat")
    helper.components.combat.hiteffectsymbol = "torso"
    helper.components.combat:SetRetargetFunction(1, function(helper)
        if not helper.components.health:IsDead() then
            return FindEntity(helper, 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.prefab == "crow" or guy.prefab == "robin" or guy.prefab == "robin_winter" or guy.prefab == "bee" or guy.prefab == "killerbee" or guy.prefab == "rabbit" or guy.prefab == "butterfly" or guy.prefab == "mole"
                end
            end)
        end
    end )
    helper.components.combat:SetKeepTargetFunction(function(helper, target) return target and target:IsValid() end )
    helper.components.combat:SetAttackPeriod(1)
    helper.components.combat:SetRange(1, 2)
    helper.components.combat:SetDefaultDamage(1)
    helper.components.combat.onhitotherfn = function(helper, other, damage)
        if other.prefab == "crow" then
           local prey = SpawnPrefab("crow")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "robin" then
           local prey = SpawnPrefab("robin")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "robin_winter" then
           local prey = SpawnPrefab("robin_winter")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "bee" then
           local prey = SpawnPrefab("bee")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "killerbee" then
           local prey = SpawnPrefab("killerbee")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "rabbit" then
           local prey = SpawnPrefab("rabbit")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "butterfly" then
           local prey = SpawnPrefab("butterfly")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "mole" then
           local prey = SpawnPrefab("mole")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        other:Remove()
    end
    helper:AddComponent("health")
    helper.components.health:SetMaxHealth(1000)
    helper.components.health:SetInvincible(true)
    helper.components.health.nofadeout = true
    helper.components.inventoryitem:ChangeImageName("cave_banana")
    helper:AddComponent( "playerprox" )
    helper.components.playerprox:SetDist(3,5)
    helper.components.playerprox:SetOnPlayerNear(function(helper) helper.components.locomotor.walkspeed = 5 end )
    helper.components.playerprox:SetOnPlayerFar(function(helper) helper.components.locomotor.walkspeed = 12 end )
    helper:AddTag("helpers")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

local function onsave(inst, data)
    if inst:HasTag("helpers") then
        data.helpers = true
    end
end
local function onload(inst, data)
  if data and data.helpers then
    inst.AnimState:SetBank("kiki")
    inst.AnimState:SetBuild("kiki_basic")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.Transform:SetFourFaced()
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("healer")
    local sound = inst.entity:AddSoundEmitter()	
    inst.soundtype = ""
    local brain = require "brains/abigailbrain"
    inst:SetBrain(brain)
    inst:AddComponent("locomotor")
    inst.components.locomotor:SetTriggersCreep(false)
    inst.components.locomotor.pathcaps = { ignorecreep = false }
    inst.components.locomotor.walkspeed = 12
    inst:SetStateGraph("SGmonkey")
    inst:AddComponent("follower")
    GetPlayer().components.leader:AddFollower(inst)
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "torso"
    inst.components.combat:SetRetargetFunction(1, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.prefab == "crow" or guy.prefab == "robin" or guy.prefab == "robin_winter" or guy.prefab == "bee" or guy.prefab == "killerbee" or guy.prefab == "rabbit" or guy.prefab == "butterfly" or guy.prefab == "mole"
                end
            end)
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst.components.combat:SetAttackPeriod(1)
    inst.components.combat:SetRange(1, 2)
    inst.components.combat:SetDefaultDamage(1)
    inst.components.combat.onhitotherfn = function(inst, other, damage)
        if other.prefab == "crow" then
           local prey = SpawnPrefab("crow")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "robin" then
           local prey = SpawnPrefab("robin")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "robin_winter" then
           local prey = SpawnPrefab("robin_winter")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "bee" then
           local prey = SpawnPrefab("bee")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "killerbee" then
           local prey = SpawnPrefab("killerbee")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "rabbit" then
           local prey = SpawnPrefab("rabbit")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "butterfly" then
           local prey = SpawnPrefab("butterfly")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        if other.prefab == "mole" then
           local prey = SpawnPrefab("mole")
           GetPlayer().components.inventory:GiveItem(prey)
        end
        other:Remove()
    end
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(1000)
    inst.components.health:SetInvincible(true)
    inst.components.health.nofadeout = true
    inst.components.inventoryitem:ChangeImageName("cave_banana")
    inst:AddComponent( "playerprox" )
    inst.components.playerprox:SetDist(3,5)
    inst.components.playerprox:SetOnPlayerNear(function(inst) inst.components.locomotor.walkspeed = 5 end )
    inst.components.playerprox:SetOnPlayerFar(function(inst) inst.components.locomotor.walkspeed = 12 end )
    inst:AddTag("helpers")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜂蜜绷带种猴子，鼠标左键点猴子，可将其放入物品栏（显示为香蕉的图标）。在附近有兔子、鸟、蜜蜂、杀人蜂、蝴蝶、鼹鼠等小动物时，可将猴子放在地上，会为你捕捉小动物，如果同时修改了“网上宠宠店”，就可以将捉到的小动物卖掉换黄金。如果不想要猴子了，在物品栏中对其按鼠标右键即可。蜂蜜绷带在生存选项（画着绳套）下，用1张纸、2个蜂蜜制造




一九六.口袋浣熊（用纸种口袋浣熊，捕猎、战斗好帮手，喂鱼变身超级浣熊）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\papyrus.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local coon = SpawnPrefab("papyrus")
    coon.Transform:SetPosition(pt.x, pt.y, pt.z)
    coon.AnimState:SetBank("catcoon")
    coon.AnimState:SetBuild("catcoon_build")
    coon.AnimState:PlayAnimation("idle_loop")
    coon.Transform:SetFourFaced()
    coon.Transform:SetScale(0.8, 0.8, 0.8)
    coon.entity:AddSoundEmitter()
    local shadow = coon.entity:AddDynamicShadow()
    shadow:SetSize(2,0.75)
    coon:RemoveComponent("stackable")
    coon:RemoveComponent("fuel")
    coon:RemoveComponent("tradable")
    coon:RemoveComponent("burnable")
    coon:RemoveComponent("propagator")
    coon:RemoveComponent("deployable")
    coon:RemoveTag("cattoy")
    coon.components.inventoryitem:ChangeImageName("catcoonhat")
    coon:AddComponent("named")
    coon.components.named:SetName("Catcoon")
    coon:AddComponent("follower")
    coon.components.follower:SetLeader(GetPlayer())
    coon:AddComponent("locomotor")
    coon.components.locomotor.walkspeed = 12
    coon:SetStateGraph("SGcatcoon")
    local brain = require "brains/abigailbrain"
    coon:SetBrain(brain)
    coon:AddComponent("health")
    coon.components.health:SetMaxHealth(3000)
    coon:AddComponent("lootdropper")
    coon.components.lootdropper:SetLoot({"smallmeat"})
    coon:AddComponent("combat")
    coon.components.combat:SetDefaultDamage(50)
    coon.components.combat:SetRange(4)
    coon.components.combat:SetAttackPeriod(0.5)
    coon.components.combat:SetHurtSound("dontstarve_DLC001/creatures/catcoon/hurt")
    coon.components.combat.battlecryinterval = 20
    coon.components.combat:SetRetargetFunction(1, function(coon)
        if not coon.components.health:IsDead() then
            return FindEntity(GetPlayer(), 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy:HasTag("smallcreature")
                end
            end)
        end
    end )
    coon.components.combat:SetKeepTargetFunction(function(coon, target) return target and target:IsValid() end )
    coon:ListenForEvent("attacked", function(coon, data)
        if data.attacker ~= GetPlayer() then
           coon.components.combat:SetTarget(data.attacker)
        else
           coon.components.health:Kill()
        end
    end )
    coon:AddComponent( "playerprox" )
    coon.components.playerprox:SetDist(3,5)
    coon.components.playerprox:SetOnPlayerNear(function(coon) coon.components.locomotor.walkspeed = 5 end )
    coon.components.playerprox:SetOnPlayerFar(function(coon) coon.components.locomotor.walkspeed = 12 end )
    coon:AddComponent("trader")
    coon.components.trader:SetAcceptTest(function(coon, item)
        if not coon:HasTag("supercoon") then
           if item.prefab == "fish" then
              return true
           end
           if item.prefab == "smallmeat" then
              return coon.components.health:GetPercent() < 1
           end
        end
        return false
    end )
    coon.components.trader.onaccept = function(coon, giver, item)
        if item.prefab == "fish" then
           coon:AddTag("supercoon")
           coon.components.named:SetName("SuperCatcoon")
           SpawnPrefab("collapse_big").Transform:SetPosition(coon.Transform:GetWorldPosition())
           coon.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           coon.Transform:SetScale(1.3, 1.3, 1.3)
           coon.components.inventoryitem.canbepickedup = false
           coon.components.health:SetInvincible(true)
           coon.components.combat:SetDefaultDamage(500)
           coon:DoTaskInTime(60, function(coon)
               coon:RemoveTag("supercoon")
               coon.components.named:SetName("Catcoon")
               SpawnPrefab("collapse_big").Transform:SetPosition(coon.Transform:GetWorldPosition())
               coon.AnimState:SetBloomEffectHandle("")
               coon.Transform:SetScale(0.8, 0.8, 0.8)
               coon.components.inventoryitem.canbepickedup = true
               coon.components.health:SetInvincible(false)
               coon.components.combat:SetDefaultDamage(50)
           end )
        end
        if item.prefab == "smallmeat" then
           coon.components.health:DoDelta(1000)
        end
    end
    coon:AddTag("coons")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("coons") then
        data.coons = true
    end
end
local function onload(inst, data)
  if data and data.coons then
    inst.AnimState:SetBank("catcoon")
    inst.AnimState:SetBuild("catcoon_build")
    inst.AnimState:PlayAnimation("idle_loop")
    inst.Transform:SetFourFaced()
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize(2,0.75)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("cattoy")
    inst.components.inventoryitem:ChangeImageName("catcoonhat")
    inst:AddComponent("named")
    inst.components.named:SetName("Catcoon")
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 12
    inst:SetStateGraph("SGcatcoon")
    local brain = require "brains/abigailbrain"
    inst:SetBrain(brain)
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(3000)
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(50)
    inst.components.combat:SetRange(4)
    inst.components.combat:SetAttackPeriod(0.5)
    inst.components.combat:SetHurtSound("dontstarve_DLC001/creatures/catcoon/hurt")
    inst.components.combat.battlecryinterval = 20
    inst.components.combat:SetRetargetFunction(1, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(GetPlayer(), 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster") or guy:HasTag("smallcreature")
                end
            end)
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:ListenForEvent("attacked", function(inst, data)
        if data.attacker ~= GetPlayer() then
           inst.components.combat:SetTarget(data.attacker)
        else
           inst.components.health:Kill()
        end
    end )
    inst:AddComponent( "playerprox" )
    inst.components.playerprox:SetDist(3,5)
    inst.components.playerprox:SetOnPlayerNear(function(inst) inst.components.locomotor.walkspeed = 5 end )
    inst.components.playerprox:SetOnPlayerFar(function(inst) inst.components.locomotor.walkspeed = 12 end )
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item)
        if not inst:HasTag("supercoon") then
           if item.prefab == "fish" then
              return true
           end
           if item.prefab == "smallmeat" then
              return inst.components.health:GetPercent() < 1
           end
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        if item.prefab == "fish" then
           inst:AddTag("supercoon")
           inst.components.named:SetName("SuperCatcoon")
           SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst.Transform:SetScale(1.3, 1.3, 1.3)
           inst.components.inventoryitem.canbepickedup = false
           inst.components.health:SetInvincible(true)
           inst.components.combat:SetDefaultDamage(500)
           inst:DoTaskInTime(60, function(inst)
               inst:RemoveTag("supercoon")
               inst.components.named:SetName("Catcoon")
               SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
               inst.AnimState:SetBloomEffectHandle("")
               inst.Transform:SetScale(0.8, 0.8, 0.8)
               inst.components.inventoryitem.canbepickedup = true
               inst.components.health:SetInvincible(false)
               inst.components.combat:SetDefaultDamage(50)
           end )
        end
        if item.prefab == "smallmeat" then
           inst.components.health:DoDelta(1000)
        end
    end
    inst:AddTag("coons")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用纸种口袋浣熊，帮你捕猎、战斗。鼠标左键点浣熊，可将其放入物品栏（显示为浣熊帽的图标）。喂浣熊小肉，可为其补血（3块可补满），如果喂浣熊鱼，则变身超级浣熊，不会受伤，攻击力提高10倍，60秒后变回来。在超级浣熊状态下，口袋浣熊无法被拿起，也不接受食物。不想要口袋浣熊了，在物品栏中对其按鼠标右键即可。纸在精炼选项（画着白色宝石）下，用4个芦苇制造




一九七.吸地牛（用大理石种吸地牛，地面物品自动吸入肚中，可开矿、砍树）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\inv_marble.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local slotpos = {}
for y = 4, 0, -1 do
    for x = 0, 14 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
local sounds = 
{
    walk = "dontstarve/beefalo/walk",
    grunt = "dontstarve/beefalo/grunt",
    yell = "dontstarve/beefalo/yell",
    swish = "dontstarve/beefalo/tail_swish",
    curious = "dontstarve/beefalo/curious",
    angry = "dontstarve/beefalo/angry",
}
local function OnDeploy (inst, pt)
    local bull = SpawnPrefab("marble")
    bull.Transform:SetPosition(pt.x, pt.y, pt.z)
    bull.AnimState:SetBank("beefalo")
    bull.AnimState:SetBuild("beefalo_build")
    bull.AnimState:PlayAnimation("idle_loop", true)
    bull.Transform:SetFourFaced()
    bull.Transform:SetScale(0.8, 0.8, 0.8)
    local sound = bull.entity:AddSoundEmitter()
    bull.sounds = sounds
    local shadow = bull.entity:AddDynamicShadow()
    shadow:SetSize( 3, 1.25 )
    MakeCharacterPhysics(bull, 100, 1.5)
    bull:AddTag("bull")
    bull:AddTag("companion")
    bull:AddComponent("locomotor")
    bull.components.locomotor.walkspeed = 1.5
    bull.components.locomotor.runspeed = 15
    bull:SetStateGraph("SGBeefalo")
    bull:AddComponent("follower")
    bull:AddComponent("knownlocations")
    bull.components.container.canbeopened = true
    bull:AddComponent("combat")
    bull:AddComponent("health")
    bull.components.health:SetMaxHealth(10000)
    bull.components.health:SetInvincible(true)
    bull.components.health.nofadeout = true
    bull:RemoveComponent("stackable")
    bull:RemoveComponent("inventoryitem")
    bull:RemoveComponent("bait")
    bull:RemoveTag("molebait")
    bull:AddComponent("workable")
    bull.components.workable:SetWorkAction(ACTIONS.CHOP)
    bull.components.workable:SetWorkLeft(3)
    bull.components.workable:SetOnFinishCallback(function(bull)
        bull.AnimState:PlayAnimation("death")
        bull.SoundEmitter:PlaySound("dontstarve/beefalo/yell")
        bull:DoTaskInTime(1.5, function() bull.components.container:DropEverything() bull:Remove() end)
    end )
    bull:DoPeriodicTask(1, function(bull)
        if not bull.components.container:Has("cutgrass", 1) then
           bull.components.locomotor:Stop()
           bull:SetBrain(nil)
           bull.components.follower:SetLeader(nil)
           bull:RemoveTag("letgo")
        else
           local brain = require "brains/chesterbrain"
           bull:SetBrain(brain)
           bull:RestartBrain()
           bull.components.follower:SetLeader(GetPlayer())
           bull:AddTag("letgo")
        end
    end )
    bull:DoPeriodicTask(180, function(bull)
        if bull.components.container:Has("cutgrass", 1) then
           bull.components.container:ConsumeByName("cutgrass", 1)
           bull.AnimState:PlayAnimation("graze_loop")
        end
    end )
    bull:DoPeriodicTask(.1, function(bull)
      if bull:HasTag("letgo") then
        local pos = Vector3(bull.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 15)
        for k,v in pairs(ents) do
            local pt1 = v:GetPosition()
            if v.components.inventoryitem and v.components.inventoryitem.canbepickedup and v.components.inventoryitem.cangoincontainer
               and not v.components.inventoryitem:IsHeld() and not v:HasTag("trap") and not v:HasTag("light") and not v:HasTag("blowdart")
               and not v:HasTag("projectile") and not v:HasTag("helpers") then
               if not bull.components.container:IsFull() then
                  SpawnPrefab("small_puff").Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                  bull.components.container:GiveItem(v)
                  bull.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
               end
            end
        end
      end
    end )
    bull.Physics:SetCollisionCallback(function(bull, other)
        if other and other.components.workable and other.components.workable.workleft > 0 and not other:HasTag("bull") then
           SpawnPrefab("collapse_small").Transform:SetPosition(other:GetPosition():Get())
           other.components.workable:Destroy(bull)
        end
    end)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("bull") then
        data.bull = true
    end
end
local function onload(inst, data)
  if data and data.bull then
    inst.AnimState:SetBank("beefalo")
    inst.AnimState:SetBuild("beefalo_build")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.Transform:SetFourFaced()
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    local sound = inst.entity:AddSoundEmitter()
    inst.sounds = sounds
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 3, 1.25 )
    MakeCharacterPhysics(inst, 100, 1.5)
    inst:AddTag("bull")
    inst:AddTag("companion")
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 1.5
    inst.components.locomotor.runspeed = 15
    inst:SetStateGraph("SGBeefalo")
    inst:AddComponent("follower")
    inst:AddComponent("knownlocations")
    inst.components.container.canbeopened = true
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(10000)
    inst.components.health:SetInvincible(true)
    inst.components.health.nofadeout = true
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("bait")
    inst:RemoveTag("molebait")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.CHOP)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        inst.AnimState:PlayAnimation("death")
        inst.SoundEmitter:PlaySound("dontstarve/beefalo/yell")
        inst:DoTaskInTime(1.5, function() inst.components.container:DropEverything() inst:Remove() end)
    end )
    inst:DoPeriodicTask(1, function(inst)
        if not inst.components.container:Has("cutgrass", 1) then
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
           inst:RemoveTag("letgo")
        else
           local brain = require "brains/chesterbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst:AddTag("letgo")
        end
    end )
    inst:DoPeriodicTask(180, function(inst)
        if inst.components.container:Has("cutgrass", 1) then
           inst.components.container:ConsumeByName("cutgrass", 1)
           inst.AnimState:PlayAnimation("graze_loop")
        end
    end )
    inst:DoPeriodicTask(.1, function(inst)
      if inst:HasTag("letgo") then
        local pos = Vector3(inst.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 15)
        for k,v in pairs(ents) do
            local pt1 = v:GetPosition()
            if v.components.inventoryitem and v.components.inventoryitem.canbepickedup and v.components.inventoryitem.cangoincontainer
               and not v.components.inventoryitem:IsHeld() and not v:HasTag("trap") and not v:HasTag("light") and not v:HasTag("blowdart")
               and not v:HasTag("projectile") and not v:HasTag("helpers") then
               if not inst.components.container:IsFull() then
                  SpawnPrefab("small_puff").Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                  inst.components.container:GiveItem(v)
                  inst.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
               end
            end
        end
      end
    end )
    inst.Physics:SetCollisionCallback(function(inst, other)
        if other and other.components.workable and other.components.workable.workleft > 0 and not other:HasTag("bull") then
           SpawnPrefab("collapse_small").Transform:SetPosition(other:GetPosition():Get())
           other.components.workable:Destroy(inst)
        end
    end)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-300,200,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst:AddTag("fridge")

    即可用大理石种吸地牛，鼠标左键点它可开启格子，放入草后会跟随你，吸取沿路所有物品（吸进肚中的格子里，鼠标左键点击可拿取）。拿出草后即停止跟随，在原地等待。吸地牛会消化肚中的草，每天消化2-3根，如果格子中的草被吃完了，就不会跟随你，直到再给它草为止。吸地牛可撞碎石头、撞倒树，并将掉落物品直接吸入肚中，带着它去开矿、砍树吧。不要让吸地牛靠近你的建筑物，它会将其撞毁，除非你想用它拆迁。不想要吸地牛时，用斧子砍它三下即可，肚中物品会掉在地上




一九八.找矿蜗牛（用蜗牛龟盔甲种找矿蜗牛，为你勘探新石矿）

    用记事本打开游戏目录\data\scripts\prefabs\armor_snurtleshell.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local snail = SpawnPrefab("armorsnurtleshell")
    snail.Transform:SetPosition(pt.x, pt.y, pt.z)
    snail.AnimState:SetBank("slurtle")
    snail.AnimState:SetBuild("slurtle")
    snail.AnimState:PlayAnimation("idle", true)
    snail.Transform:SetFourFaced()
    local sound = snail.entity:AddSoundEmitter()
    local brain = require "brains/leifbrain"
    snail:SetBrain(brain)
    snail:AddComponent("locomotor")
    snail.components.locomotor.walkspeed = 7
    snail:SetStateGraph("SGslurtle")
    local minimap = snail.entity:AddMiniMapEntity()
    minimap:SetIcon( "slurtle_den.png" )
    snail.components.inventoryitem:ChangeImageName("armorsnurtleshell")
    snail:RemoveComponent("armor")
    snail:RemoveComponent("equippable")
    snail:RemoveComponent("useableitem")
    snail:RemoveComponent("deployable")
    snail:RemoveTag("shell")
    snail:RemoveComponent("inventoryitem")
    snail:AddComponent("combat")
    snail:AddComponent("health")
    snail.components.health:SetMaxHealth(1000)
    snail.components.health:SetInvincible(true)
    snail.components.health.nofadeout = true
    snail.task = snail:DoPeriodicTask(math.random(8,12), function(snail)
        local pt1 = snail:GetPosition()
        local rocks = {"rock1","rock2","rock_flintless","rock_ice"}
        local rock = rocks[math.random(#rocks)]
        local newrock = SpawnPrefab(rock)
        newrock.Transform:SetPosition(pt1.x, 0, pt1.z)
        newrock.Physics:SetActive(false)
        newrock:DoTaskInTime(3, function(newrock) newrock.Physics:SetActive(true) end )
        SpawnPrefab("splash_ocean").Transform:SetPosition(pt1.x, 0, pt1.z)
        snail.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
        GetPlayer().components.playercontroller:ShakeCamera(snail, "FULL", 0.2, 0.02, .25, 40)
    end )
    snail:AddComponent("inventoryitem")
    snail.components.inventoryitem:SetOnPutInInventoryFn(function(snail)
        snail:RemoveTag("sports")
        snail.components.locomotor:Stop()
        snail:SetBrain(nil)
        if snail.task then snail.task:Cancel() snail.task = nil end
    end )
    snail.components.inventoryitem:SetOnDroppedFn(function(snail)
        snail:AddTag("sports")
        local brain = require "brains/leifbrain"
        snail:SetBrain(brain)
        snail:RestartBrain()
        snail.task = snail:DoPeriodicTask(math.random(8,12), function(snail)
            local pt1 = snail:GetPosition()
            local rocks = {"rock1","rock2","rock_flintless","rock_ice"}
            local rock = rocks[math.random(#rocks)]
            local newrock = SpawnPrefab(rock)
            newrock.Transform:SetPosition(pt1.x, 0, pt1.z)
            newrock.Physics:SetActive(false)
            newrock:DoTaskInTime(3, function(newrock) newrock.Physics:SetActive(true) end )
            SpawnPrefab("splash_ocean").Transform:SetPosition(pt1.x, 0, pt1.z)
            snail.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            GetPlayer().components.playercontroller:ShakeCamera(snail, "FULL", 0.2, 0.02, .25, 40)
        end )
    end )
    snail:AddTag("sports")
    snail:AddTag("companion")
    snail:AddTag("snails")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

local function onsave(inst, data)
    if inst:HasTag("snails") then
        data.snails = true
    end
    if inst:HasTag("sports") then
        data.sports = true
    end
end
local function onload(inst, data)
  if data and data.snails then
    inst.AnimState:SetBank("slurtle")
    inst.AnimState:SetBuild("slurtle")
    inst.AnimState:PlayAnimation("idle", true)
    inst.Transform:SetFourFaced()
    local sound = inst.entity:AddSoundEmitter()
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 7
    inst:SetStateGraph("SGslurtle")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "slurtle_den.png" )
    inst.components.inventoryitem:ChangeImageName("armorsnurtleshell")
    inst:RemoveComponent("armor")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("useableitem")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("shell")
    inst:RemoveComponent("inventoryitem")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(1000)
    inst.components.health:SetInvincible(true)
    inst.components.health.nofadeout = true
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:SetOnPutInInventoryFn(function(inst)
        inst:RemoveTag("sports")
        inst.components.locomotor:Stop()
        inst:SetBrain(nil)
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst.components.inventoryitem:SetOnDroppedFn(function(inst)
        inst:AddTag("sports")
        local brain = require "brains/leifbrain"
        inst:SetBrain(brain)
        inst:RestartBrain()
        inst.task = inst:DoPeriodicTask(math.random(8,12), function(inst)
            local pt1 = inst:GetPosition()
            local rocks = {"rock1","rock2","rock_flintless","rock_ice"}
            local rock = rocks[math.random(#rocks)]
            local newrock = SpawnPrefab(rock)
            newrock.Transform:SetPosition(pt1.x, 0, pt1.z)
            newrock.Physics:SetActive(false)
            newrock:DoTaskInTime(3, function(newrock) newrock.Physics:SetActive(true) end )
            SpawnPrefab("splash_ocean").Transform:SetPosition(pt1.x, 0, pt1.z)
            inst.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
        end )
    end )
    inst:AddTag("companion")
    inst:AddTag("snails")
  end
  if data and data.sports then
    local brain = require "brains/leifbrain"
    inst:SetBrain(brain)
    inst:RestartBrain()
    inst.task = inst:DoPeriodicTask(math.random(8,12), function(inst)
        local pt1 = inst:GetPosition()
        local rocks = {"rock1","rock2","rock_flintless","rock_ice"}
        local rock = rocks[math.random(#rocks)]
        local newrock = SpawnPrefab(rock)
        newrock.Transform:SetPosition(pt1.x, 0, pt1.z)
        newrock.Physics:SetActive(false)
        newrock:DoTaskInTime(3, function(newrock) newrock.Physics:SetActive(true) end )
        SpawnPrefab("splash_ocean").Transform:SetPosition(pt1.x, 0, pt1.z)
        inst.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
        GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
    end )
    inst:AddTag("sports")
    local pt2 = GetPlayer():GetPosition()
    inst.Transform:SetPosition(pt2.x+1, 0, pt2.z+1)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜗牛龟盔甲种找矿蜗牛，鼠标左键点蜗牛，可将其放入物品栏（显示为蜗牛龟盔甲的图标）。在空旷的地上放下找矿蜗牛，它会为你勘探出新的石矿，石头从此成为可再生资源。找矿蜗牛只会专注于找矿，不会跟随你，别把它弄丢了，如果真找不到了，存档退出后再读档，它会出现在你身边。不想要找矿蜗牛时，在物品栏中对其按鼠标右键即可。蜗牛龟盔甲可在地下一层打蜗牛龟时获得，如果修改了“巨型超市”，也可以花9-11个黄金购买




一九九.人工女友（用蜂刺种三个女友之一，可背东西、做饭、换衣帽）

    用记事本打开游戏目录\data\scripts\prefabs\stinger.lua文件，

    1.在Asset("ANIM", "anim/stinger.zip"),的下一行插入以下内容：

    Asset("ANIM", "anim/wathgrithr.zip"),
    Asset("SOUND", "sound/wathgrithr.fsb"),


    2.在inst:AddComponent("inspectable")的下一行插入以下内容：

local slotpos = {}
for y = 5, 0, -1 do
    for x = 0, 2 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
local widgetbuttoninfo = {
    text = "Do",
    position = Vector3(68, 361, 0),
    fn = function(inst)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
        if not inst:HasTag("withme") then
           inst:AddTag("withme")
           local brain = require "brains/chesterbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
        else
           inst:RemoveTag("withme")
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
        end
end }
local function OnDeploy (inst, pt)
    local girl = SpawnPrefab("stinger")
    girl.Transform:SetPosition(pt.x, pt.y, pt.z)
    girl.AnimState:SetBank("wilson")
    local girlnames = {"wendy","willow","wathgrithr"}
    girl.buildname = girlnames[math.random(#girlnames)]
    girl.AnimState:SetBuild(girl.buildname)
    girl.AnimState:PlayAnimation("idle")
    girl.AnimState:Show("ARM_normal") 
    girl.AnimState:Hide("ARM_carry")
    girl.Transform:SetFourFaced()
    girl.entity:AddSoundEmitter()
    local shadow = girl.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    MakeCharacterPhysics(girl, 75, .5)
    local minimap = girl.entity:AddMiniMapEntity()
    minimap:SetIcon( "wendy.png" )
    girl:RemoveComponent("stackable")
    girl:RemoveComponent("inventoryitem")
    girl:RemoveComponent("deployable")
    girl:AddComponent("named")
    girl.components.named:SetName("My Baby")
    girl:AddComponent("knownlocations")
    girl:AddComponent("follower")
    girl.components.follower:SetLeader(GetPlayer())
    girl:AddComponent("inventory")
    girl.components.container.canbeopened = true
    girl:AddComponent("locomotor")
    girl.components.locomotor.walkspeed = 8
    girl.components.locomotor.runspeed = 12
    girl:SetStateGraph("SGshadowwaxwell")
    local brain = require "brains/chesterbrain"
    girl:SetBrain(brain)
    girl:AddComponent("combat")
    girl:AddComponent("health")
    girl.components.health:SetMaxHealth(2000)
    girl:ListenForEvent("death", function()
        girl.components.container:DropEverything()
    end )
    girl:AddComponent("talker")
    girl:DoPeriodicTask(60, function()
        local words = {"I love you","You are my love","I like you","I want stay with you","I miss you","you are my darling","I am your sweetheart","You have to love me","Don't go","Are you hungry"}
        local word = words[math.random(#words)]
        girl.components.talker:Say(word, 4, false)
        girl.components.health:DoDelta(2000)
    end)
    girl:DoPeriodicTask(400, function()
        local names = {"waffles","turkeydinner","baconeggs"}
        local name = names[math.random(#names)]
        local foods = SpawnPrefab(name)
        girl.components.container:GiveItem(foods)
        girl.components.talker:Say("Come to eat", 4, false)
    end)
    girl:AddComponent("machine")
    girl.components.machine.turnonfn = function(girl)
        girl.components.machine.ison = true
        girl:AddTag("neat")
        local hats = {"hat_flower","hat_earmuffs","hat_feather","hat_slurper","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_beefalo","hat_rain","hat_catcoon"}
        girl.hat = hats[math.random(#hats)]
        local armors = {"armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_sanity","armor_slurper","torso_rain"}
        girl.armor = armors[math.random(#armors)]
        girl.sg:GoToState("hit")
        girl.AnimState:OverrideSymbol("swap_hat", girl.hat, "swap_hat")
        girl.AnimState:OverrideSymbol("swap_body", girl.armor, "swap_body")
        girl.AnimState:Show("HAT")
        girl.AnimState:Show("HAT_HAIR")
        girl.AnimState:Hide("HAIR_NOHAT")
        girl.AnimState:Hide("HAIR")
        local words = {"I like it","I don't loke it"}
        local word = words[math.random(#words)]
        girl.components.talker:Say(word, 4, false)
    end
    girl.components.machine.turnofffn = function(girl)
        girl.components.machine.ison = false
        girl:RemoveTag("neat")
        girl.sg:GoToState("stunned")
        girl.AnimState:Hide("HAT")
        girl.AnimState:Hide("HAT_HAIR")
        girl.AnimState:Show("HAIR_NOHAT")
        girl.AnimState:Show("HAIR")
        girl.AnimState:ClearOverrideSymbol("swap_body")
        girl.SoundEmitter:PlaySound("dontstarve/characters/wendy/hurt")
        girl.components.talker:Say("Don't, Don't, Don't", 4, false)
    end
    girl:AddComponent("sanityaura")
    girl.components.sanityaura.aura = TUNING.SANITYAURA_HUGE
    girl:ListenForEvent("attacked", function(girl, data)
       girl.sg:GoToState("stunned")
       girl.SoundEmitter:PlaySound("dontstarve/characters/wendy/hurt")
       girl.components.talker:Say("Don't, Don't, Don't", 4, false)
    end )
    girl:AddTag("fridge")
    girl:AddTag("withme")
    girl:AddTag("companion")
    girl:AddTag("girls")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddComponent("container")
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,150,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
local function onsave(inst, data)
    if inst:HasTag("girls") then
        data.girls = true
    end
    if inst:HasTag("withme") then
        data.withme = true
    end
    if inst:HasTag("neat") then
        data.neat = true
    end
    data.buildname = inst.buildname
    data.hat = inst.hat
    data.armor = inst.armor
end
local function onload(inst, data)
  if data and data.girls then
    inst.AnimState:SetBank("wilson")
    local girlnames = {"wendy","willow","wathgrithr"}
    inst.buildname = girlnames[math.random(#girlnames)]
    inst.AnimState:SetBuild(inst.buildname)
    inst.AnimState:PlayAnimation("idle")
    inst.AnimState:Show("ARM_normal") 
    inst.AnimState:Hide("ARM_carry")
    inst.Transform:SetFourFaced()
    inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    MakeCharacterPhysics(inst, 75, .5)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "wendy.png" )
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("deployable")
    inst:AddComponent("named")
    inst.components.named:SetName("My Baby")
    inst:AddComponent("knownlocations")
    inst:AddComponent("follower")
    inst:AddComponent("inventory")
    inst.components.container.canbeopened = true
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 8
    inst.components.locomotor.runspeed = 12
    inst:SetStateGraph("SGshadowwaxwell")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(2000)
    inst:ListenForEvent("death", function()
        inst.components.container:DropEverything()
    end )
    inst:AddComponent("talker")
    inst:DoPeriodicTask(60, function()
        local words = {"I love you","You are my love","I like you","I want stay with you","I miss you","you are my darling","I am your sweetheart","You have to love me","Don't go","Are you hungry"}
        local word = words[math.random(#words)]
        inst.components.talker:Say(word, 4, false)
        inst.components.health:DoDelta(2000)
    end)
    inst:DoPeriodicTask(400, function()
        local names = {"waffles","turkeydinner","baconeggs"}
        local name = names[math.random(#names)]
        local foods = SpawnPrefab(name)
        inst.components.container:GiveItem(foods)
        inst.components.talker:Say("Come to eat", 4, false)
    end)
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = function(inst)
        inst.components.machine.ison = true
        inst:AddTag("neat")
        local hats = {"hat_flower","hat_earmuffs","hat_feather","hat_slurper","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_beefalo","hat_rain","hat_catcoon"}
        inst.hat = hats[math.random(#hats)]
        local armors = {"armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_sanity","armor_slurper","torso_rain"}
        inst.armor = armors[math.random(#armors)]
        inst.sg:GoToState("hit")
        inst.AnimState:OverrideSymbol("swap_hat", inst.hat, "swap_hat")
        inst.AnimState:OverrideSymbol("swap_body", inst.armor, "swap_body")
        inst.AnimState:Show("HAT")
        inst.AnimState:Show("HAT_HAIR")
        inst.AnimState:Hide("HAIR_NOHAT")
        inst.AnimState:Hide("HAIR")
        local words = {"I like it","I don't loke it"}
        local word = words[math.random(#words)]
        inst.components.talker:Say(word, 4, false)
    end
    inst.components.machine.turnofffn = function(inst)
        inst.components.machine.ison = false
        inst:RemoveTag("neat")
        inst.sg:GoToState("stunned")
        inst.AnimState:Hide("HAT")
        inst.AnimState:Hide("HAT_HAIR")
        inst.AnimState:Show("HAIR_NOHAT")
        inst.AnimState:Show("HAIR")
        inst.AnimState:ClearOverrideSymbol("swap_body")
        inst.SoundEmitter:PlaySound("dontstarve/characters/wendy/hurt")
        inst.components.talker:Say("Don't, Don't, Don't", 4, false)
    end
    inst:AddComponent("sanityaura")
    inst.components.sanityaura.aura = TUNING.SANITYAURA_HUGE
    inst:ListenForEvent("attacked", function(inst, data)
       inst.sg:GoToState("stunned")
       inst.SoundEmitter:PlaySound("dontstarve/characters/wendy/hurt")
       inst.components.talker:Say("Don't, Don't, Don't", 4, false)
    end )
    inst:AddTag("fridge")
    inst:AddTag("companion")
    inst:AddTag("girls")
  end
  if data and data.withme then
    inst:AddTag("withme")
    local brain = require "brains/chesterbrain"
    inst:SetBrain(brain)
    inst:RestartBrain()
    inst.components.follower:SetLeader(GetPlayer())
  end
  if data and data.neat then
    inst.components.machine.ison = true
    inst:AddTag("neat")
    inst.AnimState:Show("HAT")
    inst.AnimState:Show("HAT_HAIR")
    inst.AnimState:Hide("HAIR_NOHAT")
    inst.AnimState:Hide("HAIR")
    if data and data.hat then
       inst.hat = data.hat
       inst.AnimState:OverrideSymbol("swap_hat", inst.hat, "swap_hat")
    end
    if data and data.armor then
       inst.armor = data.armor
       inst.AnimState:OverrideSymbol("swap_body", inst.armor, "swap_body")
    end
  end
  if data and data.buildname then
     inst.buildname = data.buildname
     inst.AnimState:SetBuild(inst.buildname)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜂刺种人工女友，随机为温蒂、薇洛、瓦丝格雷斯三人之一。鼠标左键点女友，可打开她的背包格（18格），让她帮你背东西，她的背包带有冷藏功能。点格子右上方的“Do”按钮，可让女友停留在原地，再次点“Do”按钮可继续跟随，如果你殴打她，她不再跟随你，也可通过点“Do”按钮让她继续跟随。鼠标右键点女友，可为她随机更换衣帽，再次点击可脱下衣帽，搭配好的衣帽会一直保留在她身上，不受存读档影响。每天女友会为你做一份料理，在她的背包格中拿取。女友会不时对你说话，与她紧紧依偎可以补脑（不再孤独了）。女友没有战斗能力，如果遇到敌人，要保护好她哦，你也可以选择逃跑，她会努力跟上你的，如果她遇难了，背包里的物品将掉在地上。不想要女友了，杀掉即可（按Ctrl + 鼠标左键攻击）。不要与“用蜂刺种杀人蜂窝”一同修改




二００.养育孩子（主角逝去则孩子接班，一代一代生存下去）

    1.用记事本打开游戏目录\data\scripts\prefabs\minotaurhorn.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function getson (inst)
    TheFrontEnd:Fade(false,1)
  GetPlayer():DoTaskInTime(1.5, function()
    TheFrontEnd:Fade(true,1)
    local pt = GetPlayer():GetPosition()
    local son = SpawnPrefab("resurrectionstatue")
    son.Transform:SetPosition(pt.x, pt.y, pt.z)
    son.AnimState:SetBank("wilson")
    if GetPlayer().prefab == "wilson" then son.AnimState:SetBuild("wilson") end
    if GetPlayer().prefab == "wendy" then son.AnimState:SetBuild("wendy") end
    if GetPlayer().prefab == "wes" then son.AnimState:SetBuild("wes") end
    if GetPlayer().prefab == "wickerbottom" then son.AnimState:SetBuild("wickerbottom") end
    if GetPlayer().prefab == "willow" then son.AnimState:SetBuild("willow") end
    if GetPlayer().prefab == "wolfgang" then son.AnimState:SetBuild("wolfgang_skinny") end
    if GetPlayer().prefab == "wx78" then son.AnimState:SetBuild("wx78") end
    if GetPlayer().prefab == "woodie" then son.AnimState:SetBuild("woodie") end
    if GetPlayer().prefab == "waxwell" then son.AnimState:SetBuild("waxwell") end
    if GetPlayer().prefab == "wathgrithr" then son.AnimState:SetBuild("wathgrithr") end
    if GetPlayer().prefab == "webber" then son.AnimState:SetBuild("webber") end
    local hats = {"hat_beefalo","hat_feather","hat_flower","hat_top","hat_walrus","hat_winter"}
    local hat = hats[math.random(#hats)]
    son.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
    local armors = {"armor_sanity","armor_slurper","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter"}
    local armor = armors[math.random(#armors)]
    son.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
    son.AnimState:Show("HAT")
    son.AnimState:Show("HAT_HAIR")
    son.AnimState:Hide("HAIR_NOHAT")
    son.AnimState:Hide("HAIR")
    son.AnimState:Hide("ARM_carry")
    son.AnimState:Show("ARM_normal")
    son.AnimState:PlayAnimation("idle")
    son.AnimState:Hide("snow")
    son.Transform:SetFourFaced()
    son.Transform:SetScale(0.8,0.8,0.8)
    son:AddComponent("combat")
    son.components.combat.hiteffectsymbol = "torso"
    son.components.combat:SetRetargetFunction(3, function(son)
        if not son.components.health:IsDead() then
            return FindEntity(son, 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy
                end
            end)
        end
    end )
    son.components.combat:SetKeepTargetFunction(function(son, target) return target and target:IsValid() end )
    son.components.combat:SetAttackPeriod(1)
    son.components.combat:SetRange(2, 3)
    son.components.combat:SetDefaultDamage(10)
    son:AddComponent("health")
    son.components.health:SetMaxHealth(1000)
    son.components.health.nofadeout = true
    son:AddComponent("inventory")
    son.components.inventory.dropondeath = false
    son:AddComponent("locomotor")
    son.components.locomotor.pathcaps = { ignorecreep = true }
    son.components.locomotor.runspeed = 12
    local brain = require"brains/shadowwaxwellbrain"
    son:SetBrain(brain)
    son:SetStateGraph("SGshadowwaxwell")
    son:RemoveComponent("lootdropper")
    son:RemoveComponent("workable")
    son:RemoveComponent("burnable")
    son:RemoveComponent("propagator")
    MakeCharacterPhysics(son, 75, .5)
    son:RemoveTag("structure")
    son:AddComponent("follower")
    son.components.follower.leader = GetPlayer()
    son:AddComponent("trader")
    son.components.trader:SetAcceptTest(function(son, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" and son.components.health and not son.components.health:IsDead() then
              return son.components.health:GetPercent() < .99
           end
        end
        return false
    end )
    son.components.trader.onaccept = function(son, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        son.components.health:DoDelta(1000)
    end
    son:AddComponent("machine")
    son.components.machine.turnonfn = function() son.components.locomotor:Stop() son.brain:Stop() end
    son.components.machine.turnofffn = function() son.brain:Start() end
    son:ListenForEvent("death", function()
        GetPlayer().components.sanity:DoDelta(-100)
        SpawnPrefab("trinket_1").Transform:SetPosition(son.Transform:GetWorldPosition())
    end )
    son:AddTag("companion")
    son:AddTag("sons")
    inst:Remove()
  end )
end
local function OnDeploy (inst, pt)
  if GetPlayer().components.inventory:Has("goldnugget", 100) then
    GetPlayer().components.inventory:ConsumeByName("goldnugget", 100)
    local egg1 = SpawnPrefab("minotaurhorn")
    egg1.AnimState:SetBuild("tallbird_egg")
    egg1.AnimState:SetBank("egg")
    egg1.AnimState:PlayAnimation("egg")
    egg1.Transform:SetPosition(pt.x+2+3, pt.y, pt.z+2-3)
    egg1.AnimState:SetMultColour(0/255,255/255,0/255,1)
    egg1.Transform:SetScale(1.5,1.5,1.5)
    egg1:AddComponent("health")
    egg1.components.health:SetMaxHealth(1)
    egg1:AddComponent("combat")
    egg1:RemoveComponent("edible")
    egg1.components.inventoryitem.canbepickedup = false
    local egg2 = SpawnPrefab("minotaurhorn")
    egg2.AnimState:SetBuild("tallbird_egg")
    egg2.AnimState:SetBank("egg")
    egg2.AnimState:PlayAnimation("egg")
    egg2.Transform:SetPosition(pt.x+2-3, pt.y, pt.z+2+3)
    egg2.AnimState:SetMultColour(0/255,255/255,0/255,1)
    egg2.Transform:SetScale(1.5,1.5,1.5)
    egg2:AddComponent("health")
    egg2.components.health:SetMaxHealth(1)
    egg2:AddComponent("combat")
    egg2:RemoveComponent("edible")
    egg2.components.inventoryitem.canbepickedup = false
    egg1:ListenForEvent("death", function() egg1.AnimState:PlayAnimation("crack") egg2:Remove()
        if math.random()<.5 then
           local pt = GetPlayer():GetPosition()
           GetSeasonManager():DoLightningStrike(pt)
           inst:DoTaskInTime(1, function() getson(inst) end )
        else
           SpawnPrefab("collapse_small").Transform:SetPosition(egg1.Transform:GetWorldPosition())
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
        end
    end )
    egg2:ListenForEvent("death", function() egg2.AnimState:PlayAnimation("crack") egg1:Remove()
        if math.random()<.5 then
           local pt = GetPlayer():GetPosition()
           GetSeasonManager():DoLightningStrike(pt)
           inst:DoTaskInTime(2, function() getson(inst) end )
        else
           SpawnPrefab("collapse_small").Transform:SetPosition(egg2.Transform:GetWorldPosition())
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
        end
    end )
  end
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\resurrectionstatue.lua文件，将下列内容：

	inst.OnSave = onsave 
    inst.OnLoad = onload

    替换为：

local items = { AXE = "swap_axe", PICK = "swap_pickaxe", SWORD = "swap_spear" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function onsave2(inst, data)
    if inst:HasTag("sons") then
        data.sons = true
    end
end
local function onload2(inst, data)
  if data and data.sons then
    inst.AnimState:SetBank("wilson")
    if GetPlayer().prefab == "wilson" then inst.AnimState:SetBuild("wilson") end
    if GetPlayer().prefab == "wendy" then inst.AnimState:SetBuild("wendy") end
    if GetPlayer().prefab == "wes" then inst.AnimState:SetBuild("wes") end
    if GetPlayer().prefab == "wickerbottom" then inst.AnimState:SetBuild("wickerbottom") end
    if GetPlayer().prefab == "willow" then inst.AnimState:SetBuild("willow") end
    if GetPlayer().prefab == "wolfgang" then inst.AnimState:SetBuild("wolfgang_skinny") end
    if GetPlayer().prefab == "wx78" then inst.AnimState:SetBuild("wx78") end
    if GetPlayer().prefab == "woodie" then inst.AnimState:SetBuild("woodie") end
    if GetPlayer().prefab == "waxwell" then inst.AnimState:SetBuild("waxwell") end
    if GetPlayer().prefab == "wathgrithr" then inst.AnimState:SetBuild("wathgrithr") end
    if GetPlayer().prefab == "webber" then inst.AnimState:SetBuild("webber") end
    local hats = {"hat_beefalo","hat_feather","hat_flower","hat_top","hat_walrus","hat_winter"}
    local hat = hats[math.random(#hats)]
    inst.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
    local armors = {"armor_sanity","armor_slurper","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter"}
    local armor = armors[math.random(#armors)]
    inst.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
    inst.AnimState:Show("HAT")
    inst.AnimState:Show("HAT_HAIR")
    inst.AnimState:Hide("HAIR_NOHAT")
    inst.AnimState:Hide("HAIR")
    inst.AnimState:Hide("ARM_carry")
    inst.AnimState:Show("ARM_normal")
    inst.AnimState:PlayAnimation("idle")
    inst.AnimState:Hide("snow")
    inst.Transform:SetFourFaced()
    inst.Transform:SetScale(0.8,0.8,0.8)
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "torso"
    inst.components.combat:SetRetargetFunction(3, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy
                end
            end)
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst.components.combat:SetAttackPeriod(1)
    inst.components.combat:SetRange(2, 3)
    inst.components.combat:SetDefaultDamage(10)
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(1000)
    inst.components.health.nofadeout = true
    inst:AddComponent("inventory")
    inst.components.inventory.dropondeath = false
    inst:AddComponent("locomotor")
    inst.components.locomotor.pathcaps = { ignorecreep = true }
    inst.components.locomotor.runspeed = 12
    local brain = require"brains/shadowwaxwellbrain"
    inst:SetBrain(brain)
    inst:SetStateGraph("SGshadowwaxwell")
    inst:RemoveComponent("lootdropper")
    inst:RemoveComponent("workable")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    MakeCharacterPhysics(inst, 75, .5)
    inst:RemoveTag("structure")
    inst:AddComponent("follower")
    inst.components.follower.leader = GetPlayer()
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" and inst.components.health and not inst.components.health:IsDead() then
              return inst.components.health:GetPercent() < .99
           end
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        inst.components.health:DoDelta(1000)
    end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = function() inst.components.locomotor:Stop() inst.brain:Stop() end
    inst.components.machine.turnofffn = function() inst.brain:Start() end
    inst:ListenForEvent("death", function()
        GetPlayer().components.sanity:DoDelta(-100)
        SpawnPrefab("trinket_1").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddTag("companion")
    inst:AddTag("sons")
  end
end
    inst.OnSave = onsave2
    inst.OnLoad = onload2

    即可在你攒够100个黄金时，将远古守护者角种在地上，向上天求子，会赐予你2个蛋（身上黄金数不足时，只收走远古守护者角，不给蛋），选一个打破，如果中了（屏幕黑一下），就会获得孩子，如果没中（生一团烟），就只能下次再试了。使用不同主角，将获得不同的孩子，可以带着他打仗、砍树、开矿。如果你死了，他将长大成人，继承你的事业，一代一代在饥荒世界里生存下去。如果他不幸夭折了，对你而言无疑是晴天霹雳（减100点脑），他将为你留下一件小小的遗物，让你永远不要忘记他。当遇到危险时，可以对他点鼠标右键，让他停留在原地，等危险排除了，再对他按右键，即可继续跟随。可以通过给零花钱为他补血（拿着黄金对他点鼠标左键），一次5个黄金，身上黄金数不足或孩子满血时拒收。注意未成年人是不会跟着你下地洞的，把他安顿好后再去刷怪吧




二０一.私家军（用火药种私家军，可装备盔甲、帽子，需要支付工资）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\gunpowder.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "armorgrass" or item.prefab == "armorwood" or item.prefab == "armormarble" or item.prefab == "armor_sanity" or item.prefab == "armorruins" or item.prefab == "footballhat" or item.prefab == "ruinshat" or item.prefab == "beefalohat" or item.prefab == "featherhat" or item.prefab == "goldnugget" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,32+4,0), Vector3(0,-(32+4),0), Vector3(0,-(64+32+8+4),0)}
local widgetbuttoninfo = {
    text = "Go",
    position = Vector3(0, -165, 0),
    fn = function(inst)
      if inst:HasTag("mercenary") then
         if inst.components.container:Has("goldnugget", 20) then inst:AddTag("cango") end
         inst.components.container:Close(GetPlayer())
         GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
         inst.AnimState:Hide("HAT")
         inst.AnimState:Hide("HAT_HAIR")
         inst.AnimState:Show("HAIR_NOHAT")
         inst.AnimState:Show("HAIR")
         inst.AnimState:ClearOverrideSymbol("swap_body")
         for k,v in pairs(inst.components.container.slots) do
             if v.prefab == "footballhat" or v.prefab == "ruinshat" or v.prefab == "beefalohat" or v.prefab == "featherhat" then
                inst.AnimState:Show("HAT")
                inst.AnimState:Show("HAT_HAIR")
                inst.AnimState:Hide("HAIR_NOHAT")
                inst.AnimState:Hide("HAIR")
             end
             if v and v.prefab == "armorgrass" then
                inst.AnimState:OverrideSymbol("swap_body", "armor_grass", "swap_body")
                inst:ListenForEvent("attacked", function(inst, data)
                    inst.components.health:DoDelta(15)
                end )
             end
             if v and v.prefab == "armorwood" then
                inst.AnimState:OverrideSymbol("swap_body", "armor_wood", "swap_body")
                inst:ListenForEvent("attacked", function(inst, data)
                    inst.components.health:DoDelta(20)
                end )
             end
             if v and v.prefab == "armormarble" then
                inst.AnimState:OverrideSymbol("swap_body", "armor_marble", "swap_body")
                inst:ListenForEvent("attacked", function(inst, data)
                    inst.components.health:DoDelta(25)
                end )
             end
             if v and v.prefab == "armor_sanity" then
                inst.AnimState:OverrideSymbol("swap_body", "armor_sanity", "swap_body")
                inst:ListenForEvent("attacked", function(inst, data)
                    inst.components.health:DoDelta(30)
                end )
             end
             if v and v.prefab == "armorruins" then
                inst.AnimState:OverrideSymbol("swap_body", "armor_ruins", "swap_body")
                inst:ListenForEvent("attacked", function(inst, data)
                    inst.components.health:DoDelta(35)
                end )
             end
             if v and v.prefab == "footballhat" then
                inst.AnimState:OverrideSymbol("swap_hat", "hat_football", "swap_hat")
             end
             if v and v.prefab == "ruinshat" then
                inst.AnimState:OverrideSymbol("swap_hat", "hat_ruins", "swap_hat")
             end
             if v and v.prefab == "beefalohat" then
                inst.AnimState:OverrideSymbol("swap_hat", "hat_beefalo", "swap_hat")
             end
             if v and v.prefab == "featherhat" then
                inst.AnimState:OverrideSymbol("swap_hat", "hat_feather", "swap_hat")
             end
         end
      end
    end }
    inst:AddComponent("container")
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,180,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.itemtestfn = itemtest
    inst.components.container.onopenfn = function(inst) inst:RemoveTag("cango") end
local items = { SWORD = "swap_spear" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function OnDeploy (inst, pt)
  if GetPlayer().components.inventory:Has("goldnugget", 100) then 
    GetPlayer().components.inventory:ConsumeByName("goldnugget", 100)
    local mercenary = SpawnPrefab("gunpowder")
    mercenary.Transform:SetPosition(pt.x, pt.y, pt.z)
    mercenary.AnimState:SetBank("wilson")
    mercenary.AnimState:SetBuild("wilson")
    mercenary.AnimState:PlayAnimation("idle")
    mercenary.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
    mercenary.AnimState:Show("ARM_carry") 
    mercenary.AnimState:Hide("ARM_normal")
    mercenary.Transform:SetFourFaced()
    local shadow = mercenary.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    MakeCharacterPhysics(mercenary, 75, .5)
    local minimap = mercenary.entity:AddMiniMapEntity()
    minimap:SetIcon( "researchlab.png" )
    mercenary:AddTag("mercenary")
    mercenary:AddComponent("locomotor")
    mercenary.components.locomotor.walkspeed = 8
    mercenary.components.locomotor.runspeed = 15
    mercenary:SetStateGraph("SGshadowwaxwell")
    mercenary:RemoveComponent("stackable")
    mercenary:RemoveComponent("explosive")
    mercenary:RemoveComponent("inventoryitem")
    mercenary:RemoveComponent("burnable")
    mercenary:RemoveComponent("propagator")
    mercenary:RemoveComponent("deployable")
    mercenary:RemoveComponent("bait")
    mercenary:RemoveTag("molebait")
    mercenary:AddComponent("follower")
    mercenary:AddComponent("inventory")
    mercenary.components.container.canbeopened = true
    mercenary:AddComponent("combat")
    mercenary.components.combat.hiteffectsymbol = "torso"
    mercenary.components.combat:SetDefaultDamage(50)
    mercenary.components.combat:SetRange(2, 3)
    mercenary.components.combat:SetAttackPeriod(0.5)
    mercenary.components.combat:SetRetargetFunction(2, function(mercenary)
        if not mercenary.components.health:IsDead() then
            return FindEntity(mercenary, 25, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end)
        end
    end )
    mercenary.components.combat:SetKeepTargetFunction(function(mercenary, target) return target and target:IsValid() end )
    mercenary:AddComponent("health")
    mercenary.components.health:SetMaxHealth(1500)
    mercenary.components.health.nofadeout = true
    mercenary:DoPeriodicTask(1, function(mercenary)
      if mercenary:HasTag("cango") then
        if not mercenary.components.container:Has("goldnugget", 20) then
           mercenary.AnimState:SetBloomEffectHandle("")
           mercenary.components.locomotor:Stop()
           mercenary:SetBrain(nil)
           mercenary.components.follower:SetLeader(nil)
        else
           mercenary.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           local brain = require "brains/abigailbrain"
           mercenary:SetBrain(brain)
           mercenary:RestartBrain()
           mercenary.components.follower:SetLeader(GetPlayer())
        end
      else
         mercenary.AnimState:SetBloomEffectHandle("")
         mercenary.components.locomotor:Stop()
         mercenary:SetBrain(nil)
         mercenary.components.follower:SetLeader(nil)
      end
    end )
    mercenary:DoPeriodicTask(480, function(mercenary)
        if mercenary.components.container:Has("goldnugget", 20) then
           mercenary.components.container:ConsumeByName("goldnugget", 20)
           mercenary.components.health:DoDelta(500)
        end
    end )
    mercenary:AddComponent( "playerprox" )
    mercenary.components.playerprox:SetDist(3,5)
    mercenary.components.playerprox:SetOnPlayerNear(function(mercenary)
        mercenary.components.locomotor.walkspeed = 1
        mercenary.components.locomotor.runspeed = 2
    end )
    mercenary.components.playerprox:SetOnPlayerFar(function(mercenary)
        mercenary.components.locomotor.walkspeed = 8
        mercenary.components.locomotor.runspeed = 15
    end )
  end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("mercenary") then
        data.mercenary = true
    end
    if inst:HasTag("cango") then
        data.cango = true
    end
end
local function onload(inst, data)
  if data and data.mercenary then
    inst.AnimState:SetBank("wilson")
    inst.AnimState:SetBuild("wilson")
    inst.AnimState:PlayAnimation("idle")
    inst.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
    inst.AnimState:Show("ARM_carry") 
    inst.AnimState:Hide("ARM_normal")
    inst.Transform:SetFourFaced()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    MakeCharacterPhysics(inst, 75, .5)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "researchlab.png" )
    inst:AddTag("mercenary")
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 8
    inst.components.locomotor.runspeed = 15
    inst:SetStateGraph("SGshadowwaxwell")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("explosive")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("bait")
    inst:RemoveTag("molebait")
    inst:AddComponent("follower")
    inst:AddComponent("inventory")
    inst.components.container.canbeopened = true
    inst:AddComponent("combat")
    inst.components.combat.hiteffectsymbol = "torso"
    inst.components.combat:SetDefaultDamage(50)
    inst.components.combat:SetRange(2, 3)
    inst.components.combat:SetAttackPeriod(0.5)
    inst.components.combat:SetRetargetFunction(2, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 25, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end)
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(1500)
    inst.components.health.nofadeout = true
    inst:DoPeriodicTask(1, function(inst)
      if inst:HasTag("cango") then
        if not inst.components.container:Has("goldnugget", 20) then
           inst.AnimState:SetBloomEffectHandle("")
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
        else
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
        end
      else
         inst.AnimState:SetBloomEffectHandle("")
         inst.components.locomotor:Stop()
         inst:SetBrain(nil)
         inst.components.follower:SetLeader(nil)
      end
    end )
    inst:DoPeriodicTask(480, function(inst)
        if inst.components.container:Has("goldnugget", 20) then
           inst.components.container:ConsumeByName("goldnugget", 20)
           inst.components.health:DoDelta(500)
        end
    end )
    inst:AddComponent( "playerprox" )
    inst.components.playerprox:SetDist(3,5)
    inst.components.playerprox:SetOnPlayerNear(function(inst)
        inst.components.locomotor.walkspeed = 1
        inst.components.locomotor.runspeed = 2
    end )
    inst.components.playerprox:SetOnPlayerFar(function(inst)
        inst.components.locomotor.walkspeed = 8
        inst.components.locomotor.runspeed = 15
    end )
    inst.AnimState:Hide("HAT")
    inst.AnimState:Hide("HAT_HAIR")
    inst.AnimState:Show("HAIR_NOHAT")
    inst.AnimState:Show("HAIR")
    inst.AnimState:ClearOverrideSymbol("swap_body")
    for k,v in pairs(inst.components.container.slots) do
        if v.prefab == "footballhat" or v.prefab == "ruinshat" or v.prefab == "beefalohat" or v.prefab == "featherhat" then
           inst.AnimState:Show("HAT")
           inst.AnimState:Show("HAT_HAIR")
           inst.AnimState:Hide("HAIR_NOHAT")
           inst.AnimState:Hide("HAIR")
        end
        if v and v.prefab == "armorgrass" then
           inst.AnimState:OverrideSymbol("swap_body", "armor_grass", "swap_body")
           inst:ListenForEvent("attacked", function(inst, data)
               inst.components.health:DoDelta(15)
           end )
        end
        if v and v.prefab == "armorwood" then
           inst.AnimState:OverrideSymbol("swap_body", "armor_wood", "swap_body")
           inst:ListenForEvent("attacked", function(inst, data)
               inst.components.health:DoDelta(20)
           end )
        end
        if v and v.prefab == "armormarble" then
           inst.AnimState:OverrideSymbol("swap_body", "armor_marble", "swap_body")
           inst:ListenForEvent("attacked", function(inst, data)
               inst.components.health:DoDelta(25)
           end )
        end
        if v and v.prefab == "armor_sanity" then
           inst.AnimState:OverrideSymbol("swap_body", "armor_sanity", "swap_body")
           inst:ListenForEvent("attacked", function(inst, data)
               inst.components.health:DoDelta(30)
           end )
        end
        if v and v.prefab == "armorruins" then
           inst.AnimState:OverrideSymbol("swap_body", "armor_ruins", "swap_body")
           inst:ListenForEvent("attacked", function(inst, data)
               inst.components.health:DoDelta(35)
           end )
        end
        if v and v.prefab == "footballhat" then
           inst.AnimState:OverrideSymbol("swap_hat", "hat_football", "swap_hat")
        end
        if v and v.prefab == "ruinshat" then
           inst.AnimState:OverrideSymbol("swap_hat", "hat_ruins", "swap_hat")
        end
        if v and v.prefab == "beefalohat" then
           inst.AnimState:OverrideSymbol("swap_hat", "hat_beefalo", "swap_hat")
        end
        if v and v.prefab == "featherhat" then
           inst.AnimState:OverrideSymbol("swap_hat", "hat_feather", "swap_hat")
        end
    end
  end
  if data and data.cango then
     inst:AddTag("cango")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在身上有100个黄金时，用火药种私家军，将花费100个黄金，身上黄金数不足时不会种出来。鼠标左键点击他可打开格子，放入至少20个黄金后，点Go按钮，会跟随你打仗。追上他用鼠标左键再次点击，可让他停在原地，想让他继续跟随，就再点Go按钮即可。私家军士兵每天的工资是20个黄金，自动从他身上的黄金中扣除（并同时回补三分之一的血），如果他身上的黄金数不足20个时，将罢工，请及时续费。如果私家军的格子中有盔甲、帽子，点Go按钮会自动装备。装备盔甲可提高私家军的防御力，按防御力由低到高排序为草盔甲、木盔甲、大理石盔甲、夜魔盔甲、远古盔甲。装备帽子只起到装饰作用，可装备的帽子有猪皮帽、远古帽、牛毛帽、羽毛帽。不要在他的格子里放2个盔甲或2个帽子，他只会选择1个装备。私家军在小地图上显示为科学机器的图标，可以方便地找到他们的位置。火药在科学选项（画着原子）下，用1个烂鸡蛋、1个木炭、1个硝石制造




二０二.天使蝴蝶（用雨衣种天使蝴蝶，为你照亮，电击来犯之敌，可收入物品栏）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\raincoat.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local scalewing = SpawnPrefab("raincoat")
    scalewing.Transform:SetPosition(pt.x, pt.y, pt.z)
    scalewing.AnimState:SetBank("butterfly")
    scalewing.AnimState:SetBuild("butterfly_basic")
    scalewing.AnimState:PlayAnimation("idle")
    scalewing.AnimState:SetRayTestOnBB(true);
    scalewing.Transform:SetTwoFaced()
    scalewing.Transform:SetScale(1.5, 1.5, 1.5)
    scalewing.AnimState:SetMultColour(255/255,0/255,115/255,0.8)
    scalewing.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    scalewing.entity:AddSoundEmitter()
    local shadow = scalewing.entity:AddDynamicShadow()
    shadow:SetSize(.8, .5)
    RemovePhysicsColliders(scalewing)
    scalewing.entity:AddLight()
    scalewing.Light:SetFalloff(1)
    scalewing.Light:SetIntensity(.8)
    scalewing.Light:SetRadius(12)
    scalewing.Light:SetColour(180/255, 195/255, 50/255)
    scalewing.Light:Enable(true)
    scalewing:RemoveComponent("inventoryitem")
    scalewing:RemoveComponent("equippable")
    scalewing:RemoveComponent("waterproofer")
    scalewing:RemoveComponent("fueled")
    scalewing:RemoveComponent("insulator")
    scalewing:RemoveComponent("deployable")
    scalewing:AddComponent("inventoryitem")
    scalewing.components.inventoryitem:ChangeImageName("butterfly")
    scalewing:AddComponent("named")
    scalewing.components.named:SetName("Butterfly")
    scalewing:AddComponent("follower")
    scalewing.components.follower:SetLeader(GetPlayer())
    scalewing:AddComponent("locomotor")
    scalewing.components.locomotor.walkspeed = 8
    scalewing:SetStateGraph("SGbutterfly")
    local brain = require "brains/abigailbrain"
    scalewing:SetBrain(brain)
    scalewing:AddComponent("health")
    scalewing.components.health:SetMaxHealth(10)
    scalewing.components.health:SetInvincible(true)
    scalewing:AddComponent("combat")
    scalewing.components.combat:SetDefaultDamage(0)
    scalewing.components.combat:SetRange(2)
    scalewing.components.combat:SetAttackPeriod(0.5)
    scalewing.components.combat:SetRetargetFunction(1, function(scalewing)
        if not scalewing.components.health:IsDead() then
            return FindEntity(GetPlayer(), 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == scalewing or scalewing.components.combat.target == guy or guy:HasTag("monster")
                end
            end)
        end
    end )
    scalewing.components.combat:SetKeepTargetFunction(function(scalewing, target) return target and target:IsValid() end )
    scalewing:AddTag("duty")
    scalewing.task = scalewing:DoPeriodicTask(0.5, function(scalewing)
        local target = FindEntity(scalewing, 3, function(guy)
            if guy.components.health and not guy.components.health:IsDead() then
               return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == scalewing or scalewing.components.combat.target == guy or guy:HasTag("monster")
            end
        end )
        if target then
           if target.components.combat then target.components.combat:SetTarget(scalewing) end
           if target.components.locomotor then target.components.locomotor:Stop() end
           SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
           scalewing.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
           target.components.health:DoDelta(-100)
        end
    end )
    scalewing.components.inventoryitem:SetOnDroppedFn(function(scalewing)
        scalewing:AddTag("duty")
        scalewing.Light:Enable(true)
        scalewing.task = scalewing:DoPeriodicTask(0.5, function(scalewing)
            local target = FindEntity(scalewing, 3, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == scalewing or scalewing.components.combat.target == guy or guy:HasTag("monster")
                end
            end )
            if target then
               if target.components.combat then target.components.combat:SetTarget(scalewing) end
               if target.components.locomotor then target.components.locomotor:Stop() end
               SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
               scalewing.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
               target.components.health:DoDelta(-100)
            end
        end )
    end )
    scalewing.components.inventoryitem:SetOnPickupFn(function(scalewing)
        scalewing:RemoveTag("duty")
        scalewing.Light:Enable(false)
        if scalewing.task then scalewing.task:Cancel() scalewing.task = nil end
    end )
    scalewing.components.inventoryitem:SetOnPutInInventoryFn(function(scalewing)
        scalewing:RemoveTag("duty")
        scalewing.Light:Enable(false)
        if scalewing.task then scalewing.task:Cancel() scalewing.task = nil end
    end )
    scalewing:AddTag("scalewings")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("scalewings") then
        data.scalewings = true
    end
    if inst:HasTag("duty") then
        data.duty = true
    end
end
local function onload(inst, data)
  if data and data.scalewings then
    inst.AnimState:SetBank("butterfly")
    inst.AnimState:SetBuild("butterfly_basic")
    inst.AnimState:PlayAnimation("idle")
    inst.AnimState:SetRayTestOnBB(true);
    inst.Transform:SetTwoFaced()
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    inst.AnimState:SetMultColour(255/255,0/255,115/255,0.8)
    inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize(.8, .5)
    RemovePhysicsColliders(inst)
    inst.entity:AddLight()
    inst.Light:SetFalloff(1)
    inst.Light:SetIntensity(.8)
    inst.Light:SetRadius(12)
    inst.Light:SetColour(180/255, 195/255, 50/255)
    inst.Light:Enable(true)
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("waterproofer")
    inst:RemoveComponent("fueled")
    inst:RemoveComponent("insulator")
    inst:RemoveComponent("deployable")
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:ChangeImageName("butterfly")
    inst:AddComponent("named")
    inst.components.named:SetName("Butterfly")
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 8
    inst:SetStateGraph("SGbutterfly")
    local brain = require "brains/abigailbrain"
    inst:SetBrain(brain)
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(10)
    inst.components.health:SetInvincible(true)
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(0)
    inst.components.combat:SetRange(2)
    inst.components.combat:SetAttackPeriod(0.5)
    inst.components.combat:SetRetargetFunction(1, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(GetPlayer(), 20, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == inst or inst.components.combat.target == guy or guy:HasTag("monster")
                end
            end)
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst.components.inventoryitem:SetOnDroppedFn(function(inst)
        inst:AddTag("duty")
        inst.Light:Enable(true)
        inst.task = inst:DoPeriodicTask(0.5, function(inst)
            local target = FindEntity(inst, 3, function(guy)
                if guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == inst or inst.components.combat.target == guy or guy:HasTag("monster")
                end
            end )
            if target then
               if target.components.combat then target.components.combat:SetTarget(inst) end
               if target.components.locomotor then target.components.locomotor:Stop() end
               SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
               inst.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
               target.components.health:DoDelta(-100)
            end
        end )
    end )
    inst.components.inventoryitem:SetOnPickupFn(function(inst)
        inst:RemoveTag("duty")
        inst.Light:Enable(false)
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst.components.inventoryitem:SetOnPutInInventoryFn(function(inst)
        inst:RemoveTag("duty")
        inst.Light:Enable(false)
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst:AddTag("scalewings")
  end
  if data and data.duty then
    inst:AddTag("duty")
    inst.task = inst:DoPeriodicTask(0.5, function(inst)
        local target = FindEntity(inst, 3, function(guy)
            if guy.components.health and not guy.components.health:IsDead() then
               return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy.components.combat.target == inst or inst.components.combat.target == guy or guy:HasTag("monster")
            end
        end )
        if target then
           if target.components.combat then target.components.combat:SetTarget(inst) end
           if target.components.locomotor then target.components.locomotor:Stop() end
           SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
           inst.SoundEmitter:PlaySound("dontstarve/common/lightningrod")
           target.components.health:DoDelta(-100)
        end
    end )
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用雨衣种天使蝴蝶，会跟随你，为你照亮。任何企图攻击你的敌人，都会遭到天使蝴蝶的电击，杀伤其生命值，并阻止其靠近你。鼠标左键点击天使蝴蝶，可收入物品栏，显示为蝴蝶图标。不想要天使蝴蝶了，在物品栏中对其按鼠标右键即可。雨衣在穿戴选项（画着礼帽）下，用2个触手皮、2个绳子、2个硬骨头制造




二０三.宠物熊（用黄色护身符种宠物熊，是战场好帮手，左键点击可停在原地，喂大肉可补血）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，在inst.AnimState:PlayAnimation("yellowamulet")的下一行插入以下内容：

local function SetStandState(inst, state)
    inst.StandState = string.lower(state)
end
local function OnDeploy (inst, pt)
    local mybear = SpawnPrefab("yellowamulet")
    mybear.Transform:SetPosition(pt.x, pt.y, pt.z)
    mybear.AnimState:SetBank("bearger")
    mybear.AnimState:SetBuild("bearger_build")
    mybear.AnimState:PlayAnimation("idle_loop", true)
    mybear.Transform:SetScale(0.5, 0.5, 0.5)
    mybear.Transform:SetFourFaced()
    local sound = mybear.entity:AddSoundEmitter()
    local shadow = mybear.entity:AddDynamicShadow()
    shadow:SetSize(3, 1.8)
    MakeCharacterPhysics(mybear, 500, 1)
    mybear:RemoveComponent("equippable")
    mybear:RemoveComponent("inventoryitem")
    mybear:RemoveComponent("fueled")
    mybear:RemoveComponent("deployable")
    SetStandState(mybear, "QUAD")
    mybear.CanGroundPound = false
    mybear.SetStandState = SetStandState
    mybear.IsStandState = function(mybear, state)
        return mybear.StandState == string.lower(state)
    end
    mybear.WorkEntities = function(mybear)
        mybear.SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
        GetPlayer().components.playercontroller:ShakeCamera(mybear, "FULL", 0.5, 0.05, 2, 40)
    end
    mybear:AddComponent("groundpounder")
    mybear.components.groundpounder.destroyer = true
    mybear.components.groundpounder.damageRings = 3
    mybear.components.groundpounder.destructionRings = 4
    mybear.components.groundpounder.numRings = 5
    mybear:AddComponent("named")
    mybear.components.named:SetName("My Bear")
    mybear:AddComponent("inventory")
    mybear:AddComponent("knownlocations")
    mybear:AddComponent("timer")
    mybear:AddComponent("eater")
    mybear.components.eater.foodprefs = {"MEAT"}
    mybear:AddComponent("follower")
    mybear.components.follower:SetLeader(GetPlayer())
    mybear:AddComponent("lootdropper")
    mybear.components.lootdropper:SetLoot({"meat", "meat", "meat", "meat", "bearger_fur"})
    mybear:AddComponent("health")
    mybear.components.health:SetMaxHealth(10000)
    mybear:AddComponent("combat")
    mybear.components.combat:SetDefaultDamage(300)
    mybear.components.combat:SetAttackPeriod(0.5)
    mybear.components.combat.hiteffectsymbol = "bearger_body"
    mybear.components.combat:SetAreaDamage(4, 1)
    mybear.components.combat.playerdamagepercent = 0
    mybear.components.combat:SetRange(2, 4)
    mybear.components.combat:SetHurtSound("dontstarve_DLC001/creatures/bearger/hurt")
    mybear.components.combat:SetRetargetFunction(1, function(mybear)
        if not mybear.components.health:IsDead() then
            return FindEntity(mybear, 25, function(guy)
                if guy.components.combat then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    mybear.components.combat:SetKeepTargetFunction(function(mybear, target) return target and target:IsValid() end )
    mybear:ListenForEvent("attacked", function(mybear, data)
        if data.attacker ~= GetPlayer() then
           mybear.components.combat:SetTarget(data.attacker)
        else
           mybear.components.combat:SetTarget(nil)
        end
    end )
    mybear:AddComponent("locomotor")
    mybear.components.locomotor.walkspeed = 15
    mybear.components.locomotor.runspeed = 20
    mybear.components.locomotor:SetShouldRun(true)
    mybear:SetStateGraph("SGbearger")
    local brain = require "brains/abigailbrain"
    mybear:SetBrain(brain)
    mybear:AddComponent("trader")
    mybear.components.trader:SetAcceptTest(function(mybear, item)
        if item.prefab == "meat" then
           return mybear.components.health:GetPercent() < 1
        end
        return false
    end )
    mybear.components.trader.onaccept = function(mybear, giver, item)
        if item.prefab == "meat" then
           mybear.components.health:DoDelta(2000)
        end
    end
    mybear.components.inspectable.getstatus = function(mybear)
        if not mybear:HasTag("stophere") then
           mybear:AddTag("stophere")
           mybear.components.locomotor:Stop()
           mybear:SetBrain(nil)
           mybear.components.follower:SetLeader(nil)
           mybear.AnimState:PlayAnimation("sleep_loop",true)
        else
           mybear:RemoveTag("stophere")
           local brain = require "brains/abigailbrain"
           mybear:SetBrain(brain)
           mybear:RestartBrain()
           mybear.components.follower:SetLeader(GetPlayer())
        end
    end
    mybear:AddTag("companion")
    mybear:AddTag("mybears")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("mybears") then
        data.mybears = true
    end
    if inst:HasTag("stophere") then
        data.stophere = true
    end
end
local function onload(inst, data)
  if data and data.mybears then
    inst.AnimState:SetBank("bearger")
    inst.AnimState:SetBuild("bearger_build")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.Transform:SetScale(0.5, 0.5, 0.5)
    inst.Transform:SetFourFaced()
    local sound = inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize(3, 1.8)
    MakeCharacterPhysics(inst, 500, 1)
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("fueled")
    inst:RemoveComponent("deployable")
    SetStandState(inst, "QUAD")
    inst.CanGroundPound = false
    inst.SetStandState = SetStandState
    inst.IsStandState = function(inst, state)
        return inst.StandState == string.lower(state)
    end
    inst.WorkEntities = function(inst)
        inst.SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
        GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.5, 0.05, 2, 40)
    end
    inst:AddComponent("groundpounder")
    inst.components.groundpounder.destroyer = true
    inst.components.groundpounder.damageRings = 3
    inst.components.groundpounder.destructionRings = 4
    inst.components.groundpounder.numRings = 5
    inst:AddComponent("named")
    inst.components.named:SetName("My Bear")
    inst:AddComponent("inventory")
    inst:AddComponent("knownlocations")
    inst:AddComponent("timer")
    inst:AddComponent("eater")
    inst.components.eater.foodprefs = {"MEAT"}
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"meat", "meat", "meat", "meat", "bearger_fur"})
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(10000)
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(300)
    inst.components.combat:SetAttackPeriod(0.5)
    inst.components.combat.hiteffectsymbol = "bearger_body"
    inst.components.combat:SetAreaDamage(4, 1)
    inst.components.combat.playerdamagepercent = 0
    inst.components.combat:SetRange(2, 4)
    inst.components.combat:SetHurtSound("dontstarve_DLC001/creatures/bearger/hurt")
    inst.components.combat:SetRetargetFunction(1, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 25, function(guy)
                if guy.components.combat then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:ListenForEvent("attacked", function(inst, data)
        if data.attacker ~= GetPlayer() then
           inst.components.combat:SetTarget(data.attacker)
        else
           inst.components.combat:SetTarget(nil)
        end
    end )
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 15
    inst.components.locomotor.runspeed = 20
    inst.components.locomotor:SetShouldRun(true)
    inst:SetStateGraph("SGbearger")
    local brain = require "brains/abigailbrain"
    inst:SetBrain(brain)
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item)
        if item.prefab == "meat" then
           return inst.components.health:GetPercent() < 1
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        if item.prefab == "meat" then
           inst.components.health:DoDelta(2000)
        end
    end
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("stophere") then
           inst:AddTag("stophere")
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
           inst.AnimState:PlayAnimation("sleep_loop",true)
        else
           inst:RemoveTag("stophere")
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
        end
    end
    inst:AddTag("companion")
    inst:AddTag("mybears")
  end
  if data and data.stophere then
    inst:AddTag("stophere")
    inst.components.locomotor:Stop()
    inst:SetBrain(nil)
    inst.components.follower:SetLeader(nil)
    inst.AnimState:PlayAnimation("sleep_loop",true)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用黄色护身符种宠物熊，它身强力壮，是战斗时的好帮手。鼠标左键点熊，可让它停在原地，再次点击可继续跟随。给宠物熊大肉（拿着大肉对其点鼠标左键），可为它补血，最多5块可补满。不想要宠物熊了，杀死即可（按Ctrl + 鼠标左键攻击），它不会还手。宠物熊行走时会撞碎阻挡的建筑、植物，所以不要让它离你的基地太近。黄色护身符在远古选项（画着远古祭坛）下，用2个铥矿石、3个噩梦燃料、1个黄色宝石制造




二０四.宠物蜻蜓（用蜻蜓盔甲种宠物蜻蜓，攻击力超强，鼠标右键点击可帮你捡地上的物品）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\armor_dragonfly.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local myfly = SpawnPrefab("armordragonfly")
    myfly.Transform:SetPosition(pt.x, pt.y, pt.z)
    myfly.AnimState:SetBank("dragonfly")
    myfly.AnimState:SetBuild("dragonfly_build")
    myfly.AnimState:PlayAnimation("idle", true)
    myfly.Transform:SetScale(0.5, 0.5, 0.5)
    myfly.Transform:SetFourFaced()
    local sound = myfly.entity:AddSoundEmitter()
    local shadow = myfly.entity:AddDynamicShadow()
    shadow:SetSize(3, 1.8)
    MakeCharacterPhysics(myfly, 50, 0.7)
    local light = myfly.entity:AddLight()
    myfly.Light:Enable(false)
    myfly.Light:SetRadius(2)
    myfly.Light:SetFalloff(0.5)
    myfly.Light:SetIntensity(.75)
    myfly.Light:SetColour(235/255,121/255,12/255)
    myfly:RemoveComponent("inventoryitem")
    myfly:RemoveComponent("armor")
    myfly:RemoveComponent("equippable")
    myfly:RemoveComponent("deployable")
    MakeLargePropagator(myfly)
    myfly.components.propagator.decayrate = 0
    myfly:AddComponent("groundpounder")
    myfly.components.groundpounder.numRings = 2
    myfly.components.groundpounder.burner = true
    myfly.components.groundpounder.groundpoundfx = "firesplash_fx"
    myfly.components.groundpounder.groundpounddamagemult = .5
    myfly.components.groundpounder.groundpoundringfx = "firering_fx"
    myfly:AddComponent("named")
    myfly.components.named:SetName("My Dragonfly")
    myfly:AddComponent("inventory")
    myfly:AddComponent("knownlocations")
    myfly:AddComponent("follower")
    myfly.components.follower:SetLeader(GetPlayer())
    myfly:AddComponent("lootdropper")
    myfly.components.lootdropper:SetLoot({"meat", "meat", "meat", "meat", "dragon_scales"})
    myfly:AddComponent("health")
    myfly.components.health:SetMaxHealth(5000)
    myfly:AddComponent("combat")
    myfly.components.combat:SetDefaultDamage(300)
    myfly.components.combat:SetAttackPeriod(0.5)
    myfly.components.combat.hiteffectsymbol = "dragonfly_body"
    myfly.components.combat:SetAreaDamage(6, 0.8)
    myfly.components.combat.playerdamagepercent = 0
    myfly.components.combat:SetRange(4)
    myfly.components.combat.battlecryenabled = false
    myfly.components.combat:SetHurtSound("dontstarve_DLC001/creatures/dragonfly/hurt")
    myfly.components.combat:SetRetargetFunction(1, function(myfly)
        if not myfly.components.health:IsDead() then
            return FindEntity(myfly, 25, function(guy)
                if guy.components.combat then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    myfly.components.combat:SetKeepTargetFunction(function(myfly, target) return target and target:IsValid() end )
    myfly:ListenForEvent("attacked", function(myfly, data)
        if data.attacker ~= GetPlayer() then
           if not data.attacker:HasTag("myflys") then
              myfly.components.combat:SetTarget(data.attacker)
           end
        else
           myfly.components.health:Kill()
        end
    end )
    myfly:AddComponent("locomotor")
    myfly.components.locomotor.walkspeed = 25
    myfly:SetStateGraph("SGdragonfly")
    local brain = require "brains/abigailbrain"
    myfly:SetBrain(brain)
    myfly:DoPeriodicTask(5, function()
        if myfly.components.combat and not myfly.components.combat.target then
           if myfly.fire_build then
              myfly.sg:GoToState("flameoff")
           end
           if myfly.components.health and myfly.components.health:GetPercent() < 1 then
              myfly.components.health:DoDelta(200)
           end
        end
    end )
    myfly:AddComponent("machine")
    myfly.components.machine.turnonfn = function()
        myfly:AddTag("inhaling")
        myfly.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        myfly.task = myfly:DoPeriodicTask(.5, function(myfly)
            local pos = Vector3(myfly.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 15)
            for k,v in pairs(ents) do
                local pt1 = v:GetPosition()
                if v.components.inventoryitem and v.components.inventoryitem.canbepickedup and v.components.inventoryitem.cangoincontainer
                   and not v.components.inventoryitem:IsHeld() and not v:HasTag("trap") and not v:HasTag("light") and not v:HasTag("blowdart")
                   and not v:HasTag("projectile") then
                   if not GetPlayer().components.inventory:IsFull() then
                      SpawnPrefab("small_puff").Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                      GetPlayer().components.inventory:GiveItem(v)
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                   end
                end
            end
        end )
    end
    myfly.components.machine.turnofffn = function()
        myfly:RemoveTag("inhaling")
        myfly.AnimState:SetBloomEffectHandle( "" )
        if myfly.task then myfly.task:Cancel() myfly.task = nil end
    end
    myfly.components.inspectable.getstatus = function(myfly)
        if not myfly:HasTag("stophere") then
           myfly:AddTag("stophere")
           myfly.components.locomotor:Stop()
           myfly:SetBrain(nil)
           myfly.components.follower:SetLeader(nil)
           myfly.sg:GoToState("flameoff")
        else
           myfly:RemoveTag("stophere")
           local brain = require "brains/abigailbrain"
           myfly:SetBrain(brain)
           myfly:RestartBrain()
           myfly.components.follower:SetLeader(GetPlayer())
        end
    end
    myfly:ListenForEvent("death", function()
        myfly.components.machine:TurnOff()
    end )
    myfly:AddTag("companion")
    myfly:AddTag("myflys")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("myflys") then
        data.myflys = true
    end
    if inst:HasTag("stophere") then
        data.stophere = true
    end
    if inst:HasTag("inhaling") then
        data.inhaling = true
    end
end
local function onload(inst, data)
  if data and data.myflys then
    inst.AnimState:SetBank("dragonfly")
    inst.AnimState:SetBuild("dragonfly_build")
    inst.AnimState:PlayAnimation("idle", true)
    inst.Transform:SetScale(0.5, 0.5, 0.5)
    inst.Transform:SetFourFaced()
    local sound = inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize(3, 1.8)
    MakeCharacterPhysics(inst, 50, 0.7)
    local light = inst.entity:AddLight()
    inst.Light:Enable(false)
    inst.Light:SetRadius(2)
    inst.Light:SetFalloff(0.5)
    inst.Light:SetIntensity(.75)
    inst.Light:SetColour(235/255,121/255,12/255)
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("armor")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("deployable")
    MakeLargePropagator(inst)
    inst.components.propagator.decayrate = 0
    inst:AddComponent("groundpounder")
    inst.components.groundpounder.numRings = 2
    inst.components.groundpounder.burner = true
    inst.components.groundpounder.groundpoundfx = "firesplash_fx"
    inst.components.groundpounder.groundpounddamagemult = .5
    inst.components.groundpounder.groundpoundringfx = "firering_fx"
    inst:AddComponent("named")
    inst.components.named:SetName("My Dragonfly")
    inst:AddComponent("inventory")
    inst:AddComponent("knownlocations")
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"meat", "meat", "meat", "meat", "dragon_scales"})
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(5000)
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(300)
    inst.components.combat:SetAttackPeriod(0.5)
    inst.components.combat.hiteffectsymbol = "dragonfly_body"
    inst.components.combat:SetAreaDamage(6, 0.8)
    inst.components.combat.playerdamagepercent = 0
    inst.components.combat:SetRange(4)
    inst.components.combat.battlecryenabled = false
    inst.components.combat:SetHurtSound("dontstarve_DLC001/creatures/dragonfly/hurt")
    inst.components.combat:SetRetargetFunction(1, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 25, function(guy)
                if guy.components.combat then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:ListenForEvent("attacked", function(inst, data)
        if data.attacker ~= GetPlayer() then
           if not data.attacker:HasTag("myflys") then
              inst.components.combat:SetTarget(data.attacker)
           end
        else
           inst.components.health:Kill()
        end
    end )
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 25
    inst:SetStateGraph("SGdragonfly")
    local brain = require "brains/abigailbrain"
    inst:SetBrain(brain)
    inst:DoPeriodicTask(5, function()
        if inst.components.combat and not inst.components.combat.target then
           if inst.fire_build then
              inst.sg:GoToState("flameoff")
           end
           if inst.components.health and inst.components.health:GetPercent() < 1 then
              inst.components.health:DoDelta(200)
           end
        end
    end )
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = function()
        inst:AddTag("inhaling")
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        inst.task = inst:DoPeriodicTask(.5, function(inst)
            local pos = Vector3(inst.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 15)
            for k,v in pairs(ents) do
                local pt1 = v:GetPosition()
                if v.components.inventoryitem and v.components.inventoryitem.canbepickedup and v.components.inventoryitem.cangoincontainer
                   and not v.components.inventoryitem:IsHeld() and not v:HasTag("trap") and not v:HasTag("light") and not v:HasTag("blowdart")
                   and not v:HasTag("projectile") then
                   if not GetPlayer().components.inventory:IsFull() then
                      SpawnPrefab("small_puff").Transform:SetPosition(pt1.x, pt1.y, pt1.z)
                      GetPlayer().components.inventory:GiveItem(v)
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                   end
                end
            end
        end )
    end
    inst.components.machine.turnofffn = function()
        inst:RemoveTag("inhaling")
        inst.AnimState:SetBloomEffectHandle( "" )
        if inst.task then inst.task:Cancel() inst.task = nil end
    end
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("stophere") then
           inst:AddTag("stophere")
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
           inst.sg:GoToState("flameoff")
        else
           inst:RemoveTag("stophere")
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
        end
    end
    inst:ListenForEvent("death", function()
        inst.components.machine:TurnOff()
    end )
    inst:AddTag("companion")
    inst:AddTag("myflys")
  end
  if data and data.stophere then
    inst:AddTag("stophere")
    inst.components.locomotor:Stop()
    inst:SetBrain(nil)
    inst.components.follower:SetLeader(nil)
    inst.sg:GoToState("flameoff")
  end
  if data and data.inhaling then
    inst.components.machine.ison = true
    inst.components.machine:TurnOn()
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜻蜓盔甲种宠物蜻蜓，攻击力超强，并自动补血，是战斗时的好帮手。鼠标左键点蜻蜓，可让它停在原地，再次点击可继续跟随。鼠标右键点蜻蜓，可让它帮你捡地上的东西（快速吸取至主角物品栏），再次点击可停止捡东西。不想要宠物蜻蜓了，杀死即可（按Ctrl + 鼠标左键攻击），打一下即死。宠物蜻蜓攻击时会引发火灾，所以带它战斗时不要离基地太近，也不要同时带1个以上的宠物蜻蜓去战斗，否则容易互殴。蜻蜓盔甲在战斗选项（画着两把剑）下，用1个蜻蜓鳞片、1个木盔甲、3个猪皮制造




二０五.统御战狼（按键盘X键召唤战狼，誓死护卫你，给5块疯肉升级为金刚战狼）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_X, function()
    if inst.components.inventory:Has("goldnugget", 20) then
       inst.components.inventory:ConsumeByName("goldnugget", 20)
       inst.AnimState:PlayAnimation("give")
       inst.SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
       local mywolf = SpawnPrefab("greenamulet")
       local pt = GetPlayer():GetPosition()
       mywolf.Transform:SetPosition(pt.x+(math.random(3)-math.random(3)), 0, pt.z+(math.random(3)-math.random(3)))
       mywolf.AnimState:SetBank("warg")
       mywolf.AnimState:SetBuild("warg_build")
       mywolf.AnimState:PlayAnimation("idle")
       mywolf.Transform:SetScale(0.6, 0.6, 0.6)
       mywolf.Transform:SetFourFaced()
       local sound = mywolf.entity:AddSoundEmitter()
       local shadow = mywolf.entity:AddDynamicShadow()
       shadow:SetSize(1.2, 0.7)
       MakeCharacterPhysics(mywolf, 100, 1)
       mywolf:RemoveComponent("equippable")
       mywolf:RemoveComponent("inventoryitem")
       mywolf:RemoveComponent("finiteuses")
       mywolf:RemoveComponent("deployable")
       mywolf:AddComponent("named")
       mywolf.components.named:SetName("Wolf")
       mywolf:AddComponent("follower")
       mywolf.components.follower:SetLeader(GetPlayer())
       mywolf:AddComponent("lootdropper")
       mywolf.components.lootdropper:SetLoot({"monstermeat", "houndstooth"})
       mywolf:AddComponent("health")
       mywolf.components.health:SetMaxHealth(1000)
       mywolf.components.health:StartRegen(50, 10)
       mywolf:AddComponent("combat")
       mywolf.components.combat:SetDefaultDamage(50)
       mywolf.components.combat:SetAttackPeriod(0.5)
       mywolf.components.combat:SetRange(3)
       mywolf.components.combat:SetRetargetFunction(1, function(mywolf)
           if not mywolf.components.health:IsDead() then
               return FindEntity(mywolf, 25, function(guy)
                   if guy.components.combat then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end )
           end
       end )
       mywolf.components.combat:SetKeepTargetFunction(function(mywolf, target) return target and target:IsValid() end )
       mywolf:ListenForEvent("attacked", function(mywolf, data)
           if data.attacker ~= GetPlayer() then
              mywolf.components.combat:SetTarget(data.attacker)
              mywolf.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("mywolfs") and not dude.components.health:IsDead() end, 10)
           else
              mywolf.components.health:Kill()
           end
       end )
       mywolf:AddComponent("locomotor")
       mywolf.components.locomotor.runspeed = 18
       mywolf.components.locomotor:SetShouldRun(true)
       mywolf:SetStateGraph("SGwarg")
       local brain = require "brains/abigailbrain"
       mywolf:SetBrain(brain)
       mywolf:AddComponent("trader")
       mywolf.components.trader:SetAcceptTest(function(mywolf, item)
           if GetPlayer().components.inventory:Has("monstermeat", 5) then
              if item.prefab == "monstermeat" then
                 if not mywolf:HasTag("superwolf") then
                    return true
                 end
              end
           end
           return false
       end )
       mywolf.components.trader.onaccept = function(mywolf, giver, item)
           if item.prefab == "monstermeat" then
              giver.components.inventory:ConsumeByName("monstermeat", 4)
              mywolf:AddTag("superwolf")
              mywolf.components.named:SetName("Super Wolf")
              mywolf.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
              mywolf.Transform:SetScale(0.7, 0.7, 0.7)
              mywolf.components.health:SetMaxHealth(2000)
              mywolf.components.health:DoDelta(2000)
              mywolf.components.combat:SetDefaultDamage(100)
              mywolf.components.locomotor.runspeed = 25
           end
       end
       mywolf.components.inspectable.getstatus = function(mywolf)
           if not mywolf:HasTag("stophere") then
              mywolf:AddTag("stophere")
              mywolf.components.locomotor:Stop()
              mywolf:SetBrain(nil)
              mywolf.components.follower:SetLeader(nil)
           else
              mywolf:RemoveTag("stophere")
              local brain = require "brains/abigailbrain"
              mywolf:SetBrain(brain)
              mywolf:RestartBrain()
              mywolf.components.follower:SetLeader(GetPlayer())
           end
       end
       mywolf:AddTag("companion")
       mywolf:AddTag("mywolfs")
    end
end )


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，在inst.AnimState:PlayAnimation("greenamulet")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("mywolfs") then
        data.mywolfs = true
    end
    if inst:HasTag("superwolf") then
        data.superwolf = true
    end
    if inst:HasTag("stophere") then
        data.stophere = true
    end
end
local function onload(inst, data)
    if data and data.mywolfs then
       inst.AnimState:SetBank("warg")
       inst.AnimState:SetBuild("warg_build")
       inst.AnimState:PlayAnimation("idle")
       inst.Transform:SetScale(0.6, 0.6, 0.6)
       inst.Transform:SetFourFaced()
       local sound = inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize(1.2, 0.7)
       MakeCharacterPhysics(inst, 100, 1)
       inst:RemoveComponent("equippable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("finiteuses")
       inst:RemoveComponent("deployable")
       inst:AddComponent("named")
       inst.components.named:SetName("Wolf")
       inst:AddComponent("follower")
       inst.components.follower:SetLeader(GetPlayer())
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"monstermeat", "houndstooth"})
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(1000)
       inst.components.health:StartRegen(50, 10)
       inst:AddComponent("combat")
       inst.components.combat:SetDefaultDamage(50)
       inst.components.combat:SetAttackPeriod(0.5)
       inst.components.combat:SetRange(3)
       inst.components.combat:SetRetargetFunction(1, function(inst)
           if not inst.components.health:IsDead() then
               return FindEntity(inst, 25, function(guy)
                   if guy.components.combat then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end )
           end
       end )
       inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
       inst:ListenForEvent("attacked", function(inst, data)
           if data.attacker ~= GetPlayer() then
              inst.components.combat:SetTarget(data.attacker)
              inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("mywolfs") and not dude.components.health:IsDead() end, 10)
           else
              inst.components.health:Kill()
           end
       end )
       inst:AddComponent("locomotor")
       inst.components.locomotor.runspeed = 18
       inst.components.locomotor:SetShouldRun(true)
       inst:SetStateGraph("SGwarg")
       local brain = require "brains/abigailbrain"
       inst:SetBrain(brain)
       inst:AddComponent("trader")
       inst.components.trader:SetAcceptTest(function(inst, item)
           if GetPlayer().components.inventory:Has("monstermeat", 5) then
              if item.prefab == "monstermeat" then
                 if not inst:HasTag("superwolf") then
                    return true
                 end
              end
           end
           return false
       end )
       inst.components.trader.onaccept = function(inst, giver, item)
           if item.prefab == "monstermeat" then
              giver.components.inventory:ConsumeByName("monstermeat", 4)
              inst:AddTag("superwolf")
              inst.components.named:SetName("Super Wolf")
              inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
              inst.Transform:SetScale(0.7, 0.7, 0.7)
              inst.components.health:SetMaxHealth(2000)
              inst.components.health:DoDelta(2000)
              inst.components.combat:SetDefaultDamage(100)
              inst.components.locomotor.runspeed = 25
           end
       end
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("stophere") then
              inst:AddTag("stophere")
              inst.components.locomotor:Stop()
              inst:SetBrain(nil)
              inst.components.follower:SetLeader(nil)
           else
              inst:RemoveTag("stophere")
              local brain = require "brains/abigailbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
           end
       end
       inst:AddTag("companion")
       inst:AddTag("mywolfs")
    end
    if data and data.superwolf then
       inst:AddTag("superwolf")
       inst.components.named:SetName("Super Wolf")
       inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
       inst.Transform:SetScale(0.7, 0.7, 0.7)
       inst.components.health:SetMaxHealth(2000)
       inst.components.health:DoDelta(2000)
       inst.components.combat:SetDefaultDamage(100)
       inst.components.locomotor.runspeed = 25
    end
    if data and data.stophere then
      inst:AddTag("stophere")
      inst.components.locomotor:Stop()
      inst:SetBrain(nil)
      inst.components.follower:SetLeader(nil)
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可按键盘X键召唤战狼，每只花费20个黄金，身上黄金数不足时无法召唤。战狼极其忠诚，会誓死护卫你，鼠标左键点击可停在原地，再次点击则继续跟随。如果想赐战狼死，用任何武器打击一下即可（按Ctrl + 鼠标左键攻击），它不会还击。战狼生命力顽强，会自动回血。当一只战狼遭到攻击时，其他战狼会围攻敌人。给战狼5块疯肉（拿着疯肉对战狼点鼠标左键），可将其升级为金刚战狼，生命值、攻击力、速度会大幅提升。统御你的战狼部队，横扫大陆吧




二０六.糖豆敢死队（按键盘T键召唤糖豆敢死队，对敌发动自杀式爆炸，鼠标左键点击可退钱）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_T, function()
    if inst.components.inventory:Has("goldnugget", 2) then
       inst.components.inventory:ConsumeByName("goldnugget", 2)
       inst.AnimState:PlayAnimation("give")
       inst.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
       local bean = SpawnPrefab("goatmilk")
       local pt = GetPlayer():GetPosition()
       bean.Transform:SetPosition(pt.x+(math.random(3)-math.random(3)), 0, pt.z+(math.random(3)-math.random(3)))
       SpawnPrefab("collapse_small").Transform:SetPosition(bean.Transform:GetWorldPosition())
       bean.AnimState:SetBank("treedrake")
       bean.AnimState:SetBuild("treedrake_build")
       bean.AnimState:PlayAnimation("enter")
       bean.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
       bean.Transform:SetScale(1.2, 1.2, 1.2)
       bean.Transform:SetFourFaced()
       local sound = bean.entity:AddSoundEmitter()
       local shadow = bean.entity:AddDynamicShadow()
       shadow:SetSize(1.25, .75)
       MakeCharacterPhysics(bean, 1, .25)
       local colours= { {198/255,43/255,43/255}, {79/255,153/255,68/255}, {35/255,105/255,235/255}, {233/255,208/255,69/255}, {109/255,50/255,163/255}, {222/255,126/255,39/255} }
       bean.colour_idx = math.random(#colours)
       bean.AnimState:SetMultColour(colours[bean.colour_idx][1],colours[bean.colour_idx][2],colours[bean.colour_idx][3],1)
       bean:RemoveComponent("edible")
       bean:RemoveComponent("perishable")
       bean:RemoveComponent("stackable")
       bean:RemoveComponent("inventoryitem")
       bean:RemoveTag("catfood")
       bean.persists = false
       bean:AddComponent("named")
       bean.components.named:SetName("Jelly Bean")
       bean:AddComponent("follower")
       bean.components.follower:SetLeader(GetPlayer())
       bean:AddComponent("health")
       bean.components.health:SetMaxHealth(10)
       bean.components.health:SetInvincible(true)
       bean:AddComponent("combat")
       bean.components.combat:SetDefaultDamage(1)
       bean.components.combat:SetAttackPeriod(2)
       bean.components.combat:SetRange(0.5)
       bean.components.combat:SetRetargetFunction(1, function(bean)
           if not bean.components.health:IsDead() then
               return FindEntity(bean, 25, function(guy)
                   if guy.components.combat then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end )
           end
       end )
       bean.components.combat:SetKeepTargetFunction(function(bean, target) return target and target:IsValid() end )
       bean:AddComponent("locomotor")
       bean.components.locomotor.walkspeed = 15
       bean:SetStateGraph("SGbirchnutdrake")
       local brain = require "brains/abigailbrain"
       bean:SetBrain(brain)
       bean:DoPeriodicTask(0.25, function()
           local pos = Vector3(bean.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 2)
           for k,v in pairs(ents) do
               if v and v.components.combat and v.components.health and not v.components.health:IsDead() then
                  if v.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == v or v.components.combat.target == bean or bean.components.combat.target == v or v:HasTag("monster") then
                     GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
                     SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                     SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
                     GetClock():DoLightningLighting()
                     GetPlayer().components.playercontroller:ShakeCamera(v, "FULL", 0.7, 0.02, .5, 40)
                     v.components.health:Kill()
                     bean:Remove()
                  end
               end
           end
       end )
       bean.components.inspectable.getstatus = function(bean)
           inst.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
           SpawnPrefab("collapse_small").Transform:SetPosition(bean.Transform:GetWorldPosition())
           for k = 1, 2 do
               local goldnugget = SpawnPrefab("goldnugget")
               inst.components.inventory:GiveItem(goldnugget)
           end
           bean:Remove()
       end
       bean:AddTag("companion")
       bean:AddTag("beans")
    end
end )

    即可按键盘T键召唤糖豆敢死队，花费2个黄金，身上黄金数不足时无法召唤。糖豆敢死队员将冲向你的敌人，对其发动自杀式爆炸，并杀伤周边敌人。鼠标点击多余的糖豆敢死队员，可清退它们，换回2个黄金（放入主角物品栏）。存档退出后再读档，糖豆敢死队将离开，在之前将它们都清退掉吧




二０七.斗牛场（用牛角种斗牛场，与公牛搏斗赢奖金，观众会向场内扔额外赏金）

    用记事本打开游戏目录\data\scripts\prefabs\horn.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local sounds = 
{
    walk = "dontstarve/beefalo/walk",
    grunt = "dontstarve/beefalo/grunt",
    yell = "dontstarve/beefalo/yell",
    swish = "dontstarve/beefalo/tail_swish",
    curious = "dontstarve/beefalo/curious",
    angry = "dontstarve/beefalo/angry",
}
local function makebullring(inst)
    local pt = inst:GetPosition()
    local bullring0 = SpawnPrefab("horn")
    bullring0.Transform:SetPosition(pt.x, pt.y, pt.z)
    bullring0.AnimState:SetBank("marble_trees")
    bullring0.AnimState:SetBuild("marble_trees")
    bullring0.AnimState:PlayAnimation("full_4")
    bullring0.Transform:SetScale(1.5, 1.5, 1.5)
    bullring0:RemoveComponent("instrument")
    bullring0:RemoveComponent("tool")
    bullring0:RemoveComponent("finiteuses")
    bullring0:RemoveComponent("inventoryitem")
    bullring0:RemoveComponent("deployable")
    bullring0:RemoveTag("horn")
    bullring0:AddComponent("named")
    bullring0.components.named:SetName("Bullring")
    local light = bullring0.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(15)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    bullring0:AddComponent("workable")
    bullring0.components.workable:SetWorkAction(ACTIONS.HAMMER)
    bullring0.components.workable:SetWorkLeft(3)
    bullring0.components.workable:SetOnFinishCallback(function()
        SpawnPrefab("collapse_big").Transform:SetPosition(bullring0.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos = Vector3(bullring0.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("nobullring") then
               v:Remove()
            end
        end
        bullring0:Remove()
    end )
    bullring0.components.inspectable.getstatus = function(bullring0)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
        local bullfighting = SpawnPrefab("horn")
        bullfighting.Transform:SetPosition(pt.x+2, 0, pt.z+2)
        bullfighting.AnimState:SetBank("beefalo")
        bullfighting.AnimState:SetBuild("beefalo_build")
        bullfighting.AnimState:PlayAnimation("idle_loop", true)
        bullfighting.Transform:SetFourFaced()
        bullfighting.Transform:SetScale(1.3, 1.3, 1.3)
        local sound = bullfighting.entity:AddSoundEmitter()
        bullfighting.sounds = sounds
        local shadow = bullfighting.entity:AddDynamicShadow()
        shadow:SetSize( 3, 1.25 )
        MakeCharacterPhysics(bullfighting, 200, 1.3)
        bullfighting:RemoveComponent("instrument")
        bullfighting:RemoveComponent("tool")
        bullfighting:RemoveComponent("finiteuses")
        bullfighting:RemoveComponent("inventoryitem")
        bullfighting:RemoveComponent("deployable")
        bullfighting:RemoveTag("horn")
        bullfighting:AddComponent("named")
        bullfighting.components.named:SetName("Bullfighting")
        bullfighting:AddComponent("locomotor")
        bullfighting.components.locomotor.walkspeed = math.random(4,6)
        bullfighting.components.locomotor.runspeed = math.random(8,10)
        bullfighting:SetStateGraph("SGBeefalo")
        local brain = require "brains/leifbrain"
        bullfighting:SetBrain(brain)
        bullfighting:AddComponent("follower")
        bullfighting:AddComponent("knownlocations")
        bullfighting:AddComponent("lootdropper")
        bullfighting.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat","beefalowool","beefalowool","beefalowool","beefalowool"})
        bullfighting.components.lootdropper:AddChanceLoot("horn", 0.1)
        bullfighting:AddComponent("health")
        bullfighting.components.health:SetMaxHealth(math.random(3000,7000))
        bullfighting:AddComponent("combat")
        bullfighting.components.combat:SetTarget(GetPlayer())
        bullfighting.components.combat.hiteffectsymbol = "beefalo_body"
        bullfighting.components.combat:SetDefaultDamage(math.random(30,70))
        bullfighting.components.combat:SetAttackPeriod(math.random(1,3))
        bullfighting.components.combat:SetRetargetFunction(1, function(bullfighting)
            if not bullfighting.components.health:IsDead() then
               return FindEntity(bullfighting, 200, function(guy)
                    if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("bullfighting") then
                       return guy:HasTag("player")
                    end
               end )
            end
        end )
        bullfighting.components.combat:SetKeepTargetFunction(function(bullfighting, target) return target and target:IsValid() end )
        bullfighting:ListenForEvent("death", function()
            for k = 1, 30 do
                local goldnugget = SpawnPrefab("goldnugget")
                GetPlayer().components.inventory:GiveItem(goldnugget)
            end
            GetPlayer():StartThread(function()
                for k = 1, math.random(3,10) do
                    GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
                    local bounty = SpawnPrefab("goldnugget")
                    bounty.Transform:SetPosition(pt.x, pt.y, pt.z)
                    bounty.components.inventoryitem.canbepickedup = false
	            bounty:AddComponent("complexprojectile")
	            bounty.components.complexprojectile.yOffset = 2.5
                    bounty.components.complexprojectile:Launch(Point(pt.x+(math.random(6,10)-math.random(5)), 0, pt.z+(math.random(6,10)-math.random(5))))
	            bounty.components.complexprojectile:SetOnHit(function()
                        bounty:RemoveComponent("complexprojectile")
                        bounty.components.inventoryitem.canbepickedup = true
                    end )
                    Sleep(0.15)
                end
            end )
        end )
        bullfighting:DoTaskInTime(60, function()
            if not bullfighting.components.health:IsDead() then
               SpawnPrefab("die_fx").Transform:SetPosition(bullfighting.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
               bullfighting:Remove()
            end
        end )
        bullfighting:AddTag("bullfighting")
    end
    bullring0:AddTag("bullring0")
    local bullring1 = SpawnPrefab("horn")
    bullring1.Transform:SetPosition(pt.x+2.5, 0, pt.z-2.5)
    bullring1.AnimState:SetBank("marble_trees")
    bullring1.AnimState:SetBuild("marble_trees")
    bullring1.AnimState:PlayAnimation("full_4")
    bullring1.Transform:SetScale(0.8, 0.8, 0.8)
    bullring1:RemoveComponent("instrument")
    bullring1:RemoveComponent("tool")
    bullring1:RemoveComponent("finiteuses")
    bullring1:RemoveComponent("inventoryitem")
    bullring1:RemoveComponent("deployable")
    bullring1:RemoveTag("horn")
    bullring1:AddTag("NOCLICK")
    bullring1:AddTag("nobullring")
    local bullring2 = SpawnPrefab("horn")
    bullring2.Transform:SetPosition(pt.x-2.5, 0, pt.z+2.5)
    bullring2.AnimState:SetBank("marble_trees")
    bullring2.AnimState:SetBuild("marble_trees")
    bullring2.AnimState:PlayAnimation("full_4")
    bullring2.Transform:SetScale(0.8, 0.8, 0.8)
    bullring2:RemoveComponent("instrument")
    bullring2:RemoveComponent("tool")
    bullring2:RemoveComponent("finiteuses")
    bullring2:RemoveComponent("inventoryitem")
    bullring2:RemoveComponent("deployable")
    bullring2:RemoveTag("horn")
    bullring2:AddTag("NOCLICK")
    bullring2:AddTag("nobullring")
    for k = 0,6 do
        local audience = SpawnPrefab("horn")
        audience.Transform:SetPosition(pt.x-2+6-k*2, 0, pt.z-2-6+k*2)
        audience.AnimState:SetBank("wilson")
        local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
        local buildname = names[math.random(#names)]
        audience.AnimState:SetBuild(buildname)
        local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_rain","hat_watermelon","hat_ice","hat_catcoon","hat_wathgrithr"}
        local hat = hats[math.random(#hats)]
        audience.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
        local armors = {"armor_grass","armor_marble","armor_onemanband","armor_ruins","armor_sanity","armor_slurper","armor_slurtleshell","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_wood","torso_rain"}
        local armor = armors[math.random(#armors)]
        audience.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
        audience.AnimState:Show("HAT")
        audience.AnimState:Show("HAT_HAIR")
        audience.AnimState:Hide("HAIR_NOHAT")
        audience.AnimState:Hide("HAIR")
        audience.AnimState:Hide("ARM_carry")
        audience.AnimState:Show("ARM_normal")
        local stories = {"idle","hungry","eat","dart","throw","atk","idle_onemanband1_loop","run_pst","item_hat","give"}
        local story = stories[math.random(#stories)]
        audience.AnimState:PlayAnimation(story,true)
        audience.Transform:SetFourFaced()
        audience:RemoveComponent("instrument")
        audience:RemoveComponent("tool")
        audience:RemoveComponent("finiteuses")
        audience:RemoveComponent("inventoryitem")
        audience:RemoveComponent("deployable")
        audience:RemoveTag("horn")
        audience:AddTag("NOCLICK")
        audience:AddTag("nobullring")
    end
end
local function OnDeploy (inst, pt)
    makebullring(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("bullring0") then
        data.bullring0 = true
    end
    if inst:HasTag("bullfighting") then
        data.bullfighting = true
    end
    if inst:HasTag("nobullring") then
        data.nobullring = true
    end
end
local function onload(inst, data)
    if data and data.bullring0 then
       makebullring(inst)
       inst:Remove()
    end
    if data and data.bullfighting then
       inst:Remove()
    end
    if data and data.nobullring then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用牛角种斗牛场，鼠标左键点中间的大理石树，会冲出公牛，1分钟内战胜它，可获得30个黄金的奖金（直接放入主角物品栏），和大肉、牛毛等战利品。如未能获胜，1分钟后公牛将消失。每次冲出的公牛，血量、攻击力、攻击节奏、速度都不同，这次打不赢，不代表下次不会胜利哦。场外会有观众为你喝彩，如果你获胜，他们会向场内扔黄金（数量不等），作为你额外的奖励。不想要斗牛场了，用锤子砸掉中间的大理石树即可




二０八.鱼人入侵（每个傍晚都可能遭到众多鱼人的伏击）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在inst:AddComponent("frograin")的下一行插入以下内容：

local function OnNight(inst)
    local player = GetPlayer()
    local pt = Vector3(player.Transform:GetWorldPosition())
    local nummerms = math.random(15)
    local ground = GetWorld()
    if math.random()< .2 then 
        for k = 1, nummerms do
            local theta = 1 * 2 * PI
            local radius = 12
            local result_offset = FindValidPositionByFan(theta, radius, nummerms, function(offset)
                local x,y,z = (pt + offset):Get()
                local ents = TheSim:FindEntities(x,y,z , 1)
                return not next(ents) 
            end)
            if result_offset and ground.Map:GetTileAtPoint((pt + result_offset):Get()) ~= GROUND.IMPASSABLE then
                local merm = SpawnPrefab("merm")
                merm.Transform:SetPosition((pt + result_offset):Get())
                merm.components.combat.target = player
                GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                local fx = SpawnPrefab("collapse_small")
                local pos = pt + result_offset
                fx.Transform:SetPosition(pos.x, pos.y, pos.z)
            end
        end
    end
end
    inst:ListenForEvent( "dusktime", function() OnNight( inst ) end, GetWorld()) 

    即可让主角在地面时，每天傍晚都有一定概率遭到众多鱼人（数字随机）的伏击。建议鱼人人数少时就和它们拼了，人数多时就跑，它们会暂时占据这个地区，等到白天它们睡着时再各个击破




二０九.宝物猎人（地面每天出宝贝，限时寻宝赢奖金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在inst:AddComponent("hunter")的下一行插入以下内容：

local function OnDay(inst)
    local names = {"trinket_1","trinket_2","trinket_3","trinket_4","trinket_5","trinket_6","trinket_7","trinket_8","trinket_9","trinket_10","trinket_11","trinket_12"}
    inst.name = names[math.random(#names)]
    local player = GetPlayer()
    local pt = Vector3(player.Transform:GetWorldPosition())
    local gold = SpawnPrefab(inst.name)
    gold.Transform:SetPosition(pt.x+(math.random(500)-math.random(500)), 0, pt.z+(math.random(500)-math.random(500)))
    gold:RemoveComponent("tradable")
    gold:RemoveComponent("stackable")
    local minimap = gold.entity:AddMiniMapEntity()
    minimap:SetIcon( "abigail_flower.png" )
    inst:DoTaskInTime(60+math.random(5), function()
        if not gold.components.inventoryitem:IsHeld() then
           SpawnPrefab("collapse_small").Transform:SetPosition(gold.Transform:GetWorldPosition())
           SpawnPrefab("collapse_small").Transform:SetPosition(player.Transform:GetWorldPosition())
           player.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
        else
           for k = 1, 10+math.random(10) do
           SpawnPrefab("goldnugget").Transform:SetPosition(player.Transform:GetWorldPosition())
           player.SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
           end
        end
        gold:Remove()
    end)
end
    inst:ListenForEvent( "daytime", function() OnDay(inst) end, GetWorld())

    即可在每天天亮时，地面随机出现宝物（12种收藏品之一），小地图上将显示红花的图标，在1分钟内捡到就可获得奖金，错过时间宝物将消失（生起一团烟就说明寻宝失败）。当寻宝计时结束，你也已经捡到宝物的话，将获得10-20个黄金的奖励（出现在脚下）。注意，宝物很有可能出现在海上，如果没有修改过“地图全开”、“主角可渡海”，就只能望洋兴叹了




二一０.无尽的任务（点路牌接任务，讨伐怪物赚赏金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\homesign.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function GetStatus(inst)
    if not inst:HasTag("westart") then
       GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
       inst:AddTag("westart")
       inst.AnimState:SetMultColour(255/255,0/255,0/255,1)
       local names = {"spiderqueen","deerclops","leif_sparse","minotaur","knight","bishop","rook","firehound"}
       local name = names[math.random(#names)]
       local bonuspoints = math.random(6)
       local pt = inst:GetPosition()
       local wanted = SpawnPrefab(name)
       wanted.Transform:SetPosition(pt.x+(math.random(300)-math.random(300)), 0, pt.z+(math.random(300)-math.random(300)))
       wanted.components.health:SetMaxHealth(1000 * bonuspoints)
       wanted.components.health:DoDelta(1000 * bonuspoints)
       wanted.AnimState:SetMultColour(255/255,0/255,0/255,1)
       wanted.Transform:SetScale(1.5, 1.5, 1.5)
       local minimap = wanted.entity:AddMiniMapEntity()
       minimap:SetIcon( "lucy_axe.png" )
       wanted:ListenForEvent("death", function()
           inst:RemoveTag("westart")
           inst.AnimState:SetMultColour(35/255,105/255,235/255,1)
           for k = 1, 20*bonuspoints do
               SpawnPrefab("goldnugget").Transform:SetPosition(GetPlayer().Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
           end
       end )
       inst:DoTaskInTime(180, function()
           if not wanted.components.health:IsDead() then
              SpawnPrefab("die_fx").Transform:SetPosition(wanted.Transform:GetWorldPosition())
              SpawnPrefab("die_fx").Transform:SetPosition(GetPlayer().Transform:GetWorldPosition())
              GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
              wanted:Remove()
              inst:RemoveTag("westart")
              inst.AnimState:SetMultColour(35/255,105/255,235/255,1)
           end
       end)
    end
end
    inst.components.inspectable.getstatus = GetStatus
    inst.AnimState:SetMultColour(35/255,105/255,235/255,1)

    即可点路牌接任务，地图随机位置将出现一个被通缉的怪物，全身红色，小地图上显示为红色斧子图标，血量随机在1000-6000点，不由怪物品种决定（1只狗可能拥有6000的血量）。在3分钟内（游戏中6个小时）找到并杀死它，即讨伐成功，赏金会出现在主角身边，错过时间则任务失败（升起黑烟），被通缉的怪物将人间蒸发。赏金为20-120个黄金，杀死的怪物血量越高，赏金越高。怪物有可能出现在海上，如果没有修改过“地图全开”、“主角可渡海”，就只能望洋兴叹了。这是一个无尽的任务系统，如果同时修改了“巨型超市”，则可以用赏金购买造装备的材料及补血料理，从此开始赏金猎人的生涯吧




二一一.无限进化（给远古祭坛500个黄金，升级主角血量、饥饿、脑最大值各100点）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将下列内容：

        inst:AddComponent("health")
        inst.components.health:SetMaxHealth(TUNING.WILSON_HEALTH)
        inst.components.health.nofadeout = true
        -------
        
        inst:AddComponent("hunger")
        inst.components.hunger:SetMax(TUNING.WILSON_HUNGER)
        inst.components.hunger:SetRate(TUNING.WILSON_HUNGER_RATE)
        inst.components.hunger:SetKillRate(TUNING.WILSON_HEALTH/TUNING.STARVE_KILL_TIME)

        
        inst:AddComponent("sanity")
        inst.components.sanity:SetMax(TUNING.WILSON_SANITY)
        inst.components.sanity.onSane = OnSane
        inst.components.sanity.onInsane = OnInsane

    替换为：

local function newupgrades(inst)
	inst.components.health.maxhealth = TUNING.WILSON_HEALTH + inst.level_num*100
	inst.components.hunger.max = TUNING.WILSON_HUNGER + inst.level_num*100
	inst.components.sanity.max = TUNING.WILSON_SANITY + inst.level_num*100
end
        inst.level_num = 0
        inst:AddComponent("health")
        inst.components.health:SetMaxHealth(TUNING.WILSON_HEALTH + inst.level_num*100)
        inst.components.health.nofadeout = true
        inst:AddComponent("hunger")
        inst.components.hunger:SetMax(TUNING.WILSON_HUNGER + inst.level_num*100)
        inst.components.hunger:SetRate(TUNING.WILSON_HUNGER_RATE)
        inst.components.hunger:SetKillRate(TUNING.WILSON_HEALTH/TUNING.STARVE_KILL_TIME)
        inst:AddComponent("sanity")
        inst.components.sanity:SetMax(TUNING.WILSON_SANITY + inst.level_num*100)
        inst.components.sanity.onSane = OnSane
        inst.components.sanity.onInsane = OnInsane
        newupgrades(inst)
local function onsave(inst, data)
    data.level_num = inst.level_num
end
local function onload(inst, data)
    inst.level_num = data.level_num or 0
    inst.components.health.maxhealth = TUNING.WILSON_HEALTH + inst.level_num*100
    inst.components.hunger.max = TUNING.WILSON_HUNGER + inst.level_num*100
    inst.components.sanity.max = TUNING.WILSON_SANITY + inst.level_num*100
    if data.health and data.health.health then inst.components.health.currenthealth = data.health.health end
    if data.hunger and data.hunger.hunger then inst.components.hunger.current = data.hunger.hunger end
    if data.sanity and data.sanity.current then inst.components.sanity.current = data.sanity.current end
end
    inst.OnSave = onsave
    inst.OnLoad = onload


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\altar_prototyper.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    local player = GetPlayer()
    if player.components.inventory:Has("goldnugget", 500) then
       if item.prefab == "goldnugget" then
        return true
        end
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item.prefab == "goldnugget" then
       giver.components.inventory:ConsumeByName("goldnugget", 499)
       giver.level_num = giver.level_num + 1
       inst.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
       giver.HUD.controls.status.heart:PulseGreen()
       giver.HUD.controls.status.stomach:PulseGreen()
       giver.HUD.controls.status.brain:PulseGreen()
       giver.HUD.controls.status.brain:ScaleTo(1.3,1,.7)
       giver.HUD.controls.status.heart:ScaleTo(1.3,1,.7)
       giver.HUD.controls.status.stomach:ScaleTo(1.3,1,.7)
       giver.components.health.maxhealth = TUNING.WILSON_HEALTH + giver.level_num*100
       giver.components.hunger.max = TUNING.WILSON_HUNGER + giver.level_num*100
       giver.components.sanity.max = TUNING.WILSON_SANITY + giver.level_num*100
       giver.components.health:DoDelta(giver.components.health.maxhealth)
       giver.components.hunger:DoDelta(giver.components.hunger.max)
       giver.components.sanity:DoDelta(giver.components.sanity.max)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可给远古祭坛500个黄金（拿着黄金对远古祭坛按鼠标左键），升级主角血量、饥饿、脑最大值各100点，升级无上限，身上黄金不足500时不会升级。如果缺少黄金，可以修改“菜市场”、“肉食店”、“流动商贩”、“杂货收购行”、“收藏品黑市”、“收藏品期货市场”等交易系统赚取黄金（见本修改技巧）。用机器人（wx78）、大力士（沃尔夫冈）作主角时，不要修改此项




二一二.许愿池（给池塘黄金消顽皮值，天上有机会下黄金雨，接到就是你的）

    用记事本打开游戏目录\data\scripts\prefabs\pond.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if item.prefab == "goldnugget" then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if GetPlayer().components.kramped and GetPlayer().components.kramped.threshold > 0 then
       GetPlayer().components.kramped.threshold = GetPlayer().components.kramped.threshold -1
       GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/krampus/beenbad_lvl3")
    end
    if math.random()<.1 then
       GetPlayer().SoundEmitter:PlaySound("dontstarve/music/music_hoedown", "beavermusic")
       inst:StartThread(function()
           for k = 1, 50 do
               local pt = Vector3(giver.Transform:GetWorldPosition())
               local gold = SpawnPrefab("goldnugget")
               gold.Transform:SetPosition(pt.x+(math.random(5)-math.random(5)), 20, pt.z+(math.random(5)-math.random(5)))
               gold.components.inventoryitem.canbepickedup = false
               inst:DoTaskInTime(1.8, function()
                   local pos = Vector3(gold.Transform:GetWorldPosition())
                   local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 2)
                   for k,v in pairs(ents) do
                       if v:HasTag("player") then
                          v.components.inventory:GiveItem(gold)
                       end
                   end
               end)
               inst:DoTaskInTime(2, function()
                    local pt2 = gold:GetPosition()
                    if not gold.components.inventoryitem:IsHeld() then
                       GetPlayer().SoundEmitter:PlaySound("dontstarve/common/stone_drop")
                       SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(pt2.x, 0, pt2.z)
                       gold:Remove()
                    else
                       gold.components.inventoryitem.canbepickedup = true
                    end
               end)
               Sleep(1)
           end
           GetPlayer().SoundEmitter:KillSound("beavermusic")
       end)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可拿着黄金对池塘点左键，每次消减一点顽皮值（杀小动物的惩罚点数），并发出喘息声，如果没有喘息声，表示你的顽皮值已经为零，罪已经赎清了。许愿的过程中，天上有一定概率下起黄金雨（50个黄金），黄金落地弹起的刹那，如果你接到就归你了（跑到黄金掉落位置），否则会摔碎，试试你的反应能力吧




二一三.红胡子强盗团（强盗团通过冒险之门入侵，烧杀抢掠，打死强盗可得黄金、武器）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在"puppet_wes",的下一行插入"puppet_woodie",


    2.用记事本打开游戏目录\data\scripts\prefabs\adventure_portal.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createbandit(inst)
  for k = 1,math.random(20,35) do
    local pt = inst:GetPosition()
    local bandit = SpawnPrefab("beardhair")
    bandit.Transform:SetPosition(pt.x+(math.random(50)-math.random(50)), 0, pt.z+(math.random(50)-math.random(50)))
    bandit.AnimState:SetBank("wilson")
    bandit.AnimState:SetBuild("woodie")
    bandit.AnimState:OverrideSymbol("swap_hat", "hat_feather", "swap_hat")
    bandit.AnimState:OverrideSymbol("swap_body", "armor_slurper", "swap_body")
    bandit.AnimState:Show("HAT")
    bandit.AnimState:Show("HAT_HAIR")
    bandit.AnimState:Hide("HAIR_NOHAT")
    bandit.AnimState:Hide("HAIR")
    bandit.AnimState:Hide("ARM_carry")
    bandit.AnimState:Show("ARM_normal")
    bandit.AnimState:PlayAnimation("idle")
    local sound = bandit.entity:AddSoundEmitter()
    local shadow = bandit.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    bandit.Transform:SetFourFaced()
    local brain = require "brains/frogbrain"
    bandit:SetBrain(brain)
    bandit:AddComponent("locomotor")
    bandit.components.locomotor.walkspeed = 5
    bandit.components.locomotor.runspeed = 10
    bandit:SetStateGraph("SGshadowwaxwell")
    MakeCharacterPhysics(bandit, 75, .5)
    bandit:RemoveComponent("inventoryitem")
    bandit:RemoveComponent("stackable")
    bandit:RemoveComponent("fuel")
    bandit:RemoveComponent("burnable")
    bandit:RemoveComponent("propagator")
    bandit:AddComponent("inventory")
    bandit:AddComponent("thief")
    bandit:AddComponent("knownlocations")
    bandit:AddComponent("health")
    bandit.components.health:SetMaxHealth(1500)
    bandit:ListenForEvent("death", function()
        local pt1 = bandit:GetPosition()
        for k = 1,math.random(15,25) do
            local gold = SpawnPrefab("goldnugget")
            gold.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
        end
        if math.random() < 0.1 then
           local weapons = {"goldenaxe","spear","tentaclespike","batbat","ruins_bat"}
           local weapon = weapons[math.random(#weapons)]
           SpawnPrefab(weapon).Transform:SetPosition(pt1.x, 0, pt1.z)
        end
    end )
    bandit:AddComponent("combat")
    bandit.components.combat:SetDefaultDamage(20)
    bandit.components.combat:SetAttackPeriod(1)
    bandit.components.combat:SetRetargetFunction(2, function(bandit)
        if not bandit.components.health:IsDead() then
            return FindEntity(bandit, 20, function(guy)
                return bandit.components.combat:CanTarget(guy) and not guy:HasTag("bandits")
            end )
        end
    end )
    bandit.components.combat.onhitotherfn = function(bandit, other, damage) bandit.components.thief:StealItem(other) end
    bandit:ListenForEvent("attacked", function(bandit, data)
        bandit.components.combat:SetTarget(data.attacker)
        bandit.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("bandits") and not dude.components.health:IsDead() end, 5)
    end )
    bandit.Physics:SetCollisionCallback(function(bandit, other)
        if other and other.components.workable and other.components.workable.workleft > 0 then
           other.components.workable:Destroy(bandit)
        end
    end)
    bandit:DoPeriodicTask(1, function(bandit)
        local pos = Vector3(bandit.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3)
        for k,v in pairs(ents) do
            if v.components.pickable and v.components.pickable:CanBePicked() then
               v.components.pickable:Pick(bandit)
            end
            if v.components.crop then
               v.components.crop:Harvest(bandit)
            end
        end
    end )
    local minimap = bandit.entity:AddMiniMapEntity()
    minimap:SetIcon( "lucy_axe.png" )
    bandit:AddTag("monster")
    bandit:AddTag("bandits")
  end
end
local function delbandit(inst)
    local range = 3000
    local pos = Vector3(inst.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v:HasTag("bandits") then
           v:Remove()
        end
    end
end
    inst:ListenForEvent( "daytime", function() createbandit(inst) end , GetWorld())
    inst:ListenForEvent( "nighttime", function() delbandit(inst) end , GetWorld())


    3.用记事本打开游戏目录\data\scripts\prefabs\beardhair.lua文件，在Asset("ANIM", "anim/beardhair.zip"),的下一行插入以下内容：

	Asset("ANIM", "anim/woodie.zip"),
	Asset("SOUND", "sound/woodie.fsb"),


    4.在inst:AddComponent("inspectable")的下一行插入以下内容：

local names = {"swap_goldenaxe","swap_spear","swap_spike","swap_batbat","swap_ruins_bat"}
local weapon = names[math.random(#names)]
local items = { SWORD = weapon }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function onsave(inst, data)
    if inst:HasTag("bandits") then
        data.bandits = true
    end
end
local function onload(inst, data)
  if data and data.bandits then
    inst.AnimState:SetBank("wilson")
    inst.AnimState:SetBuild("woodie")
    inst.AnimState:OverrideSymbol("swap_hat", "hat_feather", "swap_hat")
    inst.AnimState:OverrideSymbol("swap_body", "armor_slurper", "swap_body")
    inst.AnimState:Show("HAT")
    inst.AnimState:Show("HAT_HAIR")
    inst.AnimState:Hide("HAIR_NOHAT")
    inst.AnimState:Hide("HAIR")
    inst.AnimState:Hide("ARM_carry")
    inst.AnimState:Show("ARM_normal")
    inst.AnimState:PlayAnimation("idle")
    local sound = inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    inst.Transform:SetFourFaced()
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 5
    inst.components.locomotor.runspeed = 10
    inst:SetStateGraph("SGshadowwaxwell")
    MakeCharacterPhysics(inst, 75, .5)
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:AddComponent("inventory")
    inst:AddComponent("thief")
    inst:AddComponent("knownlocations")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(1500)
    inst:ListenForEvent("death", function()
        local pt1 = inst:GetPosition()
        for k = 1,math.random(15,25) do
            local gold = SpawnPrefab("goldnugget")
            gold.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
        end
        if math.random() < 0.1 then
           local weapons = {"goldenaxe","spear","tentaclespike","batbat","ruins_bat"}
           local weapon = weapons[math.random(#weapons)]
           SpawnPrefab(weapon).Transform:SetPosition(pt1.x, 0, pt1.z)
        end
    end )
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(20)
    inst.components.combat:SetAttackPeriod(1)
    inst.components.combat:SetRetargetFunction(2, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 20, function(guy)
                return inst.components.combat:CanTarget(guy) and not guy:HasTag("bandits")
            end )
        end
    end )
    inst.components.combat.onhitotherfn = function(inst, other, damage) inst.components.thief:StealItem(other) end
    inst:ListenForEvent("attacked", function(inst, data)
        inst.components.combat:SetTarget(data.attacker)
        inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("bandits") and not dude.components.health:IsDead() end, 5)
    end )
    inst.Physics:SetCollisionCallback(function(inst, other)
        if other and other.components.workable and other.components.workable.workleft > 0 then
           other.components.workable:Destroy(inst)
        end
    end)
    inst:DoPeriodicTask(1, function(inst)
        local pos = Vector3(inst.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3)
        for k,v in pairs(ents) do
            if v.components.pickable and v.components.pickable:CanBePicked() then
               v.components.pickable:Pick(inst)
            end
            if v.components.crop then
               v.components.crop:Harvest(inst)
            end
        end
    end )
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "lucy_axe.png" )
    inst:AddTag("monster")
    inst:AddTag("bandits")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可有红胡子强盗通过冒险之门入侵你的大陆（修改后第2天早晨出现），他们将盘踞在冒险之门附近，毁坏森林、拆毁建筑、抢掠农作物，所到之处没有活口。通过小地图可查询强盗所在位置，显示为红斧子图标。与强盗交战时，他们会抢掠你身上的物品，并且附近的强盗将一起来围攻你，蛮干无异于送死，争取各个击破吧。从此在冒险之门周围，白天和傍晚都是危险的，只有漆黑的夜里，才是你可以喘息之际。打死强盗可获得战利品（不菲的黄金和他们抢来的赃物），还有一定概率掉落武器。如果同时修改了“雇佣兵工厂”，你的铁甲战团终于有了用武之地。同胞们，饥荒世界正遭遇重大危机，亿万苍生期盼着你，起兵去攻打强盗吧，这是旷日持久的反抗，也是正义而光荣的战争，用你的每一滴鲜血去证明，新一代的救世主，从此诞生了




二一四.饥饿的儿童（不时有孤儿向你乞讨，施舍黄金后离开，否则跟随你直到午夜冻饿而死）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在inst:AddComponent("clock")的下一行插入以下内容：

local function createbeggar(inst)
  for k = 1,math.random(3,7) do
    local pt = GetPlayer():GetPosition()
    local beggar = SpawnPrefab("foliage")
    beggar.Transform:SetPosition(pt.x+(math.random(50)-math.random(50)), 0, pt.z+(math.random(50)-math.random(50)))
    beggar.AnimState:SetBank("wilson")
    local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    local buildname = names[math.random(#names)]
    beggar.AnimState:SetBuild(buildname)
    beggar.Transform:SetScale(0.8, 0.8, 0.8)
    beggar.AnimState:OverrideSymbol("swap_body", "armor_grass", "swap_body")
    beggar.AnimState:Hide("ARM_carry")
    beggar.AnimState:Show("ARM_normal")
    beggar.AnimState:PlayAnimation("idle")
    local sound = beggar.entity:AddSoundEmitter()
    local shadow = beggar.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    beggar.Transform:SetFourFaced()
    local brain = require "brains/chesterbrain"
    beggar:SetBrain(brain)
    beggar:AddComponent("knownlocations")
    beggar:AddComponent("locomotor")
    beggar.components.locomotor.walkspeed = 5
    beggar.components.locomotor.runspeed = 15
    beggar:SetStateGraph("SGshadowwaxwell")
    MakeCharacterPhysics(beggar, 50, .5)
    beggar:RemoveComponent("stackable")
    beggar:RemoveComponent("tradable")
    beggar:RemoveComponent("fuel")
    beggar:RemoveComponent("inventoryitem")
    beggar:RemoveComponent("edible")
    beggar:RemoveComponent("perishable")
    beggar:RemoveComponent("burnable")
    beggar:RemoveComponent("propagator")
    beggar:RemoveTag("cattoy")
    beggar:AddComponent("follower")
    beggar.components.follower:SetLeader(GetPlayer())
    beggar:AddComponent("health")
    beggar.components.health:SetMaxHealth(500)
    beggar.components.health:SetInvincible(true)
    beggar.components.health.nofadeout = true
    beggar:AddComponent("combat")
    beggar:DoPeriodicTask(math.random(10,60), function(beggar)
        beggar.SoundEmitter:PlaySound("dontstarve/characters/willow/hurt")
        beggar.AnimState:PlayAnimation("hungry")
    end )
    beggar:AddComponent("trader")
    beggar.components.trader:SetAcceptTest(function(beggar, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 10) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    beggar.components.trader.onaccept = function(beggar, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        GetPlayer().components.sanity:DoDelta(5)
        beggar.components.locomotor:Stop()
        beggar:SetBrain(nil)
        beggar.components.follower:SetLeader(nil)
        beggar.AnimState:PlayAnimation("idle_onemanband1_loop",true)
        beggar:DoTaskInTime(5, function() beggar:Remove() end )
    end
    beggar:ListenForEvent( "nighttime", function()
        beggar.components.locomotor:Stop()
        beggar:SetBrain(nil)
        beggar.components.follower:SetLeader(nil)
        beggar.AnimState:PlayAnimation("idle_shiver_pre")
        beggar.AnimState:PushAnimation("idle_shiver_loop")
        beggar.AnimState:PushAnimation("idle_shiver_pst", false)
        beggar:RemoveComponent("trader")
        beggar:DoTaskInTime(math.random(1,6), function()
            beggar.components.health:SetInvincible(false)
            beggar.components.health:Kill()
        end )
    end, GetWorld())
    beggar:ListenForEvent("death", function()
        GetPlayer():DoTaskInTime(2, function()
            GetPlayer().components.sanity:DoDelta(-10)
        end )
    end )
    beggar:AddTag("beggars")
  end
end
    inst:ListenForEvent( "daytime", function() if math.random()<.3 then createbeggar(inst) end end , GetWorld())


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\foliage.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("beggars") then
        data.beggars = true
    end
end
local function onload(inst, data)
  if data and data.beggars then
    inst.AnimState:SetBank("wilson")
    local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    local buildname = names[math.random(#names)]
    inst.AnimState:SetBuild(buildname)
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.AnimState:OverrideSymbol("swap_body", "armor_grass", "swap_body")
    inst.AnimState:Hide("ARM_carry")
    inst.AnimState:Show("ARM_normal")
    inst.AnimState:PlayAnimation("idle")
    local sound = inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    inst.Transform:SetFourFaced()
    local brain = require "brains/chesterbrain"
    inst:SetBrain(brain)
    inst:AddComponent("knownlocations")
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 5
    inst.components.locomotor.runspeed = 15
    inst:SetStateGraph("SGshadowwaxwell")
    MakeCharacterPhysics(inst, 50, .5)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveTag("cattoy")
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(500)
    inst.components.health:SetInvincible(true)
    inst.components.health.nofadeout = true
    inst:AddComponent("combat")
    inst:DoPeriodicTask(math.random(10,60), function(inst)
        inst.SoundEmitter:PlaySound("dontstarve/characters/willow/hurt")
        inst.AnimState:PlayAnimation("hungry")
    end )
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 10) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        GetPlayer().components.sanity:DoDelta(5)
        inst.components.locomotor:Stop()
        inst:SetBrain(nil)
        inst.components.follower:SetLeader(nil)
        inst.AnimState:PlayAnimation("idle_onemanband1_loop",true)
        inst:DoTaskInTime(5, function() inst:Remove() end )
    end
    inst:ListenForEvent( "nighttime", function()
        inst.components.locomotor:Stop()
        inst:SetBrain(nil)
        inst.components.follower:SetLeader(nil)
        inst.AnimState:PlayAnimation("idle_shiver_pre")
        inst.AnimState:PushAnimation("idle_shiver_loop")
        inst.AnimState:PushAnimation("idle_shiver_pst", false)
        inst:RemoveComponent("trader")
        inst:DoTaskInTime(math.random(1,6), function()
            inst.components.health:SetInvincible(false)
            inst.components.health:Kill()
        end )
    end, GetWorld())
    inst:ListenForEvent("death", function()
        GetPlayer():DoTaskInTime(2, function()
            GetPlayer().components.sanity:DoDelta(-10)
        end )
    end )
    inst:AddTag("beggars")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可开启一个独特的游戏模式，在饥荒世界这苦寒之地，有许多失去亲人的儿童正在忍饥挨饿，已经站稳脚跟的你，有责任帮助他们。不时会有孤儿向你乞讨，只要10个黄金（拿着黄金对儿童点鼠标左键），就能给予他们几天的温饱（儿童将离开），你也会获得心灵的宁静（补5点脑）。如果你不愿付出，他们也不会给你添任何麻烦，只是默默地跟随，期盼着一点点施舍。当黑夜来临时，他们将在你眼前冻饿而死，苍天为之动容（你将降10点脑），痛惜一个幼小生命的逝去。何去何从，由你自己决定。不要与“荒野之狼”一同修改




二一五.猪族崛起（大陆上不定期出现猪族部落，他们将与你争夺资源，如何与之相处呢？）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在inst:AddComponent("clock")的下一行插入以下内容：

local function createpigtent(inst)
    local pt = Vector3(GetPlayer().Transform:GetWorldPosition())
    local ground = GetWorld()
    local result_offset = FindValidPositionByFan(math.random()*2*PI, math.random(50, 80), 100, function(offset)
        local x,y,z = (pt + offset):Get()
        local ents = TheSim:FindEntities(x,y,z , 1)
        return not next(ents) 
    end)
    if result_offset and ground.Map:GetTileAtPoint((pt + result_offset):Get()) ~= GROUND.IMPASSABLE then
       local pigtent = SpawnPrefab("mosquitosack")
       pigtent.Transform:SetPosition((pt + result_offset):Get())
       pigtent.AnimState:SetBank("tent")
       pigtent.AnimState:SetBuild("tent")
       pigtent.AnimState:PlayAnimation("idle", true)
       local minimap = pigtent.entity:AddMiniMapEntity()
       minimap:SetIcon( "tent.png" )
       pigtent.AnimState:SetMultColour(255/255,0/255,0/255,1)
       pigtent.Transform:SetScale(2, 2, 2)
       pigtent:RemoveComponent("stackable")
       pigtent:RemoveComponent("inventoryitem")
       pigtent:RemoveComponent("healer")
       pigtent:RemoveComponent("burnable")
       pigtent:RemoveComponent("propagator")
       pigtent:RemoveTag("cattoy")
       pigtent:AddTag("pigtents")
       pigtent:AddComponent("workable")
       pigtent.components.workable:SetWorkAction(ACTIONS.HAMMER)
       pigtent.components.workable:SetWorkLeft(15)
       pigtent.components.workable:SetOnFinishCallback(function(pigtent)
           SpawnPrefab("collapse_big").Transform:SetPosition(pigtent.Transform:GetWorldPosition())
           GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
           pigtent:Remove()
       end )
       pigtent.components.workable:SetOnWorkCallback(function(pigtent, worker, workleft)
           local pos = Vector3(pigtent.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 100)
           for k,v in pairs(ents) do
               if v:HasTag("pignpcs") then
                  v.components.combat:SetTarget(worker)
               end
           end
       end)
       pigtent:ListenForEvent( "daytime", function()
         for k = 1,math.random(7,15) do
             local pt1 = pigtent:GetPosition()
             local pignpc = SpawnPrefab("mosquitosack")
             pignpc.Transform:SetPosition(pt1.x+(math.random(20)-math.random(20)), 0, pt1.z+(math.random(20)-math.random(20)))
             pignpc.entity:AddSoundEmitter()
             local shadow = pignpc.entity:AddDynamicShadow()
             shadow:SetSize( 1.5, .75 )
             pignpc.AnimState:SetBank("pigman")
             pignpc.AnimState:SetBuild("pig_guard_build")
             pignpc.Transform:SetFourFaced()
             pignpc.Transform:SetScale(1.2, 1.2, 1.2)
             MakeCharacterPhysics(pignpc, 50, .5)
             local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter"}
             local hat = hats[math.random(#hats)]
             pignpc.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
             pignpc.AnimState:Show("hat")
             pignpc.AnimState:PlayAnimation("idle_loop")
             local brain = require "brains/leifbrain"
             pignpc:SetBrain(brain)
             local minimap = pignpc.entity:AddMiniMapEntity()
             minimap:SetIcon( "pigking.png" )
             pignpc:AddComponent("locomotor")
             pignpc.components.locomotor.walkspeed = 5
             pignpc.components.locomotor.runspeed = 10
             pignpc:SetStateGraph("SGpig")
             pignpc:RemoveComponent("stackable")
             pignpc:RemoveComponent("inventoryitem")
             pignpc:RemoveComponent("healer")
             pignpc:RemoveComponent("burnable")
             pignpc:RemoveComponent("propagator")
             pignpc:RemoveTag("cattoy")
             pignpc:AddComponent("inventory")
             pignpc:AddComponent("follower")
             pignpc:AddComponent("knownlocations")
             pignpc:AddComponent("lootdropper")
             pignpc.components.lootdropper:SetLoot({"meat", "meat"})
             pignpc:AddComponent("health")
             pignpc.components.health:SetMaxHealth(1000)
             pignpc:AddComponent("combat")
             pignpc.components.combat:SetDefaultDamage(20)
             pignpc.components.combat:SetAttackPeriod(1)
             pignpc.components.combat:SetRetargetFunction(3, function(pignpc)
                 if not pignpc.components.health:IsDead() then
                    return FindEntity(pignpc, 20, function(guy)
                         if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("npcs") then
                            return guy:HasTag("monster") or guy:HasTag("smallcreature")
                         end
                    end )
                 end
             end )
             pignpc.components.combat:SetKeepTargetFunction(function(pignpc, target) return target and target:IsValid() end )
             pignpc:ListenForEvent("attacked", function(pignpc, data)
                 pignpc.components.combat:SetTarget(data.attacker)
                 pignpc.components.combat:ShareTarget(data.attacker, 50, function(dude) return dude:HasTag("pignpcs") and not dude.components.health:IsDead() end, 10)
             end )
             pignpc:DoPeriodicTask(1, function(pignpc)
               if not pignpc.components.health:IsDead() then
                 local pos = Vector3(pignpc.Transform:GetWorldPosition())
                 local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3)
                 for k,v in pairs(ents) do
                     if v.components.pickable and v.components.pickable:CanBePicked() then
                        v.components.pickable:Pick(pignpc)
                     end
                     if v.components.crop then
                        v.components.crop:Harvest(pignpc)
                     end
                     if v:HasTag("tree") and v.components.workable and v.components.workable.workleft > 0 then
                        v.components.workable:Destroy(pignpc)
                     end
                     if v.components.edible and v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
                        v:Remove()
                     end
                 end
               end
             end )
             pignpc:ListenForEvent("death", function()
                 for k = 1,math.random(1,3) do
                     local pt2 = pignpc:GetPosition()
                     local gold = SpawnPrefab("goldnugget")
                     gold.Transform:SetPosition(pt2.x+(math.random(3)-math.random(3)), 0, pt2.z+(math.random(3)-math.random(3)))
                 end
             end )
             pignpc:ListenForEvent( "daytime", function() pignpc:Remove() end , GetWorld())
             pignpc:AddTag("pignpcs")
         end
       end , GetWorld())
    end
end
    inst:ListenForEvent( "nighttime", function() if math.random()<0.2 then createpigtent(inst) end end , GetWorld())


    2.用记事本打开游戏目录\data\scripts\prefabs\mosquitosack.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("pigtents") then
        data.pigtents = true
    end
    if inst:HasTag("pignpcs") then
        data.pignpcs = true
    end
end
local function onload(inst, data)
    if data and data.pigtents then
       inst.AnimState:SetBank("tent")
       inst.AnimState:SetBuild("tent")
       inst.AnimState:PlayAnimation("idle", true)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "tent.png" )
       inst.AnimState:SetMultColour(255/255,0/255,0/255,1)
       inst.Transform:SetScale(2, 2, 2)
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("healer")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveTag("cattoy")
       inst:AddTag("pigtents")
       inst:AddComponent("workable")
       inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
       inst.components.workable:SetWorkLeft(15)
       inst.components.workable:SetOnFinishCallback(function(inst)
           SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
           GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
           inst:Remove()
       end )
       inst.components.workable:SetOnWorkCallback(function(inst, worker, workleft)
           local pos = Vector3(inst.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 100)
           for k,v in pairs(ents) do
               if v:HasTag("pignpcs") then
                  v.components.combat:SetTarget(worker)
               end
           end
       end)
       inst:ListenForEvent( "daytime", function()
         for k = 1,math.random(7,15) do
             local pt1 = inst:GetPosition()
             local pignpc = SpawnPrefab("mosquitosack")
             pignpc.Transform:SetPosition(pt1.x+(math.random(20)-math.random(20)), 0, pt1.z+(math.random(20)-math.random(20)))
             pignpc.entity:AddSoundEmitter()
             local shadow = pignpc.entity:AddDynamicShadow()
             shadow:SetSize( 1.5, .75 )
             pignpc.AnimState:SetBank("pigman")
             pignpc.AnimState:SetBuild("pig_guard_build")
             pignpc.Transform:SetFourFaced()
             pignpc.Transform:SetScale(1.2, 1.2, 1.2)
             MakeCharacterPhysics(pignpc, 50, .5)
             local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter"}
             local hat = hats[math.random(#hats)]
             pignpc.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
             pignpc.AnimState:Show("hat")
             pignpc.AnimState:PlayAnimation("idle_loop")
             local brain = require "brains/leifbrain"
             pignpc:SetBrain(brain)
             local minimap = pignpc.entity:AddMiniMapEntity()
             minimap:SetIcon( "pigking.png" )
             pignpc:AddComponent("locomotor")
             pignpc.components.locomotor.walkspeed = 5
             pignpc.components.locomotor.runspeed = 10
             pignpc:SetStateGraph("SGpig")
             pignpc:RemoveComponent("stackable")
             pignpc:RemoveComponent("inventoryitem")
             pignpc:RemoveComponent("healer")
             pignpc:RemoveComponent("burnable")
             pignpc:RemoveComponent("propagator")
             pignpc:RemoveTag("cattoy")
             pignpc:AddComponent("inventory")
             pignpc:AddComponent("follower")
             pignpc:AddComponent("knownlocations")
             pignpc:AddComponent("lootdropper")
             pignpc.components.lootdropper:SetLoot({"meat", "meat"})
             pignpc:AddComponent("health")
             pignpc.components.health:SetMaxHealth(1000)
             pignpc:AddComponent("combat")
             pignpc.components.combat:SetDefaultDamage(20)
             pignpc.components.combat:SetAttackPeriod(1)
             pignpc.components.combat:SetRetargetFunction(3, function(pignpc)
                 if not pignpc.components.health:IsDead() then
                    return FindEntity(pignpc, 20, function(guy)
                         if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("npcs") then
                            return guy:HasTag("monster") or guy:HasTag("smallcreature")
                         end
                    end )
                 end
             end )
             pignpc.components.combat:SetKeepTargetFunction(function(pignpc, target) return target and target:IsValid() end )
             pignpc:ListenForEvent("attacked", function(pignpc, data)
                 pignpc.components.combat:SetTarget(data.attacker)
                 pignpc.components.combat:ShareTarget(data.attacker, 50, function(dude) return dude:HasTag("pignpcs") and not dude.components.health:IsDead() end, 10)
             end )
             pignpc:DoPeriodicTask(1, function(pignpc)
               if not pignpc.components.health:IsDead() then
                 local pos = Vector3(pignpc.Transform:GetWorldPosition())
                 local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3)
                 for k,v in pairs(ents) do
                     if v.components.pickable and v.components.pickable:CanBePicked() then
                        v.components.pickable:Pick(pignpc)
                     end
                     if v.components.crop then
                        v.components.crop:Harvest(pignpc)
                     end
                     if v:HasTag("tree") and v.components.workable and v.components.workable.workleft > 0 then
                        v.components.workable:Destroy(pignpc)
                     end
                     if v.components.edible and v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
                        v:Remove()
                     end
                 end
               end
             end )
             pignpc:ListenForEvent("death", function()
                 for k = 1,math.random(1,3) do
                     local pt2 = pignpc:GetPosition()
                     local gold = SpawnPrefab("goldnugget")
                     gold.Transform:SetPosition(pt2.x+(math.random(3)-math.random(3)), 0, pt2.z+(math.random(3)-math.random(3)))
                 end
             end )
             pignpc:ListenForEvent( "daytime", function() pignpc:Remove() end , GetWorld())
             pignpc:AddTag("pignpcs")
         end
       end , GetWorld())
    end
    if data and data.pignpcs then
       inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize( 1.5, .75 )
       inst.AnimState:SetBank("pigman")
       inst.AnimState:SetBuild("pig_guard_build")
       inst.Transform:SetFourFaced()
       inst.Transform:SetScale(1.2, 1.2, 1.2)
       MakeCharacterPhysics(inst, 50, .5)
       local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter"}
       local hat = hats[math.random(#hats)]
       inst.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
       inst.AnimState:Show("hat")
       inst.AnimState:PlayAnimation("idle_loop")
       local brain = require "brains/leifbrain"
       inst:SetBrain(brain)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "pigking.png" )
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 5
       inst.components.locomotor.runspeed = 10
       inst:SetStateGraph("SGpig")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("healer")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveTag("cattoy")
       inst:AddComponent("inventory")
       inst:AddComponent("follower")
       inst:AddComponent("knownlocations")
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"meat", "meat"})
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(1000)
       inst:AddComponent("combat")
       inst.components.combat:SetDefaultDamage(20)
       inst.components.combat:SetAttackPeriod(1)
       inst.components.combat:SetRetargetFunction(3, function(inst)
           if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                   if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("npcs") then
                      return guy:HasTag("monster") or guy:HasTag("smallcreature")
                   end
              end )
           end
       end )
       inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
       inst:ListenForEvent("attacked", function(inst, data)
           inst.components.combat:SetTarget(data.attacker)
           inst.components.combat:ShareTarget(data.attacker, 50, function(dude) return dude:HasTag("pignpcs") and not dude.components.health:IsDead() end, 10)
       end )
       inst:DoPeriodicTask(1, function(inst)
         if not inst.components.health:IsDead() then
           local pos = Vector3(inst.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3)
           for k,v in pairs(ents) do
               if v.components.pickable and v.components.pickable:CanBePicked() then
                  v.components.pickable:Pick(inst)
               end
               if v.components.crop then
                  v.components.crop:Harvest(inst)
               end
               if v:HasTag("tree") and v.components.workable and v.components.workable.workleft > 0 then
                  v.components.workable:Destroy(inst)
               end
               if v.components.edible and v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
                  v:Remove()
               end
           end
         end
       end )
       inst:ListenForEvent("death", function()
           for k = 1,math.random(1,3) do
               local pt2 = inst:GetPosition()
               local gold = SpawnPrefab("goldnugget")
               gold.Transform:SetPosition(pt2.x+(math.random(3)-math.random(3)), 0, pt2.z+(math.random(3)-math.random(3)))
           end
       end )
       inst:ListenForEvent( "daytime", function() inst:Remove() end , GetWorld())
       inst:AddTag("pignpcs")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在大陆上不定期出现猪族人的营地（红色的大帐篷），他们是新进化的亚人类，不会主动攻击你（会攻击怪物），但会与你争夺大陆上的资源，他们会砍伐森林、打猎、采集一切可以采集的植物（包括你的农田）。如果你进攻他们，将遭到抵抗，如果你拆毁他们的营地，也将被视为敌人，如果你用围墙将他们圈起来，猪族人也将毫不犹豫地拆毁它。是与猪族人和平相处，任由他们的不断壮大，还是与他们为敌，不断地进行猎杀，是摆在你面前的一道选择题。猪族营地在小地图上显示为帐篷图标，猪族人显示为猪王图标。用锤子砸15下可拆毁红色帐篷，被拆毁了帐篷的猪族部落，将在第二天天亮时离去




二一六.鬼影重重（夜晚墓地有大量亡魂游荡，购买亡魂之心让主角变身亡魂）

    1.用记事本打开游戏目录\data\scripts\prefabs\gravestone.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createghostnpc(inst)
    for k = 1,math.random(3,7) do
        local pt = inst:GetPosition()
        local ghostnpc = SpawnPrefab("deadlyfeast")
        ghostnpc.Transform:SetPosition(pt.x+(math.random(20)-math.random(20)), 0, pt.z+(math.random(20)-math.random(20)))
        ghostnpc.entity:AddSoundEmitter()
        ghostnpc.AnimState:SetBank("ghost")
        ghostnpc.AnimState:SetBuild("ghost_build")
        ghostnpc.AnimState:PlayAnimation("idle", true)
        ghostnpc.Transform:SetFourFaced()
        MakeGhostPhysics(ghostnpc, 1, .5)
        local minimap = ghostnpc.entity:AddMiniMapEntity()
        minimap:SetIcon("whitespider_den.png")
        ghostnpc.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        local light = ghostnpc.entity:AddLight()
        light:SetIntensity(.6)
        light:SetRadius(.5)
        light:SetFalloff(.6)
        light:Enable(true)
        light:SetColour(180/255, 195/255, 225/255)
        local brain = require "brains/leifbrain"
        ghostnpc:SetBrain(brain)
        ghostnpc:AddComponent("locomotor")
        ghostnpc.components.locomotor.walkspeed = 5
        ghostnpc.components.locomotor.runspeed = 5
        ghostnpc:SetStateGraph("SGghost")
        ghostnpc:AddTag("ghostnpcs")
        ghostnpc:RemoveComponent("edible")
        ghostnpc:RemoveComponent("inventoryitem")
        ghostnpc:RemoveTag("meat")
        ghostnpc:AddComponent("sanityaura")
        ghostnpc.components.sanityaura.aura = -TUNING.SANITYAURA_SMALL
        ghostnpc:AddComponent("health")
        ghostnpc.components.health:SetMaxHealth(500)
        ghostnpc:AddComponent("trader")
        ghostnpc.components.trader:SetAcceptTest(function(ghostnpc, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 30) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        ghostnpc.components.trader.onaccept = function(ghostnpc, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 29)
            local ghostheart = SpawnPrefab("deadlyfeast")
            ghostheart.AnimState:SetBank("egg")
            ghostheart.AnimState:SetBuild("tallbird_egg")
            ghostheart.AnimState:PlayAnimation("cooked")
            ghostheart.components.inventoryitem:ChangeImageName("tallbirdegg_cooked")
            ghostheart:RemoveComponent("edible")
            ghostheart:RemoveTag("meat")
            ghostheart:AddComponent("equippable")
            ghostheart.components.equippable:SetOnEquip( function(ghostheart, owner)
                if owner == GetPlayer() and not GetPlayer():HasTag("poisoning") and not GetPlayer():HasTag("fever") then
                   owner.components.locomotor:Stop()
                   owner.components.playercontroller:Enable(false)
                   owner:DoTaskInTime(0.3, function()
                       SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                       owner.AnimState:SetBank("ghost")
                       owner.AnimState:SetBuild("ghost_build")
                       owner:SetStateGraph("SGghost")
                       owner.AnimState:PlayAnimation("idle", true)
                       owner.Transform:SetScale(1.2,1.2,1.2)
                       local shadow = owner.entity:AddDynamicShadow()
                       shadow:SetSize( 0, 0 )
                       owner.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                       local light = owner.entity:AddLight()
                       light:SetIntensity(.6)
                       light:SetRadius(20)
                       light:SetFalloff(.6)
                       light:Enable(true)
                       light:SetColour(180/255, 195/255, 225/255)
                       owner.components.locomotor.walkspeed = 20
                       owner.components.locomotor.runspeed = 20
                       owner.components.health:DoDelta(owner.components.health.maxhealth)
                       owner.components.health:SetInvincible(true)
                       owner.components.hunger:DoDelta(owner.components.hunger.max)
                       owner.components.hunger:Pause()
                       owner.components.sanity:DoDelta(owner.components.sanity.max)
                       owner.components.sanity.ignore = true
                       owner.components.combat:SetDefaultDamage(1000)
                       owner:AddComponent("aura")
                       owner.components.aura.radius = 3
                       owner.components.aura.tickperiod = 0.5
                       owner.components.aura.ignoreallies = true
                       owner.components.aura.auratestfn = function(ghostnpc, target)
                           if target.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == target then
                              return true
                           end
                           return false
                       end
                       owner.components.temperature:SetTemp(20)
                       owner.components.playercontroller:Enable(true)
                   end )
                end
            end )
            ghostheart.components.equippable:SetOnUnequip( function(ghostheart, owner)
                SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                owner.components.locomotor:Stop()
                owner.components.playercontroller:Enable(false)
                owner:DoTaskInTime(0.3, function() 
                    owner.AnimState:SetBank("wilson")
                    if GetPlayer().prefab == "wilson" then owner.AnimState:SetBuild("wilson") end
                    if GetPlayer().prefab == "wendy" then owner.AnimState:SetBuild("wendy") end
                    if GetPlayer().prefab == "wes" then owner.AnimState:SetBuild("wes") end
                    if GetPlayer().prefab == "wickerbottom" then owner.AnimState:SetBuild("wickerbottom") end
                    if GetPlayer().prefab == "willow" then owner.AnimState:SetBuild("willow") end
                    if GetPlayer().prefab == "wolfgang" then owner.AnimState:SetBuild("wolfgang") end
                    if GetPlayer().prefab == "wx78" then owner.AnimState:SetBuild("wx78") end
                    if GetPlayer().prefab == "woodie" then owner.AnimState:SetBuild("woodie") end
                    if GetPlayer().prefab == "waxwell" then owner.AnimState:SetBuild("waxwell") end
                    if GetPlayer().prefab == "wathgrithr" then owner.AnimState:SetBuild("wathgrithr") end
                    if GetPlayer().prefab == "webber" then owner.AnimState:SetBuild("webber") end
                    owner:SetStateGraph("SGwilson")
                    owner.AnimState:PlayAnimation("idle")
                    owner.Transform:SetScale(1,1,1)
                    local shadow = owner.entity:AddDynamicShadow()
                    shadow:SetSize( 1.3, .6 )
                    owner.AnimState:SetBloomEffectHandle("")
                    owner.Light:Enable(false)
                    owner.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
                    owner.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
                    owner.components.health:SetInvincible(false)
                    owner.components.hunger:Resume()
                    owner.components.sanity.ignore = false
                    owner.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
                    owner.components.combat.hiteffectsymbol = "torso"
                    owner:RemoveComponent("aura")
                    owner.components.temperature:SetTemp(nil)
                    owner.components.playercontroller:Enable(true)
                    ghostheart:Remove()
                end )
            end )
            ghostheart.components.equippable.equipslot = EQUIPSLOTS.HANDS
            ghostheart:AddTag("ghostheart")
            GetPlayer().components.inventory:GiveItem(ghostheart)
        end
        ghostnpc:AddComponent("combat")
        ghostnpc.components.combat:SetDefaultDamage(3)
        ghostnpc.components.combat:SetAttackPeriod(1)
        ghostnpc.components.combat:SetRetargetFunction(2, function(ghostnpc)
            if not ghostnpc.components.health:IsDead() then
                return FindEntity(ghostnpc, 25, function(guy)
                    if guy:HasTag("monster") then return guy end
                    if guy:HasTag("player") and guy.components.inventory and not guy.components.inventory:FindItem(function(item) return item.prefab == "nightmarefuel" end ) then return guy end
                end )
            end
        end )
        ghostnpc:ListenForEvent("attacked", function(ghostnpc, data)
            ghostnpc.components.combat:SetTarget(data.attacker)
            ghostnpc.components.combat:ShareTarget(data.attacker, 35, function(dude) return dude:HasTag("ghostnpcs") and not dude.components.health:IsDead() end, 5)
        end )
        ghostnpc:AddComponent("aura")
        ghostnpc.components.aura.radius = 2
        ghostnpc.components.aura.tickperiod = 1
        ghostnpc.components.aura.ignoreallies = true
        ghostnpc.components.aura.auratestfn = function(ghostnpc, target)
          if target:HasTag("ghostnpcs") then return false end
          if target.components.combat.target == ghostnpc or ghostnpc.components.combat.target == target then
             return true
          end
        end
        ghostnpc:ListenForEvent("death", function()
            local gems = {"purplegem","bluegem","redgem","orangegem","yellowgem","greengem","thulecite","goldnugget"}
            local gem = gems[math.random(#gems)]
            SpawnPrefab(gem).Transform:SetPosition(ghostnpc.Transform:GetWorldPosition())
        end )
        ghostnpc:ListenForEvent( "daytime", function() ghostnpc:Remove() end , GetWorld())
    end
end
    inst:ListenForEvent( "dusktime", function() createghostnpc(inst) end , GetWorld())


    2.用记事本打开游戏目录\data\scripts\prefabs\deadlyfeast.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("ghostnpcs") then
        data.ghostnpcs = true
    end
    if inst:HasTag("ghostheart") then
        data.ghostheart = true
    end
end
local function onload(inst, data)
    if data and data.ghostnpcs then
        inst.entity:AddSoundEmitter()
        inst.AnimState:SetBank("ghost")
        inst.AnimState:SetBuild("ghost_build")
        inst.AnimState:PlayAnimation("idle", true)
        inst.Transform:SetFourFaced()
        MakeGhostPhysics(inst, 1, .5)
        local minimap = inst.entity:AddMiniMapEntity()
        minimap:SetIcon("whitespider_den.png")
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        local light = inst.entity:AddLight()
        light:SetIntensity(.6)
        light:SetRadius(.5)
        light:SetFalloff(.6)
        light:Enable(true)
        light:SetColour(180/255, 195/255, 225/255)
        local brain = require "brains/leifbrain"
        inst:SetBrain(brain)
        inst:AddComponent("locomotor")
        inst.components.locomotor.walkspeed = 5
        inst.components.locomotor.runspeed = 5
        inst:SetStateGraph("SGghost")
        inst:AddTag("ghostnpcs")
        inst:RemoveComponent("edible")
        inst:RemoveComponent("inventoryitem")
        inst:RemoveTag("meat")
        inst:AddComponent("sanityaura")
        inst.components.sanityaura.aura = -TUNING.SANITYAURA_SMALL
        inst:AddComponent("health")
        inst.components.health:SetMaxHealth(500)
        inst:AddComponent("trader")
        inst.components.trader:SetAcceptTest(function(inst, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 30) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        inst.components.trader.onaccept = function(inst, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 29)
            local ghostheart = SpawnPrefab("deadlyfeast")
            ghostheart.AnimState:SetBank("egg")
            ghostheart.AnimState:SetBuild("tallbird_egg")
            ghostheart.AnimState:PlayAnimation("cooked")
            ghostheart.components.inventoryitem:ChangeImageName("tallbirdegg_cooked")
            ghostheart:RemoveComponent("edible")
            ghostheart:RemoveTag("meat")
            ghostheart:AddComponent("equippable")
            ghostheart.components.equippable:SetOnEquip( function(ghostheart, owner)
                if owner == GetPlayer() and not GetPlayer():HasTag("poisoning") and not GetPlayer():HasTag("fever") then
                   owner.components.locomotor:Stop()
                   owner.components.playercontroller:Enable(false)
                   owner:DoTaskInTime(0.3, function()
                       SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                       owner.AnimState:SetBank("ghost")
                       owner.AnimState:SetBuild("ghost_build")
                       owner:SetStateGraph("SGghost")
                       owner.AnimState:PlayAnimation("idle", true)
                       owner.Transform:SetScale(1.2,1.2,1.2)
                       local shadow = owner.entity:AddDynamicShadow()
                       shadow:SetSize( 0, 0 )
                       owner.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                       local light = owner.entity:AddLight()
                       light:SetIntensity(.6)
                       light:SetRadius(20)
                       light:SetFalloff(.6)
                       light:Enable(true)
                       light:SetColour(180/255, 195/255, 225/255)
                       owner.components.locomotor.walkspeed = 20
                       owner.components.locomotor.runspeed = 20
                       owner.components.health:DoDelta(owner.components.health.maxhealth)
                       owner.components.health:SetInvincible(true)
                       owner.components.hunger:DoDelta(owner.components.hunger.max)
                       owner.components.hunger:Pause()
                       owner.components.sanity:DoDelta(owner.components.sanity.max)
                       owner.components.sanity.ignore = true
                       owner.components.combat:SetDefaultDamage(1000)
                       owner:AddComponent("aura")
                       owner.components.aura.radius = 3
                       owner.components.aura.tickperiod = 0.5
                       owner.components.aura.ignoreallies = true
                       owner.components.aura.auratestfn = function(inst, target)
                           if target.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == target then
                              return true
                           end
                           return false
                       end
                       owner.components.temperature:SetTemp(20)
                       owner.components.playercontroller:Enable(true)
                   end )
                end
            end )
            ghostheart.components.equippable:SetOnUnequip( function(ghostheart, owner)
                SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                owner.components.locomotor:Stop()
                owner.components.playercontroller:Enable(false)
                owner:DoTaskInTime(0.3, function() 
                    owner.AnimState:SetBank("wilson")
                    if GetPlayer().prefab == "wilson" then owner.AnimState:SetBuild("wilson") end
                    if GetPlayer().prefab == "wendy" then owner.AnimState:SetBuild("wendy") end
                    if GetPlayer().prefab == "wes" then owner.AnimState:SetBuild("wes") end
                    if GetPlayer().prefab == "wickerbottom" then owner.AnimState:SetBuild("wickerbottom") end
                    if GetPlayer().prefab == "willow" then owner.AnimState:SetBuild("willow") end
                    if GetPlayer().prefab == "wolfgang" then owner.AnimState:SetBuild("wolfgang") end
                    if GetPlayer().prefab == "wx78" then owner.AnimState:SetBuild("wx78") end
                    if GetPlayer().prefab == "woodie" then owner.AnimState:SetBuild("woodie") end
                    if GetPlayer().prefab == "waxwell" then owner.AnimState:SetBuild("waxwell") end
                    if GetPlayer().prefab == "wathgrithr" then owner.AnimState:SetBuild("wathgrithr") end
                    if GetPlayer().prefab == "webber" then owner.AnimState:SetBuild("webber") end
                    owner:SetStateGraph("SGwilson")
                    owner.AnimState:PlayAnimation("idle")
                    owner.Transform:SetScale(1,1,1)
                    local shadow = owner.entity:AddDynamicShadow()
                    shadow:SetSize( 1.3, .6 )
                    owner.AnimState:SetBloomEffectHandle("")
                    owner.Light:Enable(false)
                    owner.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
                    owner.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
                    owner.components.health:SetInvincible(false)
                    owner.components.hunger:Resume()
                    owner.components.sanity.ignore = false
                    owner.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
                    owner.components.combat.hiteffectsymbol = "torso"
                    owner:RemoveComponent("aura")
                    owner.components.temperature:SetTemp(nil)
                    owner.components.playercontroller:Enable(true)
                    ghostheart:Remove()
                end )
            end )
            ghostheart.components.equippable.equipslot = EQUIPSLOTS.HANDS
            ghostheart:AddTag("ghostheart")
            GetPlayer().components.inventory:GiveItem(ghostheart)
        end
        inst:AddComponent("combat")
        inst.components.combat:SetDefaultDamage(3)
        inst.components.combat:SetAttackPeriod(1)
        inst.components.combat:SetRetargetFunction(2, function(inst)
            if not inst.components.health:IsDead() then
                return FindEntity(inst, 25, function(guy)
                    if guy:HasTag("monster") then return guy end
                    if guy:HasTag("player") and guy.components.inventory and not guy.components.inventory:FindItem(function(item) return item.prefab == "nightmarefuel" end ) then return guy end
                end )
            end
        end )
        inst:ListenForEvent("attacked", function(inst, data)
            inst.components.combat:SetTarget(data.attacker)
            inst.components.combat:ShareTarget(data.attacker, 35, function(dude) return dude:HasTag("ghostnpcs") and not dude.components.health:IsDead() end, 5)
        end )
        inst:AddComponent("aura")
        inst.components.aura.radius = 2
        inst.components.aura.tickperiod = 1
        inst.components.aura.ignoreallies = true
        inst.components.aura.auratestfn = function(inst, target)
          if target:HasTag("ghostnpcs") then return false end
          if target.components.combat.target == inst or inst.components.combat.target == target then
             return true
          end
        end
        inst:ListenForEvent("death", function()
            local gems = {"purplegem","bluegem","redgem","orangegem","yellowgem","greengem","thulecite","goldnugget"}
            local gem = gems[math.random(#gems)]
            SpawnPrefab(gem).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end )
        inst:ListenForEvent( "daytime", function() inst:Remove() end , GetWorld())
    end
    if data and data.ghostheart then
            inst.AnimState:SetBank("egg")
            inst.AnimState:SetBuild("tallbird_egg")
            inst.AnimState:PlayAnimation("cooked")
            inst.components.inventoryitem:ChangeImageName("tallbirdegg_cooked")
            inst:RemoveComponent("edible")
            inst:RemoveTag("meat")
            inst:AddComponent("equippable")
            inst.components.equippable:SetOnEquip( function(inst, owner)
                if owner == GetPlayer() and not GetPlayer():HasTag("poisoning") and not GetPlayer():HasTag("fever") then
                   owner.components.locomotor:Stop()
                   owner.components.playercontroller:Enable(false)
                   owner:DoTaskInTime(0.3, function()
                       SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                       owner.AnimState:SetBank("ghost")
                       owner.AnimState:SetBuild("ghost_build")
                       owner:SetStateGraph("SGghost")
                       owner.AnimState:PlayAnimation("idle", true)
                       owner.Transform:SetScale(1.2,1.2,1.2)
                       local shadow = owner.entity:AddDynamicShadow()
                       shadow:SetSize( 0, 0 )
                       owner.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                       local light = owner.entity:AddLight()
                       light:SetIntensity(.6)
                       light:SetRadius(20)
                       light:SetFalloff(.6)
                       light:Enable(true)
                       light:SetColour(180/255, 195/255, 225/255)
                       owner.components.locomotor.walkspeed = 20
                       owner.components.locomotor.runspeed = 20
                       owner.components.health:DoDelta(owner.components.health.maxhealth)
                       owner.components.health:SetInvincible(true)
                       owner.components.hunger:DoDelta(owner.components.hunger.max)
                       owner.components.hunger:Pause()
                       owner.components.sanity:DoDelta(owner.components.sanity.max)
                       owner.components.sanity.ignore = true
                       owner.components.combat:SetDefaultDamage(1000)
                       owner:AddComponent("aura")
                       owner.components.aura.radius = 3
                       owner.components.aura.tickperiod = 0.5
                       owner.components.aura.ignoreallies = true
                       owner.components.aura.auratestfn = function(ghostnpc, target)
                           if target.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == target then
                              return true
                           end
                           return false
                       end
                       owner.components.temperature:SetTemp(20)
                       owner.components.playercontroller:Enable(true)
                   end )
                end
            end )
            inst.components.equippable:SetOnUnequip( function(inst, owner)
                SpawnPrefab("collapse_big").Transform:SetPosition(owner.Transform:GetWorldPosition())
                owner.components.locomotor:Stop()
                owner.components.playercontroller:Enable(false)
                owner:DoTaskInTime(0.3, function() 
                    owner.AnimState:SetBank("wilson")
                    if GetPlayer().prefab == "wilson" then owner.AnimState:SetBuild("wilson") end
                    if GetPlayer().prefab == "wendy" then owner.AnimState:SetBuild("wendy") end
                    if GetPlayer().prefab == "wes" then owner.AnimState:SetBuild("wes") end
                    if GetPlayer().prefab == "wickerbottom" then owner.AnimState:SetBuild("wickerbottom") end
                    if GetPlayer().prefab == "willow" then owner.AnimState:SetBuild("willow") end
                    if GetPlayer().prefab == "wolfgang" then owner.AnimState:SetBuild("wolfgang") end
                    if GetPlayer().prefab == "wx78" then owner.AnimState:SetBuild("wx78") end
                    if GetPlayer().prefab == "woodie" then owner.AnimState:SetBuild("woodie") end
                    if GetPlayer().prefab == "waxwell" then owner.AnimState:SetBuild("waxwell") end
                    if GetPlayer().prefab == "wathgrithr" then owner.AnimState:SetBuild("wathgrithr") end
                    if GetPlayer().prefab == "webber" then owner.AnimState:SetBuild("webber") end
                    owner:SetStateGraph("SGwilson")
                    owner.AnimState:PlayAnimation("idle")
                    owner.Transform:SetScale(1,1,1)
                    local shadow = owner.entity:AddDynamicShadow()
                    shadow:SetSize( 1.3, .6 )
                    owner.AnimState:SetBloomEffectHandle("")
                    owner.Light:Enable(false)
                    owner.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
                    owner.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
                    owner.components.health:SetInvincible(false)
                    owner.components.hunger:Resume()
                    owner.components.sanity.ignore = false
                    owner.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
                    owner.components.combat.hiteffectsymbol = "torso"
                    owner:RemoveComponent("aura")
                    owner.components.temperature:SetTemp(nil)
                    owner.components.playercontroller:Enable(true)
                    inst:Remove()
                end )
            end )
            inst.components.equippable.equipslot = EQUIPSLOTS.HANDS
            inst:AddTag("ghostheart")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在夜晚时，墓地有大量亡魂游荡，会主动攻击你，且靠近它们会降脑，消灭亡魂可获得宝石、铥矿石、黄金。亡魂在小地图上显示为白蜘蛛的图标。如果身上携带了噩梦燃料，亡魂就不会主动攻击你，给亡魂30个黄金（拿着黄金对亡魂点鼠标左键），可购买亡魂之心，装备它即可变身亡魂，生命、饥饿、脑全部锁死，按Ctrl + 鼠标左键攻击，且任何攻击你的敌人都会被自动烫死。卸载亡魂之心即可变回人，同时亡魂之心消失，想再变身就多买一些吧。如果修改了“小病小灾”，在主角感冒和食物中毒时，装备亡魂之心也不会变身




二一七.角斗场（用铥矿石种角斗场，参与生死角斗赚奖金，也可观看比赛）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\thulecite.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local names = {"swap_goldenaxe","swap_spear","swap_spike","swap_batbat","swap_ruins_bat"}
local weapon = names[math.random(#names)]
local items = { SWORD = weapon }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function fightgame(inst)
    local pt = inst:GetPosition()
    local gamehost = SpawnPrefab("thulecite")
    gamehost.Transform:SetPosition(pt.x, pt.y, pt.z)
    gamehost.AnimState:SetBank("wilson")
    gamehost.AnimState:SetBuild("wolfgang")
    gamehost.AnimState:OverrideSymbol("swap_hat", "hat_top", "swap_hat")
    gamehost.AnimState:Show("HAT")
    gamehost.AnimState:Show("HAT_HAIR")
    gamehost.AnimState:Hide("HAIR_NOHAT")
    gamehost.AnimState:Hide("HAIR")
    gamehost.AnimState:Hide("ARM_carry")
    gamehost.AnimState:Show("ARM_normal")
    gamehost.Transform:SetFourFaced()
    gamehost.AnimState:PlayAnimation("idle")
    gamehost:RemoveComponent("repairer")
    gamehost:RemoveComponent("edible")
    gamehost:RemoveComponent("tradable")
    gamehost:RemoveComponent("inventoryitem")
    gamehost:RemoveComponent("stackable")
    gamehost:RemoveComponent("deployable")
    gamehost:RemoveComponent("bait")
    gamehost:RemoveTag("molebait")
    gamehost:AddTag("gamehost")
    gamehost:AddComponent("workable")
    gamehost.components.workable:SetWorkAction(ACTIONS.HAMMER)
    gamehost.components.workable:SetWorkLeft(3)
    gamehost.components.workable:SetOnFinishCallback(function(gamehost)
        local pos = Vector3(gamehost.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 50)
        for k,v in pairs(ents) do
            if v:HasTag("candel") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               v:Remove()
            end
        end
        gamehost:Remove()
    end )
    local fountain = SpawnPrefab("thulecite")
    fountain.Transform:SetPosition(pt.x-11, 0, pt.z-11)
    fountain.AnimState:SetBank("staff_purple_base")
    fountain.AnimState:SetBuild("staff_purple_base")
    fountain.AnimState:PlayAnimation("idle_full_loop")
    fountain.Transform:SetScale(1.5, 1.5, 1.5)
    fountain.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    fountain.AnimState:SetLayer( LAYER_BACKGROUND )
    fountain.AnimState:SetSortOrder( 1 )
    fountain.Transform:SetRotation( 45 )
    fountain:AddTag("NOCLICK")
    fountain:RemoveComponent("repairer")
    fountain:RemoveComponent("edible")
    fountain:RemoveComponent("tradable")
    fountain:RemoveComponent("inventoryitem")
    fountain:RemoveComponent("stackable")
    fountain:RemoveComponent("deployable")
    fountain:RemoveComponent("bait")
    fountain:RemoveTag("molebait")
    local light = fountain.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(18)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    fountain:AddTag("candel")
    local pt0 = Vector3(fountain.Transform:GetWorldPosition())
    for k = 1, 60 do
        local result_offset = FindValidPositionByFan(1 * 2 * PI, 12, 60, function(offset)
            local x,y,z = (pt0 + offset):Get()
            local ents = TheSim:FindEntities(x,y,z , 1)
            return not next(ents) 
        end)
        if result_offset then
           local fence = SpawnPrefab("thulecite")
           fence.AnimState:SetBank("marble_pillar")
           fence.AnimState:SetBuild("marble_pillar")
           fence.AnimState:PlayAnimation("full")
           MakeObstaclePhysics(fence, 1)
           fence:RemoveComponent("repairer")
           fence:RemoveComponent("edible")
           fence:RemoveComponent("tradable")
           fence:RemoveComponent("inventoryitem")
           fence:RemoveComponent("stackable")
           fence:RemoveComponent("deployable")
           fence:RemoveComponent("bait")
           fence:RemoveTag("molebait")
           fence:AddTag("candel")
           fence.Transform:SetPosition((pt0 + result_offset):Get())
        end
    end
    gamehost:AddComponent("trader")
    gamehost.components.trader:SetAcceptTest(function(gamehost, item) 
      if not gamehost:HasTag("startgame") then
        if GetPlayer().components.inventory:Has("goldnugget", 100) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
      end
      return false
    end )
    gamehost.components.trader.onaccept = function(gamehost, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 99)
        GetPlayer().components.locomotor:Stop()
        GetPlayer().Transform:SetPosition(pt.x-11+5, 0, pt.z-11-5)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
        gamehost:AddTag("startgame")
        local warrior0 = SpawnPrefab("thulecite")
        warrior0.Transform:SetPosition(pt.x-11-5, 0, pt.z-11+5)
        warrior0.AnimState:SetBank("wilson")
        local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
        local buildname = names[math.random(#names)]
        warrior0.AnimState:SetBuild(buildname)
        local hats = {"hat_beefalo","hat_feather","hat_football","hat_ruins","hat_slurper","hat_slurtle","hat_spider"}
        local hat = hats[math.random(#hats)]
        warrior0.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
        local armors = {"armor_grass","armor_marble","armor_ruins","armor_sanity","armor_slurper","armor_wood"}
        local armor = armors[math.random(#armors)]
        warrior0.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
        warrior0.AnimState:Show("HAT")
        warrior0.AnimState:Show("HAT_HAIR")
        warrior0.AnimState:Hide("HAIR_NOHAT")
        warrior0.AnimState:Hide("HAIR")
        warrior0.AnimState:Hide("ARM_carry")
        warrior0.AnimState:Show("ARM_normal")
        warrior0.AnimState:PlayAnimation("idle")
        warrior0.Transform:SetFourFaced()
        local sound = warrior0.entity:AddSoundEmitter()
        local shadow = warrior0.entity:AddDynamicShadow()
        shadow:SetSize( 1.3, .6 )
        local brain = require "brains/frogbrain"
        warrior0:SetBrain(brain)
        warrior0:AddComponent("locomotor")
        warrior0.components.locomotor.walkspeed = 5
        warrior0.components.locomotor.runspeed = 10
        warrior0:SetStateGraph("SGshadowwaxwell")
        MakeCharacterPhysics(warrior0, 75, .5)
        warrior0:RemoveComponent("repairer")
        warrior0:RemoveComponent("edible")
        warrior0:RemoveComponent("tradable")
        warrior0:RemoveComponent("inventoryitem")
        warrior0:RemoveComponent("stackable")
        warrior0:RemoveComponent("deployable")
        warrior0:RemoveComponent("bait")
        warrior0:RemoveTag("molebait")
        warrior0:AddComponent("inventory")
        warrior0:AddComponent("knownlocations")
        warrior0:AddComponent("health")
        warrior0.components.health:SetMaxHealth(math.random(2500,5000))
        warrior0:AddComponent("combat")
        warrior0.components.combat:SetDefaultDamage(math.random(25,50))
        warrior0.components.combat:SetAttackPeriod(2)
        warrior0.components.combat:SetRetargetFunction(1, function(warrior0)
            if not warrior0.components.health:IsDead() then
                return FindEntity(warrior0, 30, function(guy)
                    return guy:HasTag("player")
                end )
            end
        end )
        warrior0:DoPeriodicTask(1, function(warrior0)
            if not warrior0:HasTag("noplay") then
               if warrior0.components.health.currenthealth <= 100 then
                  warrior0:AddTag("noplay")
                  warrior0.components.combat:SetTarget(nil)
                  warrior0.components.combat:SetRetargetFunction(100, nil )
               end
               if GetPlayer().components.health.currenthealth <= 51 then
                  warrior0.components.locomotor:Stop()
                  warrior0:SetBrain(nil)
                  warrior0:AddTag("noplay")
                  warrior0.components.combat:SetTarget(nil)
                  warrior0.components.combat:SetRetargetFunction(100, nil )
                  warrior0.components.health:SetInvincible(true)
                  warrior0.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  gamehost:DoTaskInTime(3, function()
                      warrior0:Remove()
                      GetPlayer().components.locomotor:Stop()
                      GetPlayer().Transform:SetPosition(pt.x-1, 0, pt.z+1)
                      if gamehost.task then gamehost.task:Cancel() gamehost.task = nil end
                      gamehost:RemoveTag("startgame")
                  end )
               end
            end
        end )
        warrior0:ListenForEvent("death", function()
            GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
            gamehost:DoTaskInTime(3, function()
                GetPlayer().components.locomotor:Stop()
                GetPlayer().Transform:SetPosition(pt.x-1, 0, pt.z+1)
                for k = 1, 200 do
                    local goldnugget = SpawnPrefab("goldnugget")
                    GetPlayer().components.inventory:GiveItem(goldnugget)
                end
                if gamehost.task then gamehost.task:Cancel() gamehost.task = nil end
                gamehost:RemoveTag("startgame")
            end )
        end )
        warrior0:AddTag("candel")
        gamehost.task = gamehost:DoPeriodicTask(1, function(gamehost)
            local target = FindEntity(fountain, 13, function(guy) 
                return guy:HasTag("player")
            end )
            if not target then
               GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
               warrior0:Remove()
               if gamehost.task then gamehost.task:Cancel() gamehost.task = nil end
               gamehost:RemoveTag("startgame")
            end
        end )
    end
    gamehost.components.inspectable.getstatus = function(gamehost)
        if not gamehost:HasTag("startgame") then
           if GetPlayer().components.inventory:Has("goldnugget", 20) then
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 20)
              GetPlayer().SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
              gamehost:AddTag("startgame")
              local warrior1 = SpawnPrefab("thulecite")
              warrior1.Transform:SetPosition(pt.x-11+5, 0, pt.z-11-5)
              warrior1.AnimState:SetBank("wilson")
              local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
              local buildname = names[math.random(#names)]
              warrior1.AnimState:SetBuild(buildname)
              local hats = {"hat_beefalo","hat_feather","hat_football","hat_ruins","hat_slurper","hat_slurtle","hat_spider"}
              local hat = hats[math.random(#hats)]
              warrior1.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
              local armors = {"armor_grass","armor_marble","armor_ruins","armor_sanity","armor_slurper","armor_wood"}
              local armor = armors[math.random(#armors)]
              warrior1.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
              warrior1.AnimState:Show("HAT")
              warrior1.AnimState:Show("HAT_HAIR")
              warrior1.AnimState:Hide("HAIR_NOHAT")
              warrior1.AnimState:Hide("HAIR")
              warrior1.AnimState:Hide("ARM_carry")
              warrior1.AnimState:Show("ARM_normal")
              warrior1.AnimState:PlayAnimation("idle")
              warrior1.Transform:SetFourFaced()
              local sound = warrior1.entity:AddSoundEmitter()
              local shadow = warrior1.entity:AddDynamicShadow()
              shadow:SetSize( 1.3, .6 )
              local brain = require "brains/frogbrain"
              warrior1:SetBrain(brain)
              warrior1:AddComponent("locomotor")
              warrior1.components.locomotor.walkspeed = 5
              warrior1.components.locomotor.runspeed = 10
              warrior1:SetStateGraph("SGshadowwaxwell")
              MakeCharacterPhysics(warrior1, 75, .5)
              warrior1:RemoveComponent("repairer")
              warrior1:RemoveComponent("edible")
              warrior1:RemoveComponent("tradable")
              warrior1:RemoveComponent("inventoryitem")
              warrior1:RemoveComponent("stackable")
              warrior1:RemoveComponent("deployable")
              warrior1:RemoveComponent("bait")
              warrior1:RemoveTag("molebait")
              warrior1:AddComponent("inventory")
              warrior1:AddComponent("knownlocations")
              warrior1:AddComponent("health")
              warrior1.components.health:SetMaxHealth(math.random(200,500))
              warrior1:AddComponent("combat")
              warrior1.components.combat:SetDefaultDamage(math.random(25,100))
              warrior1.components.combat:SetAttackPeriod(3)
              warrior1.components.combat:SetRetargetFunction(1, function(warrior1)
                  if not warrior1.components.health:IsDead() then
                      return FindEntity(warrior1, 30, function(guy)
                          return guy:HasTag("warrior2")
                      end )
                  end
              end )
              warrior1:AddTag("warrior1")
              warrior1:AddTag("candel")
              local warrior2 = SpawnPrefab("thulecite")
              warrior2.Transform:SetPosition(pt.x-11-5, 0, pt.z-11+5)
              warrior2.AnimState:SetBank("wilson")
              local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
              local buildname = names[math.random(#names)]
              warrior2.AnimState:SetBuild(buildname)
              local hats = {"hat_beefalo","hat_feather","hat_football","hat_ruins","hat_slurper","hat_slurtle","hat_spider"}
              local hat = hats[math.random(#hats)]
              warrior2.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
              local armors = {"armor_grass","armor_marble","armor_ruins","armor_sanity","armor_slurper","armor_wood"}
              local armor = armors[math.random(#armors)]
              warrior2.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
              warrior2.AnimState:Show("HAT")
              warrior2.AnimState:Show("HAT_HAIR")
              warrior2.AnimState:Hide("HAIR_NOHAT")
              warrior2.AnimState:Hide("HAIR")
              warrior2.AnimState:Hide("ARM_carry")
              warrior2.AnimState:Show("ARM_normal")
              warrior2.AnimState:PlayAnimation("idle")
              warrior2.Transform:SetFourFaced()
              local sound = warrior2.entity:AddSoundEmitter()
              local shadow = warrior2.entity:AddDynamicShadow()
              shadow:SetSize( 1.3, .6 )
              local brain = require "brains/frogbrain"
              warrior2:SetBrain(brain)
              warrior2:AddComponent("locomotor")
              warrior2.components.locomotor.walkspeed = 5
              warrior2.components.locomotor.runspeed = 10
              warrior2:SetStateGraph("SGshadowwaxwell")
              MakeCharacterPhysics(warrior2, 75, .5)
              warrior2:RemoveComponent("repairer")
              warrior2:RemoveComponent("edible")
              warrior2:RemoveComponent("tradable")
              warrior2:RemoveComponent("inventoryitem")
              warrior2:RemoveComponent("stackable")
              warrior2:RemoveComponent("deployable")
              warrior2:RemoveComponent("bait")
              warrior2:RemoveTag("molebait")
              warrior2:AddComponent("inventory")
              warrior2:AddComponent("knownlocations")
              warrior2:AddComponent("health")
              warrior2.components.health:SetMaxHealth(math.random(200,500))
              warrior2:AddComponent("combat")
              warrior2.components.combat:SetDefaultDamage(math.random(25,100))
              warrior2.components.combat:SetAttackPeriod(3)
              warrior2.components.combat:SetRetargetFunction(1, function(warrior2)
                  if not warrior2.components.health:IsDead() then
                      return FindEntity(warrior2, 30, function(guy)
                          return guy:HasTag("warrior1")
                      end )
                  end
              end )
              warrior2:AddTag("warrior2")
              warrior2:AddTag("candel")
              warrior1:DoPeriodicTask(1, function(warrior1)
                  if not warrior1:HasTag("noplay") and not warrior2:HasTag("noplay") then
                     if warrior1.components.health.currenthealth <= 100 then
                        warrior1:AddTag("noplay")
                        warrior1.components.combat:SetTarget(nil)
                        warrior1.components.combat:SetRetargetFunction(100, nil )
                     end
                  end
              end )
              warrior2:DoPeriodicTask(1, function(warrior2)
                  if not warrior2:HasTag("noplay") and not warrior1:HasTag("noplay") then
                     if warrior2.components.health.currenthealth <= 100 then
                        warrior2:AddTag("noplay")
                        warrior2.components.combat:SetTarget(nil)
                        warrior2.components.combat:SetRetargetFunction(100, nil )
                     end
                  end
              end )
              warrior1:ListenForEvent("death", function()
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  warrior2.components.locomotor:Stop()
                  warrior2:SetBrain(nil)
                  warrior2.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                  gamehost:DoTaskInTime(3, function() warrior2:Remove() gamehost:RemoveTag("startgame") end )
              end )
              warrior2:ListenForEvent("death", function()
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  warrior1.components.locomotor:Stop()
                  warrior1:SetBrain(nil)
                  warrior1.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                  gamehost:DoTaskInTime(3, function() warrior1:Remove() gamehost:RemoveTag("startgame") end )
              end )
           end
        end
    end
end
local function OnDeploy (inst, pt)
    fightgame(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("candel") then
        data.candel = true
    end
    if inst:HasTag("gamehost") then
        data.gamehost = true
    end
end
local function onload(inst, data)
    if data and data.candel then
       inst:Remove()
    end
    if data and data.gamehost then
       fightgame(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在开阔的空地上，用铥矿石种角斗场，（拿着1个铥矿石对地面点鼠标右键，如果拿着多个铥矿石，则不会种出来）。当身上有20个黄金时，鼠标左键点老板，可以观看一场角斗。如果想参加角斗，就给老板100个黄金（拿着黄金对老板点鼠标左键），你将进入角斗场与其他角斗士对战。如果击败对手，将获得本金加奖金共200个黄金；如果你的血量小于50，则判定你失败，对手会饶你不死，但本金将不会退回；如果你逃出围墙，同样判定你失败。每次与你对战的对手都不同，如果上一次失败，不代表下次不会胜利哦，作个职业的角斗士吧




二一八.潘多拉魔盒（用硬骨头种潘多拉魔盒，每60秒有一批怪物来袭，展开塔防吧）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\boneshard.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makemagicbox(inst)
    local pt = inst:GetPosition()
    local magicbox = SpawnPrefab("boneshard")
    magicbox.Transform:SetPosition(pt.x, pt.y, pt.z)
    magicbox.AnimState:SetBank("pandoras_chest")
    magicbox.AnimState:SetBuild("pandoras_chest")
    magicbox.AnimState:PlayAnimation("closed")
    magicbox.AnimState:SetMultColour(255/255,0/255,0/255,1)
    magicbox.Transform:SetScale(0.8, 0.8, 0.8)
    magicbox.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    local minimap = magicbox.entity:AddMiniMapEntity()
    minimap:SetIcon( "pandoras_chest.png" )
    magicbox:RemoveComponent("inventoryitem")
    magicbox:RemoveComponent("stackable")
    magicbox:RemoveComponent("deployable")
    magicbox:AddTag("magicbox")
    magicbox:AddComponent("workable")
    magicbox.components.workable:SetWorkAction(ACTIONS.HAMMER)
    magicbox.components.workable:SetWorkLeft(3)
    magicbox.components.workable:SetOnFinishCallback(function(magicbox)
        local pos = Vector3(magicbox.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
        for k,v in pairs(ents) do
            if v:HasTag("bogey") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               v:Remove()
            end
        end
        SpawnPrefab("collapse_big").Transform:SetPosition(magicbox.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        magicbox:Remove()
    end )
    magicbox.components.inspectable.getstatus = function(magicbox)
        if not magicbox:HasTag("makebogey") then
           magicbox:AddTag("makebogey")
           magicbox.AnimState:PlayAnimation("open")
           magicbox:DoTaskInTime(0.5, function(magicbox)
               SpawnPrefab("collapse_small").Transform:SetPosition(magicbox.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
               GetPlayer().components.playercontroller:ShakeCamera(magicbox, "FULL", 2.5, 0.03, 2, 30)
               local pos = Vector3(magicbox.Transform:GetWorldPosition())
               local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
               for k,v in pairs(ents) do
                   if v:HasTag("bogey") then
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      v:Remove()
                   end
               end
               local names = {"spiderqueen","hound","firehound","icehound","killerbee","walrus","leif","leif_sparse","koalefant_summer","koalefant_winter","deerclops","merm","knight","bishop","bat"}
               magicbox.name = names[math.random(#names)]
               for k = 1,math.random(10,30) do
                   local pt0 = magicbox:GetPosition()
                   local ground = GetWorld()
                   local x = pt0.x+(math.random(50)-math.random(50))
                   local z = pt0.z+(math.random(50)-math.random(50))
                   local tile = ground.Map:GetTileAtPoint(x,0, z)
                   if tile ~= GROUND.IMPASSABLE and tile ~= GROUND.INVALID then
                      local bogey = SpawnPrefab(magicbox.name)
                      bogey.Transform:SetPosition(x,0,z)
                      bogey:AddTag("bogey")
                      bogey.components.combat:SetRetargetFunction(1, function(bogey)
                          if not bogey.components.health:IsDead() then
                              return FindEntity(bogey, 100, function(guy)
                                  if guy.components.health and not guy.components.health:IsDead() then
                                     return guy:HasTag("player")
                                  end
                              end )
                          end
                      end )
                      bogey.components.combat:SetKeepTargetFunction(function(bogey, target) return target and target:IsValid() end )
                      bogey:ListenForEvent("attacked", function(bogey, data)
                          bogey.components.combat:SetTarget(GetPlayer())
                      end )
                   end
               end
           end )
           magicbox.task = magicbox:DoPeriodicTask(60, function(magicbox)
               SpawnPrefab("collapse_small").Transform:SetPosition(magicbox.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/horn_beefalo")
               GetPlayer().components.playercontroller:ShakeCamera(magicbox, "FULL", 2.5, 0.03, 2, 30)
               local pos = Vector3(magicbox.Transform:GetWorldPosition())
               local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
               for k,v in pairs(ents) do
                   if v:HasTag("bogey") then
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      v:Remove()
                   end
               end
               local names = {"spiderqueen","hound","firehound","icehound","killerbee","walrus","leif","leif_sparse","koalefant_summer","koalefant_winter","deerclops","merm","knight","bishop","bat"}
               magicbox.name = names[math.random(#names)]
               for k = 1,math.random(10,30) do
                   local pt0 = magicbox:GetPosition()
                   local ground = GetWorld()
                   local x = pt0.x+(math.random(50)-math.random(50))
                   local z = pt0.z+(math.random(50)-math.random(50))
                   local tile = ground.Map:GetTileAtPoint(x,0, z)
                   if tile ~= GROUND.IMPASSABLE and tile ~= GROUND.INVALID then
                      local bogey = SpawnPrefab(magicbox.name)
                      bogey.Transform:SetPosition(x,0,z)
                      bogey:AddTag("bogey")
                      bogey.components.combat:SetRetargetFunction(1, function(bogey)
                          if not bogey.components.health:IsDead() then
                              return FindEntity(bogey, 100, function(guy)
                                  if guy.components.health and not guy.components.health:IsDead() then
                                     return guy:HasTag("player")
                                  end
                              end )
                          end
                      end )
                      bogey.components.combat:SetKeepTargetFunction(function(bogey, target) return target and target:IsValid() end )
                      bogey:ListenForEvent("attacked", function(bogey, data)
                          bogey.components.combat:SetTarget(GetPlayer())
                      end )
                   end
               end
           end )
        else
           magicbox:RemoveTag("makebogey")
           magicbox.AnimState:PlayAnimation("close")
           GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
           if magicbox.task then magicbox.task:Cancel() magicbox.task = nil end
           local pos = Vector3(magicbox.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
           for k,v in pairs(ents) do
               if v:HasTag("bogey") then
                  SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                  v:Remove()
               end
           end
        end
    end
end
local function OnDeploy (inst, pt)
    makemagicbox(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("magicbox") then
       data.magicbox = true
    end
end
local function onload(inst, data)
    if data and data.magicbox then
       makemagicbox(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用硬骨头种潘多拉魔盒，（拿着1个硬骨头对地面点鼠标右键，如果拿着多个，则不会种出来）。鼠标左键点魔盒，可打开盒子，每60秒将吹响一次号角，预示着新一批怪物来袭，且源源不绝，充分满足你求死不得的需要。鼠标左键再次点击魔盒，可让怪物回到盒中。建议围绕魔盒修建防御设施（如牙齿陷阱、眼睛炮塔等），否则你挺不过几个60秒的。潘多拉魔盒在小地图上显示为远古箱子图标，不想要潘多拉魔盒了，用锤子砸掉即可。硬骨头靠砸碎地图上的骨架获得




二一九.铁血蛮族（蛮族霸占虫洞，打死可得肉类、装备，带瓦丝格雷斯帽不被攻击，用大肉收买蛮族做手下）

    1.用记事本打开游戏目录\data\scripts\prefabs\wormhole.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createsavage(inst)
  for k = 1,math.random(10,15) do
    local pt = inst:GetPosition()
    local savage = SpawnPrefab("hammer")
    savage.Transform:SetPosition(pt.x+(math.random(30)-math.random(30)), 0, pt.z+(math.random(30)-math.random(30)))
    savage.AnimState:SetBank("wilson")
    savage.AnimState:SetBuild("wolfgang")
    savage.AnimState:OverrideSymbol("swap_hat", "hat_wathgrithr", "swap_hat")
    savage.AnimState:OverrideSymbol("swap_body", "torso_rain", "swap_body")
    savage.AnimState:OverrideSymbol("swap_object", "swap_spear_wathgrithr", "swap_spear_wathgrithr")
    savage.AnimState:Show("HAT")
    savage.AnimState:Show("HAT_HAIR")
    savage.AnimState:Hide("HAIR_NOHAT")
    savage.AnimState:Hide("HAIR")
    savage.AnimState:Hide("ARM_normal")
    savage.AnimState:Show("ARM_carry")
    savage.AnimState:PlayAnimation("idle")
    savage.Transform:SetScale(1.2, 1.2, 1.2)
    local sound = savage.entity:AddSoundEmitter()
    local shadow = savage.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    savage.Transform:SetFourFaced()
    MakeCharacterPhysics(savage, 100, .5)
    local minimap = savage.entity:AddMiniMapEntity()
    minimap:SetIcon( "wolfgang.png" )
    savage:AddComponent("locomotor")
    savage.components.locomotor.walkspeed = 4
    savage.components.locomotor.runspeed = 8
    savage:SetStateGraph("SGshadowwaxwell")
    local brain = require "brains/leifbrain"
    savage:SetBrain(brain)
    savage:RemoveComponent("weapon")
    savage:RemoveComponent("tool")
    savage:RemoveComponent("finiteuses")
    savage:RemoveComponent("inventoryitem")
    savage:RemoveComponent("equippable")
    savage:RemoveTag("hammer")
    savage:AddComponent("inventory")
    savage:AddComponent("health")
    savage.components.health:SetMaxHealth(2000)
    savage:ListenForEvent("death", function()
        local pt1 = savage:GetPosition()
        for k = 1,math.random(5,10) do
            local meatnames = {"meat","smallmeat","drumstick"}
            local meatname = meatnames[math.random(#meatnames)]
            local meat = SpawnPrefab(meatname)
            meat.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
        end
        if math.random() < 0.01 then
            local lootnames = {"spear_wathgrithr","wathgrithrhat"}
            local lootname = lootnames[math.random(#lootnames)]
            local loot = SpawnPrefab(lootname)
            loot.Transform:SetPosition(pt1.x, 0, pt1.z)
        end
    end )
    savage:AddComponent("combat")
    savage.components.combat:SetDefaultDamage(30)
    savage.components.combat:SetAttackPeriod(1.5)
    savage.components.combat:SetRetargetFunction(3, function(savage)
        if not savage.components.health:IsDead() then
            return FindEntity(savage, 20, function(guy)
                return savage.components.combat:CanTarget(guy) and not guy:HasTag("savages") and not guy:HasTag("goodsavages")
            end )
        end
    end )
    savage.components.combat:SetKeepTargetFunction(function(savage, target) return target and target:IsValid() end )
    savage:ListenForEvent("attacked", function(savage, data)
        savage.components.combat:SetTarget(data.attacker)
        savage.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("savages") and not dude:HasTag("mysavage") and not dude.components.health:IsDead() end, 5)
    end )
    savage.Physics:SetCollisionCallback(function(savage, other)
        if other and other.components.workable and other.components.workable.workleft > 0 then
           other.components.workable:Destroy(savage)
        end
    end)
    savage:ListenForEvent( "nighttime", function() savage:Remove() end , GetWorld())
    savage:AddComponent("trader")
    savage.components.trader:SetAcceptTest(function(savage, item) 
        if GetPlayer():HasTag("goodsavages") then
           if GetPlayer().components.inventory:Has("meat", 10) then
              if item.prefab == "meat" then
                 return true
              end
           end
        end
        return false
    end )
    savage.components.trader.onaccept = function(savage, giver, item)
        GetPlayer().components.inventory:ConsumeByName("meat", 9)
        savage:AddTag("mysavage")
        savage.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        savage:AddComponent("follower")
        savage.components.follower:SetLeader(GetPlayer())
        local brain = require "brains/abigailbrain"
        savage:SetBrain(brain)
        savage:RestartBrain()
        savage.components.combat:SetAttackPeriod(1)
        savage.components.combat:SetRetargetFunction(1, function(savage)
            if not savage.components.health:IsDead() then
               return FindEntity(GetPlayer(), 20, function(guy)
                   if guy.components.combat and guy.components.health and not guy.components.health:IsDead() then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end )
            end
        end )
        savage:RemoveAllEventCallbacks()
        savage:RemoveComponent("trader")
        savage:ListenForEvent( "daytime", function() savage.components.health:DoDelta(2000) end , GetWorld())
        savage:ListenForEvent("attacked", function(savage, data)
            savage.components.combat:SetTarget(data.attacker)
        end )
        savage.Physics:SetCollisionCallback( nil )
        savage.components.inspectable.getstatus = function(savage)
            if not savage:HasTag("stophere") then
               savage:AddTag("stophere")
               savage.components.locomotor:Stop()
               savage:SetBrain(nil)
               savage.components.follower:SetLeader(nil)
               savage.AnimState:SetBloomEffectHandle("")
            else
               savage:RemoveTag("stophere")
               local brain = require "brains/abigailbrain"
               savage:SetBrain(brain)
               savage:RestartBrain()
               savage.components.follower:SetLeader(GetPlayer())
               savage.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            end
        end
    end
    savage:AddTag("savages")
  end
end
    inst:ListenForEvent( "daytime", function() createsavage(inst) end , GetWorld())


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hammer.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local items = { SWORD = "swap_spear_wathgrithr" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function onsave(inst, data)
    if inst:HasTag("savages") then
        data.savages = true
    end
    if inst:HasTag("mysavage") then
        data.mysavage = true
    end
    if inst:HasTag("stophere") then
        data.stophere = true
    end
end
local function onload(inst, data)
  if data and data.savages then
    inst.AnimState:SetBank("wilson")
    inst.AnimState:SetBuild("wolfgang")
    inst.AnimState:OverrideSymbol("swap_hat", "hat_wathgrithr", "swap_hat")
    inst.AnimState:OverrideSymbol("swap_body", "torso_rain", "swap_body")
    inst.AnimState:OverrideSymbol("swap_object", "swap_spear_wathgrithr", "swap_spear_wathgrithr")
    inst.AnimState:Show("HAT")
    inst.AnimState:Show("HAT_HAIR")
    inst.AnimState:Hide("HAIR_NOHAT")
    inst.AnimState:Hide("HAIR")
    inst.AnimState:Hide("ARM_normal")
    inst.AnimState:Show("ARM_carry")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(1.2, 1.2, 1.2)
    local sound = inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 1.3, .6 )
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 100, .5)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "wolfgang.png" )
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 4
    inst.components.locomotor.runspeed = 8
    inst:SetStateGraph("SGshadowwaxwell")
    local brain = require "brains/leifbrain"
    inst:SetBrain(brain)
    inst:RemoveComponent("weapon")
    inst:RemoveComponent("tool")
    inst:RemoveComponent("finiteuses")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    inst:RemoveTag("hammer")
    inst:AddComponent("inventory")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(2000)
    inst:ListenForEvent("death", function()
        local pt1 = inst:GetPosition()
        for k = 1,math.random(5,10) do
            local meatnames = {"meat","smallmeat","drumstick"}
            local meatname = meatnames[math.random(#meatnames)]
            local meat = SpawnPrefab(meatname)
            meat.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
        end
        if math.random() < 0.01 then
            local lootnames = {"spear_wathgrithr","wathgrithrhat"}
            local lootname = lootnames[math.random(#lootnames)]
            local loot = SpawnPrefab(lootname)
            loot.Transform:SetPosition(pt1.x, 0, pt1.z)
        end
    end )
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(30)
    inst.components.combat:SetAttackPeriod(1.5)
    inst.components.combat:SetRetargetFunction(3, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 20, function(guy)
                return inst.components.combat:CanTarget(guy) and not guy:HasTag("savages") and not guy:HasTag("goodsavages")
            end )
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:ListenForEvent("attacked", function(inst, data)
        inst.components.combat:SetTarget(data.attacker)
        inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("savages") and not dude:HasTag("mysavage") and not dude.components.health:IsDead() end, 5)
    end )
    inst.Physics:SetCollisionCallback(function(inst, other)
        if other and other.components.workable and other.components.workable.workleft > 0 then
           other.components.workable:Destroy(inst)
        end
    end)
    inst:ListenForEvent( "nighttime", function() inst:Remove() end , GetWorld())
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item) 
        if GetPlayer():HasTag("goodsavages") then
           if GetPlayer().components.inventory:Has("meat", 10) then
              if item.prefab == "meat" then
                 return true
              end
           end
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        GetPlayer().components.inventory:ConsumeByName("meat", 9)
        inst:AddTag("mysavage")
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        inst:AddComponent("follower")
        inst.components.follower:SetLeader(GetPlayer())
        local brain = require "brains/abigailbrain"
        inst:SetBrain(brain)
        inst:RestartBrain()
        inst.components.combat:SetAttackPeriod(1)
        inst.components.combat:SetRetargetFunction(1, function(inst)
            if not inst.components.health:IsDead() then
               return FindEntity(GetPlayer(), 20, function(guy)
                   if guy.components.combat and guy.components.health and not guy.components.health:IsDead() then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end )
            end
        end )
        inst:RemoveAllEventCallbacks()
        inst:RemoveComponent("trader")
        inst:ListenForEvent( "daytime", function() inst.components.health:DoDelta(2000) end , GetWorld())
        inst:ListenForEvent("attacked", function(inst, data)
            inst.components.combat:SetTarget(data.attacker)
        end )
        inst.Physics:SetCollisionCallback( nil )
        inst.components.inspectable.getstatus = function(inst)
            if not inst:HasTag("stophere") then
               inst:AddTag("stophere")
               inst.components.locomotor:Stop()
               inst:SetBrain(nil)
               inst.components.follower:SetLeader(nil)
               inst.AnimState:SetBloomEffectHandle("")
            else
               inst:RemoveTag("stophere")
               local brain = require "brains/abigailbrain"
               inst:SetBrain(brain)
               inst:RestartBrain()
               inst.components.follower:SetLeader(GetPlayer())
               inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            end
        end
    end
    inst:AddTag("savages")
  end
  if data and data.mysavage then
     inst:AddTag("mysavage")
     inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
     inst:AddComponent("follower")
     inst.components.follower:SetLeader(GetPlayer())
     local brain = require "brains/abigailbrain"
     inst:SetBrain(brain)
     inst:RestartBrain()
     inst.components.combat:SetAttackPeriod(1)
     inst.components.combat:SetRetargetFunction(1, function(inst)
         if not inst.components.health:IsDead() then
            return FindEntity(GetPlayer(), 20, function(guy)
                if guy.components.combat and guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                end
            end )
         end
     end )
     inst:RemoveAllEventCallbacks()
     inst:RemoveComponent("trader")
     inst:ListenForEvent( "daytime", function() inst.components.health:DoDelta(2000) end , GetWorld())
     inst:ListenForEvent("attacked", function(inst, data)
         inst.components.combat:SetTarget(data.attacker)
     end )
     inst.Physics:SetCollisionCallback( nil )
     inst.components.inspectable.getstatus = function(inst)
         if not inst:HasTag("stophere") then
            inst:AddTag("stophere")
            inst.components.locomotor:Stop()
            inst:SetBrain(nil)
            inst.components.follower:SetLeader(nil)
            inst.AnimState:SetBloomEffectHandle("")
         else
            inst:RemoveTag("stophere")
            local brain = require "brains/abigailbrain"
            inst:SetBrain(brain)
            inst:RestartBrain()
            inst.components.follower:SetLeader(GetPlayer())
            inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
         end
     end
  end
  if data and data.stophere then
     inst:AddTag("stophere")
     inst.components.locomotor:Stop()
     inst:SetBrain(nil)
     inst.components.follower:SetLeader(nil)
     inst.AnimState:SetBloomEffectHandle("")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload


    3.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，在inst.components.armor:InitCondition(TUNING.ARMOR_WATHGRITHRHAT, TUNING.ARMOR_WATHGRITHRHAT_ABSORPTION)的下一行插入以下内容：

    inst.components.equippable:SetOnEquip(function(inst, owner)
        onequip(inst, owner)
        if owner == GetPlayer() then
           owner:AddTag("goodsavages")
        end
    end )
    inst.components.equippable:SetOnUnequip(function(inst, owner)
        onunequip(inst, owner)
        owner:RemoveTag("goodsavages")
    end )

    即可有蛮族霸占虫洞附近的区域，白天和傍晚活动，黑夜消失。他们会攻击一切生物，拆毁建筑，通过小地图可查询蛮族所在位置，显示为沃尔夫冈图标。与蛮族对战时，他们会围攻你，打死蛮族可获得他们携带的肉类，还有一定概率获得瓦丝格雷斯帽和瓦丝格雷斯矛。装备瓦丝格雷斯帽，将被蛮族视为同类，从而免受攻击，并可以用10个大肉收买蛮族作手下（拿着大肉对蛮族点鼠标左键）。蛮族手下不会破坏建筑，无论受多重的伤，每天清晨都会恢复健康，鼠标左键点击（不要拿武器）蛮族手下可让其停留在原地，再次点击可继续跟随。从此开启与铁血蛮族共处的时代，作他们望而生畏的敌人，或带领他们征霸天下吧




二二０.象之树（用紫色护身符种象之树，白天周围有巨象群活动，狩猎它们吧）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，在inst.AnimState:PlayAnimation("purpleamulet")的下一行插入以下内容：

local function makebananatree(inst)
    local pt = inst:GetPosition()
    local bananatree = SpawnPrefab("purpleamulet")
    bananatree.Transform:SetPosition(pt.x, pt.y, pt.z)
    bananatree.AnimState:SetBank("cave_banana_tree")
    bananatree.AnimState:SetBuild("cave_banana_tree")
    bananatree.AnimState:PlayAnimation("idle_loop",true)
    bananatree.Transform:SetScale(1.5, 1.5, 1.5)
    bananatree:AddComponent("named")
    bananatree.components.named:SetName("Banana Tree")
    bananatree:RemoveComponent("equippable")
    bananatree:RemoveComponent("inventoryitem")
    bananatree:RemoveComponent("fueled")
    bananatree:RemoveComponent("deployable")
    bananatree:AddComponent("workable")
    bananatree.components.workable:SetWorkAction(ACTIONS.CHOP)
    bananatree.components.workable:SetWorkLeft(10)
    bananatree.components.workable:SetOnFinishCallback(function()
        SpawnPrefab("collapse_big").Transform:SetPosition(bananatree.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        bananatree:Remove()
    end )
    bananatree:ListenForEvent( "daytime", function()
        local pos = Vector3(bananatree.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 5)
        for k,v in pairs(ents) do
            if v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
               if v.prefab == "cave_banana" then
                  v:Remove()
               end
            end
        end
        bananatree:DoTaskInTime(0.3, function(bananatree)
            bananatree:StartThread(function()
                for k = 1,math.random(4,8) do
                    local pt1 = bananatree:GetPosition()
                    local banana = SpawnPrefab("cave_banana")
                    banana.Transform:SetPosition(pt1.x+(math.random(5)-math.random(5)), 5, pt1.z+(math.random(5)-math.random(5)))
                    Sleep(0.3)
                end
            end )
        end )
        for k = 1,math.random(5,10) do
            local elephant = SpawnPrefab("purpleamulet")
            elephant.Transform:SetPosition(pt.x+(math.random(30)-math.random(30)), 0, pt.z+(math.random(30)-math.random(30)))
            elephant.AnimState:SetBank("koalefant")
            elephant.AnimState:SetBuild("koalefant_winter_build")
            elephant.AnimState:PlayAnimation("idle_loop", true)
            local sound = elephant.entity:AddSoundEmitter()
            local shadow = elephant.entity:AddDynamicShadow()
            shadow:SetSize( 4.5, 2 )
            elephant.Transform:SetFourFaced()
            MakeCharacterPhysics(elephant, 500, 1.5)
            elephant:AddComponent("named")
            elephant.components.named:SetName("Elephant")
            elephant.Transform:SetScale(1.5, 1.5, 1.5)
            local minimap = elephant.entity:AddMiniMapEntity()
            minimap:SetIcon( "cave_banana_tree.png" )
            elephant:RemoveComponent("equippable")
            elephant:RemoveComponent("inventoryitem")
            elephant:RemoveComponent("fueled")
            elephant:RemoveComponent("deployable")
            elephant:AddComponent("knownlocations")
            elephant:AddComponent("health")
            elephant.components.health:SetMaxHealth(1000)
            elephant:AddComponent("combat")
            elephant.components.combat.hiteffectsymbol = "beefalo_body"
            elephant.components.combat:SetDefaultDamage(30)
            elephant.components.combat:SetAttackPeriod(2)
            elephant.components.combat:SetRetargetFunction(3, function(elephant)
                if not elephant.components.health:IsDead() then
                    return FindEntity(elephant, 25, function(guy)
                       return guy:HasTag("monster")
                    end )
                end
            end )
            elephant.components.combat:SetKeepTargetFunction(function(elephant, target) return target and target:IsValid() end )
            elephant:ListenForEvent("attacked", function(elephant, data)
                elephant.components.combat:SetTarget(data.attacker)
                elephant.components.combat:ShareTarget(data.attacker, 10, function(dude) return dude:HasTag("elephants") and not dude.components.health:IsDead() end, 1)
            end )
            elephant:AddComponent("lootdropper")
            elephant.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat","meat","meat","meat","meat","trunk_winter"})
            elephant:AddComponent("locomotor")
            elephant.components.locomotor.walkspeed = 2
            elephant.components.locomotor.runspeed = 4
            elephant:SetStateGraph("SGkoalefant")
            local brain = require "brains/frogbrain"
            elephant:SetBrain(brain)
            elephant:ListenForEvent( "nighttime", function() elephant:Remove() end , GetWorld())
            elephant:DoPeriodicTask(math.random(30, 60), function(elephant)
                if not elephant.components.combat.target then
                   local sgnames = {"bellow","graze","alert","shake"}
                   local sgname = sgnames[math.random(#sgnames)]
                   elephant.sg:GoToState(sgname)
                end
            end )
            elephant:DoPeriodicTask(math.random(120, 240), function(inst)
                SpawnPrefab("poop").Transform:SetPosition(elephant.Transform:GetWorldPosition())
            end )
            if math.random() < 0.5 then
               elephant:AddTag("redelephants")
               elephant.AnimState:SetBuild("koalefant_summer_build")
               elephant.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat","meat","meat","meat","meat","trunk_summer"})
            end
            elephant:AddTag("elephants")
        end
    end , GetWorld())
    bananatree:AddTag("bananatree")
end
local function OnDeploy (inst, pt)
    makebananatree(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("bananatree") then
        data.bananatree = true
    end
    if inst:HasTag("elephants") then
        data.elephants = true
    end
    if inst:HasTag("redelephants") then
        data.redelephants = true
    end
end
local function onload(inst, data)
    if data and data.bananatree then
       makebananatree(inst)
       inst:Remove()
    end
    if data and data.elephants then
       inst.AnimState:SetBank("koalefant")
       inst.AnimState:SetBuild("koalefant_winter_build")
       inst.AnimState:PlayAnimation("idle_loop", true)
       local sound = inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize( 4.5, 2 )
       inst.Transform:SetFourFaced()
       MakeCharacterPhysics(inst, 500, 1.5)
       inst:AddComponent("named")
       inst.components.named:SetName("Elephant")
       inst.Transform:SetScale(1.5, 1.5, 1.5)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "cave_banana_tree.png" )
       inst:RemoveComponent("equippable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("fueled")
       inst:RemoveComponent("deployable")
       inst:AddComponent("knownlocations")
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(1000)
       inst:AddComponent("combat")
       inst.components.combat.hiteffectsymbol = "beefalo_body"
       inst.components.combat:SetDefaultDamage(30)
       inst.components.combat:SetAttackPeriod(2)
       inst.components.combat:SetRetargetFunction(3, function(inst)
           if not inst.components.health:IsDead() then
               return FindEntity(inst, 25, function(guy)
                  return guy:HasTag("monster")
               end )
           end
       end )
       inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
       inst:ListenForEvent("attacked", function(inst, data)
           inst.components.combat:SetTarget(data.attacker)
           inst.components.combat:ShareTarget(data.attacker, 10, function(dude) return dude:HasTag("elephants") and not dude.components.health:IsDead() end, 1)
       end )
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat","meat","meat","meat","meat","trunk_winter"})
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 2
       inst.components.locomotor.runspeed = 4
       inst:SetStateGraph("SGkoalefant")
       local brain = require "brains/frogbrain"
       inst:SetBrain(brain)
       inst:ListenForEvent( "nighttime", function() inst:Remove() end , GetWorld())
       inst:DoPeriodicTask(math.random(30, 60), function(inst)
           if not inst.components.combat.target then
              local sgnames = {"bellow","graze","alert","shake"}
              local sgname = sgnames[math.random(#sgnames)]
              inst.sg:GoToState(sgname)
           end
       end )
       inst:DoPeriodicTask(math.random(120, 240), function(inst)
           SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
       end )
       inst:AddTag("elephants")
    end
    if data and data.redelephants then
       inst:AddTag("redelephants")
       inst.AnimState:SetBuild("koalefant_summer_build")
       inst.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat","meat","meat","meat","meat","trunk_summer"})
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用紫色护身符种象之树，白天会掉落香蕉，并有巨象群在周围活动，夜晚离开。巨象不会主动攻击你，想狩猎它们时，尽量选择落单的巨象，否则其他巨象会一起反击。巨象在小地图上显示为香蕉图标，它们是天然的肉库，杀死一只可获得10块大肉及象鼻，并且会不断产便便，缺少肥料的话，可以在象之树附近拾取。不想要象之树了，砍掉即可，象群会在黑夜离去。紫色护身符在魔法选项（画着红骷髅）下，用6个黄金、4个噩梦燃料、2个紫宝石制造




二二一.变身传奇（主角吃疯肉变身其他主角）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\meats.lua文件，在inst.components.edible.sanityvalue = -TUNING.SANITY_MED的下一句插入以下内容：

local function item_oneaten(inst, eater)
    local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    inst.animname = names[math.random(#names)]
    if eater:HasTag("player") then
       eater.AnimState:SetBuild(inst.animname)
    SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end
end
    inst.components.edible:SetOnEatenFn(item_oneaten)

    即可无须开新档，靠吃疯肉就让主角随机变成其他主角的形象，变身后小地图显示不变，原主角技能也不变，该长胡子的还是会长胡子哦。想恢复原主角形象，存档退出后再读档即可。变身不会变成麦斯威尔和伍迪。不要与“荒野之狼”一同修改




二二二.我是巨鹿（按键盘HOME键主角变身巨鹿，按END键还原）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_HOME, function()
  if inst.components.inventory:Has("goldnugget", 30) then
    inst.components.inventory:ConsumeByName("goldnugget", 30)
    inst.components.locomotor:Stop()
    inst.components.playercontroller:Enable(false)
    inst.AnimState:PlayAnimation("idle_shiver_pre")
    inst.AnimState:PushAnimation("idle_shiver_loop")
    inst.AnimState:PushAnimation("idle_shiver_pst", false)
    inst:DoTaskInTime(1, function() 
        inst.AnimState:SetBank("deerclops")
        inst.AnimState:SetBuild("deerclops_build")
        inst:SetStateGraph("SGdeerclops")
        inst.AnimState:PlayAnimation("idle_loop", true)
        inst.Transform:SetScale(1.5,1.5,1.5)
        shadow:SetSize( 6, 3.5 )
        local pos = GetPlayer():GetPosition()
        GetSeasonManager():DoLightningStrike(pos)
        inst.components.health:SetInvincible(true)
        inst.components.hunger:Pause()
        inst.components.combat:SetDefaultDamage(500)
        inst.components.combat.hiteffectsymbol = "deerclops_body"
        inst.components.combat.onhitotherfn = function()
             inst.SoundEmitter:PlaySound("dontstarve/creatures/deerclops/attack")
             inst.components.playercontroller:ShakeCamera(inst, "FULL", 0.5, 0.05, 2, 40)
        end
        inst.components.combat.playerdamagepercent = 0
        inst.components.combat:SetAreaDamage(10, 1)
        inst.components.temperature:SetTemp(20)
        inst.components.playercontroller:Enable(true)
    end )
  end
end )
TheInput:AddKeyUpHandler(KEY_END, function()
    inst.components.locomotor:Stop()
    inst.components.playercontroller:Enable(false)
    inst.AnimState:PlayAnimation("taunt")
    inst:DoTaskInTime(1, function() 
        inst.AnimState:SetBank("wilson")
        inst.AnimState:SetBuild(name)
        inst:SetStateGraph("SGwilson")
        inst.AnimState:PlayAnimation("idle")
        inst.Transform:SetScale(1,1,1)
        shadow:SetSize( 1.3, .6 )
        local pos = GetPlayer():GetPosition()
        GetSeasonManager():DoLightningStrike(pos)
        inst.components.health:SetInvincible(false)
        inst.components.hunger:Resume()
        inst.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
        inst.components.combat.hiteffectsymbol = "torso"
        inst.components.combat.onhitotherfn = nil
        inst.components.combat:SetAreaDamage(0, 0)
        inst.components.temperature:SetTemp(nil)
        inst.components.playercontroller:Enable(true)
    end )
end )

    即可在你深陷绝境之时，对电脑屏幕大喊“我是巨鹿”，并同时按下键盘HOME键，主角将变身无敌巨鹿（锁血、锁饥饿、不怕冷），对敌人展开恐怖的报复吧（按Ctrl + 鼠标左键攻击）。每次变身将消耗30个黄金，身上黄金数不足时不会变身。想要变回主角时，按键盘END键即可。注意，由于巨鹿变身时会招来闪电，并且本身具备大面积杀伤的能力，所以请远离基地变身，且尽量不要带同伴。修改过“神奇跳跃”的话，不要在变身巨鹿时跳跃




二二三.我是神龙（按键盘L键主角变身神龙，能吐火，再按L键变回人）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_L, function()
    if not inst:HasTag("dragon") then
       if inst.components.inventory:Has("goldnugget", 30) then
          inst.components.inventory:ConsumeByName("goldnugget", 30)
          inst.components.locomotor:Stop()
          inst.components.playercontroller:Enable(false)
          inst.AnimState:PlayAnimation("idle_shiver_pre")
          inst.AnimState:PushAnimation("idle_shiver_loop")
          inst.AnimState:PushAnimation("idle_shiver_pst", false)
          inst:DoTaskInTime(1, function() 
              inst:AddTag("dragon")
              inst.AnimState:SetBank("krampus")
              inst.AnimState:SetBuild("krampus_build")
              inst:SetStateGraph("SGkrampus")
              inst.AnimState:PlayAnimation("idle", true)
              inst.AnimState:Hide("SACK")
              inst.AnimState:Show("ARM")
              inst.Transform:SetScale(1.8,1.8,1.8)
              shadow:SetSize( 6, 3.5 )
              local light = inst.entity:AddLight()
              light:SetIntensity(.8)
              light:SetRadius(20)
              light:SetFalloff(.6)
              light:Enable(true)
              light:SetColour(255/255, 0/255, 0/255)
              inst.components.locomotor.walkspeed = 10
              inst.components.locomotor.runspeed = 15
              local pos = GetPlayer():GetPosition()
              GetSeasonManager():DoLightningStrike(pos)
              inst.components.health:SetInvincible(true)
              inst.components.hunger:Pause()
              inst.components.combat:SetDefaultDamage(500)
              inst.components.combat.hiteffectsymbol = "krampus_torso"
              local pearl = SpawnPrefab("dragonfruit")
              pearl.entity:AddSoundEmitter()
              RemovePhysicsColliders(pearl)
              pearl:AddTag("projectile")
              pearl:AddTag("pearl")
              pearl:RemoveComponent("edible")
              pearl:RemoveComponent("stackable")
              pearl:RemoveComponent("tradable")
              pearl:RemoveComponent("perishable")
              pearl:RemoveComponent("cookable")
              pearl:RemoveComponent("bait")
              pearl:RemoveComponent("plantable")
              pearl:RemoveComponent("burnable")
              pearl:RemoveComponent("propagator")
              pearl:AddComponent("burnable")
              pearl.components.burnable:SetFXLevel(3)
              pearl.components.burnable:AddBurnFX("character_fire", Vector3(0,0,0) )
              pearl:AddComponent("weapon")
              pearl.components.weapon:SetDamage(500)
              pearl.components.weapon:SetRange(20, 25)
              pearl:AddComponent("equippable")
              pearl.components.equippable.equipslot = EQUIPSLOTS.HANDS
              pearl.components.equippable:SetOnEquip(function(pearl)
                  pearl.components.burnable:Extinguish()
              end )
              pearl:AddComponent("projectile")
              pearl.components.projectile:SetSpeed(50)
              pearl.components.projectile:SetOnHitFn(function(pearl, owner, target)
                  inst.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                  SpawnPrefab("collapse_small").Transform:SetPosition(target.Transform:GetWorldPosition())
                  SpawnPrefab("explode_small").Transform:SetPosition(target.Transform:GetWorldPosition())
                  inst.components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .5, 40)
                  if target.components.burnable then
                     target.components.burnable:Ignite()
                  end
                  owner.components.inventory:Equip(pearl)
              end )
              pearl.components.projectile:SetOnMissFn(function(pearl, owner)
                  owner.components.inventory:Equip(pearl)
              end )
              pearl:ListenForEvent("onthrown", function(pearl)
                  local pt = pearl:GetPosition()
                  pearl.Transform:SetPosition(pt.x, 2, pt.z)
                  pearl.SoundEmitter:PlaySound("dontstarve/common/blackpowder_explo")
                  pearl.components.burnable:Ignite(true)
              end )
              inst.components.inventory:Equip(pearl)
              inst.components.temperature:SetTemp(20)
              inst.components.playercontroller:Enable(true)
          end )
        end
    else
        inst.components.locomotor:Stop()
        inst.components.playercontroller:Enable(false)
        inst.AnimState:PlayAnimation("taunt")
        inst:DoTaskInTime(1, function()
            inst:RemoveTag("dragon")
            inst.AnimState:SetBank("wilson")
            inst.AnimState:SetBuild(name)
            inst:SetStateGraph("SGwilson")
            inst.AnimState:PlayAnimation("idle")
            inst.Transform:SetScale(1,1,1)
            shadow:SetSize( 1.3, .6 )
            inst.Light:Enable(false)
            inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
            inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
            local pos = GetPlayer():GetPosition()
            GetSeasonManager():DoLightningStrike(pos)
            inst.components.health:SetInvincible(false)
            inst.components.hunger:Resume()
            inst.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
            inst.components.combat.hiteffectsymbol = "torso"
            local pos0 = Vector3(inst.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos0.x,pos0.y,pos0.z, 3000)
            for k,v in pairs(ents) do
                if v:HasTag("pearl") then
                   v:Remove()
                end
            end
            inst.components.temperature:SetTemp(nil)
            inst.components.playercontroller:Enable(true)
        end )
    end
end )

    即可在身上有30个黄金时，按键盘L键，主角随即变身神龙，将消耗30个黄金，身上黄金数不足时不会变身。变身神龙后，自动装备龙果，对敌人按鼠标左键，可发射龙果火球，如果卸载龙果，则改为近身格斗（按Ctrl + 鼠标左键攻击，或按住F键反击），防止点燃附近植物。神龙可夜视，不会饥饿，且锁血，对地上的物品点鼠标左键可捡起。想要变回主角时，再次按键盘L键即可，龙果将消失




二二四.我是龙卷风（按键盘U键主角变身龙卷风，掠过之处尽毁，敌人靠近会被冻伤，再按U键变回人）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_U, function()
    if not inst:HasTag("windman") then
       inst.components.locomotor:Stop()
       inst.components.playercontroller:Enable(false)
       inst.AnimState:PlayAnimation("idle_shiver_pre")
       inst.AnimState:PushAnimation("idle_shiver_loop")
       inst.AnimState:PushAnimation("idle_shiver_pst", false)
       GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
       inst:DoTaskInTime(0.3, function() 
           inst:AddTag("windman")
           inst.AnimState:SetBank("tornado")
           inst.AnimState:SetBuild("tornado")
           inst:SetStateGraph("SGtornado")
           inst.AnimState:PlayAnimation("tornado_pre")
           inst.AnimState:PushAnimation("tornado_loop")
           inst.Transform:SetScale(1.8,1.8,1.8)
           local light = inst.entity:AddLight()
           light:SetIntensity(.8)
           light:SetRadius(10)
           light:SetFalloff(.6)
           light:Enable(true)
           light:SetColour(255/255,255/255,255/255)
           inst.components.locomotor.walkspeed = 20
           inst.components.locomotor.runspeed = 30
           inst.components.health:SetInvincible(true)
           inst.components.hunger:Pause()
           inst.components.temperature:SetTemp(20)
           inst.Physics:SetCollisionCallback(function(inst, other)
               if other and other.components.health and other.components.combat then
                  if other.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == other or other:HasTag("monster") then
                     other.components.health:DoDelta(-100)
                     if other.components.freezable then
                        other.components.freezable:AddColdness(10)
                        other.components.freezable:SpawnShatterFX()
                     end
                  end
               end
               if other and other.components.workable and other.components.workable.workleft > 0 then
                  GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
                  other.components.workable:Destroy(inst)
               end
           end )
           inst.components.playercontroller:Enable(true)
       end )
    else
        inst.components.locomotor:Stop()
        inst.components.playercontroller:Enable(false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
        inst.AnimState:PlayAnimation("tornado_pst")
        inst:DoTaskInTime(0.3, function()
            inst:RemoveTag("windman")
            inst.AnimState:SetBank("wilson")
            inst.AnimState:SetBuild(name)
            inst:SetStateGraph("SGwilson")
            inst.AnimState:PlayAnimation("idle")
            inst.Transform:SetScale(1,1,1)
            inst.Light:Enable(false)
            inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
            inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
            inst.components.health:SetInvincible(false)
            inst.components.hunger:Resume()
            inst.components.temperature:SetTemp(nil)
            inst.Physics:SetCollisionCallback( nil )
            inst.components.playercontroller:Enable(true)
        end )
    end
end )

    即可按键盘U键，主角变身龙卷风，掠过之处一切建筑、植物尽毁，敌人靠近将被冻伤。龙卷风可夜视，不会饥饿，且锁血，去席卷大陆吧。再次按键盘U键可变回人




二二五.荒野之狼（吃蜗牛龟粘液变成狼，打败别的狼成为领袖）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\slurtleslime.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function item_oneaten(inst, eater)
    if eater:HasTag("player") then
        local pos = GetPlayer():GetPosition()
        GetSeasonManager():DoLightningStrike(pos)
        eater.components.locomotor:Stop()
        eater.components.playercontroller:Enable(false)
        eater:DoTaskInTime(1, function() 
            eater.AnimState:SetBank("hound")
            eater.AnimState:SetBuild("hound_red")
            eater.AnimState:PlayAnimation("idle")
            eater:SetStateGraph("SGhound")
            eater:RemoveTag("scarytoprey")
            eater:AddTag("monster")
            local light = eater.entity:AddLight()
            light:SetFalloff(1)
            light:SetIntensity(.8)
            light:SetRadius(20)
            light:Enable(true)
            light:SetColour(0/255, 255/255, 0/255)
            eater:ListenForEvent("attacked", function(eater)
                local pt = eater:GetPosition()
                eater.Transform:SetPosition(pt.x+(math.random(5)-math.random(5)), 0, pt.z+(math.random(5)-math.random(5)))
            end )
            eater.components.locomotor.runspeed = 25
            eater.components.sanity:DoDelta(eater.components.sanity.max)
            eater.components.sanity.ignore = true
            eater.components.health:StartRegen(100, 10)
            eater.components.combat:SetDefaultDamage(500)
            eater.components.combat:SetAttackPeriod(0.1)
            eater.components.eater:SetCarnivore()
            eater.components.temperature:SetTemp(20)
            eater.components.playercontroller:Enable(true)
            GetPlayer().HUD.controls.crafttabs:Hide()
            GetPlayer().HUD.controls.inv:Hide()
            GetPlayer().HUD.controls.mapcontrols.minimapBtn:Hide()
            local head = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.HEAD)
            GetPlayer().components.inventory:DropItem(head)
            local hands = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.HANDS)
            GetPlayer().components.inventory:DropItem(hands)
            local body = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.BODY)
            GetPlayer().components.inventory:DropItem(body)
            eater.components.playeractionpicker.leftclickoverride = function(eater, target_ent, pos)
                if eater.components.combat:CanTarget(target_ent) then
                   return eater.components.playeractionpicker:SortActionList({ACTIONS.ATTACK}, target_ent, nil)
                end
                if target_ent and target_ent.components.edible and eater.components.eater:CanEat(target_ent) then
                   return eater.components.playeractionpicker:SortActionList({ACTIONS.EAT}, target_ent, nil)
                end
            end
            eater:DoPeriodicTask(3, function(eater)
              if math.random() < 0.05 then
                if eater.components.hunger:GetPercent() > 0.995 then
                   local pt1 = eater:GetPosition()
                   local wolf = SpawnPrefab("slurtleslime")
                   wolf.Transform:SetPosition(pt1.x+(math.random(10)-math.random(10)), 0, pt1.z+(math.random(10)-math.random(10)))
                   wolf.AnimState:SetBank("hound")
                   wolf.AnimState:SetBuild("hound")
                   wolf.AnimState:PlayAnimation("idle")
                   wolf.Transform:SetFourFaced()
                   local sound = wolf.entity:AddSoundEmitter()
                   local shadow = wolf.entity:AddDynamicShadow()
                   shadow:SetSize( 2.5, 1.5 )
                   MakeCharacterPhysics(wolf, 10, .5)
                   wolf:AddComponent("locomotor")
                   wolf.components.locomotor.runspeed = 25
                   wolf:SetStateGraph("SGhound")
                   local brain = require "brains/frogbrain"
                   wolf:SetBrain(brain)
                   wolf:RemoveComponent("stackable")
                   wolf:RemoveComponent("fuel")
                   wolf:RemoveComponent("inventoryitem")
                   wolf:RemoveComponent("explosive")
                   wolf:RemoveComponent("burnable")
                   wolf:RemoveComponent("propagator")
                   wolf:RemoveComponent("edible")
                   wolf:AddComponent("follower")
                   wolf:AddComponent("knownlocations")
                   wolf:AddComponent("lootdropper")
                   wolf.components.lootdropper:SetLoot({"meat", "meat"})
                   wolf:AddComponent("health")
                   wolf.components.health:SetMaxHealth(2000)
                   wolf.components.health:StartRegen(100, 10)
                   wolf:AddComponent("combat")
                   wolf.components.combat:SetDefaultDamage(20)
                   wolf.components.combat:SetAttackPeriod(0.1)
                   wolf.components.combat:SetTarget(eater)
                   wolf.AnimState:SetMultColour(255/255,0/255,0/255,1)
                   wolf.components.combat:SetRetargetFunction(1, function(wolf)
                       if not wolf.components.health:IsDead() then
                          return FindEntity(wolf, 300, function(guy)
                                 return guy:HasTag("player")
                          end )
                       end
                   end )
                   wolf.components.combat:SetKeepTargetFunction(function(wolf, target) return target and target:IsValid() end )
                   wolf.task = wolf:DoPeriodicTask(1, function(customer)
                       if wolf.components.health.currenthealth < 1000 then
                          wolf.components.combat:SetTarget(nil)
                          wolf:RemoveTag("goodbye")
                          local brain = require "brains/abigailbrain"
                          wolf:SetBrain(brain)
                          wolf:RestartBrain()
                          wolf.components.follower:SetLeader(GetPlayer())
                          wolf.AnimState:SetMultColour(255/255,255/255,255/255,1)
                          wolf.components.combat:SetRetargetFunction(2, function(wolf)
                              if not wolf.components.health:IsDead() then
                                 return FindEntity(wolf, 20, function(guy)
                                     if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("wolfs") then
                                        return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy
                                     end
                                 end )
                              end
                          end )
                          wolf.components.combat:SetKeepTargetFunction(function(wolf, target) return target and target:IsValid() end )
                          if wolf.task then wolf.task:Cancel() wolf.task = nil end
                       end
                   end )
                   wolf:AddTag("monster")
                   wolf:AddTag("wolfs")
                   wolf:AddTag("goodbye")
                end
              end
            end )
        end )
    end
end
    inst:AddComponent("edible")
    inst.components.edible:SetOnEatenFn(item_oneaten)
    inst.components.edible.hungervalue = 1
    inst.components.edible.foodtype = "VEGGIE"
local function onsave(inst, data)
    if inst:HasTag("wolfs") then
        data.wolfs = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.wolfs then
       inst.AnimState:SetBank("hound")
       inst.AnimState:SetBuild("hound")
       inst.AnimState:PlayAnimation("idle")
       inst.Transform:SetFourFaced()
       local sound = inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize( 2.5, 1.5 )
       MakeCharacterPhysics(inst, 10, .5)
       inst:AddComponent("locomotor")
       inst.components.locomotor.runspeed = 25
       inst:SetStateGraph("SGhound")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("fuel")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("explosive")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveComponent("edible")
       inst:AddComponent("follower")
       inst:AddComponent("knownlocations")
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"meat", "meat"})
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(2000)
       inst.components.health:StartRegen(100, 10)
       inst:AddComponent("combat")
       inst.components.combat:SetDefaultDamage(20)
       inst.components.combat:SetAttackPeriod(0.1)
       local brain = require "brains/abigailbrain"
       inst:SetBrain(brain)
       inst.components.follower:SetLeader(GetPlayer())
       inst.components.combat:SetRetargetFunction(2, function(inst)
           if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                  if guy.components.health and not guy.components.health:IsDead() and not guy:HasTag("wolfs") then
                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy
                  end
              end )
           end
       end )
       inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
       inst:AddTag("monster")
       inst:AddTag("wolfs")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可吃蜗牛龟粘液让主角变成狼，体验野生动物的生活。可喜的是，你将拥有强大的生命力（自动回血），超快的跑动速度和恐怖的咬合能力，黑夜也不会影响你看清前方，甚至由于没有了人的味道，一些小动物将无法躲避你。可悲的是，你必须告别之前所有的伙伴，连“新移民”都会主动攻击你，离开人类的生活，流浪在荒郊野外。战斗中，由于你的体重变轻，被打时会被甩出去，因此要学会扬长避短，发挥速度和攻击力的优势，跑过去咬上一口就躲，千万不要与敌人原地肉搏。当你进食到最饱时，有一定概率出现别的狼（全身红色）挑战你，打败它（它身上不再呈红色），则将成为你的小弟，用锋利的牙齿发展起你的狼群吧。如果实在受不了荒野的生活了，存档退出再读档，即可变回人，但狼小弟将继续跟随你。使用大力士、伍迪作主角时，不适用此项，不要与“变身传奇”、“饥饿的儿童”一同修改。蜗牛龟粘液可打蜗牛龟和蜗牛窝获得




二二六.遁形术（按键盘I键主角变身随机小动物，敌人会失去攻击目标，再按I键变回人）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_I, function()
    if not inst:HasTag("chameleon") then
       inst.components.locomotor:Stop()
       inst.components.talker:ShutUp()
       inst.components.playercontroller:Enable(false)
       local head = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.HEAD)
       GetPlayer().components.inventory:DropItem(head)
       local hands = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.HANDS)
       GetPlayer().components.inventory:DropItem(hands)
       local body = GetPlayer().components.inventory:GetEquippedItem(EQUIPSLOTS.BODY)
       GetPlayer().components.inventory:DropItem(body)
       inst.components.health:SetInvincible(true)
       inst.components.hunger:Pause()
       inst.components.sanity.ignore = true
       inst.components.temperature:SetTemp(20)
       SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
       inst:DoTaskInTime(0.3, function() 
           inst:AddTag("chameleon")
           inst.chameleon = inst:DoPeriodicTask(.5, function()
               local pos = Vector3(inst.Transform:GetWorldPosition())
               local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 25)
               for k,v in pairs(ents) do
                   if v.components.combat and v.components.combat.target and v.components.combat.target == inst then
                      v.components.combat:SetTarget(nil)
                   end
               end
           end )
           if math.random()<.18 then
              inst.AnimState:SetBank("rabbit")
              inst.AnimState:SetBuild("rabbit_build")
              inst.AnimState:PlayAnimation("idle")
              local rabbitsounds = { scream = "dontstarve/rabbit/scream", hurt = "dontstarve/rabbit/scream_short", }
              inst.sounds = rabbitsounds
              inst.data = {}
              inst:SetStateGraph("SGrabbit")
              shadow:SetSize( 1, .75 )
           elseif math.random()<.36 then
              inst.AnimState:SetBank("perd")
              inst.AnimState:SetBuild("perd")
              inst.AnimState:PlayAnimation("idle_loop")
              inst:SetStateGraph("SGperd")
              shadow:SetSize( 1.5, .75 )
           elseif math.random()<.54 then
              inst.AnimState:SetBank("frog")
              inst.AnimState:SetBuild("frog")
              inst.AnimState:PlayAnimation("idle")
              inst:SetStateGraph("SGfrog")
              shadow:SetSize( 1.5, .75 )
           elseif math.random()<.72 then
              inst.AnimState:SetBank("butterfly")
              inst.AnimState:SetBuild("butterfly_basic")
              inst.AnimState:PlayAnimation("idle")
              inst:SetStateGraph("SGbutterfly")
              shadow:SetSize( .8, .5 )
           else
              inst.AnimState:SetBank("bee")
              inst.AnimState:SetBuild("bee_build")
              inst.AnimState:PlayAnimation("idle")
              local workersounds = { takeoff = "dontstarve/bee/bee_takeoff", attack = "dontstarve/bee/bee_attack", buzz = "dontstarve/bee/bee_fly_LP", hit = "dontstarve/bee/bee_hurt", death = "dontstarve/bee/bee_death", }
              inst.sounds = workersounds
              inst:SetStateGraph("SGbee")
              shadow:SetSize( .8, .5 )
           end
           inst.components.playercontroller:Enable(true)
       end )
    else
        inst.components.locomotor:Stop()
        inst.components.talker:ShutUp()
        inst.components.playercontroller:Enable(false)
        SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst:DoTaskInTime(0.3, function()
            inst:RemoveTag("chameleon")
            if inst.chameleon then inst.chameleon:Cancel() inst.chameleon = nil end
            inst.AnimState:SetBank("wilson")
            inst.AnimState:SetBuild(name)
            inst.AnimState:PlayAnimation("idle")
            inst:SetStateGraph("SGwilson")
            shadow:SetSize( 1.3, .6 )
            inst.components.health:SetInvincible(false)
            inst.components.hunger:Resume()
            inst.components.sanity.ignore = false
            inst.components.temperature:SetTemp(nil)
            inst.components.playercontroller:Enable(true)
        end )
    end
end )

    即可在被敌人追得穷途末路时，大声喊出咒语“哎呀妈呀”（请使用东北口音），并按键盘I键，主角随机变身为兔子、火鸡、青蛙、蝴蝶、蜜蜂等小动物，敌人会被迷惑，从而失去攻击目标，让你可以成功脱身。每种小动物各有特色，火鸡可以快速采摘植物、蜜蜂可以蛰敌人等，体验一下作小动物的感觉吧。运用遁形术变身时，血、饥饿、脑会锁死，穿戴的装备会掉在地上，不想让其掉落，就提前卸下。再次按键盘I键，可变回主角




二二七.人工降水（开关雨量计夏天下雨、冬天下雪，可以灭火）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rainometer.lua文件，将inst:AddComponent("inspectable")替换为以下内容：

function firefn(inst)
    local range = 3000
    local pos = Vector3(inst.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        local pt = v:GetPosition()
        if v.components.burnable and v.components.burnable:IsBurning() then
           if v.prefab == "grass" then
              v:Remove()
              SpawnPrefab("grass").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
           if v.prefab == "sapling" then
              v:Remove()
              SpawnPrefab("sapling").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
           if v.prefab == "reeds" then
              v:Remove()
              SpawnPrefab("reeds").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
           if v.prefab == "berrybush" then
              v:Remove()
              SpawnPrefab("berrybush").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
           if v.prefab == "marsh_bush" then
              v:Remove()
              SpawnPrefab("marsh_bush").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
              if v.prefab == "flower_cave_triple" then
              v:Remove()
           SpawnPrefab("flower_cave_triple").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
           if v.prefab == "lichen" then
              v:Remove()
              SpawnPrefab("lichen").Transform:SetPosition(pt.x, pt.y, pt.z)
           end
        end
    end
end
local function GetStatus(inst, viewer)
    if GetWorld().components.seasonmanager.precip then
       GetWorld().components.seasonmanager:StopPrecip()
       if inst.fire then inst.fire:Cancel() inst.fire = nil end
    else
       GetWorld().components.seasonmanager:ForcePrecip()
       inst.fire = inst:DoPeriodicTask(8, function() firefn(inst) end)
    end
end
	inst:AddComponent("inspectable")
	inst.components.inspectable.getstatus = GetStatus

    即可在雨量计上按鼠标左键开始降水，再按一次鼠标左键停止降水，夏天下雨、冬天下雪。可以浇灭大部分植物着的火，包括草、树枝、芦苇、果树丛、尖刺灌木、三朵洞穴花、苔藓




二二八.人工换季（鼠标左键点寒冬温度计切换季节）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\winterometer.lua文件，将inst:AddComponent("inspectable")替换为以下内容：

local function GetStatus(inst, viewer)
    if GetWorld().components.seasonmanager:IsWinter() then
       GetWorld().components.seasonmanager:StartSpring()
    elseif GetWorld().components.seasonmanager:IsSpring() then
       GetWorld().components.seasonmanager:StartSummer()
    elseif GetWorld().components.seasonmanager:IsSummer() then
       GetWorld().components.seasonmanager:StartAutumn()
    else
       GetWorld().components.seasonmanager:StartWinter()
    end
    GetWorld().components.seasonmanager:UpdateSegs()
end
	inst:AddComponent("inspectable")
	inst.components.inspectable.getstatus = GetStatus

    即可鼠标左键点寒冬温度计切换季节，每按一次切换到下个季节




二二九.光阴似箭（对指南针按右键跳到下个时段）

    用记事本打开游戏目录\data\scripts\prefabs\compass.lua文件，在local function GetStatus(inst, viewer)的下一行插入GetClock():NextPhase()

    即可对指南针按右键跳到下个时段，即白天变傍晚、傍晚变黑夜、黑夜变白天，采蘑菇、捉萤火虫等有时段要求的事情，无须再等待了




二三０.五彩木箱（找东西直接看木箱颜色，木箱可搬动）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\treasurechest.lua文件，将下列内容：

		inst.OnSave = onsave 
        inst.OnLoad = onload

    替换为：

local colours=
{
    {198/255,43/255,43/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {233/255,208/255,69/255},
    {109/255,50/255,163/255},
    {222/255,126/255,39/255},
}
local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_body", "swap_backpack", "swap_body")
end
local function onunequip(inst, owner) 
    owner.AnimState:ClearOverrideSymbol("swap_body")
end
local function turnon(inst)
    inst.components.machine.ison = true
    if inst.prefab == "treasurechest" then
       inst:AddComponent("inventoryitem")
    end
end
local function turnoff(inst)
    inst.components.machine.ison = false
    if inst.prefab == "treasurechest" then
       inst:RemoveComponent("inventoryitem")
    end
end
local function onsave2(inst, data)
    data.num = inst.balloon_num
    data.colour_idx = inst.colour_idx
end
local function onload2(inst, data)
    if data then
        if data.num then
            inst.balloon_num = data.num
            inst.AnimState:OverrideSymbol("swap_balloon", "balloon_shapes", "balloon_" .. tostring(inst.balloon_num))
        end
        if data.colour_idx then
            inst.colour_idx = math.min(#colours, data.colour_idx)
            inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
        end
    end
end
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff
    inst:AddComponent("equippable")
    inst.components.equippable:SetOnEquip( onequip )
    inst.components.equippable:SetOnUnequip( onunequip )
    inst.colour_idx = math.random(#colours)
    inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
    inst.OnSave = onsave2
    inst.OnLoad = onload2

    即可使木箱具备不同颜色，找东西直接看颜色，再也不用翻箱倒柜了。木箱可搬动，对地上的木箱按鼠标右键，可拿起木箱。将木箱放在地上后，对其按鼠标右键，可以锁定在地上




二三一.随笔涂鸦（用蓝魔杖为物品涂上色彩）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，在local inst = commonfn("blue")的下一行插入以下内容：

local function cancreatecolour(staff, caster, target, pos)
    return true
end
local function createcolour(staff, target, pos)
    local caster = staff.components.inventoryitem.owner
    if caster.components.sanity then
       caster.components.sanity:DoDelta(5)
    end
    local colours= { {198/255,43/255,43/255}, {79/255,153/255,68/255}, {35/255,105/255,235/255}, {233/255,208/255,69/255}, {109/255,50/255,163/255}, {222/255,126/255,39/255}, }
    inst.colour_idx = math.random(#colours)
    target.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(createcolour)
    inst.components.spellcaster:SetSpellTestFn(cancreatecolour)
    inst.components.spellcaster.canuseontargets = true
    inst.components.spellcaster.canusefrominventory = false

    即可用蓝魔杖右键点任何物品，为其涂上随机色彩，存档退出后消失。每涂鸦一次补脑5点。将你涂好的缤纷世界截下图片，给朋友秀秀吧




二三二.移动垃圾桶（狗箱增加删除物品按钮作垃圾桶）

    用记事本打开游戏目录\data\scripts\prefabs\chester.lua文件，在inst:AddComponent("container")的下一行插入以下内容：

local widgetbuttoninfo = {
    text = "Delete",
    position = Vector3(0, -195, 0),
    fn = function(inst)
        inst.components.container:DestroyContents()
        inst.SoundEmitter:PlaySound("dontstarve/common/destroy_stone")
    end }
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo

    即可在切斯特狗箱的格子下方增加一个Delete按钮，将不想要的物品放入狗箱，按下Delete按钮即可清除掉，让游戏不会因垃圾太多而越来越卡。不按钮的话，照常可以储存物品。千万不要把骨眼放入狗箱清除掉哦




二三三.垃圾洞（用饥饿腰带种垃圾洞，不想要的物品可扔进去销毁，夜晚自燃，白天熄灭）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\armor_slurper.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function wastehole(inst)
    local pt = inst:GetPosition()
    local wastehole = SpawnPrefab("armorslurper")
    wastehole.Transform:SetPosition(pt.x, pt.y, pt.z)
    wastehole.AnimState:SetBank("tentaclepillar")
    wastehole.AnimState:SetBuild("tentacle_pillar")
    wastehole.AnimState:PlayAnimation("idle_hole",true)
    wastehole.Transform:SetScale(0.5, 0.5, 0.5)
    wastehole.entity:AddSoundEmitter()
    MakeObstaclePhysics(wastehole, .5)
    wastehole:RemoveComponent("inventoryitem")
    wastehole:RemoveComponent("equippable")
    wastehole:RemoveComponent("fueled")
    wastehole:RemoveComponent("deployable")
    wastehole:RemoveTag("fur")
    wastehole:RemoveTag("ruins")
    local minimap = wastehole.entity:AddMiniMapEntity()
    minimap:SetIcon( "firepit.png" )
    wastehole:AddComponent("burnable")
    wastehole.components.burnable:SetFXLevel(5)
    wastehole.components.burnable:AddBurnFX("character_fire", Vector3(0,1.5,0) )
    wastehole:ListenForEvent("onignite", function()
        wastehole:AddComponent("heater")
        wastehole.components.heater.heat = 50
    end )
    wastehole:ListenForEvent("onextinguish", function()
        wastehole.SoundEmitter:PlaySound("dontstarve/common/fireOut")  
        if wastehole.components.heater then wastehole:RemoveComponent("heater") end
    end )
    wastehole:ListenForEvent( "daytime", function() wastehole.components.burnable:Extinguish() end , GetWorld())
    wastehole:ListenForEvent( "dusktime", function() wastehole.components.burnable:Ignite(true) end , GetWorld())
    wastehole:ListenForEvent( "nighttime", function() wastehole.components.burnable:Ignite(true) end , GetWorld())
    if GetClock():IsDay() then
       wastehole.components.burnable:Extinguish()
    else
       wastehole.components.burnable:Ignite(true)
    end
    wastehole:AddComponent("workable")
    wastehole.components.workable:SetWorkAction(ACTIONS.HAMMER)
    wastehole.components.workable:SetWorkLeft(3)
    wastehole.components.workable:SetOnFinishCallback(function(wastehole)
        SpawnPrefab("collapse_big").Transform:SetPosition(wastehole.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        wastehole:Remove()
    end )
    local slotpos = { Vector3(0,-75,0)}
    wastehole:AddComponent("container")
    wastehole.components.container:SetNumSlots(#slotpos)
    wastehole.components.container.widgetslotpos = slotpos
    wastehole.components.container.widgetpos = Vector3(0,600,0)
    wastehole.components.container.side_align_tip = 160
    wastehole.components.container.itemtestfn = function(wastehole, item, slot)
        if item.prefab == "teleportato_ring" or item.prefab == "teleportato_box" or item.prefab == "teleportato_crank" or item.prefab == "teleportato_potato" or item.prefab == "chester_eyebone" or item.prefab == "abigail_flower" or item.prefab == "lucy" or item.prefab == "balloons_empty" or item.prefab == "lighter" or item.prefab == "waxwelljournal" then
           return false
        end
        return true
    end
    wastehole:DoPeriodicTask(0.25, function(wastehole)
       if not wastehole.components.container:IsEmpty() then
          wastehole.components.container:DestroyContents()
          wastehole.SoundEmitter:PlaySound("dontstarve/common/destroy_stone")
          local pt0 = wastehole:GetPosition()
          SpawnPrefab("collapse_small").Transform:SetPosition(pt0.x, 1, pt0.z)
       end
    end )
    wastehole:AddTag("wastehole")
end
local function OnDeploy (inst, pt)
    wastehole(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("wastehole") then
        data.wastehole = true
    end
end
local function onload(inst, data)
    if data and data.wastehole then
       wastehole(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用饥饿腰带种垃圾洞，除重要物品外（如露西斧子等），任何不想要的物品都可以扔进去销毁（拿着物品对垃圾洞点鼠标左键），再也不用发愁垃圾越来越多了。垃圾洞里有沼气，在夜晚时会自燃，白天熄灭，可用于照明和取暖，但不能用来烤食物。垃圾洞在小地图上显示为石头营火的图标，不想要垃圾洞时，用锤子砸毁即可。饥饿腰带在魔法选项（画着红骷髅）下，用6个啜食者皮、2个绳子、2个噩梦燃料制造




二三四.生物传送机（探矿杖左键点生物，右键传送到任意地点）

    用记事本打开游戏目录\data\scripts\prefabs\diviningrod.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onattack(inst, owner, target)
    SpawnPrefab("lightning_rod_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
    target:AddTag("send")
end
local function canteleport(inst)
    return true
end
local function teleport(inst)
    local player = GetPlayer()
    local range = 3000
    local pos = Vector3(player.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v:HasTag("send") then
            v.Transform:SetPosition(TheInput:GetWorldPosition():Get())
            v:RemoveTag("send")
        end
    end
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(teleport)
    inst.components.spellcaster:SetSpellTestFn(canteleport)
    inst.components.spellcaster.canusefrominventory = false
    inst.components.spellcaster.canuseonpoint = true
    inst:AddComponent("weapon")
    inst.components.weapon:SetDamage(0)
    inst.components.weapon:SetRange(30, 35)
    inst.components.weapon:SetOnAttack(onattack)
    inst.components.weapon:SetProjectile("bishop_charge")

    即可在装备探矿杖时，用鼠标左键点生物（几个都可以），无论走到地图何处，装备探矿杖用鼠标右键点地面，都可将选中的生物传送过来。生物传送机可让群体性动物落单，让不会相遇的动物碰面，调离守护某处的敌人等。探矿杖在科学选项（画着原子）下，用1个树枝、4个噩梦燃料、1个齿轮制造




二三五.极速快递（拿着背包对地面点右键，将它传送回家）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua文件，将inst.components.inventoryitem.cangoincontainer = false替换为以下内容：

    inst.components.inventoryitem.cangoincontainer = true
local function OnDeploy (inst, pt)
    SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
    local pos = Vector3(inst.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
    for k,v in pairs(ents) do
        if v.prefab == "firepit" then
           inst.Transform:SetPosition(v.Transform:GetWorldPosition())
        end
    end
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddTag("fridge")

    即可将拿不下的东西放在普通背包里，拿着背包对地面点鼠标右键，会自动传送到石头营火旁，再多的战利品都可以快递回家。背包同时具备冷藏功能，里面的食物可以长久保鲜。快递只在同一地层服务（不能从地下传送到地面），为保证快递投送准确，请在同一地层只保留一处石头营火（多处的话将随机投送）。如果之前修改过“同时携带多个背包”，就查找不到inst.components.inventoryitem.cangoincontainer = false这句，将inst.components.inventoryitem.cangoincontainer = true替换为下面的内容即可




二三六.帽子戏法（高礼帽放在地上随机变出几十种宝物）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，在inst.components.fueled:InitializeFuelLevel(TUNING.TOPHAT_PERISHTIME)的下一行插入以下内容：

local function ondropped(inst)
    local names = 
{"bedroll_furry","gunpowder","panflute","onemanband","armor_sanity","nightsword","batbat","armorslurper","amulet","blueamulet","purpleamulet","firestaff","icestaff","telestaff","blowdart_sleep","blowdart_fire","blowdart_pipe","featherhat","cane","trunkvest_summer","trunkvest_winter","nightmare_timepiece","orangeamulet","yellowamulet","greenamulet","orangestaff","yellowstaff","greenstaff","ruinshat","armorruins","ruins_bat","eyeturret_item","trunk_summer","trunk_winter","deerclops_eyeball","gears","nightmarefuel","livinglog","marble","minotaurhorn","krampus_sack","butter","tallbirdegg","honeyham","dragonpie","taffy","mandrakesoup","perogies","waffles","turkeydinner","honeynuggets","wormlight","beefalo","perd","koalefant_summer","koalefant_winter","lureplantbulb","slurtlehat","armorsnurtleshell","bonestew","butterflymuffin","frogglebunwich","pumpkincookie","baconeggs","fruitmedley","fishtacos","fishsticks","stuffedeggplant","meatballs","jammypreserves","bandage","healingsalve","spider_warrior","tentacle","monkey","killerbee","worm"}
    inst.name = names[math.random(#names)]
    SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
    SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
end
    inst:ListenForEvent("ondropped",  ondropped)

    即可将高礼帽放在地上，随机变出几十种宝物，也有一定几率变出怪物哦，试试你的手气吧。高礼帽在穿戴选项（画着帽子）下，用6个蛛丝制造




二三七.节日礼花（点燃荧光果放礼花）

    用记事本打开游戏目录\data\scripts\prefabs\lightbulb.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容：

local function OnIgniteFn(inst)
    GetPlayer().SoundEmitter:PlaySound("dontstarve/common/blackpowder_explo")
    inst:DoTaskInTime(1.5, function() inst.Physics:SetMotorVelOverride(0,42,0) end)
end
local function OnExplodeFn(inst)
    GetPlayer().components.sanity:DoDelta(5)
    inst:StartThread(function()
       for k = 1,3 do
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           TheCamera:Shake("FULL", 0.3, 0.02, .5, 40)
           Sleep(.1)
       end
    end)
end
    inst:AddComponent("explosive")
    inst.components.explosive:SetOnExplodeFn(OnExplodeFn)
    inst.components.explosive:SetOnIgniteFn(OnIgniteFn)

    即可用火炬点燃放在地上的荧光果，荧光果会飞上天空爆炸，每放一颗补5点脑，为你的节日增加一点气氛吧。在地洞里放礼花可以引起地震。如果想连续燃放，就将荧光果摆成一排（距离要近一些），点燃一个，其他就会陆续被点燃




二三八.璀璨流星雨（给远古盔甲10个黄金或荧光果，为你下场流星雨）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\armor_ruins.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if GetPlayer().components.inventory:Has("goldnugget", 10) then
       if item.prefab == "goldnugget" then
          return true
       end
    end
    if GetPlayer().components.inventory:Has("lightbulb", 10) then
       if item.prefab == "lightbulb" then
          return true
       end
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item.prefab == "goldnugget" then
       giver.components.inventory:ConsumeByName("goldnugget", 9)
    elseif item.prefab == "lightbulb" then
       giver.components.inventory:ConsumeByName("lightbulb", 9)
    end
    local bullet = SpawnPrefab("trinket_5")
    bullet.Transform:SetPosition(inst.Transform:GetWorldPosition())
    bullet.components.inventoryitem.canbepickedup = false
    bullet.Physics:SetMotorVelOverride(0,20,0)
    giver.components.sanity:DoDelta(10)
    GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
    inst:DoTaskInTime(1, function() bullet:Remove() end )
    inst:DoTaskInTime(1.5, function()
       inst:StartThread(function()
           for k = 1, 200 do
               local pt = Vector3(GetPlayer().Transform:GetWorldPosition())
               local rain = SpawnPrefab("lightbulb")
               rain:RemoveComponent("edible")
               rain.components.inventoryitem.canbepickedup = false
               if item.prefab == "goldnugget" then
                  rain.AnimState:SetMultColour(math.random(255)/255,math.random(255)/255,math.random(255)/255,1)
               end
               rain.Transform:SetPosition(pt.x+(math.random(30)-math.random(30)), 20, pt.z+(math.random(30)-math.random(30)))
               inst:DoTaskInTime(5, function()
                    local pt2 = rain:GetPosition()
                    SpawnPrefab("explode_small").Transform:SetPosition(pt2.x, 0, pt2.z)
                    rain:Remove()
               end)
               Sleep(0.2)
           end
       end)
    end)
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可拿着黄金或荧光果，对放在地上的远古盔甲点鼠标左键，将向空中发射火箭，打下漫天的流星雨。每次发射消耗10个黄金或荧光果，身上数量不足时无法发射。如果给远古盔甲的是黄金，则下彩色流星雨，如果给的是荧光果则下白色流星雨。可以连续发射，但不要连续次数太多，除非你的计算机硬件足够坚强。每场流星雨可补脑10点。另外穿着远古盔甲，拿黄金或荧光果对装备格点鼠标右键，同样可以发射。远古盔甲在远古选项（画着远古祭坛）下，用6个铥矿石、4个噩梦燃料制造，制造时需要靠近远古祭坛




二三九.高尔夫球（用蜗牛壳碎片种高尔夫球，锤子作球杆，将球打进兔子洞吧）

    用记事本打开游戏目录\data\scripts\prefabs\slurtle_shellpieces.lua文件，在inst:AddComponent("inventoryitem")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local golf = SpawnPrefab("slurtle_shellpieces")
    golf.Transform:SetPosition(pt.x, pt.y, pt.z)
    golf.AnimState:SetBank("bulb")
    golf.AnimState:SetBuild("bulb")
    golf.AnimState:PlayAnimation("idle")
    golf.Transform:SetScale(0.8, 0.8, 0.8)
    golf.components.inventoryitem.canbepickedup = false
    MakeSmallBurnable(golf)
    golf:AddComponent("perishable")
    golf.components.perishable:SetPerishTime(TUNING.PERISH_ONE_DAY)
    golf.components.perishable:StartPerishing()
    golf.components.perishable.onperishreplacement = "ash"
    golf:AddComponent("workable")
    golf.components.workable:SetWorkAction(ACTIONS.HAMMER)
    golf.components.workable:SetWorkLeft(10)
    golf.components.workable:SetOnFinishCallback(function(golf)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(golf.Transform:GetWorldPosition())
        golf:Remove()
    end )
    golf.components.workable:SetOnWorkCallback(function(golf)
        local pt2 = Vector3(golf.Transform:GetWorldPosition())
        local pos = Vector3(GetPlayer().Transform:GetWorldPosition())
        golf.Physics:SetMotorVelOverride((pt2.x-pos.x)*13,0,(pt2.z-pos.z)*13)
        golf:DoTaskInTime(0.2, function() golf.Physics:ClearMotorVelOverride() end )
        GetPlayer().components.sanity:DoDelta(5)
    end )
    golf:DoPeriodicTask(.05, function(golf)
        local pos2 = Vector3(golf.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos2.x,pos2.y,pos2.z, 0.5)
        for k,v in pairs(ents) do
            if v.prefab == "rabbithole" then
               GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/use_axe_tree")
               golf:Remove()
               GetPlayer().components.sanity:DoDelta(50)
            end
        end
    end )
    golf:AddTag("golfs")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("golfs") then
        data.golfs = true
    end
end
local function onload(inst, data)
  if data and data.golfs then
    inst.AnimState:SetBank("bulb")
    inst.AnimState:SetBuild("bulb")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.components.inventoryitem.canbepickedup = false
    MakeSmallBurnable(inst)
    inst:AddComponent("perishable")
    inst.components.perishable:SetPerishTime(TUNING.PERISH_ONE_DAY)
    inst.components.perishable:StartPerishing()
    inst.components.perishable.onperishreplacement = "ash"
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(10)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst:Remove()
    end )
    inst.components.workable:SetOnWorkCallback(function(inst)
        local pt2 = Vector3(inst.Transform:GetWorldPosition())
        local pos = Vector3(GetPlayer().Transform:GetWorldPosition())
        inst.Physics:SetMotorVelOverride((pt2.x-pos.x)*13,0,(pt2.z-pos.z)*13)
        inst:DoTaskInTime(0.2, function() inst.Physics:ClearMotorVelOverride() end )
        GetPlayer().components.sanity:DoDelta(5)
    end )
    inst:DoPeriodicTask(.05, function(inst)
        local pos2 = Vector3(inst.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos2.x,pos2.y,pos2.z, 0.5)
        for k,v in pairs(ents) do
            if v.prefab == "rabbithole" then
               GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/use_axe_tree")
               inst:Remove()
               GetPlayer().components.sanity:DoDelta(50)
            end
        end
    end )
    inst:AddTag("golfs")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜗牛壳碎片种高尔夫球（请种在兔子洞附近），装备锤子对高尔夫球按一下鼠标右键（注意不要按住不放）可以击球。主角站得离球越近，击球的力量越小；站得越远，击球的力量越大。每次挥杆奖励5点脑，将球打入兔子洞奖励50点脑（进洞的球会被兔子拿走，再玩请重新种球）。球能准确入洞的诀窍在于，人、球、洞三点成一线。每个高尔夫球可以击打10次，如果10杆都没有进洞，说明你的技术太烂了，再种一个球重来吧。不想要高尔夫球时，烧掉即可，不会引燃周边物品，如果球打得太远找不到了，1天后会自动降解为灰烬，不会污染环境。蜗牛壳碎片可以通过打蜗牛龟和蜗牛窝得到，如果你同时修改了“巨型超市”，也可以花1-2个黄金购得




二四０.完好如初（红色魔杖可修复物品、回复新鲜度、补充燃料及治愈同伴）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\staff.lua文件，在local inst = commonfn("red")的下一行插入以下内容：

local function canbeback(staff, caster, target, pos)
    if caster.components.inventory:Has("goldnugget", 1) then
       return true
    end
    return false
end
local function beback(staff, target, pos)
    local player = GetPlayer()
    SpawnPrefab("book_fx").Transform:SetPosition(target.Transform:GetWorldPosition())
    if target.components.fueled then
       target.components.fueled.currentfuel = target.components.fueled.maxfuel
       player.components.inventory:ConsumeByName("goldnugget", 1)
    end
    if target.components.finiteuses then
       target.components.finiteuses.current = target.components.finiteuses.total
       player.components.inventory:ConsumeByName("goldnugget", 1)
    end
    if target.components.armor then
       target.components.armor.condition = target.components.armor.maxcondition
       player.components.inventory:ConsumeByName("goldnugget", 1)
    end
    if target.components.perishable then
       target.components.perishable.perishremainingtime = target.components.perishable.perishtime
       player.components.inventory:ConsumeByName("goldnugget", 1)
    end
    if target.components.health then
       target.components.health.currenthealth = target.components.health.maxhealth
       player.components.inventory:ConsumeByName("goldnugget", 1)
    end
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(beback)
    inst.components.spellcaster:SetSpellTestFn(canbeback)
    inst.components.spellcaster.canuseontargets = true
    inst.components.spellcaster.canusefrominventory = false

    即可将想要修复的物品放在地上，装备红色魔杖右键点地上的物品，可修复武器装备使用百分比，回复食物新鲜度，为照明物品补充燃料，也可用于治疗同伴。每次使用须支付1个黄金，身上没有黄金时无法使用。可堆叠的物品尽量堆在一起修复，这样只要花费1个黄金即可




二四一.我的小屋（用巨鹿眼球种小屋，左键点击可睡觉，右键点击打开库房，点按钮可修理装备、恢复食物新鲜、烘干物品）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\deerclops_eyeball.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local slotpos = {}
for y = 2, 0, -1 do
    for x = 0, 11 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2-175,0))
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2-425,0))
    end
end
local widgetbuttoninfo = {
    text = "Repair",
    position = Vector3(741, 135, 0),
    fn = function(inst)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        inst.components.container:Close(GetPlayer())
        for k,v in pairs(inst.components.container.slots) do
            if v.components.fueled then
               v.components.fueled.currentfuel = v.components.fueled.maxfuel
            end
            if v.components.finiteuses then
               v.components.finiteuses.current = v.components.finiteuses.total
            end
            if v.components.armor then
               v.components.armor.condition = v.components.armor.maxcondition
            end
            if v.components.perishable then
               v.components.perishable.perishremainingtime = v.components.perishable.perishtime
            end
            if v.components.moisturelistener then
               v.components.moisturelistener.wet = false
            end
        end
        inst:DoTaskInTime(0.1, function() inst.components.container:Open(GetPlayer()) end )
end }
local function OnDeploy (inst, pt)
    local house = SpawnPrefab("deerclops_eyeball")
    house.Transform:SetPosition(pt.x, pt.y, pt.z)
    house.AnimState:SetBank("walrus_house")
    house.AnimState:SetBuild("walrus_house")
    house.AnimState:PlayAnimation("lit", true)
    house.Transform:SetScale(1.5, 1.5, 1.5)
    MakeObstaclePhysics(house, 1)
    local minimap = house.entity:AddMiniMapEntity()
    minimap:SetIcon( "igloo.png" )
    house:RemoveComponent("inventoryitem")
    house:RemoveComponent("edible")
    house:RemoveComponent("stackable")
    house:RemoveComponent("deployable")
    local light = house.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:Enable(true)
    light:SetColour(180/255, 195/255, 50/255)
    house:AddComponent("named")
    house.components.named:SetName("My House")
    house:AddComponent("workable")
    house.components.workable:SetWorkAction(ACTIONS.HAMMER)
    house.components.workable:SetWorkLeft(3)
    house.components.workable:SetOnFinishCallback(function(house)
        house.Light:Enable(false)
        SpawnPrefab("collapse_big").Transform:SetPosition(house.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
	house.components.container:DropEverything()
        house:Remove()
    end )
    house:AddComponent("machine")
    house.components.machine.turnonfn = function() house.components.container:Open(GetPlayer()) end
    house.components.machine.turnofffn = function() house.components.container:Open(GetPlayer()) end
    house:AddComponent("sleepingbag")
    house.components.sleepingbag.onsleep = function(house, sleeper)
        sleeper.components.health:SetInvincible(true)
        sleeper.components.playercontroller:Enable(false)
        GetPlayer().HUD:Hide()
        TheFrontEnd:Fade(false,1)
        house:DoTaskInTime(1.2, function() 
           GetPlayer().HUD:Show()
           TheFrontEnd:Fade(true,1) 
           GetClock():MakeNextDay()
           sleeper.components.health:SetInvincible(false)
           sleeper.components.playercontroller:Enable(true)
           sleeper.components.sanity:DoDelta(sleeper.components.sanity.max)
           sleeper.components.hunger:DoDelta(sleeper.components.hunger.max)
           sleeper.components.health:DoDelta(sleeper.components.health.maxhealth)
           sleeper.components.temperature:SetTemperature(20)
           if sleeper.components.moisture then sleeper.components.moisture:SetMoistureLevel(0) end
        end)
    end
    house:AddTag("houses")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("houses") then
        data.houses = true
    end
end
local function onload(inst, data)
  if data and data.houses then
    inst.AnimState:SetBank("walrus_house")
    inst.AnimState:SetBuild("walrus_house")
    inst.AnimState:PlayAnimation("lit", true)
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    MakeObstaclePhysics(inst, 1)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "igloo.png" )
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("deployable")
    local light = inst.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:Enable(true)
    light:SetColour(180/255, 195/255, 50/255)
    inst:AddComponent("named")
    inst.components.named:SetName("My House")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        inst.Light:Enable(false)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
	inst.components.container:DropEverything()
        inst:Remove()
    end )
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = function() inst.components.container:Open(GetPlayer()) end
    inst.components.machine.turnofffn = function() inst.components.container:Open(GetPlayer()) end
    inst:AddComponent("sleepingbag")
    inst.components.sleepingbag.onsleep = function(inst, sleeper)
        sleeper.components.health:SetInvincible(true)
        sleeper.components.playercontroller:Enable(false)
        GetPlayer().HUD:Hide()
        TheFrontEnd:Fade(false,1)
        inst:DoTaskInTime(1.2, function() 
           GetPlayer().HUD:Show()
           TheFrontEnd:Fade(true,1) 
           GetClock():MakeNextDay()
           sleeper.components.health:SetInvincible(false)
           sleeper.components.playercontroller:Enable(true)
           sleeper.components.sanity:DoDelta(sleeper.components.sanity.max)
           sleeper.components.hunger:DoDelta(sleeper.components.hunger.max)
           sleeper.components.health:DoDelta(sleeper.components.health.maxhealth)
           sleeper.components.temperature:SetTemperature(20)
           if sleeper.components.moisture then sleeper.components.moisture:SetMoistureLevel(0) end
        end)
    end
    inst:AddTag("houses")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-150,300,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.canbeopened = false
    inst:AddTag("fridge")

    即可用巨鹿眼球种小屋，鼠标左键点小屋可睡觉（白天也可以睡），睡醒后会将脑、饥饿、生命全部补满，去除湿度，并解除中暑、冻伤状态。鼠标右键点击小屋，会打开库房（远离小屋自动关闭），共108格存储空间，具有冷藏功能。点格子右上角的“Repair”按钮，可修理小屋中的装备、恢复食物新鲜度、烘干物品。小屋日夜灯火通明，会照亮周边。不想要小屋时，用锤子砸掉即可，如果库房没有清空，里面的物品会掉在地上




二四二.自动门（用木盔甲种自动门，进出自动开关）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\armor_wood.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local door1 = SpawnPrefab("armorwood")
    door1.Transform:SetPosition(pt.x+0.55, pt.y, pt.z-0.55)
    door1.AnimState:SetBank("winter_meter")
    door1.AnimState:SetBuild("winter_meter")
    door1.AnimState:SetPercent("meter", 1)
    door1.Transform:SetScale(1, 0.7, 1)
    MakeObstaclePhysics(door1, 0.48)
    door1:RemoveComponent("inventoryitem")
    door1:RemoveComponent("fuel")
    door1:RemoveComponent("armor")
    door1:RemoveComponent("equippable")
    door1:RemoveComponent("burnable")
    door1:RemoveComponent("propagator")
    door1:RemoveComponent("deployable")
    door1:RemoveTag("wood")
    door1:AddComponent("workable")
    door1.components.workable:SetWorkAction(ACTIONS.HAMMER)
    door1.components.workable:SetWorkLeft(2)
    door1.components.workable:SetOnFinishCallback(function(door1)
        SpawnPrefab("collapse_big").Transform:SetPosition(door1.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        door1:Remove()
    end )
    door1:AddComponent( "playerprox" )
    door1.components.playerprox:SetDist(2,3)
    door1.components.playerprox:SetOnPlayerNear(function(door1)
        door1.Transform:SetScale(0.1, 0.7, 1)
        door1.Physics:SetActive(false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    door1.components.playerprox:SetOnPlayerFar(function(door1)
        door1.Transform:SetScale(1, 0.7, 1)
        door1.Physics:SetActive(true)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    door1.components.inspectable.getstatus = function(door1)
        door1.Transform:SetScale(0.1, 0.7, 1)
        door1.Physics:SetActive(false)
        door1:DoTaskInTime(3, function(door1)
            door1.Transform:SetScale(1, 0.7, 1)
            door1.Physics:SetActive(true)
        end )
    end
    door1:AddTag("doors")
    local door2 = SpawnPrefab("armorwood")
    door2.Transform:SetPosition(pt.x-0.55, pt.y, pt.z+0.55)
    door2.AnimState:SetBank("winter_meter")
    door2.AnimState:SetBuild("winter_meter")
    door2.AnimState:SetPercent("meter", 1)
    door2.Transform:SetScale(1, 0.7, 1)
    MakeObstaclePhysics(door2, 0.48)
    door2:RemoveComponent("inventoryitem")
    door2:RemoveComponent("fuel")
    door2:RemoveComponent("armor")
    door2:RemoveComponent("equippable")
    door2:RemoveComponent("burnable")
    door2:RemoveComponent("propagator")
    door2:RemoveComponent("deployable")
    door2:RemoveTag("wood")
    door2:AddComponent("workable")
    door2.components.workable:SetWorkAction(ACTIONS.HAMMER)
    door2.components.workable:SetWorkLeft(2)
    door2.components.workable:SetOnFinishCallback(function(door2)
        SpawnPrefab("collapse_big").Transform:SetPosition(door2.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        door2:Remove()
    end )
    door2:AddComponent( "playerprox" )
    door2.components.playerprox:SetDist(2,3)
    door2.components.playerprox:SetOnPlayerNear(function(door2)
        door2.Transform:SetScale(0.1, 0.7, 1)
        door2.Physics:SetActive(false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    door2.components.playerprox:SetOnPlayerFar(function(door2)
        door2.Transform:SetScale(1, 0.7, 1)
        door2.Physics:SetActive(true)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    door2.components.inspectable.getstatus = function(door2)
        door2.Transform:SetScale(0.1, 0.7, 1)
        door2.Physics:SetActive(false)
        door2:DoTaskInTime(3, function(door2)
            door2.Transform:SetScale(1, 0.7, 1)
            door2.Physics:SetActive(true)
        end )
    end
    door2:AddTag("doors")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("doors") then
        data.doors = true
    end
end
local function onload(inst, data)
  if data and data.doors then
    inst.AnimState:SetBank("winter_meter")
    inst.AnimState:SetBuild("winter_meter")
    inst.AnimState:SetPercent("meter", 1)
    inst.Transform:SetScale(1, 0.7, 1)
    MakeObstaclePhysics(inst, 0.48)
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("armor")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("wood")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(2)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:AddComponent( "playerprox" )
    inst.components.playerprox:SetDist(2,3)
    inst.components.playerprox:SetOnPlayerNear(function(inst)
        inst.Transform:SetScale(0.1, 0.7, 1)
        inst.Physics:SetActive(false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    inst.components.playerprox:SetOnPlayerFar(function(inst)
        inst.Transform:SetScale(1, 0.7, 1)
        inst.Physics:SetActive(true)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
    end )
    inst.components.inspectable.getstatus = function(inst)
        inst.Transform:SetScale(0.1, 0.7, 1)
        inst.Physics:SetActive(false)
        inst:DoTaskInTime(3, function(inst)
            inst.Transform:SetScale(1, 0.7, 1)
            inst.Physics:SetActive(true)
        end )
    end
    inst:AddTag("doors")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用木盔甲种自动门，进出时自动开关，为方便宠物进出，也可以手动开关，鼠标左键点击可开门，3秒后自动关门。种门时，可先建好一排墙，然后砸掉其中2堵，在留下的空地正中间种下自动门，即可与墙完美契合。自动门有方向的限制，只可种在正面的墙之间（进入游戏默认的方向），不能种在侧面的墙之间。不需要自动门时，用锤子砸毁即可。木盔甲在战斗选项（画着两把剑）下，用8个木头、2个绳子制造




二四三.新移民（白天石头营火附近出现新移民，自动打怪，可与他们做买卖）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\firepit.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createnpc(inst)
  for k = 1,math.random(10,25) do
    local pt = inst:GetPosition()
    local npc = SpawnPrefab("frog")
    npc.Transform:SetPosition(pt.x+(math.random(50)-math.random(50)), 0, pt.z+(math.random(50)-math.random(50)))
    npc.AnimState:SetBank("wilson")
    local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    local buildname = names[math.random(#names)]
    npc.AnimState:SetBuild(buildname)
    local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_rain","hat_watermelon","hat_ice","hat_catcoon","hat_wathgrithr"}
    local hat = hats[math.random(#hats)]
    npc.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
    local armors = {"armor_grass","armor_marble","armor_onemanband","armor_ruins","armor_sanity","armor_slurper","armor_slurtleshell","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_wood","torso_rain"}
    local armor = armors[math.random(#armors)]
    npc.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
    npc.AnimState:Show("HAT")
    npc.AnimState:Show("HAT_HAIR")
    npc.AnimState:Hide("HAIR_NOHAT")
    npc.AnimState:Hide("HAIR")
    npc.AnimState:Hide("ARM_carry")
    npc.AnimState:Show("ARM_normal")
    npc.AnimState:PlayAnimation("idle")
    MakeCharacterPhysics(npc, 75, .5)
    local minimap = npc.entity:AddMiniMapEntity()
    minimap:SetIcon( "lighter.png" )
    npc:RemoveComponent("sleeper")
    npc:RemoveComponent("thief")
    npc:RemoveComponent("lootdropper")
    npc:RemoveTag("animal")
    npc:RemoveTag("prey")
    npc:RemoveTag("smallcreature")
    npc:RemoveTag("frog")
    npc:RemoveTag("canbetrapped")
    npc:RemoveAllEventCallbacks()
    npc:SetStateGraph("SGshadowwaxwell")
    npc.components.health:SetMaxHealth(1000)
    npc:RemoveComponent("combat")
    npc:AddComponent("combat")
    npc.components.combat:SetDefaultDamage(10)
    npc.components.combat:SetAttackPeriod(1)
    npc.components.combat:SetRetargetFunction(3, function(npc)
        if not npc.components.health:IsDead() then
            return FindEntity(npc, 20, function(guy)
                if guy.components.combat and guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == npc or npc.components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    npc.components.combat:SetKeepTargetFunction(function(npc, target) return target and target:IsValid() end )
    npc:ListenForEvent("attacked", function(npc, data)
        npc.components.combat:SetTarget(data.attacker)
        npc.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("npcs") and not dude.components.health:IsDead() end, 5)
    end )
    npc:AddComponent("trader")
    npc.components.trader:SetAcceptTest(function(npc, item) 
        if item.prefab == "cave_banana" or item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "berries" or item.prefab == "cactus_meat" or item.prefab == "watermelon" or item.prefab == "acorn" or item.prefab == "meat" or item.prefab == "smallmeat" or item.prefab == "fish" or item.prefab == "eel" or item.prefab == "drumstick" or item.prefab == "bird_egg" or item.prefab == "froglegs" or item.prefab == "monstermeat" or item.prefab == "butter" or item.prefab == "butterflywings" or item.prefab == "cutlichen" or item.prefab == "foliage" or item.prefab == "honey" or item.prefab == "lightbulb" or item.prefab == "red_cap" or item.prefab == "green_cap" or item.prefab == "blue_cap" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "redgem" or item.prefab == "bluegem" or item.prefab == "purplegem" or item.prefab == "greengem" or item.prefab == "orangegem" or item.prefab == "yellowgem" then
           return true
        end
        return false
    end )
    npc.components.trader.onaccept = function(npc, giver, item)
        for k = 1, 2 do
            local goldnugget = SpawnPrefab("goldnugget")
            GetPlayer().components.inventory:GiveItem(goldnugget)
        end
    end
    npc:ListenForEvent( "nighttime", function() npc:Remove() end , GetWorld())
    npc:AddComponent("talker")
    npc:DoPeriodicTask(math.random(30,60), function()
        local words = {"Good day","I'm happy","I like here","Thank you","Where's the enemy","I'm hungry","Too hot","Too cold","Hello","Bye","Sorry","Good morning","Good afternoon","Good evening","I'll go home","I want to go hunting","I'm going to mining","I want to go to the farm","I want to pick","I want to go fishing","I'm going to catch","I want to fight","I want to have a rest","I was a good man","I want to be rich","I was lucky","I want to make friends"}
        local word = words[math.random(#words)]
        npc.components.talker:Say(word, 4, false)
    end)
    npc:AddTag("npcs")
  end
end
    inst:ListenForEvent( "daytime", function() createnpc(inst) end , GetWorld())


    2.用记事本打开游戏目录\data\scripts\prefabs\frog.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local names = {"swap_axe","swap_batbat","swap_cane","swap_diviningrod","swap_ruins_bat","swap_fishingrod","swap_goldenaxe","swap_goldenpickaxe","swap_goldenshovel","swap_ham_bat","swap_hammer","swap_lucy_axe","swap_nightmaresword","swap_pickaxe","swap_pitchfork","swap_ruins_bat","swap_shovel","swap_spear","swap_spike","swap_umbrella","swap_spear_wathgrithr","swap_parasol"}
local weapon = names[math.random(#names)]
local items = { SWORD = weapon }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function onsave(inst, data)
    if inst:HasTag("npcs") then
        data.npcs = true
    end
end
local function onload(inst, data)
  if data and data.npcs then
    inst.AnimState:SetBank("wilson")
    local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    local buildname = names[math.random(#names)]
    inst.AnimState:SetBuild(buildname)
    local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_rain","hat_watermelon","hat_ice","hat_catcoon","hat_wathgrithr"}
    local hat = hats[math.random(#hats)]
    inst.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
    local armors = {"armor_grass","armor_marble","armor_onemanband","armor_ruins","armor_sanity","armor_slurper","armor_slurtleshell","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_wood","torso_rain"}
    local armor = armors[math.random(#armors)]
    inst.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
    inst.AnimState:Show("HAT")
    inst.AnimState:Show("HAT_HAIR")
    inst.AnimState:Hide("HAIR_NOHAT")
    inst.AnimState:Hide("HAIR")
    inst.AnimState:Hide("ARM_carry")
    inst.AnimState:Show("ARM_normal")
    inst.AnimState:PlayAnimation("idle")
    MakeCharacterPhysics(inst, 75, .5)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "lighter.png" )
    inst:RemoveComponent("sleeper")
    inst:RemoveComponent("thief")
    inst:RemoveComponent("lootdropper")
    inst:RemoveTag("animal")
    inst:RemoveTag("prey")
    inst:RemoveTag("smallcreature")
    inst:RemoveTag("frog")
    inst:RemoveTag("canbetrapped")
    inst:RemoveAllEventCallbacks()
    inst:SetStateGraph("SGshadowwaxwell")
    inst.components.health:SetMaxHealth(1000)
    inst:RemoveComponent("combat")
    inst:AddComponent("combat")
    inst.components.combat:SetDefaultDamage(10)
    inst.components.combat:SetAttackPeriod(1)
    inst.components.combat:SetRetargetFunction(3, function(inst)
        if not inst.components.health:IsDead() then
            return FindEntity(inst, 20, function(guy)
                if guy.components.combat and guy.components.health and not guy.components.health:IsDead() then
                   return guy.components.combat.target == inst or inst.components.combat.target == guy or guy:HasTag("monster")
                end
            end )
        end
    end )
    inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
    inst:ListenForEvent("attacked", function(inst, data)
        inst.components.combat:SetTarget(data.attacker)
        inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("npcs") and not dude.components.health:IsDead() end, 5)
    end )
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item) 
        if item.prefab == "cave_banana" or item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "berries" or item.prefab == "cactus_meat" or item.prefab == "watermelon" or item.prefab == "acorn" or item.prefab == "meat" or item.prefab == "smallmeat" or item.prefab == "fish" or item.prefab == "eel" or item.prefab == "drumstick" or item.prefab == "bird_egg" or item.prefab == "froglegs" or item.prefab == "monstermeat" or item.prefab == "butter" or item.prefab == "butterflywings" or item.prefab == "cutlichen" or item.prefab == "foliage" or item.prefab == "honey" or item.prefab == "lightbulb" or item.prefab == "red_cap" or item.prefab == "green_cap" or item.prefab == "blue_cap" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "redgem" or item.prefab == "bluegem" or item.prefab == "purplegem" or item.prefab == "greengem" or item.prefab == "orangegem" or item.prefab == "yellowgem" then
           return true
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        for k = 1, 2 do
            local goldnugget = SpawnPrefab("goldnugget")
            GetPlayer().components.inventory:GiveItem(goldnugget)
        end
    end
    inst:ListenForEvent( "nighttime", function() inst:Remove() end , GetWorld())
    inst:AddComponent("talker")
    inst:DoPeriodicTask(math.random(30,60), function()
        local words = {"Good day","I'm happy","I like here","Thank you","Where's the enemy","I'm hungry","Too hot","Too cold","Hello","Bye","Sorry","Good morning","Good afternoon","Good evening","I'll go home","I want to go hunting","I'm going to mining","I want to go to the farm","I want to pick","I want to go fishing","I'm going to catch","I want to fight","I want to have a rest","I was a good man","I want to be rich","I was lucky","I want to make friends"}
        local word = words[math.random(#words)]
        inst.components.talker:Say(word, 4, false)
    end)
    inst:AddTag("npcs")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在白天时，石头营火附近有新移民走动，黑夜离去，会主动攻击怪物，有他们的地方是安全的。他们愿意购买你的肉类、蔬菜和宝石（拿着物品对新移民点鼠标左键），每个物品可以卖2个黄金。如果你攻击新移民，附近的其他人将围殴你。新移民会自言自语，听听他们都说了些什么吧。在地图各处建造石头营火及其他建筑，就会形成许多小镇，饥荒世界从此不再冷清。新移民在小地图上显示为打火机图标（代表着希望），通过查看小地图，可以了解各个小镇的人口情况




二四四.神奇跳跃（按键盘R键主角可向前跳跃）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("resurrectable")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_R, function()
   inst.Physics:SetCollides(false)
   inst:DoTaskInTime(0, function()
        inst.AnimState:PlayAnimation("give")
        inst.components.playercontroller:Enable(false)
        inst.components.locomotor:Stop()
        inst.Physics:SetMotorVelOverride(50,45,0) end )
   inst:DoTaskInTime(0.2, function()
        inst.Physics:ClearMotorVelOverride()
        inst.Physics:SetMotorVelOverride(50,0,0) end )
   inst:DoTaskInTime(0.3, function()
        inst.Physics:ClearMotorVelOverride()
        inst.Physics:SetMotorVelOverride(50,-25,0) end )
   inst:DoTaskInTime(0.5, function()
        inst.Physics:ClearMotorVelOverride()
        inst.components.locomotor:Stop()
        local pt = inst:GetPosition()
        inst.Transform:SetPosition(pt.x, 0, pt.z)
        inst.components.playercontroller:Enable(true)
        inst.Physics:SetCollides(true)
        inst.AnimState:PlayAnimation("idle")
        inst.SoundEmitter:PlaySound("dontstarve/movement/bodyfall_dirt", "bodyfall") end )
end )

    即可按键盘R键，让主角向前跳跃，用以方便地越过沟壑、墙等障碍，也可以跳到海面上，渡海而行。当身边有障碍物时，会影响跳跃高度。将其中KEY_R替换为其他键，比如KEY_C，就可以按键盘C键跳跃




二四五.如来神掌（按键盘J键，主角飞起并砸向地面，引发威力巨大的地震）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_J, function()
    if not inst:HasTag("jump") then
       inst.components.hunger:DoDelta(-50)
       inst.components.playercontroller:Enable(false)
       inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
       shadow:SetSize( 0, 0 )
       inst:AddTag("jump")
       inst.jump = inst:DoPeriodicTask(.01, function() inst.Physics:SetMotorVelOverride(0,15,0) end)
       inst:DoTaskInTime(5, function()
            if inst.jump then inst.jump:Cancel() inst.jump = nil end
            local pos = inst:GetPosition()
            GetSeasonManager():DoLightningStrike(pos)
            inst.sg:GoToState("hit")
            inst.jump2 = inst:DoPeriodicTask(.01, function() inst.Physics:SetMotorVelOverride(0,-55,0) end)
       end )
       inst:DoTaskInTime(6.35, function()
            if inst.jump2 then inst.jump2:Cancel() inst.jump2 = nil end
            inst.sg:GoToState("hit")
            inst.AnimState:SetBloomEffectHandle("")
            shadow:SetSize( 1.3, .6 )
            SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
            GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
            for k = 1,math.random(5) do
                local pt = Vector3(inst.Transform:GetWorldPosition())
                SpawnPrefab("rocks").Transform:SetPosition(pt.x+(math.random(3)-math.random(3)), 0, pt.z+(math.random(3)-math.random(3)))
            end
            inst.components.playercontroller:ShakeCamera(inst, "FULL", 2.5, 0.03, 2, 30)
       end )
       inst:DoTaskInTime(6.5, function()
            local pos = Vector3(inst.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 30)
            for k,v in pairs(ents) do
                if v.components.workable and v.components.workable.workleft > 0 and not v.components.inventoryitem then
                   v.components.workable:Destroy(inst)
                end
                if v:HasTag("monster") or v.prefab == "beefalo" or v.prefab == "babybeefalo" or v.prefab == "bunnyman" or v.prefab == "pigman" or v.prefab == "pigguard"
                   or v.prefab == "merm" or v.prefab == "monkey" or v.prefab == "tallbird" or v.prefab == "walrus" or v.prefab == "little_walrus" or v.prefab == "wasphive"
                   or v.prefab == "beehive" or v.prefab == "koalefant_summer" or v.prefab == "koalefant_winter" or v.prefab == "lureplant" or v.prefab == "penguin"
                   or v.prefab == "perd" or v.prefab == "rocky" or v.prefab == "slurper" or v.prefab == "snurtle" or v.prefab == "slurtle" or v.prefab == "slurtlehole"
                   or v.prefab == "spiderden" or v.prefab == "spiderden_2" or v.prefab == "spiderden_3" then
                   v.components.health:DoDelta(-3000)
                end
            end
            inst:RemoveTag("jump")
            inst.components.playercontroller:Enable(true)
       end )
    end
end )

    即可按下键盘J键使出如来神掌，你将腾空而起并砸向地面（不会伤血），引发剧烈的地震，震毁周围一切建筑、石头、树木，并震死绝大多数动物（不伤宠物等同伴）。如来神掌是迄今为止威力最大的武林绝学，追求和谐游戏的玩家请慎用。每次发功消耗50点饥饿值




二四六.警戒模式（按键盘F8键主角自动巡逻并战斗，再按F8键恢复手动控制）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

local items = { SWORD = "swap_spear" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
TheInput:AddKeyUpHandler(KEY_F8, function()
     if not inst:HasTag("patrol") then
        inst.components.locomotor:Stop()
        inst:SetBrain(nil)
        inst.components.talker:ShutUp()
        inst.components.playercontroller:Enable(false)
        inst:DoTaskInTime(0.3, function() 
            inst:AddTag("patrol")
            inst.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
            inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            inst:AddComponent("knownlocations")
            local brain = require "brains/frogbrain"
            inst:SetBrain(brain)
            inst:RestartBrain()
            local head = inst.components.inventory:GetEquippedItem(EQUIPSLOTS.HEAD)
            inst.components.inventory:DropItem(head)
            local hands = inst.components.inventory:GetEquippedItem(EQUIPSLOTS.HANDS)
            inst.components.inventory:DropItem(hands)
            local body = inst.components.inventory:GetEquippedItem(EQUIPSLOTS.BODY)
            inst.components.inventory:DropItem(body)
            inst.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
            inst.AnimState:Show("ARM_carry")
            inst.AnimState:Hide("ARM_normal")
            inst.HUD.controls.crafttabs:Hide()
            inst.HUD.controls.inv:Hide()
            local light = inst.entity:AddLight()
            light:SetIntensity(.8)
            light:SetRadius(20)
            light:SetFalloff(.6)
            light:Enable(true)
            light:SetColour(255/255,255/255,0/255)
            inst.components.locomotor.walkspeed = 10
            inst.components.locomotor.runspeed = 15
            inst:SetStateGraph("SGshadowwaxwell")
            inst.components.health:SetInvincible(true)
            inst.components.hunger:Pause()
            inst.components.sanity.ignore = true
            inst.components.temperature:SetTemp(20)
            inst.components.combat:SetDefaultDamage(200)
            inst.components.combat:SetAttackPeriod(0.25)
            inst.components.combat:SetRange(3)
            inst.components.combat:SetRetargetFunction(1, function(inst)
                if not inst.components.health:IsDead() then
                    return FindEntity(inst, 50, function(guy)
                        if guy.components.health and not guy.components.health:IsDead() then
                           return guy.components.combat.target == inst or inst.components.combat.target == guy or guy:HasTag("monster")
                        end
                    end )
                end
            end )
            inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
        end )
     else
        inst.components.locomotor:Stop()
        inst:SetBrain(nil)
        inst.components.talker:ShutUp()
        inst:DoTaskInTime(0.3, function() 
            inst:RemoveTag("patrol")
            inst.SoundEmitter:PlaySound("dontstarve/HUD/research_available")
            inst.AnimState:SetBloomEffectHandle("")
            local brain = require "brains/wilsonbrain"
            inst:SetBrain(brain)
            inst:RestartBrain()
            inst:RemoveComponent("knownlocations")
            inst.AnimState:Hide("ARM_carry")
            inst.AnimState:Show("ARM_normal")
            inst.HUD.controls.crafttabs:Show()
            inst.HUD.controls.inv:Show()
            inst.Light:Enable(false)
            inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
            inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
            inst:SetStateGraph("SGwilson")
            inst.components.health:SetInvincible(false)
            inst.components.hunger:Resume()
            inst.components.sanity.ignore = false
            inst.components.temperature:SetTemp(nil)
            inst.components.hunger:DoDelta(-inst.components.hunger.max*.5)
            inst.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
            inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD)
            inst.components.combat:SetRange(2)
            inst.components.combat:SetTarget(nil)
            inst.components.combat:SetRetargetFunction(nil, nil )
            inst.components.combat:SetKeepTargetFunction(nil)
            inst.components.playercontroller:Enable(true)
        end )
    end
end )

    即可按键盘F8键，开启主角警戒模式，CPU将接管你对主角的控制权，让主角自动巡逻并保护所在地区（夜晚站岗），一旦发现敌人，会自行战斗，由于主角的生命、脑、饥饿值已全部锁死，并且无惧寒冷和黑暗，所以你无须担心主角的安全。再次按键盘F8键即可恢复手动操作，并扣减一半饥饿值，注意及时补充食物。开启警戒模式前，请将身上的装备全部卸下，否则将掉落在地上




二四七.观赏秃鹫（用蛛丝种笼中的秃鹫，喂腐烂食物产种子，喂肉生高鸟蛋）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\spoiledfood.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddComponent("tradable")


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\silk.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makecage(inst)
    local pt = inst:GetPosition()
    local cage = SpawnPrefab("silk")
    cage.Transform:SetPosition(pt.x, pt.y, pt.z)
    cage.AnimState:SetBank("birdcage")
    cage.AnimState:SetBuild("bird_cage")
    cage.AnimState:PlayAnimation("idle")
    cage.AnimState:SetMultColour(0/255,255/255,0/255,1)
    MakeObstaclePhysics(cage, .5 )
    cage:RemoveComponent("tradable")
    cage:RemoveComponent("stackable")
    cage:RemoveComponent("inventoryitem")
    cage:RemoveComponent("upgrader")
    cage:RemoveComponent("deployable")
    cage:RemoveTag("cattoy")
    cage:AddComponent("named")
    cage.components.named:SetName("Buzzard")
    cage:AddComponent("lootdropper")
    cage:AddComponent("workable")
    cage.components.workable:SetWorkAction(ACTIONS.HAMMER)
    cage.components.workable:SetWorkLeft(3)
    cage.components.workable:SetOnFinishCallback(function(cage, worker)
        SpawnPrefab("collapse_big").Transform:SetPosition(cage.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos = Vector3(cage.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 2)
        for k,v in pairs(ents) do
            if v:HasTag("cageanimal") then
               v:Remove()
            end
        end
        cage:Remove()
    end )
    cage:AddComponent("trader")
    cage.components.trader:SetAcceptTest(function(cage, item) 
        if item.prefab == "spoiled_food" or item.prefab == "meat" or item.prefab == "smallmeat" then
           return true
        end
        return false
    end )
    cage.components.trader.onaccept = function(cage, giver, item)
        GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/buzzard/taunt")
        if item.prefab == "spoiled_food" then
           for k = 1, math.random(5) do
               local names = {"carrot_seeds","corn_seeds","pumpkin_seeds","eggplant_seeds","durian_seeds","pomegranate_seeds","dragonfruit_seeds","watermelon_seeds","seeds"}
               local name = names[math.random(#names)]
               cage.components.lootdropper:SpawnLootPrefab(name)
           end
        end
        if item.prefab == "meat" or item.prefab == "smallmeat" then
           cage.components.lootdropper:SpawnLootPrefab("tallbirdegg")
        end
    end
    cage:AddTag("cages")
    local animal = SpawnPrefab("silk")
    animal.AnimState:SetBank("buzzard")
    animal.AnimState:SetBuild("buzzard_build")
    animal.AnimState:PlayAnimation("idle", true)
    animal.Transform:SetFourFaced()
    animal.Physics:SetActive(false)
    animal.entity:AddSoundEmitter()
    animal:AddTag("NOCLICK")
    animal:RemoveComponent("tradable")
    animal:RemoveComponent("stackable")
    animal:RemoveComponent("inventoryitem")
    animal:RemoveComponent("upgrader")
    animal:RemoveComponent("deployable")
    animal:RemoveTag("cattoy")
    local follower = animal.entity:AddFollower()
    follower:FollowSymbol( cage.GUID, "swap_object", -10, -220, -0.1 )
    animal:DoPeriodicTask(10, function(animal)
        animal.AnimState:PlayAnimation("caw")
        animal.SoundEmitter:PlaySound("dontstarve_DLC001/creatures/buzzard/taunt")
        animal:DoTaskInTime(1.5, function() animal.AnimState:PlayAnimation("idle", true) end )
    end )
    animal:AddTag("cageanimal")
end
local function OnDeploy (inst, pt)
    makecage(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("cages") then
       data.cages = true
    end
    if inst:HasTag("cageanimal") then
       data.cageanimal = true
    end
end
local function onload(inst, data)
    if data and data.cages then
       makecage(inst)
       inst:Remove()
    end
    if data and data.cageanimal then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蛛丝种关在笼中的秃鹫（拿着1个蛛丝对地面点鼠标右键，如果拿着多个，则不会种出来），喂它腐烂食物，会掉落随机品种的植物种子，喂大肉、小肉会生高鸟蛋。不想要观赏秃鹫了，用锤子砸掉即可




二四八.迷你花坛（用燧石种花坛，给种子长出花朵，每晚招来萤火虫）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\flint.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local names = {"f1","f2","f3","f4","f5","f6","f7","f8","f9","f10"}
local function OnDeploy (inst, pt)
    local flowerpot = SpawnPrefab("flint")
    flowerpot.Transform:SetPosition(pt.x, pt.y, pt.z)
    flowerpot.AnimState:SetBank("firepit")
    flowerpot.AnimState:SetBuild("firepit")
    flowerpot.AnimState:PlayAnimation("idle",false)
    flowerpot.Transform:SetScale(0.5, 0.8, 0.5)
    flowerpot:RemoveComponent("edible")
    flowerpot:RemoveComponent("tradable")
    flowerpot:RemoveComponent("stackable")
    flowerpot:RemoveComponent("inventoryitem")
    flowerpot:RemoveComponent("bait")
    flowerpot:RemoveTag("molebait")
    flowerpot:AddTag("flowerpot")
    flowerpot:AddComponent("workable")
    flowerpot.components.workable:SetWorkAction(ACTIONS.HAMMER)
    flowerpot.components.workable:SetWorkLeft(3)
    flowerpot.components.workable:SetOnFinishCallback(function(flowerpot)
        SpawnPrefab("collapse_big").Transform:SetPosition(flowerpot.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
        local pos1 = Vector3(flowerpot.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 0.5)
        for k,v in pairs(ents) do
            if v:HasTag("newflower") then
               v:Remove()
            end
        end
        flowerpot:Remove()
    end )
    flowerpot:ListenForEvent( "dusktime", function()
        if flowerpot:HasTag("flowering") then
           for k = 1,math.random(2,5) do
               local pt1 = flowerpot:GetPosition()
               local fireflies = SpawnPrefab("fireflies")
               fireflies.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
           end
        end
    end , GetWorld() )
    flowerpot:ListenForEvent( "daytime", function()
        local pos = Vector3(flowerpot.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 5)
        for k,v in pairs(ents) do
            if v.prefab == "fireflies" and not v.components.inventoryitem:IsHeld() then
               v:Remove()
            end
        end
    end , GetWorld() )
    flowerpot:AddComponent("trader")
    flowerpot.components.trader:SetAcceptTest(function(flowerpot, item)
        if not flowerpot:HasTag("flowering") then
           if item.prefab == "seeds" then
              return true
           end
        end
        return false
    end )
    flowerpot.components.trader.onaccept = function(flowerpot, giver, item)
        local flower = SpawnPrefab("flint")
        flower.AnimState:SetBank("flowers")
        flower.AnimState:SetBuild("flowers")
        flower.animname = names[math.random(#names)]
        flower.AnimState:PlayAnimation(flower.animname)
        flower.AnimState:SetRayTestOnBB(true)
        flower.Transform:SetScale(1.5, 1.5, 1.5)
        flower.Physics:SetActive(false)
        local follower = flower.entity:AddFollower()
        follower:FollowSymbol( flowerpot.GUID, "swap_object", 0, -50, 0 )
        flower:RemoveComponent("edible")
        flower:RemoveComponent("tradable")
        flower:RemoveComponent("stackable")
        flower:RemoveComponent("inventoryitem")
        flower:RemoveComponent("bait")
        flower:RemoveTag("molebait")
        flower:AddComponent("sanityaura")
        flower.components.sanityaura.aura = TUNING.SANITYAURA_SMALL
        flower:AddComponent("pickable")
        flower.components.pickable.picksound = "dontstarve/wilson/pickup_plants"
        flower.components.pickable:SetUp("petals", 0.1)
	flower.components.pickable.onpickedfn = function(flower)
            flower:Remove()
            flower = nil
            flowerpot:RemoveTag("flowering")
        end
        flower:AddTag("newflower")
        flower:AddTag("goodbye")
        flowerpot:AddTag("flowering")
    end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("flowerpot") then
        data.flowerpot = true
    end
    if inst:HasTag("flowering") then
        data.flowering = true
    end
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.flowerpot then
       inst.AnimState:SetBank("firepit")
       inst.AnimState:SetBuild("firepit")
       inst.AnimState:PlayAnimation("idle",false)
       inst.Transform:SetScale(0.5, 0.8, 0.5)
       inst:RemoveComponent("edible")
       inst:RemoveComponent("tradable")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("bait")
       inst:RemoveTag("molebait")
       inst:AddTag("flowerpot")
       inst:AddComponent("workable")
       inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
       inst.components.workable:SetWorkLeft(3)
       inst.components.workable:SetOnFinishCallback(function(inst)
           SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
           GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
           local pos1 = Vector3(inst.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 0.5)
           for k,v in pairs(ents) do
               if v:HasTag("newflower") then
                  v:Remove()
               end
           end
           inst:Remove()
       end )
       inst:ListenForEvent( "dusktime", function()
           if inst:HasTag("flowering") then
              for k = 1,math.random(2,5) do
                  local pt1 = inst:GetPosition()
                  local fireflies = SpawnPrefab("fireflies")
                  fireflies.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
              end
           end
       end , GetWorld() )
       inst:ListenForEvent( "daytime", function()
           local pos = Vector3(inst.Transform:GetWorldPosition())
           local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 5)
           for k,v in pairs(ents) do
               if v.prefab == "fireflies" and not v.components.inventoryitem:IsHeld() then
                  v:Remove()
               end
           end
       end , GetWorld() )
       inst:AddComponent("trader")
       inst.components.trader:SetAcceptTest(function(inst, item)
           if not inst:HasTag("flowering") then
              if item.prefab == "seeds" then
                 return true
              end
           end
           return false
       end )
       inst.components.trader.onaccept = function(inst, giver, item)
           local flower = SpawnPrefab("flint")
           flower.AnimState:SetBank("flowers")
           flower.AnimState:SetBuild("flowers")
           flower.animname = names[math.random(#names)]
           flower.AnimState:PlayAnimation(flower.animname)
           flower.AnimState:SetRayTestOnBB(true)
           flower.Transform:SetScale(1.5, 1.5, 1.5)
           flower.Physics:SetActive(false)
           local follower = flower.entity:AddFollower()
           follower:FollowSymbol( inst.GUID, "swap_object", 0, -50, 0 )
           flower:RemoveComponent("edible")
           flower:RemoveComponent("tradable")
           flower:RemoveComponent("stackable")
           flower:RemoveComponent("inventoryitem")
           flower:RemoveComponent("bait")
           flower:RemoveTag("molebait")
           flower:AddComponent("sanityaura")
           flower.components.sanityaura.aura = TUNING.SANITYAURA_SMALL
           flower:AddComponent("pickable")
           flower.components.pickable.picksound = "dontstarve/wilson/pickup_plants"
           flower.components.pickable:SetUp("petals", 0.1)
	   flower.components.pickable.onpickedfn = function(flower)
               flower:Remove()
               flower = nil
               inst:RemoveTag("flowering")
           end
           flower:AddTag("newflower")
           flower:AddTag("goodbye")
           inst:AddTag("flowering")
       end
    end
    if data and data.flowering then
       local flower = SpawnPrefab("flint")
       flower.AnimState:SetBank("flowers")
       flower.AnimState:SetBuild("flowers")
       flower.animname = names[math.random(#names)]
       flower.AnimState:PlayAnimation(flower.animname)
       flower.AnimState:SetRayTestOnBB(true)
       flower.Transform:SetScale(1.5, 1.5, 1.5)
       flower.Physics:SetActive(false)
       local follower = flower.entity:AddFollower()
       follower:FollowSymbol( inst.GUID, "swap_object", 0, -50, 0 )
       flower:RemoveComponent("edible")
       flower:RemoveComponent("tradable")
       flower:RemoveComponent("stackable")
       flower:RemoveComponent("inventoryitem")
       flower:RemoveComponent("bait")
       flower:RemoveTag("molebait")
       flower:AddComponent("sanityaura")
       flower.components.sanityaura.aura = TUNING.SANITYAURA_SMALL
       flower:AddComponent("pickable")
       flower.components.pickable.picksound = "dontstarve/wilson/pickup_plants"
       flower.components.pickable:SetUp("petals", 0.1)
       flower.components.pickable.onpickedfn = function(flower)
           flower:Remove()
           flower = nil
           inst:RemoveTag("flowering")
       end
       flower:AddTag("newflower")
       flower:AddTag("goodbye")
       inst:AddTag("flowering")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用燧石种迷你花坛，在花坛中放入1个种子（拿着种子对花坛点鼠标左键），可开一朵花，品种随机。鼠标左键点花朵，可摘花（获得花瓣）。当花坛中有花时，靠近可以补脑，并且每晚都会招来萤火虫（天亮时消失），尽情捕捉吧。如果同时修改了“网上宠宠店”，就可以将抓到的萤火虫在线卖掉换黄金。不想要迷你花坛时，用锤子砸掉即可




二四九.橡树盆栽（用化肥种橡树盆栽，每天掉落橡果，靠近可补脑，鼠标左键点击树叶可变色）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\fertilizer.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createoak(inst)
    local pt = inst:GetPosition()
    local oak = SpawnPrefab("fertilizer")
    oak.Transform:SetPosition(pt.x, pt.y, pt.z)
    oak.AnimState:SetBank("fertilizer")
    oak.AnimState:SetBuild("fertilizer")
    oak.AnimState:PlayAnimation("idle")
    oak.Transform:SetScale(1.2, 1.2, 1.2)
    oak:RemoveComponent("inventoryitem")
    oak:RemoveComponent("finiteuses")
    oak:RemoveComponent("fertilizer")
    oak:RemoveComponent("smotherer")
    oak:RemoveComponent("deployable")
    oak:AddTag("NOCLICK")
    oak:ListenForEvent( "daytime", function()
        local pos = Vector3(oak.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 2)
        for k,v in pairs(ents) do
            if v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
               if v.prefab == "acorn" then
                  v:Remove()
               end
            end
        end
        oak:DoTaskInTime(0.3, function(oak)
            oak:StartThread(function()
                for k = 1,math.random(3,6) do
                    local pt1 = oak:GetPosition()
                    local acorn = SpawnPrefab("acorn")
                    acorn.Transform:SetPosition(pt1.x+(math.random(2)-math.random(2)), 5, pt1.z+(math.random(2)-math.random(2)))
                    Sleep(0.3)
                end
            end )
        end )
    end , GetWorld() )
    oak:AddTag("oak")
    oak.tree = SpawnPrefab("fertilizer")
    oak.tree.AnimState:SetBank("tree_leaf")
    oak.tree.AnimState:SetBuild("tree_leaf_trunk_build")
    local names = {"tree_leaf_green_build","tree_leaf_red_build","tree_leaf_orange_build","tree_leaf_yellow_build"}
    local name = names[math.random(#names)]
    oak.tree.AnimState:OverrideSymbol("swap_leaves", name, "swap_leaves")
    oak.tree.AnimState:PlayAnimation("idle_tall")
    oak.tree.Transform:SetScale(0.8, 0.8, 0.8)
    oak.tree.Physics:SetActive(false)
    oak.tree:RemoveComponent("inventoryitem")
    oak.tree:RemoveComponent("finiteuses")
    oak.tree:RemoveComponent("fertilizer")
    oak.tree:RemoveComponent("smotherer")
    oak.tree:RemoveComponent("deployable")
    local follower = oak.tree.entity:AddFollower()
    follower:FollowSymbol( oak.GUID, "swap_object", -1, -115, 0 )
    oak.tree:AddComponent("sanityaura")
    oak.tree.components.sanityaura.aura = TUNING.SANITYAURA_MED
    oak.tree:AddComponent("workable")
    oak.tree.components.workable:SetWorkAction(ACTIONS.CHOP)
    oak.tree.components.workable:SetWorkLeft(1)
    oak.tree.components.workable:SetOnFinishCallback(function()
        SpawnPrefab("collapse_big").Transform:SetPosition(oak.tree.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos = Vector3(oak.tree.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 1)
        for k,v in pairs(ents) do
            if v:HasTag("oak") then
               v:Remove()
            end
        end
        oak.tree:Remove()
    end )
    oak.tree.components.inspectable.getstatus = function()
        local names = {"tree_leaf_green_build","tree_leaf_red_build","tree_leaf_orange_build","tree_leaf_yellow_build"}
        local name = names[math.random(#names)]
        oak.tree.AnimState:OverrideSymbol("swap_leaves", name, "swap_leaves")
    end
    oak.tree:AddTag("goodbye")
end
local function OnDeploy (inst, pt)
    createoak(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("oak") then
        data.oak = true
    end
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.oak then
       createoak(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用化肥种橡树盆栽，四季常青，每天清晨掉落橡果，靠近可补脑。鼠标左键点橡树，可改变树叶的颜色。不想要橡树盆栽了，用斧子砍掉即可。化肥在种植选项（画着胡萝卜）下，用3个便便、2个硬骨头、4个木头制造




二五０.小油灯（用蜘蛛腺体种小油灯，放在地上自动点燃，无限燃烧，可烧炭、烤食物、取暖、照明）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\log.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("cookable")
    inst.components.cookable.product = "charcoal"


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\spidergland.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local colours=
{
    {198/255,43/255,43/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {233/255,208/255,69/255},
    {109/255,50/255,163/255},
    {222/255,126/255,39/255},
}
local function OnDeploy (inst, pt)
    local lamp = SpawnPrefab("spidergland")
    lamp.Transform:SetPosition(pt.x, pt.y, pt.z)
    lamp.AnimState:SetBank("trinkets")
    lamp.AnimState:SetBuild("trinkets")
    lamp.AnimState:PlayAnimation(tostring(2))
    lamp.components.inventoryitem:ChangeImageName("trinket_2")
    lamp.entity:AddSoundEmitter()
    lamp.Transform:SetScale(1.2,1.2,1.2)
    lamp.colour_idx = math.random(#colours)
    lamp.AnimState:SetMultColour(colours[lamp.colour_idx][1],colours[lamp.colour_idx][2],colours[lamp.colour_idx][3],1)
    lamp:RemoveComponent("stackable")
    lamp:RemoveComponent("tradable")
    lamp:RemoveComponent("healer")
    lamp:RemoveComponent("burnable")
    lamp:RemoveComponent("propagator")
    lamp:RemoveComponent("deployable")
    lamp:RemoveTag("cattoy")
    lamp:AddComponent("cooker")
    lamp:AddComponent("burnable")
    lamp.components.burnable:SetFXLevel(3)
    lamp.components.burnable:AddBurnFX("campfirefire", Vector3(0,0.5,0) )
    lamp.components.burnable:Ignite(true)
    lamp.components.inventoryitem:SetOnDroppedFn(function() lamp.components.burnable:Ignite(true) lamp:AddTag("ontheground") end )
    lamp.components.inventoryitem:SetOnPickupFn(function() lamp.components.burnable:Extinguish() lamp:RemoveTag("ontheground") end )
    lamp.components.inventoryitem:SetOnPutInInventoryFn(function() lamp.components.burnable:Extinguish() lamp:RemoveTag("ontheground") end )
    lamp:ListenForEvent("onignite", function()
        if not lamp.components.cooker then lamp:AddComponent("cooker") end
    end )
    lamp:ListenForEvent("onextinguish", function()
        lamp.SoundEmitter:PlaySound("dontstarve/common/fireOut")  
        if lamp.components.cooker then lamp:RemoveComponent("cooker") end
    end )
    lamp:AddComponent("workable")
    lamp.components.workable:SetWorkAction(ACTIONS.HAMMER)
    lamp.components.workable:SetWorkLeft(3)
    lamp.components.workable:SetOnFinishCallback(function(lamp)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(lamp.Transform:GetWorldPosition())
        lamp:Remove()
    end )
    lamp:AddTag("ontheground")
    lamp:AddTag("light")
    lamp:AddTag("lamps")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

local function onsave(inst, data)
    if inst:HasTag("lamps") then
       data.lamps = true
    end
    if inst:HasTag("ontheground") then
       data.ontheground = true
    end
    data.colour_idx = inst.colour_idx
end
local function onload(inst, data)
  if data and data.lamps then
    inst.AnimState:SetBank("trinkets")
    inst.AnimState:SetBuild("trinkets")
    inst.AnimState:PlayAnimation(tostring(2))
    inst.components.inventoryitem:ChangeImageName("trinket_2")
    inst.entity:AddSoundEmitter()
    inst.Transform:SetScale(1.2,1.2,1.2)
    inst.colour_idx = math.random(#colours)
    inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("healer")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("cattoy")
    inst:AddComponent("burnable")
    inst.components.burnable:SetFXLevel(3)
    inst.components.burnable:AddBurnFX("campfirefire", Vector3(0,0.5,0) )
    inst.components.inventoryitem:SetOnDroppedFn(function() inst.components.burnable:Ignite(true) inst:AddTag("ontheground") end )
    inst.components.inventoryitem:SetOnPickupFn(function() inst.components.burnable:Extinguish() inst:RemoveTag("ontheground") end )
    inst.components.inventoryitem:SetOnPutInInventoryFn(function() inst.components.burnable:Extinguish() inst:RemoveTag("ontheground") end )
    inst:ListenForEvent("onignite", function()
        if not inst.components.cooker then inst:AddComponent("cooker") end
    end )
    inst:ListenForEvent("onextinguish", function()
        inst.SoundEmitter:PlaySound("dontstarve/common/fireOut")  
        if inst.components.cooker then inst:RemoveComponent("cooker") end
    end )
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst:Remove()
    end )
    inst:AddTag("light")
    inst:AddTag("lamps")
  end
  if data and data.ontheground then
    inst.components.burnable:Ignite(true)
    inst:AddComponent("cooker")
    inst:AddTag("ontheground")
  end
  if data and data.colour_idx then
     inst.colour_idx = math.min(#colours, data.colour_idx)
     inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜘蛛腺体种小油灯（颜色随机），无须任何燃料，放在地上自动点燃，拿起来自动熄灭。拿着木头对油灯按鼠标左键，可将木头烧成炭。也可烤食物、取暖、照明，出行必备。不想要小油灯时，用锤子砸掉即可




二五一.我的王国（用远古短棒种国王雕像，可获得税收，有警察巡逻并听你调遣）

    用记事本打开游戏目录\data\scripts\prefabs\ruins_bat.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local items = { SWORD = "swap_spear" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function createguru(inst)
    local pt = inst:GetPosition()
    local guru = SpawnPrefab("ruins_bat")
    guru.Transform:SetPosition(pt.x, pt.y, pt.z)
    guru.AnimState:SetBank("wilson")
    if GetPlayer().prefab == "wilson" then guru.AnimState:SetBuild("wilson") end
    if GetPlayer().prefab == "wendy" then guru.AnimState:SetBuild("wendy") end
    if GetPlayer().prefab == "wes" then guru.AnimState:SetBuild("wes") end
    if GetPlayer().prefab == "wickerbottom" then guru.AnimState:SetBuild("wickerbottom") end
    if GetPlayer().prefab == "willow" then guru.AnimState:SetBuild("willow") end
    if GetPlayer().prefab == "wolfgang" then guru.AnimState:SetBuild("wolfgang") end
    if GetPlayer().prefab == "wx78" then guru.AnimState:SetBuild("wx78") end
    if GetPlayer().prefab == "woodie" then guru.AnimState:SetBuild("woodie") end
    if GetPlayer().prefab == "waxwell" then guru.AnimState:SetBuild("waxwell") end
    if GetPlayer().prefab == "wathgrithr" then guru.AnimState:SetBuild("wathgrithr") end
    if GetPlayer().prefab == "webber" then guru.AnimState:SetBuild("webber") end
    guru.AnimState:PlayAnimation("idle")
    guru.AnimState:OverrideSymbol("swap_object", "swap_cane", "swap_cane")
    guru.AnimState:Hide("ARM_normal") 
    guru.AnimState:Show("ARM_carry")
    guru.AnimState:OverrideSymbol("swap_hat", "hat_ruins", "swap_hat")
    guru.AnimState:Show("HAT")
    guru.AnimState:Show("HAT_HAIR")
    guru.AnimState:Hide("HAIR_NOHAT")
    guru.AnimState:Hide("HAIR")
    guru.Transform:SetFourFaced()
    guru.Transform:SetRotation( 0 )
    guru.Transform:SetScale(3.5, 3.5, 3.5)
    local shadow = guru.entity:AddDynamicShadow()
    shadow:SetSize( 6, 3.5 )
    local minimap = guru.entity:AddMiniMapEntity()
    minimap:SetIcon( "obelisk.png" )
    guru.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    guru:AddTag("guru")
    guru:RemoveTag("sharp")
    guru:RemoveComponent("weapon")
    guru:RemoveComponent("finiteuses")
    guru:RemoveComponent("inventoryitem")
    guru:RemoveComponent("equippable")
    guru:RemoveComponent("deployable")
    local light = guru.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    guru:AddComponent("workable")
    guru.components.workable:SetWorkAction(ACTIONS.HAMMER)
    guru.components.workable:SetWorkLeft(5)
    guru.components.workable:SetOnFinishCallback(function(guru)
        SpawnPrefab("collapse_big").Transform:SetPosition(guru.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        guru:Remove()
    end )
    guru:AddComponent("pickable")
    guru.components.pickable:SetUp("goldnugget", 480, math.random(15,25))
    guru.components.pickable:SetOnPickedFn(function(guru) guru.AnimState:SetBloomEffectHandle("") end )
    guru.components.pickable:SetOnRegenFn(function(guru) guru.AnimState:SetBloomEffectHandle("shaders/anim.ksh") end )
    guru:ListenForEvent( "daytime", function()
        for k = 1,math.random(10,25) do
            local pt0 = guru:GetPosition()
            local ground = GetWorld()
            local x = pt0.x+(math.random(50)-math.random(50))
            local z = pt0.z+(math.random(50)-math.random(50))
            local tile = ground.Map:GetTileAtPoint(x,0, z)
            if tile ~= GROUND.IMPASSABLE and tile ~= GROUND.INVALID then
               local militia = SpawnPrefab("ruins_bat")
               militia.Transform:SetPosition(x,0,z)
               militia.AnimState:SetBank("wilson")
               local buildnames = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
               local buildname = buildnames[math.random(#buildnames)]
               militia.AnimState:SetBuild(buildname)
               militia.AnimState:OverrideSymbol("swap_hat", "hat_walrus", "swap_hat")
               militia.AnimState:OverrideSymbol("swap_body", "armor_wood", "swap_body")
               militia.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
               militia.AnimState:Show("HAT")
               militia.AnimState:Show("HAT_HAIR")
               militia.AnimState:Hide("HAIR_NOHAT")
               militia.AnimState:Hide("HAIR")
               militia.AnimState:Hide("ARM_normal")
               militia.AnimState:Show("ARM_carry")
               militia.AnimState:PlayAnimation("idle")
               militia.Transform:SetFourFaced()
               local shadow = militia.entity:AddDynamicShadow()
               shadow:SetSize( 1.3, .6 )
               MakeCharacterPhysics(militia, 75, .5)
               local minimap = militia.entity:AddMiniMapEntity()
               minimap:SetIcon( "statue_small.png" )
               militia:AddTag("militia")
               militia:AddComponent("locomotor")
               militia.components.locomotor.walkspeed = 5
               militia.components.locomotor.runspeed = 10
               militia:SetStateGraph("SGshadowwaxwell")
               local brain = require "brains/frogbrain"
               militia:SetBrain(brain)
               militia:RemoveTag("sharp")
               militia:RemoveComponent("weapon")
               militia:RemoveComponent("finiteuses")
               militia:RemoveComponent("inventoryitem")
               militia:RemoveComponent("equippable")
               militia:RemoveComponent("deployable")
               militia:AddComponent("follower")
               militia:AddComponent("knownlocations")
               militia:AddComponent("health")
               militia.components.health:SetMaxHealth(1200)
               militia.components.health.nofadeout = true
               militia:AddComponent("combat")
               militia.components.combat:SetDefaultDamage(20)
               militia.components.combat:SetAttackPeriod(1)
               militia.components.combat.hiteffectsymbol = "torso"
               militia.components.combat:SetRange(2, 3)
               militia.components.combat:SetRetargetFunction(2, function(militia)
                   if not militia.components.health:IsDead() then
                       return FindEntity(militia, 25, function(guy)
                           if guy.components.health and not guy.components.health:IsDead() then
                              return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                           end
                       end )
                   end
               end )
               militia.components.combat:SetKeepTargetFunction(function(militia, target) return target and target:IsValid() end )
               militia:ListenForEvent("attacked", function(militia, data)
                   militia.components.combat:SetTarget(data.attacker)
               end )
               militia.components.inspectable.getstatus = function(militia)
                   if not militia:HasTag("letsgo") then
                      local brain = require "brains/abigailbrain"
                      militia:SetBrain(brain)
                      militia:RestartBrain()
                      militia.components.follower:SetLeader(GetPlayer())
                      militia:AddTag("letsgo")
                   else
                      local brain = require "brains/frogbrain"
                      militia:SetBrain(brain)
                      militia:RestartBrain()
                      militia.components.follower:SetLeader(nil)
                      militia:RemoveTag("letsgo")
                   end
               end
               militia:ListenForEvent( "nighttime", function() militia:Remove() end , GetWorld())
            end
        end
    end , GetWorld())
end
local function OnDeploy (inst, pt)
    if GetPlayer().components.inventory:Has("goldnugget", 1000) then 
       GetPlayer().components.inventory:ConsumeByName("goldnugget", 1000)
       createguru(inst)
       inst:Remove()
    end
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("guru") then
        data.guru = true
    end
    if inst:HasTag("militia") then
        data.militia = true
    end
    if inst:HasTag("letsgo") then
        data.letsgo = true
    end
end
local function onload(inst, data)
    if data and data.guru then
       createguru(inst)
       inst:Remove()
    end
    if data and data.militia then
       inst.AnimState:SetBank("wilson")
       local buildnames = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
       local buildname = buildnames[math.random(#buildnames)]
       inst.AnimState:SetBuild(buildname)
       inst.AnimState:OverrideSymbol("swap_hat", "hat_walrus", "swap_hat")
       inst.AnimState:OverrideSymbol("swap_body", "armor_wood", "swap_body")
       inst.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
       inst.AnimState:Show("HAT")
       inst.AnimState:Show("HAT_HAIR")
       inst.AnimState:Hide("HAIR_NOHAT")
       inst.AnimState:Hide("HAIR")
       inst.AnimState:Hide("ARM_normal")
       inst.AnimState:Show("ARM_carry")
       inst.AnimState:PlayAnimation("idle")
       inst.Transform:SetFourFaced()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize( 1.3, .6 )
       MakeCharacterPhysics(inst, 75, .5)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "statue_small.png" )
       inst:AddTag("militia")
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 5
       inst.components.locomotor.runspeed = 10
       inst:SetStateGraph("SGshadowwaxwell")
       local brain = require "brains/frogbrain"
       inst:SetBrain(brain)
       inst:RemoveTag("sharp")
       inst:RemoveComponent("weapon")
       inst:RemoveComponent("finiteuses")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("equippable")
       inst:RemoveComponent("deployable")
       inst:AddComponent("follower")
       inst:AddComponent("knownlocations")
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(1200)
       inst.components.health.nofadeout = true
       inst:AddComponent("combat")
       inst.components.combat:SetDefaultDamage(20)
       inst.components.combat:SetAttackPeriod(1)
       inst.components.combat.hiteffectsymbol = "torso"
       inst.components.combat:SetRange(2, 3)
       inst.components.combat:SetRetargetFunction(2, function(inst)
           if not inst.components.health:IsDead() then
              return FindEntity(inst, 25, function(guy)
                  if guy.components.health and not guy.components.health:IsDead() then
                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                  end
              end )
           end
       end )
       inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
       inst:ListenForEvent("attacked", function(inst, data)
           inst.components.combat:SetTarget(data.attacker)
       end )
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("letsgo") then
              local brain = require "brains/abigailbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
              inst:AddTag("letsgo")
           else
              local brain = require "brains/frogbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(nil)
              inst:RemoveTag("letsgo")
           end
       end
       inst:ListenForEvent( "nighttime", function() inst:Remove() end , GetWorld())
    end
    if data and data.letsgo then
       local brain = require "brains/abigailbrain"
       inst:SetBrain(brain)
       inst:RestartBrain()
       inst.components.follower:SetLeader(GetPlayer())
       inst:AddTag("letsgo")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在身上有1000个黄金时，用远古短棒种国王雕像（你自己的形象），宣誓你在这块大陆上的主权，将消费1000个黄金，身上黄金数不足时，不会种出雕像。当雕像发光时，代表当地的税收已经上缴（每日一次），用鼠标左键点雕像，可收到税款。每天白天，雕像周围会有警察巡逻，黑夜将离去，他们会攻击任何来犯的敌人。鼠标左键点警察（不要拿武器，以免误伤），可让他跟随你（黑夜离去），再次点击可解除跟随。在大陆各地树起国王雕像，建立你的王国，统治整块大陆吧。可通过小地图查看你的势力范围，国王雕像在小地图上显示为方尖碑图标，警察显示为天使雕像图标。不想要国王雕像时，用锤子砸掉即可。远古短棒在远古选项（画着远古祭坛）下，用3个活木头、4个铥矿石、4个噩梦燃料制造，制造时须靠近远古祭坛




二五二.鲜果龙树（用蝙蝠棒种龙树，每天掉落水果，可上树）

    用记事本打开游戏目录\data\scripts\prefabs\batbat.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local colours=
{
    {198/255,43/255,43/255},
    {0/255,255/255,0/255},
    {0/255,0/255,255/255},
    {255/255,255/255,0/255},
    {109/255,50/255,163/255},
    {255/255,0/255,0/255},
    {255/255,255/255,255/255},
}
local function createtree(inst)
    local pt = inst:GetPosition()
    local phantom = SpawnPrefab("batbat")
    phantom.Transform:SetPosition(pt.x, pt.y, pt.z)
    phantom.AnimState:SetBank("firepit")
    phantom.AnimState:SetBuild("firepit")
    phantom.AnimState:PlayAnimation("idle",false)
    phantom.Transform:SetScale(0.8, 0.8, 0.8)
    phantom:RemoveComponent("weapon")
    phantom:RemoveComponent("finiteuses")
    phantom:RemoveComponent("inventoryitem")
    phantom:RemoveComponent("equippable")
    phantom:RemoveComponent("deployable")
    phantom:RemoveTag("dull")
    phantom:AddTag("NOCLICK")
    local light = phantom.entity:AddLight()
    phantom.Light:SetFalloff(0.6)
    phantom.Light:SetIntensity(.8)
    phantom.Light:SetRadius(5)
    phantom.colour_idx = math.random(#colours)
    phantom.Light:SetColour(colours[phantom.colour_idx][1],colours[phantom.colour_idx][2],colours[phantom.colour_idx][3])
    phantom.Light:Enable(true)
    phantom:DoPeriodicTask(15, function()
        phantom.colour_idx = math.random(#colours)
        phantom.Light:SetColour(colours[phantom.colour_idx][1],colours[phantom.colour_idx][2],colours[phantom.colour_idx][3])
    end )
    phantom:ListenForEvent( "daytime", function()
        local pos = Vector3(phantom.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 5)
        for k,v in pairs(ents) do
            if v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
               if v.prefab == "durian" or v.prefab == "pomegranate" or v.prefab == "dragonfruit" then
                  v:Remove()
               end
            end
        end
        phantom:DoTaskInTime(0.3, function(phantom)
            phantom:StartThread(function()
                for k = 1,math.random(3,7) do
                    local pt1 = phantom:GetPosition()
                    local names = {"durian","pomegranate","dragonfruit"}
                    local name = names[math.random(#names)]
                    local fruit = SpawnPrefab(name)
                    fruit.Transform:SetPosition(pt1.x+(math.random(5)-math.random(5)), 5, pt1.z+(math.random(5)-math.random(5)))
                    Sleep(0.3)
                end
            end )
        end )
    end , GetWorld() )
    phantom:AddTag("phantom")
    phantom.long = SpawnPrefab("batbat")
    phantom.long.AnimState:SetBank("worm")
    phantom.long.AnimState:SetBuild("worm")
    phantom.long.AnimState:SetPercent("atk", 0.40)
    phantom.long.Transform:SetScale(1.5, 1.5, 1.5)
    phantom.long.Physics:SetActive(false)
    phantom.long:RemoveComponent("weapon")
    phantom.long:RemoveComponent("finiteuses")
    phantom.long:RemoveComponent("inventoryitem")
    phantom.long:RemoveComponent("equippable")
    phantom.long:RemoveComponent("deployable")
    phantom.long:RemoveTag("dull")
    local follower = phantom.long.entity:AddFollower()
    follower:FollowSymbol( phantom.GUID, "swap_object", 10, -90, 0 )
    phantom.long.components.inspectable.getstatus = function()
        if not GetPlayer():HasTag("climbtree") then
           GetPlayer():AddTag("climbtree")
           GetPlayer().components.playercontroller:Enable(false)
           local pt0 = phantom:GetPosition()
           GetPlayer().Transform:SetPosition(pt0.x, 10.2, pt0.z)
           GetPlayer():DoTaskInTime(5, function()
               GetPlayer().Transform:SetPosition(pt0.x, 0, pt0.z)
               GetPlayer():RemoveTag("climbtree")
               GetPlayer().components.playercontroller:Enable(true)
           end )
        end
    end
    phantom.long:AddTag("lightningrod")
    phantom.long:ListenForEvent("lightningstrike", function()
        phantom.long.AnimState:SetBloomEffectHandle( "shaders/anim.ksh" )
        phantom.long:DoTaskInTime(60, function()
            phantom.long.AnimState:SetBloomEffectHandle("")
        end )
    end )
    phantom.long:AddComponent("sanityaura")
    phantom.long.components.sanityaura.aura = TUNING.SANITYAURA_MED
    phantom.long:AddTag("goodbye")
    phantom.guo1 = SpawnPrefab("batbat")
    phantom.guo1.AnimState:SetBank("durian")
    phantom.guo1.AnimState:SetBuild("durian")
    phantom.guo1.AnimState:PlayAnimation("idle")
    phantom.guo1.Transform:SetScale(1.5, 1.5, 1.5)
    phantom.guo1.Physics:SetActive(false)
    phantom.guo1:RemoveComponent("weapon")
    phantom.guo1:RemoveComponent("finiteuses")
    phantom.guo1:RemoveComponent("inventoryitem")
    phantom.guo1:RemoveComponent("equippable")
    phantom.guo1:RemoveComponent("deployable")
    phantom.guo1:RemoveTag("dull")
    local follower = phantom.guo1.entity:AddFollower()
    follower:FollowSymbol( phantom.GUID, "swap_object", -550, -580, 0 )
    phantom.guo1:AddTag("NOCLICK")
    phantom.guo1:AddTag("goodbye")
    phantom.guo2 = SpawnPrefab("batbat")
    phantom.guo2.AnimState:SetBank("pomegranate")
    phantom.guo2.AnimState:SetBuild("pomegranate")
    phantom.guo2.AnimState:PlayAnimation("idle")
    phantom.guo2.Transform:SetScale(1.5, 1.5, 1.5)
    phantom.guo2.Physics:SetActive(false)
    phantom.guo2:RemoveComponent("weapon")
    phantom.guo2:RemoveComponent("finiteuses")
    phantom.guo2:RemoveComponent("inventoryitem")
    phantom.guo2:RemoveComponent("equippable")
    phantom.guo2:RemoveComponent("deployable")
    phantom.guo2:RemoveTag("dull")
    local follower = phantom.guo2.entity:AddFollower()
    follower:FollowSymbol( phantom.GUID, "swap_object", 610, -690, 0 )
    phantom.guo2:AddTag("NOCLICK")
    phantom.guo2:AddTag("goodbye")
    phantom.guo3 = SpawnPrefab("batbat")
    phantom.guo3.AnimState:SetBank("dragonfruit")
    phantom.guo3.AnimState:SetBuild("dragonfruit")
    phantom.guo3.AnimState:PlayAnimation("idle")
    phantom.guo3.Transform:SetScale(1.5, 1.5, 1.5)
    phantom.guo3.Physics:SetActive(false)
    phantom.guo3:RemoveComponent("weapon")
    phantom.guo3:RemoveComponent("finiteuses")
    phantom.guo3:RemoveComponent("inventoryitem")
    phantom.guo3:RemoveComponent("equippable")
    phantom.guo3:RemoveComponent("deployable")
    phantom.guo3:RemoveTag("dull")
    local follower = phantom.guo3.entity:AddFollower()
    follower:FollowSymbol( phantom.GUID, "swap_object", -290, -1385, 0 )
    phantom.guo3:AddTag("NOCLICK")
    phantom.guo3:AddTag("goodbye")
end
local function OnDeploy (inst, pt)
    createtree(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("phantom") then
        data.phantom = true
    end
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.phantom then
       createtree(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
MakeLargeBurnable(inst)
MakeLargePropagator(inst)

    即可用蝙蝠棒种龙树，靠近可补脑，每天会掉落各种水果。龙树可吸收闪电，起到避雷针的作用。鼠标左键点龙树，会爬上树顶眺望风景，5秒后滑下。龙树会不断变化七彩光，夜晚可照明。不想要龙树时，烧掉即可。蝙蝠棒在魔法选项（画着红骷髅）下，用5个蝙蝠翅膀、2个活木头、1个紫宝石制造




二五三.小病小灾（主角会感冒、食物中毒，吃曼德拉草可痊愈）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("eater")的下一行插入以下内容：

local function OnEat(inst, food)
    if food and food.prefab ~= "mandrake" then
        if math.random()<0.1 then
           if not inst:HasTag("poisoning") and not inst:HasTag("fever") then
              inst:AddTag("poisoning")
              inst.AnimState:SetMultColour(0/255,255/255,0/255,1)
              inst.components.health:DoDelta(-inst.components.health.maxhealth*.2)
              inst.components.sanity:DoDelta(-inst.components.sanity.max*.5)
              inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED*.3
              inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED*.3
              inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD*5)
              inst.poison = inst:DoPeriodicTask(10, function()
                  inst.components.hunger:DoDelta(-20)
                  inst.components.locomotor:Stop()
                  inst.AnimState:PlayAnimation("pickup")
                  SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
               end )
           end
        end
    end
    if food.prefab == "mandrake" then
        if inst:HasTag("poisoning") then inst:RemoveTag("poisoning") end
        if inst:HasTag("fever") then inst:RemoveTag("fever") end
        if inst.poison then inst.poison:Cancel() inst.poison = nil end
        if inst.fever then inst.fever:Cancel() inst.fever = nil end
        inst.AnimState:SetMultColour(255/255,255/255,255/255,1)
        inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
        inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
        inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD)
    end
end
    inst.components.eater:SetOnEatFn(OnEat)
local function OnDay(inst)
    if inst:HasTag("poisoning") then
       inst:RemoveTag("poisoning")
       inst.AnimState:SetMultColour(255/255,255/255,255/255,1)
       inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
       inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
       inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD)
       if inst.poison then inst.poison:Cancel() inst.poison = nil end
    end
    if not inst:HasTag("fever") then
       if math.random()<0.1 then
          inst:AddTag("fever")
          inst.AnimState:SetMultColour(255/255,0/255,0/255,1)
          inst.components.sanity:DoDelta(-inst.components.sanity.max*.5)
          inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED*.3
          inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED*.3
          inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD*5)
          inst.fever = inst:DoPeriodicTask(15, function()
              inst.components.health:DoDelta(-inst.components.health.maxhealth*.05)
              inst.components.locomotor:Stop()
              inst.AnimState:PlayAnimation("idle_shiver_pre")
              inst.AnimState:PushAnimation("idle_shiver_loop")
              inst.AnimState:PushAnimation("idle_shiver_pst", false)
          end )
       end
    else
       inst:RemoveTag("fever")
       inst.AnimState:SetMultColour(255/255,255/255,255/255,1)
       inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
       inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
       inst.components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD)
       if inst.fever then inst.fever:Cancel() inst.fever = nil end
    end
end
    inst:ListenForEvent( "daytime", function() OnDay(inst) end, GetWorld())

    即可让游戏有更加真实的体验，主角会感冒，浑身因发烧而呈红色，行动迟缓，生命值不断下降，如不注意补血，则有生命危险。另外，在吃食物时，也有一定概率发生食物中毒，浑身呈绿色，行动迟缓，且不断出现腹泻，饥饿值下降速度加快。无论感冒还是食物中毒，只要你抗过一天，基本都能痊愈，如果服用曼德拉草，则可立即痊愈。如果修改了“小诊所”，也可以给护士5个黄金治疗疾病。不要与“伍迪吃疯肉立即变海狸且随身物品不掉落”一同修改




二五四.噩梦草（用鸟粪种噩梦草，可采噩梦燃料，有一定概率出现地下巨人）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\guano.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local items = { SWORD = "swap_ham_bat" }
local function EquipItem(inst, item)
    if item then
       inst.AnimState:OverrideSymbol("swap_object", item, item)
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
    end
end
    inst.items = items
    inst.equipfn = EquipItem
    EquipItem(inst)
local function OnDeploy (inst, pt)
    local darkgrass = SpawnPrefab("guano")
    darkgrass.Transform:SetPosition(pt.x, pt.y, pt.z)
    darkgrass.AnimState:SetBank("marsh_plant")
    darkgrass.AnimState:SetBuild("marsh_plant")
    darkgrass.AnimState:PlayAnimation("idle")
    darkgrass.Transform:SetScale(1.8, 1.8, 1.8)
    darkgrass.AnimState:SetMultColour(255/255,255/255,0/255,1)
    darkgrass:RemoveComponent("stackable")
    darkgrass:RemoveComponent("inventoryitem")
    darkgrass:RemoveComponent("fertilizer")
    darkgrass:RemoveComponent("smotherer")
    darkgrass:RemoveComponent("fuel")
    darkgrass:RemoveComponent("burnable")
    darkgrass:RemoveComponent("propagator")
    darkgrass:RemoveComponent("deployable")
    MakeMediumBurnable(darkgrass)
    MakeSmallPropagator(darkgrass)
    if darkgrass.flies then darkgrass.flies:Remove() darkgrass.flies = nil end
    darkgrass:AddComponent("workable")
    darkgrass.components.workable:SetWorkAction(ACTIONS.DIG)
    darkgrass.components.workable:SetWorkLeft(1)
    darkgrass.components.workable:SetOnFinishCallback(function(darkgrass)
        SpawnPrefab("nightmarefuel").Transform:SetPosition(darkgrass.Transform:GetWorldPosition())
        darkgrass:Remove()
    end )
    darkgrass:AddComponent("pickable")
    darkgrass.components.pickable:SetUp("nightmarefuel", 480)
    darkgrass.components.pickable:SetOnRegenFn(function(darkgrass) darkgrass.AnimState:SetMultColour(255/255,255/255,0/255,1) end )
    darkgrass.components.pickable:SetOnPickedFn(function(darkgrass)
        darkgrass.AnimState:SetMultColour(255/255,255/255,255/255,1)
        if math.random()<0.05 then
           GetPlayer().components.playercontroller:ShakeCamera(darkgrass, "FULL", 1.5, 0.03, 2, 30)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           SpawnPrefab("collapse_big").Transform:SetPosition(darkgrass.Transform:GetWorldPosition())
           local giant = SpawnPrefab("guano")
           giant.Transform:SetPosition(darkgrass.Transform:GetWorldPosition())
           giant.entity:AddSoundEmitter()
           giant.AnimState:SetBank("wilson")
           giant.AnimState:SetBuild("wolfgang")
           giant.AnimState:PlayAnimation("idle")
           giant.AnimState:OverrideSymbol("swap_object", "swap_ham_bat", "swap_ham_bat")
           giant.AnimState:OverrideSymbol("swap_body", "armor_slurper", "swap_body")
           giant.AnimState:Show("ARM_carry") 
           giant.AnimState:Hide("ARM_normal")
           giant.Transform:SetFourFaced()
           giant.Transform:SetScale(3.5,3.5,3.5)
           local sound = giant.entity:AddSoundEmitter()
           local shadow = giant.entity:AddDynamicShadow()
           shadow:SetSize( 6, 3.5 )
           MakeCharacterPhysics(giant, 200, 1)
           local minimap = giant.entity:AddMiniMapEntity()
           minimap:SetIcon("wolfgang.png")
           local brain = require "brains/leifbrain"
           giant:SetBrain(brain)
           giant:AddComponent("locomotor")
           giant.components.locomotor.walkspeed = 1
           giant.components.locomotor.runspeed = 2
           giant:SetStateGraph("SGshadowwaxwell")
           giant:RemoveComponent("stackable")
           giant:RemoveComponent("inventoryitem")
           giant:RemoveComponent("fertilizer")
           giant:RemoveComponent("smotherer")
           giant:RemoveComponent("fuel")
           giant:RemoveComponent("burnable")
           giant:RemoveComponent("propagator")
           giant:RemoveComponent("deployable")
           if giant.flies then giant.flies:Remove() giant.flies = nil end
           giant:AddComponent("follower")
           giant:AddComponent("inventory")
           giant:AddComponent("combat")
           giant.components.combat.hiteffectsymbol = "torso"
           giant.components.combat:SetDefaultDamage(70)
           giant.components.combat:SetAttackPeriod(3)
           giant.components.combat.onhitotherfn = function()
               giant.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
               GetPlayer().components.playercontroller:ShakeCamera(giant, "FULL", 0.5, 0.05, 2, 40)
           end
           giant.components.combat:SetAreaDamage(5, 0.8)
           giant.components.combat:SetRetargetFunction(3, function(giant)
               if not giant.components.health:IsDead() then
                  return FindEntity(giant, 20, function(guy)
                      return giant.components.combat:CanTarget(guy) and not guy:HasTag("giant")
                  end )
               end
           end )
           giant:ListenForEvent("attacked", function(giant, data)
               giant.components.combat:SetTarget(data.attacker)
           end )
           giant.Physics:SetCollisionCallback(function(giant, other)
               if other and other.components.workable and other.components.workable.workleft > 0 then
                  other.components.workable:Destroy(giant)
               end
           end )
           giant:AddComponent("health")
           giant.components.health:SetMaxHealth(8000)
           giant.components.health.nofadeout = true
           giant:AddComponent("sanityaura")
           giant.components.sanityaura.aura = -TUNING.SANITYAURA_LARGE
           giant:ListenForEvent("death", function()
               local pt1 = giant:GetPosition()
               for k = 1,math.random(20,35) do
                   local gold = SpawnPrefab("goldnugget")
                   gold.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
               end
               local rewards = {"walrus_tusk","trunk_summer","trunk_winter","deerclops_eyeball","minotaurhorn"}
               local reward = rewards[math.random(#rewards)]
               SpawnPrefab(reward).Transform:SetPosition(pt1.x, 0, pt1.z)
           end )
           giant:DoTaskInTime(480, function(giant)
               giant:Remove()
           end )
           giant:AddTag("monster")
           giant:AddTag("giant")
        end
    end )
    darkgrass:AddTag("darkgrass")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("darkgrass") then
       data.darkgrass = true
    end
    if inst:HasTag("giant") then
       data.giant = true
    end
end
local function onload(inst, data)
    if data and data.darkgrass then
       inst.AnimState:SetBank("marsh_plant")
       inst.AnimState:SetBuild("marsh_plant")
       inst.AnimState:PlayAnimation("idle")
       inst.Transform:SetScale(1.8, 1.8, 1.8)
       inst.AnimState:SetMultColour(255/255,255/255,0/255,1)
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("fertilizer")
       inst:RemoveComponent("smotherer")
       inst:RemoveComponent("fuel")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveComponent("deployable")
       MakeMediumBurnable(inst)
       MakeSmallPropagator(inst)
       if inst.flies then inst.flies:Remove() inst.flies = nil end
       inst:AddComponent("workable")
       inst.components.workable:SetWorkAction(ACTIONS.DIG)
       inst.components.workable:SetWorkLeft(1)
       inst.components.workable:SetOnFinishCallback(function(inst)
           SpawnPrefab("nightmarefuel").Transform:SetPosition(inst.Transform:GetWorldPosition())
           inst:Remove()
       end )
       inst:AddComponent("pickable")
       inst.components.pickable:SetUp("nightmarefuel", 480)
       inst.components.pickable:SetOnRegenFn(function(inst) inst.AnimState:SetMultColour(255/255,255/255,0/255,1) end )
       inst.components.pickable:SetOnPickedFn(function(inst)
           inst.AnimState:SetMultColour(255/255,255/255,255/255,1)
           if math.random()<0.05 then
              GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 1.5, 0.03, 2, 30)
              GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
              SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
              local giant = SpawnPrefab("guano")
              giant.Transform:SetPosition(inst.Transform:GetWorldPosition())
              giant.entity:AddSoundEmitter()
              giant.AnimState:SetBank("wilson")
              giant.AnimState:SetBuild("wolfgang")
              giant.AnimState:PlayAnimation("idle")
              giant.AnimState:OverrideSymbol("swap_object", "swap_ham_bat", "swap_ham_bat")
              giant.AnimState:OverrideSymbol("swap_body", "armor_slurper", "swap_body")
              giant.AnimState:Show("ARM_carry") 
              giant.AnimState:Hide("ARM_normal")
              giant.Transform:SetFourFaced()
              giant.Transform:SetScale(3.5,3.5,3.5)
              local sound = giant.entity:AddSoundEmitter()
              local shadow = giant.entity:AddDynamicShadow()
              shadow:SetSize( 6, 3.5 )
              MakeCharacterPhysics(giant, 200, 1)
              local minimap = giant.entity:AddMiniMapEntity()
              minimap:SetIcon("wolfgang.png")
              local brain = require "brains/leifbrain"
              giant:SetBrain(brain)
              giant:AddComponent("locomotor")
              giant.components.locomotor.walkspeed = 1
              giant.components.locomotor.runspeed = 2
              giant:SetStateGraph("SGshadowwaxwell")
              giant:RemoveComponent("stackable")
              giant:RemoveComponent("inventoryitem")
              giant:RemoveComponent("fertilizer")
              giant:RemoveComponent("smotherer")
              giant:RemoveComponent("fuel")
              giant:RemoveComponent("burnable")
              giant:RemoveComponent("propagator")
              giant:RemoveComponent("deployable")
              if giant.flies then giant.flies:Remove() giant.flies = nil end
              giant:AddComponent("follower")
              giant:AddComponent("inventory")
              giant:AddComponent("combat")
              giant.components.combat.hiteffectsymbol = "torso"
              giant.components.combat:SetDefaultDamage(70)
              giant.components.combat:SetAttackPeriod(3)
              giant.components.combat.onhitotherfn = function()
                  giant.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                  GetPlayer().components.playercontroller:ShakeCamera(giant, "FULL", 0.5, 0.05, 2, 40)
              end
              giant.components.combat:SetAreaDamage(5, 0.8)
              giant.components.combat:SetRetargetFunction(3, function(giant)
                  if not giant.components.health:IsDead() then
                     return FindEntity(giant, 20, function(guy)
                         return giant.components.combat:CanTarget(guy) and not guy:HasTag("giant")
                     end )
                  end
              end )
              giant:ListenForEvent("attacked", function(giant, data)
                  giant.components.combat:SetTarget(data.attacker)
              end )
              giant.Physics:SetCollisionCallback(function(giant, other)
                  if other and other.components.workable and other.components.workable.workleft > 0 then
                     other.components.workable:Destroy(giant)
                  end
              end )
              giant:AddComponent("health")
              giant.components.health:SetMaxHealth(8000)
              giant.components.health.nofadeout = true
              giant:AddComponent("sanityaura")
              giant.components.sanityaura.aura = -TUNING.SANITYAURA_LARGE
              giant:ListenForEvent("death", function()
                  local pt1 = giant:GetPosition()
                  for k = 1,math.random(20,35) do
                      local gold = SpawnPrefab("goldnugget")
                      gold.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
                  end
                  local rewards = {"walrus_tusk","trunk_summer","trunk_winter","deerclops_eyeball","minotaurhorn"}
                  local reward = rewards[math.random(#rewards)]
                  SpawnPrefab(reward).Transform:SetPosition(pt1.x, 0, pt1.z)
              end )
              giant:DoTaskInTime(480, function(giant)
                  giant:Remove()
              end )
              giant:AddTag("monster")
              giant:AddTag("giant")
           end
       end )
       inst:AddTag("darkgrass")
     end
    if data and data.giant then
       inst.entity:AddSoundEmitter()
       inst.AnimState:SetBank("wilson")
       inst.AnimState:SetBuild("wolfgang")
       inst.AnimState:PlayAnimation("idle")
       inst.AnimState:OverrideSymbol("swap_object", "swap_ham_bat", "swap_ham_bat")
       inst.AnimState:OverrideSymbol("swap_body", "armor_slurper", "swap_body")
       inst.AnimState:Show("ARM_carry") 
       inst.AnimState:Hide("ARM_normal")
       inst.Transform:SetFourFaced()
       inst.Transform:SetScale(3.5,3.5,3.5)
       local sound = inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize( 6, 3.5 )
       MakeCharacterPhysics(inst, 200, 1)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon("wolfgang.png")
       local brain = require "brains/leifbrain"
       inst:SetBrain(brain)
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 1
       inst.components.locomotor.runspeed = 2
       inst:SetStateGraph("SGshadowwaxwell")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("fertilizer")
       inst:RemoveComponent("smotherer")
       inst:RemoveComponent("fuel")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveComponent("deployable")
       if inst.flies then inst.flies:Remove() inst.flies = nil end
       inst:AddComponent("follower")
       inst:AddComponent("inventory")
       inst:AddComponent("combat")
       inst.components.combat.hiteffectsymbol = "torso"
       inst.components.combat:SetDefaultDamage(70)
       inst.components.combat:SetAttackPeriod(3)
       inst.components.combat.onhitotherfn = function()
           inst.SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.5, 0.05, 2, 40)
       end
       inst.components.combat:SetAreaDamage(5, 0.8)
       inst.components.combat:SetRetargetFunction(3, function(inst)
           if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                  return inst.components.combat:CanTarget(guy) and not guy:HasTag("giant")
              end )
           end
       end )
       inst:ListenForEvent("attacked", function(inst, data)
           inst.components.combat:SetTarget(data.attacker)
       end )
       inst.Physics:SetCollisionCallback(function(inst, other)
           if other and other.components.workable and other.components.workable.workleft > 0 then
              other.components.workable:Destroy(inst)
           end
       end )
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(8000)
       inst.components.health.nofadeout = true
       inst:AddComponent("sanityaura")
       inst.components.sanityaura.aura = -TUNING.SANITYAURA_LARGE
       inst:ListenForEvent("death", function()
           local pt1 = inst:GetPosition()
           for k = 1,math.random(20,35) do
               local gold = SpawnPrefab("goldnugget")
               gold.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
           end
           local rewards = {"walrus_tusk","trunk_summer","trunk_winter","deerclops_eyeball","minotaurhorn"}
           local reward = rewards[math.random(#rewards)]
           SpawnPrefab(reward).Transform:SetPosition(pt1.x, 0, pt1.z)
       end )
       inst:DoTaskInTime(480, function(inst)
           inst:Remove()
       end )
       inst:AddTag("monster")
       inst:AddTag("giant")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用鸟粪（白色便便）种噩梦草（请远离基地种植），可采摘噩梦燃料，每天都能采一次。采摘时有一定概率出现地下巨人，将攻击你，消灭巨人可获得黄金、巨鹿眼球、远古守护者角、海象牙等宝物。巨人的血量及攻击力都很强，如果打不过，就先逃跑避避风头，一天后巨人将回到地下。巨人在小地图上显示为大力士的图标，绕着点走吧




二五五.天然温泉（用触手皮种温泉，可恢复生命和脑，可抓鱼）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tentaclespots.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function spa(inst)
    local pt = inst:GetPosition()
    local spa = SpawnPrefab("tentaclespots")
    spa.Transform:SetPosition(pt.x, pt.y, pt.z)
    spa.AnimState:SetBank("marsh_tile")
    spa.AnimState:SetBuild("marsh_tile")
    spa.AnimState:PlayAnimation("idle_cave",true)
    spa.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    spa.AnimState:SetLayer( LAYER_BACKGROUND )
    spa.AnimState:SetSortOrder( 3 )
    spa.Transform:SetScale(1.5, 1.5, 1.5)
    spa:RemoveComponent("inventoryitem")
    spa:RemoveComponent("stackable")
    spa:RemoveComponent("fuel")
    spa:RemoveComponent("burnable")
    spa:RemoveComponent("propagator")
    spa:RemoveComponent("deployable")
    if spa.components.edible then spa:RemoveComponent("edible") end
    spa:AddTag("NOCLICK")
    spa:AddTag("spa")
    spa:DoPeriodicTask(math.random(10,20), function(spa)
        local pt1 = spa:GetPosition()
        local names = {"fish","eel"}
        local name = names[math.random(#names)]
        local fish = SpawnPrefab(name)
        fish.Transform:SetPosition(pt1.x+(math.random(4)-math.random(4)), 0, pt1.z+(math.random(4)-math.random(4)))
        SpawnPrefab("splash").Transform:SetPosition(fish.Transform:GetWorldPosition())
        spa:DoTaskInTime(0.5, function(spa)
            local pos = Vector3(spa.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 5)
            for k,v in pairs(ents) do
                if v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
                   if v.prefab == "fish" or v.prefab == "eel" then
                      SpawnPrefab("splash").Transform:SetPosition(v.Transform:GetWorldPosition())
                      v:Remove()
                   end
                end
            end
        end )
    end )
    spa:DoPeriodicTask(3, function(spa)
        local pos2 = Vector3(spa.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos2.x,pos2.y,pos2.z, 4.8)
        for k,v in pairs(ents) do
            if v:HasTag("player") then
               v.components.health:DoDelta(v.components.health.maxhealth*.02)
               v.components.sanity:DoDelta(v.components.sanity.max*.02)
            end
        end
    end )
    local rock1 = SpawnPrefab("tentaclespots")
    rock1.Transform:SetPosition(pt.x-3.3-0.5, 0, pt.z-3.3+0.5)
    rock1.AnimState:SetBank("rock")
    rock1.AnimState:SetBuild("rock")
    rock1.AnimState:PlayAnimation("full")
    rock1.Transform:SetScale(2, 2, 2)
    rock1:AddTag("sparock")
    rock1:RemoveComponent("inventoryitem")
    rock1:RemoveComponent("stackable")
    rock1:RemoveComponent("fuel")
    rock1:RemoveComponent("burnable")
    rock1:RemoveComponent("propagator")
    rock1:RemoveComponent("deployable")
    if rock1.components.edible then rock1:RemoveComponent("edible") end
    rock1:AddComponent("workable")
    rock1.components.workable:SetWorkAction(ACTIONS.HAMMER)
    rock1.components.workable:SetWorkLeft(3)
    rock1.components.workable:SetOnFinishCallback(function(rock1)
        SpawnPrefab("collapse_big").Transform:SetPosition(rock1.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
        local pos3 = Vector3(rock1.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos3.x,pos3.y,pos3.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("spa") then
               v:Remove()
            end
            if v:HasTag("sparock") then
               v:Remove()
            end
        end
        rock1:Remove()
    end )
    local rock2 = SpawnPrefab("tentaclespots")
    rock2.Transform:SetPosition(pt.x-2.1-2.8, 0, pt.z-2.1+2.8)
    rock2.AnimState:SetBank("firepit")
    rock2.AnimState:SetBuild("firepit")
    rock2.AnimState:PlayAnimation("idle",false)
    rock2.Transform:SetScale(0.6, 1, 0.6)
    rock2:AddTag("sparock")
    rock2:RemoveComponent("inventoryitem")
    rock2:RemoveComponent("stackable")
    rock2:RemoveComponent("fuel")
    rock2:RemoveComponent("burnable")
    rock2:RemoveComponent("propagator")
    rock2:RemoveComponent("deployable")
    if rock2.components.edible then rock2:RemoveComponent("edible") end
    rock2:AddComponent("burnable")
    rock2.components.burnable:SetFXLevel(5)
    rock2.components.burnable:AddBurnFX("campfirefire", Vector3(0,0.6,0) )
    rock2.components.burnable:Ignite(true)
    rock2:AddComponent("cooker")
    local rock3 = SpawnPrefab("tentaclespots")
    rock3.Transform:SetPosition(pt.x+2.1+2.1, 0, pt.z-2.1+2.1)
    rock3.AnimState:SetBank("flowers")
    rock3.AnimState:SetBuild("flowers")
    rock3.AnimState:PlayAnimation("f10")
    rock3.Transform:SetScale(1.8, 1.8, 1.8)
    rock3:AddTag("sparock")
    rock3:RemoveComponent("inventoryitem")
    rock3:RemoveComponent("stackable")
    rock3:RemoveComponent("fuel")
    rock3:RemoveComponent("burnable")
    rock3:RemoveComponent("propagator")
    rock3:RemoveComponent("deployable")
    if rock3.components.edible then rock3:RemoveComponent("edible") end
end
local function OnDeploy (inst, pt)
    spa(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("spa") then
        data.spa = true
    end
    if inst:HasTag("sparock") then
        data.sparock = true
    end
end
local function onload(inst, data)
    if data and data.spa then
       spa(inst)
       inst:Remove()
    end
    if data and data.sparock then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用触手皮种温泉（拿着1个触手皮对地面点鼠标右键，如果拿着多个触手皮，则不会种出来），站在水里可以取暖，并补充生命值和脑值。温泉里会有鱼跳出水面，按住键盘空格键不放，有机会抓住鱼，在温泉旁的火盆里烤鱼吃吧。不想要温泉时，用锤子砸掉大石头即可




二五六.小冰山（用铥矿碎片种小冰山，靠近可解暑，无限开采冰和永冻冰，吃了能降温）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\thulecite_pieces.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makeiceberg(inst)
    local pt = inst:GetPosition()
    local iceberg = SpawnPrefab("thulecite_pieces")
    iceberg.Transform:SetPosition(pt.x, pt.y, pt.z)
    iceberg.AnimState:SetBank("ice_boulder")
    iceberg.AnimState:SetBuild("ice_boulder")
    iceberg.AnimState:PlayAnimation("full")
    iceberg.Transform:SetScale(2, 2, 2)
    iceberg:AddComponent("named")
    iceberg.components.named:SetName("Ice")
    local minimap = iceberg.entity:AddMiniMapEntity()
    minimap:SetIcon( "iceboulder.png" )
    MakeObstaclePhysics(iceberg, 1)
    MakeLargeBurnable(iceberg)
    iceberg.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    iceberg.entity:AddLight()
    iceberg.Light:SetFalloff(1)
    iceberg.Light:SetIntensity(.8)
    iceberg.Light:SetRadius(7)
    iceberg.Light:SetColour(255/255,255/255,255/255)
    iceberg.Light:Enable(true)
    iceberg:RemoveComponent("edible")
    iceberg:RemoveComponent("tradable")
    iceberg:RemoveComponent("inventoryitem")
    iceberg:RemoveComponent("stackable")
    iceberg:RemoveComponent("bait")
    iceberg:RemoveComponent("repairer")
    iceberg:RemoveComponent("deployable")
    iceberg:RemoveTag("molebait")
    iceberg:AddComponent("heater")
    iceberg.components.heater.iscooler = true
    iceberg.components.heater.heatfn = function(iceberg) return -40 end
    iceberg:AddComponent("workable")
    iceberg.components.workable:SetWorkAction(ACTIONS.MINE)
    iceberg.components.workable:SetWorkLeft(30)
    iceberg.components.workable:SetOnWorkCallback(function(iceberg)
        iceberg.components.workable:SetWorkLeft(30)
        local pt1 = iceberg:GetPosition()
        if math.random()<.2 then
           local icecream = SpawnPrefab("thulecite_pieces")
           icecream.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 3, pt1.z+(math.random(3)-math.random(3)))
           icecream.AnimState:SetBank("ice")
           icecream.AnimState:SetBuild("ice")
           icecream.AnimState:PlayAnimation("f1")
           icecream:RemoveComponent("edible")
           icecream:RemoveComponent("tradable")
           icecream:RemoveComponent("stackable")
           icecream:RemoveComponent("bait")
           icecream:RemoveComponent("repairer")
           icecream:RemoveComponent("deployable")
           icecream:RemoveTag("molebait")
           icecream:AddComponent("named")
           icecream.components.named:SetName("Ice")
           icecream.components.inventoryitem.imagename = "ice"
           icecream:AddComponent("edible")
           icecream.components.edible.foodtype = "SEEDS"
           icecream.components.edible.healthvalue = TUNING.HEALING_TINY/2
           icecream.components.edible.hungervalue = TUNING.CALORIES_TINY/4
           icecream.components.edible:SetOnEatenFn(function(icecream, eater)
               if eater and eater.components.temperature then
                  local temp = eater.components.temperature:GetCurrent()
                  eater.components.temperature:SetTemperature(temp - 70)
               end
           end )
           icecream.components.edible.degrades_with_spoilage = false
           icecream:AddTag("icecream")
        elseif math.random()<.4 then
           local ice = SpawnPrefab("ice")
           ice.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 3, pt1.z+(math.random(3)-math.random(3)))
        end
    end )
    iceberg.components.workable:SetOnFinishCallback(function(iceberg)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(iceberg.Transform:GetWorldPosition())
        iceberg:Remove()
    end )
    iceberg:AddTag("iceberg")
end
local function OnDeploy (inst, pt)
    makeiceberg(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("iceberg") then
        data.iceberg = true
    end
    if inst:HasTag("icecream") then
        data.icecream = true
    end
end
local function onload(inst, data)
    if data and data.iceberg then
       makeiceberg(inst)
       inst:Remove()
    end
    if data and data.icecream then
       inst.AnimState:SetBank("ice")
       inst.AnimState:SetBuild("ice")
       inst.AnimState:PlayAnimation("f1")
       inst:RemoveComponent("edible")
       inst:RemoveComponent("tradable")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("bait")
       inst:RemoveComponent("repairer")
       inst:RemoveComponent("deployable")
       inst:RemoveTag("molebait")
       inst:AddComponent("named")
       inst.components.named:SetName("Ice")
       inst.components.inventoryitem.imagename = "ice"
       inst:AddComponent("edible")
       inst.components.edible.foodtype = "SEEDS"
       inst.components.edible.healthvalue = TUNING.HEALING_TINY/2
       inst.components.edible.hungervalue = TUNING.CALORIES_TINY/4
       inst.components.edible:SetOnEatenFn(function(inst, eater)
           if eater and eater.components.temperature then
              local temp = eater.components.temperature:GetCurrent()
              eater.components.temperature:SetTemperature(temp - 70)
           end
       end )
       inst.components.edible.degrades_with_spoilage = false
       inst:AddTag("icecream")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用铥矿碎片种小冰山（拿着1个铥矿碎片对地面点鼠标右键，如果拿着多个，则不会种出来），靠近可解暑。用锄头凿冰山，有一定概率获得冰和永冻冰（不会腐烂且不可堆叠的是永冻冰），永冻冰可食用，吃了能降温，如果没有中暑就不要吃，否则会冻伤。不想要小冰山了，烧掉即可。不要与“用铥矿碎片种猴子桶”一同修改




二五七.生物克隆机（用夜魔盔甲种克隆机，随身携带，大量克隆各种生物）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\armor_sanity.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "silk" or item.prefab == "houndstooth" or item.prefab == "beefalowool" or item.prefab == "tentaclespots" or item.prefab == "froglegs" or item.prefab == "stinger" or item.prefab == "mosquitosack" or item.prefab == "tallbirdegg" or item.prefab == "walrus_tusk" or item.prefab == "livinglog" or item.prefab == "bird_egg" or item.prefab == "trunk_summer" or item.prefab == "trunk_winter" or item.prefab == "deerclops_eyeball" or item.prefab == "fish" or item.prefab == "plantmeat" or item.prefab == "rocks" or item.prefab == "cave_banana" or item.prefab == "slurper_pelt" or item.prefab == "minotaurhorn" or item.prefab == "wormlight" or item.prefab == "slurtle_shellpieces" or item.prefab == "slurtleslime" or item.prefab == "batwing" or item.prefab == "manrabbit_tail" or item.prefab == "pigskin" or item.prefab == "lightninggoathorn" or item.prefab == "dragon_scales" or item.prefab == "goose_feather" or item.prefab == "bearger_fur" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,-75,0)}
local widgetbuttoninfo = {
    text = "GO",
    position = Vector3(0, -135, 0),
    fn = function(inst)
        if inst:HasTag("machines") then
           if not inst.components.container:IsEmpty() then
              for k,v in pairs(inst.components.container.slots) do
                  if v and v.prefab == "silk" then inst.weirdo = "spiderqueen" end
                  if v and v.prefab == "houndstooth" then inst.weirdo = "firehound" end
                  if v and v.prefab == "beefalowool" then inst.weirdo = "beefalo" end
                  if v and v.prefab == "tentaclespots" then inst.weirdo = "tentacle" end
                  if v and v.prefab == "froglegs" then inst.weirdo = "frog" end
                  if v and v.prefab == "stinger" then inst.weirdo = "killerbee" end
                  if v and v.prefab == "mosquitosack" then inst.weirdo = "mosquito" end
                  if v and v.prefab == "tallbirdegg" then inst.weirdo = "tallbird" end
                  if v and v.prefab == "walrus_tusk" then inst.weirdo = "walrus" end
                  if v and v.prefab == "livinglog" then inst.weirdo = "leif_sparse" end
                  if v and v.prefab == "bird_egg" then inst.weirdo = "perd" end
                  if v and v.prefab == "trunk_summer" then inst.weirdo = "koalefant_summer" end
                  if v and v.prefab == "trunk_winter" then inst.weirdo = "koalefant_winter" end
                  if v and v.prefab == "deerclops_eyeball" then inst.weirdo = "deerclops" end
                  if v and v.prefab == "fish" then inst.weirdo = "merm" end
                  if v and v.prefab == "plantmeat" then inst.weirdo = "lureplant" end
                  if v and v.prefab == "rocks" then inst.weirdo = "rocky" end
                  if v and v.prefab == "cave_banana" then inst.weirdo = "monkey" end
                  if v and v.prefab == "slurper_pelt" then inst.weirdo = "slurper" end
                  if v and v.prefab == "minotaurhorn" then inst.weirdo = "minotaur" end
                  if v and v.prefab == "wormlight" then inst.weirdo = "worm" end
                  if v and v.prefab == "slurtle_shellpieces" then inst.weirdo = "slurtle" end
                  if v and v.prefab == "slurtleslime" then inst.weirdo = "snurtle" end
                  if v and v.prefab == "batwing" then inst.weirdo = "bat" end
                  if v and v.prefab == "manrabbit_tail" then inst.weirdo = "bunnyman" end
                  if v and v.prefab == "pigskin" then inst.weirdo = "pigman" end
                  if v and v.prefab == "lightninggoathorn" then inst.weirdo = "lightninggoat" end
                  if v and v.prefab == "dragon_scales" then inst.weirdo = "dragonfly" end
                  if v and v.prefab == "goose_feather" then inst.weirdo = "moose" end
                  if v and v.prefab == "bearger_fur" then inst.weirdo = "bearger" end
                  v:Remove()
              end
              local pt0 = Vector3(GetPlayer().Transform:GetWorldPosition())
              for k = 1, 20 do
                  local result_offset = FindValidPositionByFan(1 * 2 * PI, 10, 20, function(offset)
                      local x,y,z = (pt0 + offset):Get()
                      local ents = TheSim:FindEntities(x,y,z , 1)
                      return not next(ents) 
                  end)
                  if result_offset then
                     local newweirdo = SpawnPrefab(inst.weirdo)
                     newweirdo.Transform:SetPosition((pt0 + result_offset):Get())
                     GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                     local fx = SpawnPrefab("collapse_small")
                     local pos = pt0 + result_offset
                     fx.Transform:SetPosition(pos.x, pos.y, pos.z)
                  end
              end
           end
        end
    end }
local function OnDeploy (inst, pt)
    local machine = SpawnPrefab("armor_sanity")
    machine.Transform:SetPosition(pt.x, pt.y, pt.z)
    machine.AnimState:SetBank("rain_meter")
    machine.AnimState:SetBuild("rain_meter")
    machine.AnimState:PlayAnimation("meter", 0)
    machine.Transform:SetScale(0.5, 0.5, 0.5)
    machine:RemoveTag("sanity")
    machine:RemoveComponent("inventoryitem")
    machine:RemoveComponent("armor")
    machine:RemoveComponent("equippable")
    machine:RemoveComponent("deployable")
    machine.components.container.canbeopened = true
    machine:AddComponent("inventoryitem")
    machine.components.inventoryitem:ChangeImageName("rainometer")
    machine:AddComponent("equippable")
    machine.components.equippable.equipslot = EQUIPSLOTS.BODY
    machine.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT*2
    machine.components.equippable:SetOnEquip( function(machine)
        GetPlayer().components.inventory:SetOverflow(machine)
        machine.components.container:Open(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_open", "open")
        GetPlayer():Hide()
        local shadow = GetPlayer().entity:AddDynamicShadow()
        shadow:SetSize( 0, 0 )
    end )
    machine.components.equippable:SetOnUnequip( function(machine)
        machine.components.container:Close(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_close", "open")
        GetPlayer():Show()
        local shadow = GetPlayer().entity:AddDynamicShadow()
        shadow:SetSize( 1.3, .6 )
    end )
    machine:AddTag("machines")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("machines") then
       data.machines = true
    end
end
local function onload(inst, data)
  if data and data.machines then
    inst.AnimState:SetBank("rain_meter")
    inst.AnimState:SetBuild("rain_meter")
    inst.AnimState:PlayAnimation("meter", 0)
    inst.Transform:SetScale(0.5, 0.5, 0.5)
    inst:RemoveTag("sanity")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("armor")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:ChangeImageName("rainometer")
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.BODY
    inst.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT*2
    inst.components.equippable:SetOnEquip( function(inst)
        GetPlayer().components.inventory:SetOverflow(inst)
        inst.components.container:Open(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_open", "open")
        GetPlayer():Hide()
        local shadow = GetPlayer().entity:AddDynamicShadow()
        shadow:SetSize( 0, 0 )
    end )
    inst.components.equippable:SetOnUnequip( function(inst)
        inst.components.container:Close(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_close", "open")
        GetPlayer():Show()
        local shadow = GetPlayer().entity:AddDynamicShadow()
        shadow:SetSize( 1.3, .6 )
    end )
    inst:AddTag("machines")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-80,150,0)
    inst.components.container.side_widget = true
    inst.components.container.itemtestfn = itemtest
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.acceptsstacks = false
    inst.components.container.canbeopened = false

    即可用夜魔盔甲种克隆机，装备克隆机后主角隐身（以免遭怪物围攻），屏幕右侧会出现格子和按钮，在格子中放入1个生物掉落的物品，按GO按钮，就可以克隆20个该生物，具体为：蜘蛛丝克隆蜘蛛女王、犬牙克隆火狗、牛毛克隆牛、触手皮克隆触手、蛙腿克隆青蛙、蜂刺克隆杀人蜂、蚊子血囊克隆蚊子、高鸟蛋克隆大高鸟、海象牙克隆海象、活木头克隆树精、鸡蛋克隆火鸡、夏象鼻克隆夏象、冬象鼻克隆冬象、巨鹿眼球克隆巨鹿、鱼克隆鱼人、食人花肉克隆食人花、岩石克隆龙虾、香蕉克隆猴子、缀食者皮克隆缀食者、远古守护者角克隆远古守护者、虫子果克隆虫子、蜗牛龟壳片克隆蜗牛龟、蜗牛龟粘液克隆黏糊虫、蝙蝠翅膀克隆蝙蝠、兔人尾巴克隆兔人、猪皮克隆猪人、闪电羊角克隆闪电羊、蜻蜓鳞片克隆蜻蜓、熊皮克隆熊、鹿鸭羽毛克隆鹿鸭。卸载克隆机后主角现身。拥有克隆机，让你有无限的怪物可刷，也可用于以怪制怪，比如在牛群里制造触手，在蜘蛛群里释放杀人蜂等，创造一个生机勃勃的世界吧。夜魔盔甲在魔法选项（画着红骷髅）下用5个噩梦燃料、3张纸制造




二五八.强迫症标尺（按键盘Insert键在地上画坐标，方便建造、种植，再按Insert键消失）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_INSERT, function()
    if not inst:HasTag("ruler") then
       inst:AddTag("ruler")
       local pt = inst:GetPosition()
       for y = 10, 0, -1 do
           for x = 0, 10 do
               local coordinate = SpawnPrefab("gridplacer")
               coordinate.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
               coordinate.AnimState:SetLayer( LAYER_BACKGROUND )
               coordinate.AnimState:SetSortOrder( 1 )
               coordinate.Transform:SetRotation( 45 )
               coordinate.Transform:SetPosition(pt.x-14.1+x*2.82, 0, pt.z-14.1+y*2.82)
               local light = coordinate.entity:AddLight()
               light:SetIntensity(.6)
               light:SetRadius(.5)
               light:SetFalloff(.6)
               light:Enable(true)
               light:SetColour(180/255, 195/255, 225/255)
               coordinate:AddTag("NOCLICK")
               coordinate:AddTag("coordinate")
           end
       end
    else
       inst:RemoveTag("ruler")
       local pos = Vector3(inst.Transform:GetWorldPosition())
       local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
       for k,v in pairs(ents) do
           if v:HasTag("coordinate") then
              v:Remove()
           end
       end
    end
end )

    即可按键盘Insert键，以主角为中心在地上画出白色坐标，可作为建造或种植的参照线，也可测量你现有的建筑、植物是不是歪了，强迫症必备，还有夜光效果哦，再按一次Insert键坐标消失




二五九.制冰机（用草伞种制冰机，下雨时自动制冰，可加工成大冰块永久保存，大冰块可砸碎成冰）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\umbrella.lua文件，在inst:AddTag("show_spoilage")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "ice" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,-75,0)}
local widgetbuttoninfo = {
    text = "Make",
    position = Vector3(0, -135, 0),
    fn = function(inst)
        if inst:HasTag("icemaker") then
           if inst.components.container:Has("ice", 10) then
              GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
              inst.components.container:ConsumeByName("ice", 10)
              local pt = inst:GetPosition()
              local bigice = SpawnPrefab("grass_umbrella")
              bigice.Transform:SetPosition(pt.x+(math.random(3)-math.random(3)), 0, pt.z+(math.random(3)-math.random(3)))
              bigice.AnimState:SetBank("icehat")
              bigice.AnimState:SetBuild("hat_ice")
              bigice.AnimState:PlayAnimation("anim")
              bigice.Transform:SetScale(1.5, 1.5, 1.5)
              bigice:RemoveComponent("waterproofer")
              bigice:RemoveComponent("equippable")
              bigice:RemoveComponent("insulator")
              bigice:RemoveComponent("perishable")
              bigice:RemoveComponent("fuel")
              bigice:RemoveComponent("burnable")
              bigice:RemoveComponent("propagator")
              bigice:RemoveComponent("deployable")
              bigice:RemoveComponent("container")
              bigice:RemoveTag("nopunch")
              bigice:RemoveTag("show_spoilage")
              bigice:RemoveAllEventCallbacks()
              bigice:AddComponent("named")
              bigice.components.named:SetName("Big ice")
              bigice.components.inventoryitem:ChangeImageName("icehat")
              bigice:AddComponent("heater")
              bigice.components.heater.iscooler = true
              bigice.components.heater.heatfn = function(bigice) return -40 end
              bigice:AddComponent("workable")
              bigice.components.workable:SetWorkAction(ACTIONS.HAMMER)
              bigice.components.workable:SetWorkLeft(1)
              bigice.components.workable:SetOnFinishCallback(function(bigice)
                  SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(bigice.Transform:GetWorldPosition())
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                  for k = 1, 10 do
                      local pt1 = bigice:GetPosition()
                      local ice = SpawnPrefab("ice")
                      ice.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
                  end
                  bigice:Remove()
              end )
              bigice:AddTag("bigice")
           end
        end
    end }
local function OnDeploy (inst, pt)
    local icemaker = SpawnPrefab("grass_umbrella")
    icemaker.Transform:SetPosition(pt.x, pt.y, pt.z)
    icemaker.AnimState:SetBank("eyeball_turret_base")
    icemaker.AnimState:SetBuild("eyeball_turret_base")
    icemaker.AnimState:PlayAnimation("idle_loop")
    icemaker.Transform:SetScale(0.8, 0.8, 0.8)
    icemaker.AnimState:SetMultColour(0/255,255/255,0/255,1)
    icemaker:RemoveComponent("waterproofer")
    icemaker:RemoveComponent("inventoryitem")
    icemaker:RemoveComponent("equippable")
    icemaker:RemoveComponent("insulator")
    icemaker:RemoveComponent("perishable")
    icemaker:RemoveComponent("fuel")
    icemaker:RemoveComponent("burnable")
    icemaker:RemoveComponent("propagator")
    icemaker:RemoveComponent("deployable")
    icemaker:RemoveTag("nopunch")
    icemaker:RemoveTag("show_spoilage")
    icemaker:RemoveAllEventCallbacks()
    icemaker:AddComponent("named")
    icemaker.components.named:SetName("Ice maker")
    icemaker.components.container.canbeopened = true
    icemaker:AddComponent("workable")
    icemaker.components.workable:SetWorkAction(ACTIONS.HAMMER)
    icemaker.components.workable:SetWorkLeft(3)
    icemaker.components.workable:SetOnFinishCallback(function(icemaker)
        SpawnPrefab("collapse_big").Transform:SetPosition(icemaker.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        icemaker:Remove()
    end )
    icemaker:ListenForEvent("rainstart", function()
        icemaker.task = icemaker:DoPeriodicTask(10, function()
            local ice = SpawnPrefab("ice")
            icemaker.components.container:GiveItem(ice)
        end )
    end, GetWorld())
    icemaker:ListenForEvent("rainstop", function()
        if icemaker.task then icemaker.task:Cancel() icemaker.task = nil end
    end, GetWorld())
    icemaker:AddTag("icemaker")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,150,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.canbeopened = false
    inst.components.container.onopenfn = function(inst) GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst.components.container.onclosefn = function(inst) GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst:AddTag("fridge")
local function onsave(inst, data)
    if inst:HasTag("icemaker") then
        data.icemaker = true
    end
    if inst:HasTag("bigice") then
        data.bigice = true
    end
end
local function onload(inst, data)
  if data and data.icemaker then
    inst.AnimState:SetBank("eyeball_turret_base")
    inst.AnimState:SetBuild("eyeball_turret_base")
    inst.AnimState:PlayAnimation("idle_loop")
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.AnimState:SetMultColour(0/255,255/255,0/255,1)
    inst:RemoveComponent("waterproofer")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("insulator")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("nopunch")
    inst:RemoveTag("show_spoilage")
    inst:RemoveAllEventCallbacks()
    inst:AddComponent("named")
    inst.components.named:SetName("Ice maker")
    inst.components.container.canbeopened = true
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:ListenForEvent("rainstart", function()
        inst.task = inst:DoPeriodicTask(10, function()
            local ice = SpawnPrefab("ice")
            inst.components.container:GiveItem(ice)
        end )
    end, GetWorld())
    inst:ListenForEvent("rainstop", function()
        if inst.task then inst.task:Cancel() inst.task = nil end
    end, GetWorld())
    inst:AddTag("icemaker")
  end
  if data and data.bigice then
    inst.AnimState:SetBank("icehat")
    inst.AnimState:SetBuild("hat_ice")
    inst.AnimState:PlayAnimation("anim")
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    inst:RemoveComponent("waterproofer")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("insulator")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    inst:RemoveTag("nopunch")
    inst:RemoveTag("show_spoilage")
    inst:RemoveAllEventCallbacks()
    inst:AddComponent("named")
    inst.components.named:SetName("Big ice")
    inst.components.inventoryitem:ChangeImageName("icehat")
    inst:AddComponent("heater")
    inst.components.heater.iscooler = true
    inst.components.heater.heatfn = function(inst) return -40 end
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(1)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        for k = 1, 10 do
            local pt1 = inst:GetPosition()
            local ice = SpawnPrefab("ice")
            ice.Transform:SetPosition(pt1.x+(math.random(3)-math.random(3)), 0, pt1.z+(math.random(3)-math.random(3)))
        end
        inst:Remove()
    end )
    inst:AddTag("bigice")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用草伞种制冰机，下雨时每10秒制成一块冰，鼠标左键点制冰机，可打开格子，在格子中拿取。当格子中至少有10块冰时，点格子下面的“Make”按钮，可将冰加工成大冰块，用以永久保存。靠近大冰块可降温，用锤子砸大冰块，可还原成小冰。不想要制冰机了，用锤子炸毁即可。草伞在生存选项（画着绳套）下，用4个树枝、3个草、6个花瓣制造




二六０.奶报箱（用苔藓种奶报箱，放入黄金，每天清晨送来报纸和5瓶牛奶，读报纸可补脑）

    用记事本打开游戏目录\data\scripts\prefabs\cutlichen.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "goldnugget" or item.prefab == "goatmilk" or item.prefab == "cutlichen" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,32+4,0), Vector3(0,-(32+4),0), Vector3(0,-(64+32+8+4),0)}
local widgetbuttoninfo = {
    text = "Buy",
    position = Vector3(0, 95, 0),
    fn = function(inst)
        if inst:HasTag("milkcartons") and inst.components.container:Has("goldnugget", 1) then
           inst.components.container:ConsumeByName("goldnugget", 1)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
           local newspaper = SpawnPrefab("cutlichen")
           newspaper.AnimState:SetBank("blueprint")
           newspaper.AnimState:SetBuild("blueprint")
           newspaper.AnimState:PlayAnimation("idle")
           newspaper.components.inventoryitem:ChangeImageName("blueprint")
           newspaper.Transform:SetScale(1.2, 1.2, 1.2)
           newspaper:AddComponent("named")
           newspaper.components.named:SetName("Newspaper")
           newspaper:RemoveComponent("stackable")
           newspaper:RemoveComponent("edible")
           newspaper:RemoveComponent("perishable")
           newspaper:RemoveComponent("container")
           newspaper:RemoveComponent("deployable")
           newspaper.components.inspectable.getstatus = function(newspaper)
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_clothing")
               GetPlayer().components.sanity:DoDelta(GetPlayer().components.sanity.max)
               newspaper:Remove()
           end
           newspaper:AddTag("newspapers")
           GetPlayer().components.inventory:GiveItem(newspaper)
        end
    end }
local function OnDeploy (inst, pt)
    local milkcarton = SpawnPrefab("cutlichen")
    milkcarton.Transform:SetPosition(pt.x, pt.y, pt.z)
    milkcarton.AnimState:SetBank("icebox")
    milkcarton.AnimState:SetBuild("ice_box")
    milkcarton.AnimState:PlayAnimation("closed")
    milkcarton.Transform:SetScale(0.6, 0.6, 0.6)
    milkcarton.AnimState:SetMultColour(0/255,185/255,255/255,1)
    milkcarton:AddComponent("named")
    milkcarton.components.named:SetName("Milk carton")
    milkcarton:RemoveComponent("stackable")
    milkcarton:RemoveComponent("inventoryitem")
    milkcarton:RemoveComponent("edible")
    milkcarton:RemoveComponent("perishable")
    milkcarton:RemoveComponent("deployable")
    milkcarton.components.container.canbeopened = true
    milkcarton:AddComponent("workable")
    milkcarton.components.workable:SetWorkAction(ACTIONS.HAMMER)
    milkcarton.components.workable:SetWorkLeft(3)
    milkcarton.components.workable:SetOnFinishCallback(function(milkcarton)
        SpawnPrefab("collapse_big").Transform:SetPosition(milkcarton.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        milkcarton:Remove()
    end )
    milkcarton:ListenForEvent( "daytime", function()
        if milkcarton.components.container:Has("goldnugget", 5) then
           milkcarton.components.container:ConsumeByName("goldnugget", 5)
           for k = 1, 5 do
               local goatmilk = SpawnPrefab("goatmilk")
               milkcarton.components.container:GiveItem(goatmilk)
           end
           local newspaper = SpawnPrefab("cutlichen")
           newspaper.AnimState:SetBank("blueprint")
           newspaper.AnimState:SetBuild("blueprint")
           newspaper.AnimState:PlayAnimation("idle")
           newspaper.components.inventoryitem:ChangeImageName("blueprint")
           newspaper.Transform:SetScale(1.2, 1.2, 1.2)
           newspaper:AddComponent("named")
           newspaper.components.named:SetName("Newspaper")
           newspaper:RemoveComponent("stackable")
           newspaper:RemoveComponent("edible")
           newspaper:RemoveComponent("perishable")
           newspaper:RemoveComponent("container")
           newspaper:RemoveComponent("deployable")
           newspaper.components.inspectable.getstatus = function(newspaper)
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_clothing")
               GetPlayer().components.sanity:DoDelta(GetPlayer().components.sanity.max)
               newspaper:Remove()
           end
           newspaper:AddTag("newspapers")
           milkcarton.components.container:GiveItem(newspaper)
        end
    end, GetWorld())
    milkcarton:AddTag("milkcartons")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst.components.deployable.min_spacing = 1
    inst:AddComponent("container")
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,150,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.onopenfn = function(inst) inst.AnimState:PlayAnimation("open") GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst.components.container.onclosefn = function(inst) inst.AnimState:PlayAnimation("close") GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst.components.container.itemtestfn = itemtest
    inst:AddTag("fridge")
local function onsave(inst, data)
    if inst:HasTag("milkcartons") then
        data.milkcartons = true
    end
    if inst:HasTag("newspapers") then
        data.newspapers = true
    end
end
local function onload(inst, data)
  if data and data.milkcartons then
    inst.AnimState:SetBank("icebox")
    inst.AnimState:SetBuild("ice_box")
    inst.AnimState:PlayAnimation("closed")
    inst.Transform:SetScale(0.6, 0.6, 0.6)
    inst.AnimState:SetMultColour(0/255,185/255,255/255,1)
    inst:AddComponent("named")
    inst.components.named:SetName("Milk carton")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:ListenForEvent( "daytime", function()
        if inst.components.container:Has("goldnugget", 5) then
           inst.components.container:ConsumeByName("goldnugget", 5)
           for k = 1, 5 do
               local goatmilk = SpawnPrefab("goatmilk")
               inst.components.container:GiveItem(goatmilk)
           end
           local newspaper = SpawnPrefab("cutlichen")
           newspaper.AnimState:SetBank("blueprint")
           newspaper.AnimState:SetBuild("blueprint")
           newspaper.AnimState:PlayAnimation("idle")
           newspaper.components.inventoryitem:ChangeImageName("blueprint")
           newspaper.Transform:SetScale(1.2, 1.2, 1.2)
           newspaper:AddComponent("named")
           newspaper.components.named:SetName("Newspaper")
           newspaper:RemoveComponent("stackable")
           newspaper:RemoveComponent("edible")
           newspaper:RemoveComponent("perishable")
           newspaper:RemoveComponent("container")
           newspaper:RemoveComponent("deployable")
           newspaper.components.inspectable.getstatus = function(newspaper)
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_clothing")
               GetPlayer().components.sanity:DoDelta(GetPlayer().components.sanity.max)
               newspaper:Remove()
           end
           newspaper:AddTag("newspapers")
           inst.components.container:GiveItem(newspaper)
        end
    end, GetWorld())
    inst:AddTag("milkcartons")
  end
  if data and data.newspapers then
    inst.AnimState:SetBank("blueprint")
    inst.AnimState:SetBuild("blueprint")
    inst.AnimState:PlayAnimation("idle")
    inst.components.inventoryitem:ChangeImageName("blueprint")
    inst.Transform:SetScale(1.2, 1.2, 1.2)
    inst:AddComponent("named")
    inst.components.named:SetName("Newspaper")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("container")
    inst:RemoveComponent("deployable")
    inst.components.inspectable.getstatus = function(inst)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_clothing")
        GetPlayer().components.sanity:DoDelta(GetPlayer().components.sanity.max)
        inst:Remove()
    end
    inst:AddTag("newspapers")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用苔藓种奶报箱，鼠标左键点奶报箱可打开格子，在格子中放入黄金（订奶预付款，最少5个黄金），第二天清晨将送来5瓶牛奶，并免费赠送一份报纸，同时扣除5个黄金。将报纸放入物品栏，对其点鼠标右键可读报，将补满脑值。如果格子中有黄金，点格子上方的“Buy”按钮，可以额外购买报纸，每份1个黄金。如果每天想多订牛奶和报纸，就多种几个奶报箱吧。不想要奶报箱了，用锤子砸毁即可。苔藓可在洞穴中采到。不要与“用苔藓种苔藓（苔藓可移植）”一同修改




二六一.智能路灯（用蓝色护身符种智能路灯，夜晚自动点亮，白天熄灭，可手动开关、防雷击）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，在inst.AnimState:PlayAnimation("blueamulet")的下一行插入以下内容：

local function makestreetlight(inst)
    local pt = inst:GetPosition()
    local streetlight = SpawnPrefab("blueamulet")
    streetlight.Transform:SetPosition(pt.x, pt.y, pt.z)
    streetlight.AnimState:SetBank("nightstick")
    streetlight.AnimState:SetBuild("nightstick")
    streetlight.AnimState:PlayAnimation("idle")
    streetlight.Transform:SetScale(1.5, 1.5, 1.5)
    streetlight.AnimState:SetMultColour(255/255,255/255,0/255,1)
    MakeObstaclePhysics(streetlight, .5 )
    streetlight:RemoveComponent("equippable")
    streetlight:RemoveComponent("inventoryitem")
    streetlight:RemoveComponent("heater")
    streetlight:RemoveComponent("fueled")
    streetlight:RemoveComponent("deployable")
    streetlight:AddComponent("named")
    streetlight.components.named:SetName("Street Light")
    streetlight:AddComponent("workable")
    streetlight.components.workable:SetWorkAction(ACTIONS.HAMMER)
    streetlight.components.workable:SetWorkLeft(3)
    streetlight.components.workable:SetOnFinishCallback(function(streetlight, worker)
        SpawnPrefab("collapse_big").Transform:SetPosition(streetlight.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos = Vector3(streetlight.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 2)
        for k,v in pairs(ents) do
            if v:HasTag("bulbs") then
               v:Remove()
            end
        end
        streetlight:Remove()
    end )
    streetlight:AddTag("streetlights")
    local bulb = SpawnPrefab("blueamulet")
    bulb.AnimState:SetBank("bulb")
    bulb.AnimState:SetBuild("bulb")
    bulb.AnimState:PlayAnimation("idle")
    bulb.Transform:SetScale(1.6, 1.6, 1.6)
    bulb.Physics:SetActive(false)
    bulb:RemoveComponent("equippable")
    bulb:RemoveComponent("inventoryitem")
    bulb:RemoveComponent("heater")
    bulb:RemoveComponent("fueled")
    bulb:RemoveComponent("deployable")
    bulb.persists = false
    bulb:AddComponent("named")
    bulb.components.named:SetName("Street Light")
    bulb.entity:AddSoundEmitter()
    local light = bulb.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(255/255,255/255,255/255)
    light:Enable(false)  
    local follower = bulb.entity:AddFollower()
    follower:FollowSymbol( streetlight.GUID, "swap_object", 15, -160, 0.1 )
    bulb:AddComponent("machine")
    bulb.components.machine.turnonfn = function()
        bulb.SoundEmitter:PlaySound("dontstarve/wilson/lantern_on")
        bulb.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        bulb.Light:Enable(true)
    end
    bulb.components.machine.turnofffn = function()
        bulb.SoundEmitter:PlaySound("dontstarve/wilson/lantern_off")
        bulb.AnimState:SetBloomEffectHandle( "" )
        bulb.Light:Enable(false)
    end
    bulb:ListenForEvent( "daytime", function() bulb.components.machine:TurnOff() end , GetWorld() )
    bulb:ListenForEvent( "dusktime", function() bulb.components.machine:TurnOn() end , GetWorld() )
    bulb:AddTag("lightningrod")
    bulb:AddTag("bulbs")
    if not GetClock():IsDay() then
       bulb.components.machine:TurnOn()
    else
       bulb.components.machine:TurnOff()
    end
end
local function OnDeploy (inst, pt)
    makestreetlight(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("streetlights") then
       data.streetlights = true
    end
end
local function onload(inst, data)
    if data and data.streetlights then
       makestreetlight(inst)
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蓝色护身符种智能路灯，夜晚自动点亮，白天自动熄灭。鼠标右键点灯泡，可手动开关。智能路灯靠太阳能和闪电做能源，无须手动充能，靠近可防雷击。不想要智能路灯了，用锤子砸掉即可。蓝色护身符在魔法选项（画着红骷髅）下，用3个黄金、1个蓝宝石制造




二六二.传送石（右键点装备的保温石，将主角传送到另一块保温石处）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\heatrock.lua文件，在inst:AddComponent("inspectable")下一行插入以下内容：

local function canteleport(inst, caster)
    return true
end
local function teleport(inst)
    local caster = inst.components.inventoryitem.owner
    local range = 3000
    local pos = Vector3(caster.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v.prefab == "heatrock" and not v.components.inventoryitem:IsHeld() then
            caster.Transform:SetPosition(v.Transform:GetWorldPosition())
        end
    end
    return true
end
    inst:AddComponent("spellcaster")
    inst.components.spellcaster:SetSpellFn(teleport)
    inst.components.spellcaster:SetSpellTestFn(canteleport)
    inst.components.spellcaster.canusefrominventory = false
    inst.components.spellcaster.canuseonpoint = true
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HANDS

    即可制造2块保温石，1块扔在要传到的地点（比如家、洞穴出口处等），另1块带在身上，无论走到地图何处，只要装备保温石对空地按鼠标右键，马上传送回扔在地上的保温石处。如果制造3块保温石，将2块扔在不同地点，这2点间将形成虫洞效果，装备保温石对空地按鼠标右键，会在这2点间来回传送




二六三.御风飞翔（装备羽毛飞翔10秒）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\feathers.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onequip(inst, owner)
    inst.fire = SpawnPrefab( "feather_"..name )
    inst.fire.Physics:SetActive(false)
    local follower = inst.fire.entity:AddFollower()
    follower:FollowSymbol( inst.GUID, "swap_object", 0, 60, 0 )
    local pt = owner:GetPosition()
    owner.Transform:SetPosition(pt.x, pt.y+30, pt.z)
    inst:DoTaskInTime(10, function() 
    local pt = owner:GetPosition()
    owner.Transform:SetPosition(pt.x, pt.y-30, pt.z)
    inst:Remove()
    end)
end
local function onunequip(inst, owner)
    local pt = owner:GetPosition()
    owner.Transform:SetPosition(pt.x, pt.y-30, pt.z)
    inst.fire:Remove()
    inst.fire = nil
end
    inst:AddComponent("equippable")
    inst.components.equippable:SetOnEquip( onequip )
    inst.components.equippable:SetOnUnequip( onunequip )
    inst.components.equippable.equipslot = EQUIPSLOTS.HEAD
    inst.components.equippable.walkspeedmult = TUNING.CANE_SPEED_MULT*5

    即可装备羽毛飞翔10秒，体会饥荒世界从未有过的美妙感觉，洞穴也可飞行。10秒后羽毛被耗尽，想飞就要多捕鸟哦。注意飞行时不要佩戴橙色护身符和带宠物




二六四.风力滑板车（饥荒世界陆上交通工具）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\umbrella.lua文件，

    1.将下列内容：

local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_umbrella", "swap_umbrella")
    owner.AnimState:Show("ARM_carry")
    owner.AnimState:Hide("ARM_normal")
    UpdateSound(inst)
    
    owner.DynamicShadow:SetSize(2.2, 1.4)

    inst.components.fueled:StartConsuming()
end

local function onunequip(inst, owner) 
    owner.AnimState:Hide("ARM_carry") 
    owner.AnimState:Show("ARM_normal") 
    UpdateSound(inst)

    owner.DynamicShadow:SetSize(1.3, 0.6)

    inst.components.fueled:StopConsuming()
end

    替换为：

local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_umbrella", "swap_umbrella")
    owner.AnimState:Show("ARM_carry")
    owner.AnimState:Hide("ARM_normal")
    UpdateSound(inst)
    inst.task = inst:DoPeriodicTask(.01, function() owner.Physics:SetMotorVelOverride(20,0,0) end)
    inst.fire = SpawnPrefab( "telebase" )
    inst.fire.Physics:SetActive(false)
    local follower = inst.fire.entity:AddFollower()
    follower:FollowSymbol( owner.GUID, "swap_object", -90, 130, 0 )
end
local function onunequip(inst, owner) 
    owner.AnimState:Hide("ARM_carry") 
    owner.AnimState:Show("ARM_normal") 
    UpdateSound(inst)
    if inst.task then inst.task:Cancel() inst.task = nil end
    inst.fire:Remove()
    inst.fire = nil
end


    2.在inst.components.fueled:SetDepletedFn(onperish)的下一行插入inst:AddComponent("blinkstaff")

    即可在装备雨伞时，脚下踩着滑板自动行驶，伞就是你的风帆，卸载雨伞后停下。鼠标左键点地可以控制方向（也可以用键盘W、S、A、D键控制方向），鼠标右键点地可以瞬移（用以跳过障碍），有空儿去兜兜风吧。雨伞在生存选项（画着绳套）下，用6个树枝、1个猪皮、2个蛛丝制造




二六五.动力飞行帽（戴羽毛帽在天空自由飞翔）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hats.lua文件，将下列内容：

    local function feather_equip(inst, owner)
        onequip(inst, owner)
        local ground = GetWorld()
        if ground and ground.components.birdspawner then
            ground.components.birdspawner:SetSpawnTimes(TUNING.BIRD_SPAWN_DELAY_FEATHERHAT)
            ground.components.birdspawner:SetMaxBirds(TUNING.BIRD_SPAWN_MAX_FEATHERHAT)
        end
    end
    local function feather_unequip(inst, owner)
        onunequip(inst, owner)
        local ground = GetWorld()
        if ground and ground.components.birdspawner then
            ground.components.birdspawner:SetSpawnTimes(TUNING.BIRD_SPAWN_DELAY)
            ground.components.birdspawner:SetMaxBirds(TUNING.BIRD_SPAWN_MAX)
        end
    end
    local function feather()
        local inst = simple()
        
		inst.components.equippable.dapperness = TUNING.DAPPERNESS_SMALL
        
        inst.components.equippable:SetOnEquip( feather_equip )
        inst.components.equippable:SetOnUnequip( feather_unequip )
        
        inst:AddComponent("fueled")
        inst.components.fueled.fueltype = "USAGE"
        inst.components.fueled:InitializeFuelLevel(TUNING.FEATHERHAT_PERISHTIME)
        inst.components.fueled:SetDepletedFn(generic_perish)

    替换为：

local function feather_equip(inst, owner)
    onequip(inst, owner)
    local shadow = GetPlayer().entity:AddDynamicShadow()
    shadow:SetSize( 0, 0 )
    inst.task = inst:DoPeriodicTask(.01, function() owner.Physics:SetMotorVelOverride(20,10,0) end )
    inst:DoTaskInTime(3, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end
        inst.task = inst:DoPeriodicTask(.01, function() owner.Physics:SetMotorVelOverride(20,1,0) end)
    end )
end
local function feather_unequip(inst, owner)
    if inst.task then inst.task:Cancel() inst.task = nil end
    inst.task = inst:DoPeriodicTask(.01, function() owner.Physics:SetMotorVelOverride(20,-10,0) end)
    inst:DoTaskInTime(3, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end
        onunequip(inst, owner)
        local shadow = GetPlayer().entity:AddDynamicShadow()
        shadow:SetSize( 1.3, .6 )
    end)
end
local function feather()
    local inst = simple()
    inst.components.equippable.dapperness = TUNING.DAPPERNESS_SMALL
    inst.components.equippable:SetOnEquip( feather_equip )
    inst.components.equippable:SetOnUnequip( feather_unequip )

    即可在戴羽毛帽时开始起飞，爬升3秒后平飞，用键盘W、S、A、D键控制方向。想降落时卸载羽毛帽即可开始着陆，落地后会滑行一段（按W、S、A、D键可以减少滑行距离）。注意不要在爬升阶段卸载羽毛帽（平飞时再卸载即可），否则在惯性作用下将滑出很长一段距离




二六六.虫洞地铁（虫洞可以搬到任意地点，搭建地铁网络）

    用记事本打开游戏目录\data\scripts\prefabs\wormhole.lua文件，

    1.将doer.components.sanity:DoDelta(-TUNING.SANITY_MED)替换为doer.components.sanity:DoDelta(TUNING.SANITY_MED)


    2.在inst:AddComponent("inspectable")的下一行插入以下内容：

local function turnon(inst)
    inst.components.machine.ison = true
    inst.components.inventoryitem.canbepickedup = true
end
local function turnoff(inst)
    inst.components.machine.ison = false
    inst.components.inventoryitem.canbepickedup = false
end
    inst:AddComponent("equippable")
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:ChangeImageName("abigail_flower")
    inst.components.inventoryitem.canbepickedup = false
    inst:AddComponent("machine")
    inst.components.machine.turnonfn = turnon
    inst.components.machine.turnofffn = turnoff

    即可对虫洞按鼠标右键解除锁在地上，再点左键就可以将它捡起（在物品栏里显示为一朵花的图片），到要放置的地点后，将虫洞拿出放在地上，对其点鼠标右键即可再次锁在地上。在家门口摆一排虫洞，将对应的虫洞放在想去的地方，组成自己的虫洞地铁网络吧。另外跳虫洞不但不会降脑，反而会补脑，让你出行的心情更加愉快




二六七.蜘蛛座骑（按键盘PageUP键召唤蜘蛛座骑，按PageDown键取消）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("inventory")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_PAGEUP, function()
    if inst.task then inst.task:Cancel() inst.task = nil end
    if inst.task2 then inst.task2:Cancel() inst.task2 = nil end
    if inst.doll then inst.doll:Remove() inst.doll = nil end
    inst.components.locomotor:Stop()
    inst.components.playercontroller:Enable(false)
    SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
    inst.SoundEmitter:PlaySound("dontstarve/creatures/spiderqueen/scream_short")
    inst:DoTaskInTime(0.1, function() 
        inst.AnimState:SetBank("spider_queen")
        inst.AnimState:SetBuild("spider_queen_build")
        inst.AnimState:PlayAnimation("idle", true)
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        inst:SetStateGraph("SGspiderqueen")
        shadow:SetSize( 7, 3 )
        inst.components.locomotor.walkspeed = 15
        inst.components.locomotor.runspeed = 20
        inst.components.health:SetInvincible(true)
        inst.components.hunger:Pause()
        inst.components.combat:SetDefaultDamage(300)
        inst.components.temperature:SetTemp(20)
        inst.components.playercontroller:Enable(true)
        local pt = GetPlayer():GetPosition()
        inst.doll = SpawnPrefab( "beardhair" )
        inst.doll.Transform:SetPosition(pt.x, 3.5, pt.z)
        inst.doll.Physics:SetActive(false)
        inst.doll.AnimState:SetBank("wilson")
        inst.doll.AnimState:SetBuild(name)
        inst.doll.AnimState:OverrideSymbol("swap_object", "swap_spear", "swap_spear")
        inst.doll.AnimState:Hide("ARM_normal")
        inst.doll.AnimState:Show("ARM_carry")
        inst.doll.Transform:SetFourFaced()
        inst.doll.AnimState:PlayAnimation("idle")
        inst.doll:RemoveComponent("burnable")
        inst.doll:RemoveComponent("propagator")
        inst.doll:RemoveComponent("inspectable")
        inst.doll:RemoveComponent("inventoryitem")
        inst.doll:RemoveComponent("stackable")
        inst.doll:RemoveComponent("fuel")
        inst.task = inst:DoPeriodicTask(.05, function()
            local pt1 = GetPlayer():GetPosition()
            inst.doll.Transform:SetPosition(pt1.x, 3.5, pt1.z)
            inst.doll.Transform:SetRotation(GetPlayer().Transform:GetRotation())
        end )
        inst.task2 = inst:DoPeriodicTask(10, function()
            inst.doll.AnimState:PlayAnimation("give",true)
            inst:DoTaskInTime(2.2, function() inst.doll.AnimState:PlayAnimation("idle") end )
        end )
    end )
end )
TheInput:AddKeyUpHandler(KEY_PAGEDOWN, function()
    inst.components.locomotor:Stop()
    inst.components.playercontroller:Enable(false)
    SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
    inst.SoundEmitter:PlaySound("dontstarve/creatures/spiderqueen/scream_short")
    inst:DoTaskInTime(0.1, function() 
        inst.AnimState:SetBank("wilson")
        inst.AnimState:SetBuild(name)
        inst.AnimState:PlayAnimation("idle")
        inst.AnimState:SetBloomEffectHandle("")
        inst:SetStateGraph("SGwilson")
        shadow:SetSize( 1.3, .6 )
        inst.components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
        inst.components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
        inst.components.health:SetInvincible(false)
        inst.components.hunger:Resume()
        inst.components.combat:SetDefaultDamage(TUNING.UNARMED_DAMAGE)
        inst.components.temperature:SetTemp(nil)
        inst.components.playercontroller:Enable(true)
        if inst.task then inst.task:Cancel() inst.task = nil end
        if inst.task2 then inst.task2:Cancel() inst.task2 = nil end
        if inst.doll then inst.doll:Remove() inst.doll = nil end
    end )
end )

    即可按键盘PageUP键召唤蜘蛛座骑（自动骑在蜘蛛身上），按PageDown键取消座骑。攻击时对敌人按Ctrl + 鼠标左键（也可以按住F键连续还击）。骑在蜘蛛身上时，敌人无法打到主角，所以主角不会掉血




二六八.喷气虫座骑（用夏日背心种喷气虫座骑，左键点虫可骑乘，右键点主角可下来，给草让它原地等待）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\trunkvest.lua文件，在inst.AnimState:SetBuild("armor_trunkvest_summer")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local jet = SpawnPrefab("trunkvest_summer")
    jet.Transform:SetPosition(pt.x, pt.y, pt.z)
    jet.AnimState:SetBank("glommer")
    jet.AnimState:SetBuild("glommer")
    jet.AnimState:PlayAnimation("idle_loop")
    jet.Transform:SetFourFaced()
    jet.entity:AddSoundEmitter()
    local shadow = jet.entity:AddDynamicShadow()
    shadow:SetSize( 2, .75 )
    local minimap = jet.entity:AddMiniMapEntity()
    minimap:SetIcon("glommer.png")
    jet:AddComponent("named")
    jet.components.named:SetName("Glommer")
    jet:RemoveComponent("inventoryitem")
    jet:RemoveComponent("equippable")
    jet:RemoveComponent("insulator")
    jet:RemoveComponent("fueled")
    jet:RemoveComponent("waterproofer")
    jet:RemoveComponent("deployable")
    jet:AddComponent("knownlocations")
    jet:AddComponent("follower")
    jet.components.follower:SetLeader(GetPlayer())
    jet:AddComponent("lootdropper")
    jet:AddComponent("health")
    jet.components.health:SetMaxHealth(2000)
    jet:AddComponent("combat")
    jet:AddComponent("locomotor")
    jet.components.locomotor.walkspeed = 15
    jet:SetStateGraph("SGglommer")
    local brain = require "brains/chesterbrain"
    jet:SetBrain(brain)
    jet:AddComponent("trader")
    jet.components.trader:SetAcceptTest(function(jet, item)
        if not jet:HasTag("driving") then
           if item.prefab == "cutgrass" then
              return true
           end
        end
        return false
    end )
    jet.components.trader.onaccept = function(jet, giver, item)
        jet.components.health:DoDelta(2000)
        if not jet:HasTag("stophere") then
           jet:AddTag("stophere")
           jet.components.locomotor:Stop()
           jet:SetBrain(nil)
           jet.components.follower:SetLeader(nil)
        else
           jet:RemoveTag("stophere")
           local brain = require "brains/chesterbrain"
           jet:SetBrain(brain)
           jet:RestartBrain()
           jet.components.follower:SetLeader(GetPlayer())
        end
    end
    jet.components.inspectable.getstatus = function()
        if not jet:HasTag("driving") then
           jet:AddTag("driving")
           jet:RemoveTag("stophere")
           jet.components.locomotor:Stop()
           local shadow = jet.entity:AddDynamicShadow()
           shadow:SetSize( 0, 0 )
           jet.Physics:SetActive(false)
           jet:SetStateGraph("SGshadowwaxwell")
           jet:SetBrain(nil)
           jet.components.follower:SetLeader(nil)
           jet.AnimState:SetBank("wilson")
           if GetPlayer().prefab == "wilson" then jet.AnimState:SetBuild("wilson") end
           if GetPlayer().prefab == "wendy" then jet.AnimState:SetBuild("wendy") end
           if GetPlayer().prefab == "wes" then jet.AnimState:SetBuild("wes") end
           if GetPlayer().prefab == "wickerbottom" then jet.AnimState:SetBuild("wickerbottom") end
           if GetPlayer().prefab == "willow" then jet.AnimState:SetBuild("willow") end
           if GetPlayer().prefab == "wolfgang" then jet.AnimState:SetBuild("wolfgang") end
           if GetPlayer().prefab == "wx78" then jet.AnimState:SetBuild("wx78") end
           if GetPlayer().prefab == "woodie" then jet.AnimState:SetBuild("woodie") end
           if GetPlayer().prefab == "waxwell" then jet.AnimState:SetBuild("waxwell") end
           if GetPlayer().prefab == "wathgrithr" then jet.AnimState:SetBuild("wathgrithr") end
           if GetPlayer().prefab == "webber" then jet.AnimState:SetBuild("webber") end
           jet.AnimState:PlayAnimation("idle")
           jet.AnimState:Hide("ARM_carry") 
           jet.AnimState:Show("ARM_normal")
           jet.Transform:SetRotation( 0 )
           jet.task = jet:DoPeriodicTask(0.05, function(jet)
               local pt1 = GetPlayer():GetPosition()
               jet.Transform:SetPosition(pt1.x, 3.5, pt1.z)
               jet.Transform:SetRotation(GetPlayer().Transform:GetRotation())
           end )
           GetPlayer().AnimState:SetBank("glommer")
           GetPlayer().AnimState:SetBuild("glommer")
           GetPlayer().AnimState:PlayAnimation("idle_loop")
           GetPlayer():SetStateGraph("SGglommer")
           local shadow = GetPlayer().entity:AddDynamicShadow()
           shadow:SetSize( 2, .75 )
           GetPlayer().components.locomotor.walkspeed = 25
           GetPlayer().components.locomotor.runspeed = 25
           GetPlayer().components.health:SetInvincible(true)
           GetPlayer().components.hunger:Pause()
           GetPlayer().components.temperature:SetTemp(20)
           GetPlayer().components.playeractionpicker.leftclickoverride = function(target_ent, pos)
               if GetPlayer().components.combat:CanTarget(target_ent) then
                  return GetPlayer().components.playeractionpicker:SortActionList({ACTIONS.LOOKAT}, target_ent, nil)
               end
           end
        else
           jet:RemoveTag("driving")
           local shadow = jet.entity:AddDynamicShadow()
           shadow:SetSize( 2, .75 )
           jet.Physics:SetActive(true)
           jet.AnimState:SetBank("glommer")
           jet.AnimState:SetBuild("glommer")
           jet.AnimState:PlayAnimation("idle_loop")
           jet:SetStateGraph("SGglommer")
           local brain = require "brains/chesterbrain"
           jet:SetBrain(brain)
           jet:RestartBrain()
           jet.components.follower:SetLeader(GetPlayer())
           if jet.task then jet.task:Cancel() jet.task = nil end
           local pt1 = GetPlayer():GetPosition()
           jet.Transform:SetPosition(pt1.x, 0, pt1.z)
           GetPlayer().AnimState:SetBank("wilson")
           if GetPlayer().prefab == "wilson" then GetPlayer().AnimState:SetBuild("wilson") end
           if GetPlayer().prefab == "wendy" then GetPlayer().AnimState:SetBuild("wendy") end
           if GetPlayer().prefab == "wes" then GetPlayer().AnimState:SetBuild("wes") end
           if GetPlayer().prefab == "wickerbottom" then GetPlayer().AnimState:SetBuild("wickerbottom") end
           if GetPlayer().prefab == "willow" then GetPlayer().AnimState:SetBuild("willow") end
           if GetPlayer().prefab == "wolfgang" then GetPlayer().AnimState:SetBuild("wolfgang") end
           if GetPlayer().prefab == "wx78" then GetPlayer().AnimState:SetBuild("wx78") end
           if GetPlayer().prefab == "woodie" then GetPlayer().AnimState:SetBuild("woodie") end
           if GetPlayer().prefab == "waxwell" then GetPlayer().AnimState:SetBuild("waxwell") end
           if GetPlayer().prefab == "wathgrithr" then GetPlayer().AnimState:SetBuild("wathgrithr") end
           if GetPlayer().prefab == "webber" then GetPlayer().AnimState:SetBuild("webber") end
           GetPlayer().AnimState:PlayAnimation("idle")
           GetPlayer():SetStateGraph("SGwilson")
           local shadow = GetPlayer().entity:AddDynamicShadow()
           shadow:SetSize( 1.3, .6 )
           GetPlayer().components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
           GetPlayer().components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
           GetPlayer().components.health:SetInvincible(false)
           GetPlayer().components.hunger:Resume()
           GetPlayer().components.temperature:SetTemp(nil)
           GetPlayer().components.playeractionpicker.leftclickoverride = nil
        end
    end
    jet:AddTag("jets")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("jets") then
        data.jets = true
    end
    if inst:HasTag("stophere") then
        data.stophere = true
    end
end
local function onload(inst, data)
  if data and data.jets then
    inst.AnimState:SetBank("glommer")
    inst.AnimState:SetBuild("glommer")
    inst.AnimState:PlayAnimation("idle_loop")
    inst.Transform:SetFourFaced()
    inst.entity:AddSoundEmitter()
    local shadow = inst.entity:AddDynamicShadow()
    shadow:SetSize( 2, .75 )
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("glommer.png")
    inst:AddComponent("named")
    inst.components.named:SetName("Glommer")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("insulator")
    inst:RemoveComponent("fueled")
    inst:RemoveComponent("waterproofer")
    inst:RemoveComponent("deployable")
    inst:AddComponent("knownlocations")
    inst:AddComponent("follower")
    inst.components.follower:SetLeader(GetPlayer())
    inst:AddComponent("lootdropper")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(2000)
    inst:AddComponent("combat")
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 15
    inst:SetStateGraph("SGglommer")
    local brain = require "brains/chesterbrain"
    inst:SetBrain(brain)
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item)
        if not inst:HasTag("driving") then
           if item.prefab == "cutgrass" then
              return true
           end
        end
        return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        inst.components.health:DoDelta(2000)
        if not inst:HasTag("stophere") then
           inst:AddTag("stophere")
           inst.components.locomotor:Stop()
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
        else
           inst:RemoveTag("stophere")
           local brain = require "brains/chesterbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
        end
    end
    inst.components.inspectable.getstatus = function()
        if not inst:HasTag("driving") then
           inst:AddTag("driving")
           inst:RemoveTag("stophere")
           inst.components.locomotor:Stop()
           local shadow = inst.entity:AddDynamicShadow()
           shadow:SetSize( 0, 0 )
           inst.Physics:SetActive(false)
           inst:SetStateGraph("SGshadowwaxwell")
           inst:SetBrain(nil)
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBank("wilson")
           if GetPlayer().prefab == "wilson" then inst.AnimState:SetBuild("wilson") end
           if GetPlayer().prefab == "wendy" then inst.AnimState:SetBuild("wendy") end
           if GetPlayer().prefab == "wes" then inst.AnimState:SetBuild("wes") end
           if GetPlayer().prefab == "wickerbottom" then inst.AnimState:SetBuild("wickerbottom") end
           if GetPlayer().prefab == "willow" then inst.AnimState:SetBuild("willow") end
           if GetPlayer().prefab == "wolfgang" then inst.AnimState:SetBuild("wolfgang") end
           if GetPlayer().prefab == "wx78" then inst.AnimState:SetBuild("wx78") end
           if GetPlayer().prefab == "woodie" then inst.AnimState:SetBuild("woodie") end
           if GetPlayer().prefab == "waxwell" then inst.AnimState:SetBuild("waxwell") end
           if GetPlayer().prefab == "wathgrithr" then inst.AnimState:SetBuild("wathgrithr") end
           if GetPlayer().prefab == "webber" then inst.AnimState:SetBuild("webber") end
           inst.AnimState:PlayAnimation("idle")
           inst.AnimState:Hide("ARM_carry") 
           inst.AnimState:Show("ARM_normal")
           inst.Transform:SetRotation( 0 )
           inst.task = inst:DoPeriodicTask(0.05, function(inst)
               local pt1 = GetPlayer():GetPosition()
               inst.Transform:SetPosition(pt1.x, 3.5, pt1.z)
               inst.Transform:SetRotation(GetPlayer().Transform:GetRotation())
           end )
           GetPlayer().AnimState:SetBank("glommer")
           GetPlayer().AnimState:SetBuild("glommer")
           GetPlayer().AnimState:PlayAnimation("idle_loop")
           GetPlayer():SetStateGraph("SGglommer")
           local shadow = GetPlayer().entity:AddDynamicShadow()
           shadow:SetSize( 2, .75 )
           GetPlayer().components.locomotor.walkspeed = 25
           GetPlayer().components.locomotor.runspeed = 25
           GetPlayer().components.health:SetInvincible(true)
           GetPlayer().components.hunger:Pause()
           GetPlayer().components.temperature:SetTemp(20)
           GetPlayer().components.playeractionpicker.leftclickoverride = function(target_ent, pos)
               if GetPlayer().components.combat:CanTarget(target_ent) then
                  return GetPlayer().components.playeractionpicker:SortActionList({ACTIONS.LOOKAT}, target_ent, nil)
               end
           end
        else
           inst:RemoveTag("driving")
           local shadow = inst.entity:AddDynamicShadow()
           shadow:SetSize( 2, .75 )
           inst.Physics:SetActive(true)
           inst.AnimState:SetBank("glommer")
           inst.AnimState:SetBuild("glommer")
           inst.AnimState:PlayAnimation("idle_loop")
           inst:SetStateGraph("SGglommer")
           local brain = require "brains/chesterbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           if inst.task then inst.task:Cancel() inst.task = nil end
           local pt1 = GetPlayer():GetPosition()
           inst.Transform:SetPosition(pt1.x, 0, pt1.z)
           GetPlayer().AnimState:SetBank("wilson")
           if GetPlayer().prefab == "wilson" then GetPlayer().AnimState:SetBuild("wilson") end
           if GetPlayer().prefab == "wendy" then GetPlayer().AnimState:SetBuild("wendy") end
           if GetPlayer().prefab == "wes" then GetPlayer().AnimState:SetBuild("wes") end
           if GetPlayer().prefab == "wickerbottom" then GetPlayer().AnimState:SetBuild("wickerbottom") end
           if GetPlayer().prefab == "willow" then GetPlayer().AnimState:SetBuild("willow") end
           if GetPlayer().prefab == "wolfgang" then GetPlayer().AnimState:SetBuild("wolfgang") end
           if GetPlayer().prefab == "wx78" then GetPlayer().AnimState:SetBuild("wx78") end
           if GetPlayer().prefab == "woodie" then GetPlayer().AnimState:SetBuild("woodie") end
           if GetPlayer().prefab == "waxwell" then GetPlayer().AnimState:SetBuild("waxwell") end
           if GetPlayer().prefab == "wathgrithr" then GetPlayer().AnimState:SetBuild("wathgrithr") end
           if GetPlayer().prefab == "webber" then GetPlayer().AnimState:SetBuild("webber") end
           GetPlayer().AnimState:PlayAnimation("idle")
           GetPlayer():SetStateGraph("SGwilson")
           local shadow = GetPlayer().entity:AddDynamicShadow()
           shadow:SetSize( 1.3, .6 )
           GetPlayer().components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
           GetPlayer().components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
           GetPlayer().components.health:SetInvincible(false)
           GetPlayer().components.hunger:Resume()
           GetPlayer().components.temperature:SetTemp(nil)
           GetPlayer().components.playeractionpicker.leftclickoverride = nil
        end
    end
    inst:AddTag("jets")
  end
  if data and data.stophere then
     inst.components.locomotor:Stop()
     inst:SetBrain(nil)
     inst.components.follower:SetLeader(nil)
     inst:AddTag("stophere")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用夏日背心种喷气虫座骑，对喷气虫点鼠标左键（手里不要拿武器）可骑乘，对主角按鼠标右键可下来。骑着喷气虫时无法战斗，但遭到攻击时不会受伤（敌人够不到你）。喷气虫会跟随你，喂它一根草（拿着草对它点鼠标左键）可让其停在原地，并同时补血，再给一根草可继续跟随。喷气虫座骑在小地图上显示为格罗门图标，不想要喷气虫座骑了，杀掉即可（按Ctrl + 鼠标左键攻击）。夏日背心在穿戴选项（画着帽子）下，用1个红色象鼻、8个蛛丝制造




二六九.公车站（用草席卷种公车站，买票坐到下一站）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bedroll_straw.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst.kind = ""
    inst.soundpath   = "dontstarve/creatures/rook/"
    inst.effortsound = "dontstarve/creatures/rook/steam"
local function OnDeploy (inst, pt)
    local busstation = SpawnPrefab("bedroll_straw")
    busstation.Transform:SetPosition(pt.x, pt.y, pt.z)
    busstation.AnimState:SetBank("sign_home")
    busstation.AnimState:SetBuild("sign_home")
    busstation.AnimState:PlayAnimation("idle")
    busstation.Transform:SetScale(1.5, 1.5, 1.5)
    busstation.AnimState:SetMultColour(255/255,105/255,0/255,0.8)
    local minimap = busstation.entity:AddMiniMapEntity()
    minimap:SetIcon( "sign.png" )
    busstation:RemoveComponent("inventoryitem")
    busstation:RemoveComponent("stackable")
    busstation:RemoveComponent("fuel")
    busstation:RemoveComponent("sleepingbag")
    busstation:RemoveComponent("burnable")
    busstation:RemoveComponent("propagator")
    busstation:RemoveComponent("deployable")
    busstation:AddTag("busstation")
    busstation:AddComponent("workable")
    busstation.components.workable:SetWorkAction(ACTIONS.HAMMER)
    busstation.components.workable:SetWorkLeft(3)
    busstation.components.workable:SetOnFinishCallback(function(busstation)
        SpawnPrefab("collapse_big").Transform:SetPosition(busstation.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        busstation:Remove()
    end )
    busstation:AddComponent("trader")
    busstation.components.trader:SetAcceptTest(function(busstation, item) 
       if item.prefab == "goldnugget" then
          return true
       end
       return false
    end )
    busstation.components.trader.onaccept = function(busstation, giver, item)
        busstation:AddTag("startingpoint")
        local target = FindEntity(busstation, 3000, function(guy) 
            return guy:HasTag("busstation") and not guy:HasTag("startingpoint")
        end )
        if target then
           GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
           GetPlayer().components.playercontroller:Enable(false)
           local pt1 = busstation:GetPosition()
           local bus = SpawnPrefab("bedroll_straw")
           bus.Transform:SetPosition(pt1.x+15+2, 0, pt1.z-15+2)
           bus.AnimState:SetBank("rook")
           bus.AnimState:SetBuild("rook_build")
           bus.AnimState:PlayAnimation("idle", true)
           bus.Transform:SetFourFaced()
           bus.Transform:SetScale(1.2, 1.2, 1.2)
           bus.AnimState:SetMultColour(255/255,105/255,0/255,1)
           local sound = bus.entity:AddSoundEmitter()
           bus:RemoveComponent("inventoryitem")
           bus:RemoveComponent("stackable")
           bus:RemoveComponent("fuel")
           bus:RemoveComponent("sleepingbag")
           bus:RemoveComponent("burnable")
           bus:RemoveComponent("propagator")
           bus:RemoveComponent("deployable")
           bus:AddTag("goodbye")
           bus:AddComponent("locomotor")
           bus.components.locomotor.walkspeed = 5
           bus.components.locomotor.runspeed =  10
           bus:SetStateGraph("SGrook")
           bus:AddComponent("health")
           bus.components.health:SetMaxHealth(1000)
           bus.components.health:SetInvincible(true)
           bus:AddComponent("combat")
           bus:AddComponent("follower")
           bus:AddComponent("knownlocations")
           bus:DoTaskInTime(1, function()
               bus.components.locomotor:GoToPoint(Point(pt1.x+2, 0, pt1.z+2))
           end )
           bus:DoTaskInTime(9, function()
               GetPlayer():Hide()
               GetPlayer().components.health:SetInvincible(true)
               local shadow = GetPlayer().entity:AddDynamicShadow()
               shadow:SetSize( 0, 0 )
               bus.components.locomotor:GoToPoint(Point(pt1.x-15+2, 0, pt1.z+15+2))
           end )
           GetPlayer():DoTaskInTime(15, function()
               TheFrontEnd:Fade(false,1)
               bus:Remove()
               GetPlayer().Transform:SetPosition(target.Transform:GetWorldPosition())
               GetPlayer():DoTaskInTime(2, function()
                   TheFrontEnd:Fade(true,1)
                   busstation:RemoveTag("startingpoint")
                   GetPlayer():Show()
                   GetPlayer().components.health:SetInvincible(false)
                   GetPlayer().components.playercontroller:Enable(true)
                   local shadow = GetPlayer().entity:AddDynamicShadow()
                   shadow:SetSize( 1.3, .6 )
               end )
           end )
        else
           SpawnPrefab("goldnugget").Transform:SetPosition(GetPlayer().Transform:GetWorldPosition())
           busstation:RemoveTag("startingpoint")
        end
    end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("busstation") then
        data.busstation = true
    end
end
local function onload(inst, data)
  if data and data.goodbye then
     inst:Remove()
  end
  if data and data.busstation then
    inst.AnimState:SetBank("sign_home")
    inst.AnimState:SetBuild("sign_home")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    inst.AnimState:SetMultColour(255/255,105/255,0/255,0.8)
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "sign.png" )
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("sleepingbag")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst:AddTag("busstation")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:AddComponent("trader")
    inst.components.trader:SetAcceptTest(function(inst, item) 
       if item.prefab == "goldnugget" then
          return true
       end
       return false
    end )
    inst.components.trader.onaccept = function(inst, giver, item)
        inst:AddTag("startingpoint")
        local target = FindEntity(inst, 3000, function(guy) 
            return guy:HasTag("busstation") and not guy:HasTag("startingpoint")
        end )
        if target then
           GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
           GetPlayer().components.playercontroller:Enable(false)
           local pt1 = inst:GetPosition()
           local bus = SpawnPrefab("bedroll_straw")
           bus.Transform:SetPosition(pt1.x+15+2, 0, pt1.z-15+2)
           bus.AnimState:SetBank("rook")
           bus.AnimState:SetBuild("rook_build")
           bus.AnimState:PlayAnimation("idle", true)
           bus.Transform:SetFourFaced()
           bus.Transform:SetScale(1.2, 1.2, 1.2)
           bus.AnimState:SetMultColour(255/255,105/255,0/255,1)
           local sound = bus.entity:AddSoundEmitter()
           bus:RemoveComponent("inventoryitem")
           bus:RemoveComponent("stackable")
           bus:RemoveComponent("fuel")
           bus:RemoveComponent("sleepingbag")
           bus:RemoveComponent("burnable")
           bus:RemoveComponent("propagator")
           bus:RemoveComponent("deployable")
           bus:AddTag("goodbye")
           bus:AddComponent("locomotor")
           bus.components.locomotor.walkspeed = 5
           bus.components.locomotor.runspeed =  10
           bus:SetStateGraph("SGrook")
           bus:AddComponent("health")
           bus.components.health:SetMaxHealth(1000)
           bus.components.health:SetInvincible(true)
           bus:AddComponent("combat")
           bus:AddComponent("follower")
           bus:AddComponent("knownlocations")
           bus:DoTaskInTime(1, function()
               bus.components.locomotor:GoToPoint(Point(pt1.x+2, 0, pt1.z+2))
           end )
           bus:DoTaskInTime(9, function()
               GetPlayer():Hide()
               GetPlayer().components.health:SetInvincible(true)
               local shadow = GetPlayer().entity:AddDynamicShadow()
               shadow:SetSize( 0, 0 )
               bus.components.locomotor:GoToPoint(Point(pt1.x-15+2, 0, pt1.z+15+2))
           end )
           GetPlayer():DoTaskInTime(15, function()
               TheFrontEnd:Fade(false,1)
               bus:Remove()
               GetPlayer().Transform:SetPosition(target.Transform:GetWorldPosition())
               GetPlayer():DoTaskInTime(2, function()
                   TheFrontEnd:Fade(true,1)
                   inst:RemoveTag("startingpoint")
                   GetPlayer():Show()
                   GetPlayer().components.health:SetInvincible(false)
                   GetPlayer().components.playercontroller:Enable(true)
                   local shadow = GetPlayer().entity:AddDynamicShadow()
                   shadow:SetSize( 1.3, .6 )
               end )
           end )
        else
           SpawnPrefab("goldnugget").Transform:SetPosition(GetPlayer().Transform:GetWorldPosition())
           inst:RemoveTag("startingpoint")
        end
    end
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在地图的任意两个地点，用草席卷种公车站，给站牌1个黄金（拿着黄金对站牌点鼠标左键），会来公共汽车送你到另一个站牌，方便在两点间快速移动。公车站须种在空旷的地方，以便公共汽车行驶。如果只种了一个公车站，则站牌不会接受你的黄金。公车站在小地图上显示为路牌的图标。不想要公车站时，用锤子砸掉即可。草席卷在生存选项下（画着绳套）下，用6个草、1个绳子制造




二七０.筋斗云（按键盘Z键召唤筋斗云在天上飞行，再按Z键落地）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("resurrectable")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_Z, function()
     if not inst:HasTag("flycloud") then
        inst:AddTag("flycloud")
        inst.components.locomotor:Stop()
        inst.components.talker:ShutUp()
        SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst.AnimState:PlayAnimation("give")
        inst:DoTaskInTime(0.3, function()
            inst.cloud = SpawnPrefab("corn_cooked")
            inst.cloud.Physics:SetActive(false)
            inst.cloud.Transform:SetScale(1.8, 1.8, 1.8)
            inst.cloud.AnimState:SetMultColour(255/255,255/255,255/255,0.6)
            inst.cloud.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            inst.cloud:RemoveComponent("perishable")
            inst.cloud:RemoveComponent("edible")
            inst.cloud:RemoveComponent("stackable")
            inst.cloud:RemoveComponent("inventoryitem")
            inst.cloud:RemoveComponent("bait")
            inst.cloud:RemoveComponent("tradable")
            inst.cloud:RemoveComponent("burnable")
            inst.cloud:RemoveComponent("propagator")
            inst.cloud.persists = false
            inst.cloud:AddTag("NOCLICK")
            local follower = inst.cloud.entity:AddFollower()
            follower:FollowSymbol( inst.GUID, "swap_body", 0, 60, 0 )
            local pt = inst:GetPosition()
            inst.Transform:SetPosition(pt.x, 10, pt.z)
            local shadow = inst.entity:AddDynamicShadow()
            shadow:SetSize( 0, 0 )
            inst.gogogo = inst:DoPeriodicTask(.01, function() inst.Physics:SetMotorVelOverride(25,1.5,0) end)
        end )
     else
        inst:RemoveTag("flycloud")
        inst.components.locomotor:Stop()
        inst.components.talker:ShutUp()
        SpawnPrefab("collapse_small").Transform:SetPosition(inst.Transform:GetWorldPosition())
        inst.AnimState:PlayAnimation("give")
        inst:DoTaskInTime(0.3, function()
            if inst.cloud then inst.cloud:Remove() inst.cloud = nil end
            if inst.gogogo then inst.gogogo:Cancel() inst.gogogo = nil end
            local pt = inst:GetPosition()
            inst.Transform:SetPosition(pt.x, 0, pt.z)
            local shadow = inst.entity:AddDynamicShadow()
            shadow:SetSize( 1.3, .6 )
            inst.Physics:ClearMotorVelOverride()
            inst.Physics:ClearMotorVelOverride()
        end )
     end
end )

    即可口中默念咒语――“走你”，并按下键盘Z键，召唤筋斗云在天上飞行，用键盘W、S、A、D键控制方向，再次按Z键可落地




二七一.全自动播种机（给避雷针植物，自动种下一百多个）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\lightningrod.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local slotpos = { Vector3(0,-75,0)}
local function itemtest(inst, item, slot)
    if item.prefab == "twigs" or item.prefab == "cutgrass" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "cutreeds" or item.prefab == "red_cap" or item.prefab == "green_cap" or item.prefab == "blue_cap" or item.prefab == "carrot" or item.prefab == "berries" or item.prefab == "mandrake" or item.prefab == "foliage" or item.prefab == "cave_banana" or item.prefab == "cutlichen" or item.prefab == "lightbulb" or item.prefab == "pinecone" or item.prefab == "charcoal" or item.prefab == "acorn" or item.prefab == "cactus_meat" then
       return true
    end
    return false
end
local widgetbuttoninfo = {
    text = "Do",
    position = Vector3(0, -145, 0),
    fn = function(inst)
        if GetPlayer().components.inventory:Has("goldnugget", 50) then
           if inst.components.container:Has("twigs", 1) then
              inst.components.container:ConsumeByName("twigs", 1)
              inst.plants = "sapling"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("cutgrass", 1) then
              inst.components.container:ConsumeByName("cutgrass", 1)
              inst.plants = "grass"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("petals", 1) then
              inst.components.container:ConsumeByName("petals", 1)
              inst.plants = "flower"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("petals_evil", 1) then
              inst.components.container:ConsumeByName("petals_evil", 1)
              inst.plants = "flower_evil"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("cutreeds", 1) then
              inst.components.container:ConsumeByName("cutreeds", 1)
              inst.plants = "reeds"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("red_cap", 1) then
              inst.components.container:ConsumeByName("red_cap", 1)
              inst.plants = "red_mushroom"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("green_cap", 1) then
              inst.components.container:ConsumeByName("green_cap", 1)
              inst.plants = "green_mushroom"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("blue_cap", 1) then
              inst.components.container:ConsumeByName("blue_cap", 1)
              inst.plants = "blue_mushroom"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("carrot", 1) then
              inst.components.container:ConsumeByName("carrot", 1)
              inst.plants = "carrot_planted"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("berries", 1) then
              inst.components.container:ConsumeByName("berries", 1)
              inst.plants = "berrybush2"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("mandrake", 1) then
              inst.components.container:ConsumeByName("mandrake", 1)
              inst.plants = "mandrake"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("foliage", 1) then
              inst.components.container:ConsumeByName("foliage", 1)
              inst.plants = "cave_fern"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("cave_banana", 1) then
              inst.components.container:ConsumeByName("cave_banana", 1)
              inst.plants = "cave_banana_tree"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("cutlichen", 1) then
              inst.components.container:ConsumeByName("cutlichen", 1)
              inst.plants = "lichen"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("lightbulb", 1) then
              inst.components.container:ConsumeByName("lightbulb", 1)
              inst.plants = "flower_cave_triple"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("pinecone", 1) then
              inst.components.container:ConsumeByName("pinecone", 1)
              inst.plants = "evergreen_tall"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("charcoal", 1) then
              inst.components.container:ConsumeByName("charcoal", 1)
              inst.plants = "mushtree_tall"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("acorn", 1) then
              inst.components.container:ConsumeByName("acorn", 1)
              inst.plants = "deciduoustree_tall"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           if inst.components.container:Has("cactus_meat", 1) then
              inst.components.container:ConsumeByName("cactus_meat", 1)
              inst.plants = "cactus"
              GetPlayer().components.inventory:ConsumeByName("goldnugget", 50)
           end
           local pt = Vector3(inst.Transform:GetWorldPosition())
           inst:StartThread(function()
               for k = 1, 25 do
                   local result_offset = FindValidPositionByFan(1 * 2 * PI, 4, 25, function(offset)
                       local x,y,z = (pt + offset):Get()
                       local ents = TheSim:FindEntities(x,y,z , 1)
                       return not next(ents) 
                   end)
                   if result_offset then
                       local plant = SpawnPrefab(inst.plants)
                       plant.Transform:SetPosition((pt + result_offset):Get())
                       GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                       local fx = SpawnPrefab("splash_ocean")
                       local pos = pt + result_offset
                       fx.Transform:SetPosition(pos.x, pos.y, pos.z)
                       GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                   end
                   Sleep(.33)
               end
               for k = 1, 37 do
                   local result_offset = FindValidPositionByFan(1 * 2 * PI, 6, 37, function(offset)
                       local x,y,z = (pt + offset):Get()
                       local ents = TheSim:FindEntities(x,y,z , 1)
                       return not next(ents) 
                   end)
                   if result_offset then
                       local plant = SpawnPrefab(inst.plants)
                       plant.Transform:SetPosition((pt + result_offset):Get())
                       GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                       local fx = SpawnPrefab("splash_ocean")
                       local pos = pt + result_offset
                       fx.Transform:SetPosition(pos.x, pos.y, pos.z)
                       GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                   end
                   Sleep(.23)
               end
               for k = 1, 50 do
                   local result_offset = FindValidPositionByFan(1 * 2 * PI, 8, 50, function(offset)
                       local x,y,z = (pt + offset):Get()
                       local ents = TheSim:FindEntities(x,y,z , 1)
                       return not next(ents) 
                   end)
                   if result_offset then
                       local plant = SpawnPrefab(inst.plants)
                       plant.Transform:SetPosition((pt + result_offset):Get())
                       GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
                       local fx = SpawnPrefab("splash_ocean")
                       local pos = pt + result_offset
                       fx.Transform:SetPosition(pos.x, pos.y, pos.z)
                       GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                   end
                   Sleep(.13)
               end
           end)
        end
end }
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,180,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.acceptsstacks = false
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo

    即可在空旷的地上建一个避雷针，鼠标左键点避雷针可打开格子，在格子中放入植物后点Do按钮，可自动种下100多株该植物，将花费50个黄金，身上黄金数不足时不会种植。可种植的17种植物有：给树枝种树苗、给草种草、给花瓣种花、给噩梦花瓣种噩梦花、给芦苇种芦苇、给红蘑菇种红蘑菇、给绿蘑菇种绿蘑菇、给蓝蘑菇种蓝蘑菇、给胡萝卜种胡萝卜、给浆果种果树丛、给曼德拉草种曼德拉草、给叶子种蕨类植物、给香蕉种香蕉树、给苔藓种苔藓、给荧光果种三朵洞穴花、给松果种树、给木炭种蘑菇树、给仙人掌肉种仙人掌、给橡果种橡树（橡树种下时不显示，存档退出再读档就可正常显示）。注意，其中果树丛、香蕉树、树、蘑菇树等种好后人无法通行，可以用“瑞士手杖”瞬移（或“神奇跳跃”跳出来），并用“收割者”大面积收获




二七二.智能播种机器人（将独奏乐器扔在地上自动种100棵香蕉树）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\onemanband.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ondropped(inst)
    local player = GetPlayer()
    if player.components.inventory:Has("goldnugget", 50) then
    player.components.inventory:ConsumeByName("goldnugget", 50)
    RemovePhysicsColliders(inst)
    inst.name = "cave_banana_tree"
    inst.components.inventoryitem.canbepickedup = false
    inst:DoTaskInTime(1, function()
        inst.task = inst:DoPeriodicTask(.5, function()
            inst.Physics:SetMotorVelOverride(2,0,2)
            inst.Physics:ClearMotorVelOverride()
            player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end)
    end)
    inst:DoTaskInTime(11, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end 
        player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst.Physics:SetMotorVelOverride(-3,0,3)
        inst.Physics:ClearMotorVelOverride()
    end)
    inst:DoTaskInTime(12, function()
        inst.task = inst:DoPeriodicTask(.5, function()
            inst.Physics:SetMotorVelOverride(-2,0,-2)
            inst.Physics:ClearMotorVelOverride()
            player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end)
    end)
    inst:DoTaskInTime(22, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end 
        player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst.Physics:SetMotorVelOverride(-3,0,3)
        inst.Physics:ClearMotorVelOverride()
    end)
    inst:DoTaskInTime(23, function()
        inst.task = inst:DoPeriodicTask(.5, function()
            inst.Physics:SetMotorVelOverride(2,0,2)
            inst.Physics:ClearMotorVelOverride()
            player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end)
    end)
    inst:DoTaskInTime(33, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end 
        player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst.Physics:SetMotorVelOverride(-3,0,3)
        inst.Physics:ClearMotorVelOverride()
    end)
    inst:DoTaskInTime(34, function()
        inst.task = inst:DoPeriodicTask(.5, function()
            inst.Physics:SetMotorVelOverride(-2,0,-2)
            inst.Physics:ClearMotorVelOverride()
            player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end)
    end)
    inst:DoTaskInTime(44, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end 
        player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst.Physics:SetMotorVelOverride(-3,0,3)
        inst.Physics:ClearMotorVelOverride()
    end)
    inst:DoTaskInTime(45, function()
        inst.task = inst:DoPeriodicTask(.5, function()
            inst.Physics:SetMotorVelOverride(2,0,2)
            inst.Physics:ClearMotorVelOverride()
            player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            SpawnPrefab(inst.name).Transform:SetPosition(inst.Transform:GetWorldPosition())
        end)
    end)
    inst:DoTaskInTime(55, function() 
        if inst.task then inst.task:Cancel() inst.task = nil end 
        player.SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst.Physics:SetMotorVelOverride(-3,0,3)
        inst.Physics:ClearMotorVelOverride()
        inst.components.inventoryitem.canbepickedup = true
    end)
    end
end
    inst:ListenForEvent("ondropped",  ondropped)

    即可将独奏乐器扔在开阔的空地上，它会自动行驶种下100棵香蕉树（5行，每行20棵），同时收取主角50个黄金，身上黄金不足时不会干活。将其中的cave_banana_tree（洞穴香蕉树）改为其他植物，如flower_cave_triple（三朵洞穴花）等，就可以种其他植物了（见本修改技巧“常用物品中英文名称”）。独奏乐器在魔法选项（画着红骷髅）下，用2个黄金、4个噩梦燃料、2个猪皮制造




二七三.磁悬浮建筑机器人（将针线包扔在地上自动建50块农田）

    用记事本打开游戏目录\data\scripts\prefabs\sewingkit.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function startbuild(inst)
    inst.name = "fast_farmplot"
    local space = 2.1
    local row = 10
    local num = 0 local num2 = 0 local num3 = 0 local num4 = 0 local num5 = 0
    local pt = GetPlayer():GetPosition()
    inst:StartThread(function()
        for k = 1,row do
            num = num + space
            inst.Transform:SetPosition(pt.x+num, 5, pt.z+num)
            SpawnPrefab(inst.name).Transform:SetPosition(pt.x+num, 0, pt.z+num)
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            Sleep(.5)
        end
        for k = 1,row do
            num2 = num2 + space
            inst.Transform:SetPosition(pt.x-2.6+num2, 5, pt.z+2.6+num2)
            SpawnPrefab(inst.name).Transform:SetPosition(pt.x-2.6+num2, 0, pt.z+2.6+num2)
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            Sleep(.5)
        end
        for k = 1,row do
            num3 = num3 + space
            inst.Transform:SetPosition(pt.x-5.2+num3, 5, pt.z+5.2+num3)
            SpawnPrefab(inst.name).Transform:SetPosition(pt.x-5.2+num3, 0, pt.z+5.2+num3)
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            Sleep(.5)
        end
        for k = 1,row do
            num4 = num4 + space
            inst.Transform:SetPosition(pt.x-7.8+num4, 5, pt.z+7.8+num4)
            SpawnPrefab(inst.name).Transform:SetPosition(pt.x-7.8+num4, 0, pt.z+7.8+num4)
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            Sleep(.5)
        end
        for k = 1,row do
            num5 = num5 + space
            inst.Transform:SetPosition(pt.x-10.4+num5, 5, pt.z+10.4+num5)
            SpawnPrefab(inst.name).Transform:SetPosition(pt.x-10.4+num5, 0, pt.z+10.4+num5)
            GetPlayer().components.playercontroller:ShakeCamera(inst, "FULL", 0.2, 0.02, .25, 40)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            Sleep(.5)
        end
    end)
end
local function ondropped(inst)
    if GetPlayer().components.inventory:Has("goldnugget", 100) then
       GetPlayer().components.inventory:ConsumeByName("goldnugget", 100)
       GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
       inst.components.inventoryitem.canbepickedup = false
       inst.Physics:SetMotorVelOverride(0,2,0)
       inst:DoTaskInTime(3, function() startbuild(inst) end)
       inst:DoTaskInTime(28, function()
           inst.Physics:ClearMotorVelOverride()
           inst.components.inventoryitem.canbepickedup = true
           GetPlayer().components.inventory:GiveItem(inst)
       end)
    end
end
    inst:ListenForEvent("ondropped",  ondropped)

    即可将针线包扔在开阔的空地上，它会悬浮在空中自动建50块农田，同时收取主角100个黄金，身上黄金不足时不会干活。将其中的fast_farmplot（高级农田）改为其他建筑，如cookpot（煮锅）、birdcage（鸟笼）等，就可以建其他建筑了（见本修改技巧“常用物品中英文名称”）。针线包在穿戴选项（画着礼帽）下，用1个木头、8个蛛丝、2个犬牙制造




二七四.电动斧子（拿黄金斧子自动放倒身边的树）

    用记事本打开游戏目录\data\scripts\prefabs\axe.lua文件，

    1.将下列内容：

local function onequipgold(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenaxe", "swap_goldenaxe")
	owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")     
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end

    替换为：

local function pickup(inst, owner)
    local range = 3
    local pos = Vector3(owner.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v:HasTag("tree") and v.components.workable and v.components.workable.workleft > 0 then
           v.components.workable:Destroy(GetPlayer())
        end
    end
    inst.SoundEmitter:PlaySound("dontstarve/forest/treeCrumble")
end
local function onequipgold(inst, owner)
    if owner.components.inventory:Has("lightbulb", 1) then
       inst.task = inst:DoPeriodicTask(.033, function() pickup(inst, owner) end)
       owner.components.inventory:ConsumeByName("lightbulb", 1)
    end
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenaxe", "swap_goldenaxe")
    owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
    owner.AnimState:Show("ARM_carry")
    owner.AnimState:Hide("ARM_normal")
end
local function onunequipgold(inst, owner)
    owner.AnimState:Hide("ARM_carry")
    owner.AnimState:Show("ARM_normal")
    if inst.task then inst.task:Cancel() inst.task = nil end
end


    2.在inst.components.equippable:SetOnEquip( onequipgold )的下一行插入inst.components.equippable:SetOnUnequip( onunequipgold )

    即可拿黄金斧子自动放倒身边的树（类似电锯），效率极高，且不留树根，方便种新树。电动斧子需要能源，每次装备时自动开启，会消耗1个荧光果，如果身上没有荧光果，则不会开启电动功能，只能手动砍树了




二七五.电动镐（拿黄金镐自动凿开身边的石头）

    1.用记事本打开游戏目录\data\scripts\prefabs\pickaxe.lua文件，将下列内容：

local function onequipgold(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenpickaxe", "swap_goldenpickaxe")
	owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")     
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end

    替换为：

local function pickup(inst, owner)
    local range = 3
    local pos = Vector3(owner.Transform:GetWorldPosition())
    local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, range)
    for k,v in pairs(ents) do
        if v.components.workable and v.components.workable.action == ACTIONS.MINE and v.components.workable.workleft > 0 then
           v.components.workable:Destroy(GetPlayer())
        end
    end
    inst.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
end
local function onequipgold(inst, owner)
    if owner.components.inventory:Has("lightbulb", 1) then
       inst.task = inst:DoPeriodicTask(.033, function() pickup(inst, owner) end)
       owner.components.inventory:ConsumeByName("lightbulb", 1)
    end
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenpickaxe", "swap_goldenpickaxe")
    owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
    owner.AnimState:Show("ARM_carry")
    owner.AnimState:Hide("ARM_normal")
end
local function onunequipgold(inst, owner)
    owner.AnimState:Hide("ARM_carry")
    owner.AnimState:Show("ARM_normal")
    if inst.task then inst.task:Cancel() inst.task = nil end
end


    2.在inst.components.equippable:SetOnEquip( onequipgold )的下一行插入inst.components.equippable:SetOnUnequip( onunequipgold )

    即可拿黄金镐自动凿开身边的石头，效率极高，连大理石树、蜘蛛洞、远古雕像都可轻松凿平。电动镐需要能源，每次装备时自动开启，会消耗1个荧光果，如果身上没有荧光果，则不会开启电动功能，只能手动开矿了




二七六.电动草叉（拿草叉自动铲起脚下的地皮）

    用记事本打开游戏目录\data\scripts\prefabs\pitchfork.lua文件，将下列内容：

local function onequip(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_pitchfork", "swap_pitchfork")
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end

local function onunequip(inst, owner) 
    owner.AnimState:Hide("ARM_carry") 
    owner.AnimState:Show("ARM_normal") 
end

    替换为：

local function pickup(inst, owner)
    local pt = owner:GetPosition()
    inst.components.terraformer:Terraform(pt)
    inst.SoundEmitter:PlaySound("dontstarve/wilson/dig")
end
local function onequip(inst, owner) 
    if owner.components.inventory:Has("lightbulb", 1) then
       inst.task = inst:DoPeriodicTask(.033, function() pickup(inst, owner) end)
       owner.components.inventory:ConsumeByName("lightbulb", 1)
    end
    owner.AnimState:OverrideSymbol("swap_object", "swap_pitchfork", "swap_pitchfork")
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end
local function onunequip(inst, owner) 
    owner.AnimState:Hide("ARM_carry") 
    owner.AnimState:Show("ARM_normal") 
    if inst.task then inst.task:Cancel() inst.task = nil end
end

    即可拿草叉自动铲起脚下的地皮，效率极高，铲地的速度只取决于你走多快。电动草叉需要能源，每次装备时自动开启，会消耗1个荧光果，如果身上没有荧光果，则不会开启电动功能，只能手动铲地了




二七七.电动铺路铲（拿黄金铲自动将脚下的空地皮铺成路）

    用记事本打开游戏目录\data\scripts\prefabs\shovel.lua文件，

    1.将下列内容：

local function onequipgold(inst, owner) 
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenshovel", "swap_goldenshovel")
	owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")     
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end

    替换为：

local function pickup(inst, owner)
    inst.name = GROUND.ROAD
    local pt = owner:GetPosition()
    local ground = GetWorld()
    local tile = ground.Map:GetTileAtPoint(pt.x, pt.y, pt.z)
    if ground and tile == GROUND.DIRT then
       local original_tile_type = ground.Map:GetTileAtPoint(pt.x, pt.y, pt.z)
       local x, y = ground.Map:GetTileCoordsAtPoint(pt.x, pt.y, pt.z)
       if x and y then
          ground.Map:SetTile(x,y, inst.name)
          ground.Map:RebuildLayer( original_tile_type, x, y )
          ground.Map:RebuildLayer( inst.name, x, y )
       end
       local minimap = TheSim:FindFirstEntityWithTag("minimap")
       if minimap then
          minimap.MiniMap:RebuildLayer( original_tile_type, x, y )
          minimap.MiniMap:RebuildLayer( inst.name, x, y )
       end
    end
    inst.SoundEmitter:PlaySound("dontstarve/wilson/dig")
end
local function onequipgold(inst, owner) 
    if owner.components.inventory:Has("lightbulb", 1) then
       inst.task = inst:DoPeriodicTask(.033, function() pickup(inst, owner) end)
       owner.components.inventory:ConsumeByName("lightbulb", 1)
    end
    owner.AnimState:OverrideSymbol("swap_object", "swap_goldenshovel", "swap_goldenshovel")
    owner.SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")     
    owner.AnimState:Show("ARM_carry") 
    owner.AnimState:Hide("ARM_normal") 
end
local function onunequipgold(inst, owner) 
    owner.AnimState:Hide("ARM_carry") 
    owner.AnimState:Show("ARM_normal") 
    if inst.task then inst.task:Cancel() inst.task = nil end
end


    2.在inst.components.equippable:SetOnEquip( onequipgold )的下一行插入inst.components.equippable:SetOnUnequip( onunequipgold )

    即可拿黄金铲自动将脚下的空地皮铺成路，效率极高，铺路的速度只取决于你走多快。电动铺路铲需要能源，每次装备时自动开启，会消耗1个荧光果，如果身上没有荧光果，则不会开启电动功能。将其中GROUND.ROAD（卵石路）替换为其他地皮名称，如GROUND.ROCKY（岩石地皮）、GROUND.DIRT（污垢地皮）、GROUND.SAVANNA（热带草原地皮）、GROUND.GRASS（长草地皮）、GROUND.FOREST（森林地皮）、GROUND.MARSH（沼泽地皮）、GROUND.WOODFLOOR（木质地板）、GROUND.CARPET（地毯地板）、GROUND.CHECKER（棋盘地板）、GROUND.CAVE（鸟粪地皮）、GROUND.FUNGUS（菌类地皮）、GROUND.FUNGUSRED（红菌类地皮）、GROUND.FUNGUSGREEN（绿菌类地皮）、GROUND.SINKHOLE（粘滑地皮）、GROUND.UNDERROCK（洞穴石地地皮）、GROUND.MUD（泥泞地皮），就可以自动铺其他地皮




二七八.地皮改造机（用排箫种地皮改造机，一次铺70块地皮）

    用记事本打开游戏目录\data\scripts\prefabs\panflute.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "turf_road" or item.prefab == "turf_rocky" or item.prefab == "turf_forest" or item.prefab == "turf_marsh" or item.prefab == "turf_grass" or item.prefab == "turf_savanna" or item.prefab == "turf_dirt" or item.prefab == "turf_woodfloor" or item.prefab == "turf_carpetfloor" or item.prefab == "turf_checkerfloor" or item.prefab == "turf_cave" or item.prefab == "turf_fungus" or item.prefab == "turf_fungus_red" or item.prefab == "turf_fungus_green" or item.prefab == "turf_sinkhole" or item.prefab == "turf_underrock" or item.prefab == "turf_mud" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,-75,0)}
local widgetbuttoninfo = {
    text = "Do",
    position = Vector3(0, -135, 0),
    fn = function(inst)
        if inst:HasTag("turfmachines") then
           if not inst.components.container:IsEmpty() then
              for k,v in pairs(inst.components.container.slots) do
                  if v and v.prefab == "turf_road" then inst.rug = GROUND.ROAD end
                  if v and v.prefab == "turf_rocky" then inst.rug = GROUND.ROCKY end
                  if v and v.prefab == "turf_forest" then inst.rug = GROUND.FOREST end
                  if v and v.prefab == "turf_marsh" then inst.rug = GROUND.MARSH end
                  if v and v.prefab == "turf_grass" then inst.rug = GROUND.GRASS end
                  if v and v.prefab == "turf_savanna" then inst.rug = GROUND.SAVANNA end
                  if v and v.prefab == "turf_dirt" then inst.rug = GROUND.DIRT end
                  if v and v.prefab == "turf_woodfloor" then inst.rug = GROUND.WOODFLOOR end
                  if v and v.prefab == "turf_carpetfloor" then inst.rug = GROUND.CARPET end
                  if v and v.prefab == "turf_checkerfloor" then inst.rug = GROUND.CHECKER end
                  if v and v.prefab == "turf_cave" then inst.rug = GROUND.CAVE end
                  if v and v.prefab == "turf_fungus" then inst.rug = GROUND.FUNGUS end
                  if v and v.prefab == "turf_fungus_red" then inst.rug = GROUND.FUNGUSRED end
                  if v and v.prefab == "turf_fungus_green" then inst.rug = GROUND.FUNGUSGREEN end
                  if v and v.prefab == "turf_sinkhole" then inst.rug = GROUND.SINKHOLE end
                  if v and v.prefab == "turf_underrock" then inst.rug = GROUND.UNDERROCK end
                  if v and v.prefab == "turf_mud" then inst.rug = GROUND.MUD end
                  v:Remove()
              end
              local pt = GetPlayer():GetPosition()
              for y = 10, 0, -1 do
                  for x = 0, 10 do
                      local tile = GetWorld().Map:GetTileAtPoint(pt.x-2.1*x+2.1*y-10.5+10.5, pt.y, pt.z+2.1*x+2.1*y-10.5-10.5)
                      if tile ~= GROUND.IMPASSABLE then
                         local original_tile_type = GetWorld().Map:GetTileAtPoint(pt.x-2.1*x+2.1*y-10.5+10.5, pt.y, pt.z+2.1*x+2.1*y-10.5-10.5)
                         local x, y = GetWorld().Map:GetTileCoordsAtPoint(pt.x-2.1*x+2.1*y-10.5+10.5, pt.y, pt.z+2.1*x+2.1*y-10.5-10.5)
                         GetWorld().Map:SetTile(x,y, inst.rug)
                         GetWorld().Map:RebuildLayer( original_tile_type, x, y )
                         GetWorld().Map:RebuildLayer( inst.rug, x, y )
                         local minimap = TheSim:FindFirstEntityWithTag("minimap")
                         minimap.MiniMap:RebuildLayer( original_tile_type, x, y )
                         minimap.MiniMap:RebuildLayer( inst.rug, x, y )
                      end
                  end
              end
           end
        end
    end }
local function OnDeploy (inst, pt)
    local turfmachine = SpawnPrefab("panflute")
    turfmachine.Transform:SetPosition(pt.x, pt.y, pt.z)
    turfmachine.AnimState:SetBank("researchlab3")
    turfmachine.AnimState:SetBuild("researchlab3")
    turfmachine.AnimState:PlayAnimation("idle")
    turfmachine.Transform:SetScale(0.5, 0.5, 0.5)
    turfmachine:RemoveComponent("instrument")
    turfmachine:RemoveComponent("tool")
    if turfmachine.components.finiteuses then turfmachine:RemoveComponent("finiteuses") end
    turfmachine:RemoveComponent("deployable")
    turfmachine.components.container.canbeopened = true
    turfmachine.components.inventoryitem:ChangeImageName("researchlab3")
    turfmachine:AddComponent("equippable")
    turfmachine.components.equippable.equipslot = EQUIPSLOTS.BODY
    turfmachine.components.equippable:SetOnEquip( function(turfmachine)
        GetPlayer().components.inventory:SetOverflow(turfmachine)
        turfmachine.components.container:Open(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_open", "open")
    end )
    turfmachine.components.equippable:SetOnUnequip( function(turfmachine)
        turfmachine.components.container:Close(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_close", "open")
    end )
    turfmachine:AddTag("turfmachines")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("turfmachines") then
       data.turfmachines = true
    end
end
local function onload(inst, data)
  if data and data.turfmachines then
    inst.AnimState:SetBank("researchlab3")
    inst.AnimState:SetBuild("researchlab3")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(0.5, 0.5, 0.5)
    inst:RemoveComponent("instrument")
    inst:RemoveComponent("tool")
    if inst.components.finiteuses then inst:RemoveComponent("finiteuses") end
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst.components.inventoryitem:ChangeImageName("researchlab3")
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.BODY
    inst.components.equippable:SetOnEquip( function(inst)
        GetPlayer().components.inventory:SetOverflow(inst)
        inst.components.container:Open(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_open", "open")
    end )
    inst.components.equippable:SetOnUnequip( function(inst)
        inst.components.container:Close(GetPlayer())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/backpack_close", "open")
    end )
    inst:AddTag("turfmachines")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-80,150,0)
    inst.components.container.side_widget = true
    inst.components.container.itemtestfn = itemtest
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.acceptsstacks = false
    inst.components.container.canbeopened = false

    即可用排箫种地皮改造机，装备地皮改造机后，屏幕右侧将出现格子和按钮，在格子中放入1块地皮，按Do按钮，游戏会卡一下（5-10秒），70块地皮就铺好了，方便大面积改造地图。共支持17种地皮，只要可以放入格子的都可以铺。排箫在魔法选项（画着红骷髅）下用5个芦苇、1个曼德拉草、1个绳子制造




二七九.小型温室（用蝴蝶翅膀种小型温室，放入种子，10秒长出果实）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\butterflywings.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local oven = SpawnPrefab("butterflywings")
    oven.Transform:SetPosition(pt.x, pt.y, pt.z)
    oven.AnimState:SetBank("skull_chest")
    oven.AnimState:SetBuild("skull_chest")
    oven.AnimState:PlayAnimation("closed")
    oven.Transform:SetScale(1.5, 1.5, 1.5)
    oven:AddTag("fridge")
    oven:AddTag("ovens")
    oven:RemoveComponent("edible")
    oven:RemoveComponent("tradable")
    oven:RemoveComponent("stackable")
    oven:RemoveComponent("inventoryitem")
    oven:RemoveComponent("perishable")
    oven:RemoveComponent("deployable")
    oven:RemoveTag("cattoy")
    oven:AddComponent("workable")
    oven.components.workable:SetWorkAction(ACTIONS.HAMMER)
    oven.components.workable:SetWorkLeft(3)
    oven.components.workable:SetOnFinishCallback(function(oven)
        SpawnPrefab("collapse_big").Transform:SetPosition(oven.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        oven:Remove()
    end )
    oven.components.container.canbeopened = true
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("ovens") then
        data.ovens = true
    end
end
local function onload(inst, data)
  if data and data.ovens then
    inst.AnimState:SetBank("skull_chest")
    inst.AnimState:SetBuild("skull_chest")
    inst.AnimState:PlayAnimation("closed")
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    inst:AddTag("fridge")
    inst:AddTag("ovens")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveTag("cattoy")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst.components.container.canbeopened = true
  end
end
local function itemtest(inst, item, slot)
    if item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "carrot_seeds" or item.prefab == "corn_seeds" or item.prefab == "pumpkin_seeds" or item.prefab == "eggplant_seeds" or item.prefab == "durian_seeds" or item.prefab == "pomegranate_seeds" or item.prefab == "dragonfruit_seeds" or item.prefab == "seeds" or item.prefab == "spoiled_food" or item.prefab == "lightbulb" or item.prefab == "watermelon_seeds" or item.prefab == "watermelon" then
       return true
    end
    return false
end
local slotpos = {}
for y = 2, 0, -1 do
    for x = 0, 14 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
local widgetbuttoninfo = {
    text = "Start",
    position = Vector3(450, -150, 0),
    fn = function(inst)
      if inst:HasTag("ovens") and inst.components.container:Has("lightbulb", 1) then
       inst.components.container:ConsumeByName("lightbulb", 1)
       inst.components.container:Close(GetPlayer())
       inst.components.container.canbeopened = false
       inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
       inst:DoTaskInTime(10, function()
           inst.AnimState:SetBloomEffectHandle("")
           GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
           inst.components.container.canbeopened = true
           for k,v in pairs(inst.components.container.slots) do
               if v and v.prefab == "carrot_seeds" then
                  v:Remove()
                  local carrot = SpawnPrefab("carrot")
                  inst.components.container:GiveItem(carrot)
               end
               if v and v.prefab == "corn_seeds" then
                  v:Remove()
                  local corn = SpawnPrefab("corn")
                  inst.components.container:GiveItem(corn)
               end
               if v and v.prefab == "pumpkin_seeds" then
                  v:Remove()
                  local pumpkin = SpawnPrefab("pumpkin")
                  inst.components.container:GiveItem(pumpkin)
               end
               if v and v.prefab == "eggplant_seeds" then
                  v:Remove()
                  local eggplant = SpawnPrefab("eggplant")
                  inst.components.container:GiveItem(eggplant)
               end
               if v and v.prefab == "durian_seeds" then
                  v:Remove()
                  local durian = SpawnPrefab("durian")
                  inst.components.container:GiveItem(durian)
               end
               if v and v.prefab == "pomegranate_seeds" then
                  v:Remove()
                  local pomegranate = SpawnPrefab("pomegranate")
                  inst.components.container:GiveItem(pomegranate)
               end
               if v and v.prefab == "dragonfruit_seeds" then
                  v:Remove()
                  local dragonfruit = SpawnPrefab("dragonfruit")
                  inst.components.container:GiveItem(dragonfruit)
               end
               if v and v.prefab == "watermelon_seeds" then
                  v:Remove()
                  local watermelon = SpawnPrefab("watermelon")
                  inst.components.container:GiveItem(watermelon)
               end
               if v and v.prefab == "seeds" then
                  v:Remove()
                  local names = {"carrot","corn","pumpkin","eggplant","durian","pomegranate","dragonfruit","watermelon"}
                  local name = names[math.random(#names)]
                  local fruit = SpawnPrefab(name)
                  inst.components.container:GiveItem(fruit)
               end
               if v.prefab == "carrot" or v.prefab == "corn" or v.prefab == "pumpkin" or v.prefab == "eggplant" or v.prefab == "durian" or v.prefab == "pomegranate" or v.prefab == "dragonfruit" or v.prefab == "watermelon" then
                  v:Remove()
                  local spoiled = SpawnPrefab("spoiled_food")
                  inst.components.container:GiveItem(spoiled)
               end
           end
       end )
      end
    end }
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.acceptsstacks = false
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-250,200,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.itemtestfn = itemtest
    inst.components.container.onopenfn = function(inst) inst.AnimState:PlayAnimation("open") end
    inst.components.container.onclosefn = function(inst) inst.AnimState:PlayAnimation("close") end

    即可用蝴蝶翅膀种小型温室（拿着1个蝴蝶翅膀对地面点鼠标右键，如果拿着多个，则不会种出来），无论冬夏都可种植农作物。鼠标左键点小型温室，可打开格子。将种子放入格子，并放1个荧光果（提供电能）后，点格子下面的Start按钮，植物即开始生长（温室亮灯）。10秒后（温室灯灭）即可打开温室，收获你的果实吧。每次种植都将消耗1个荧光果，格子内没有荧光果时，温室不会工作。如果把果实留在格子内，并点Start按钮（仍须有荧光果），则10秒后果实变成腐烂食物，可用来快速生产肥料。不想要小型温室时，用锤子砸掉即可，记得先取出里面的物品哦。蝴蝶翅膀可打死蝴蝶获得




二八０.随身灭火器（用寒冬背心种随身灭火器，装备后可灭火）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\trunkvest.lua文件，在inst.AnimState:SetBuild("armor_trunkvest_winter")的下一行插入以下内容：

local function OnDeploy2(inst, pt)
    local extinguisher = SpawnPrefab("trunkvest_winter")
    extinguisher.Transform:SetPosition(pt.x, pt.y, pt.z)
    extinguisher.AnimState:SetBank("firefighter")
    extinguisher.AnimState:SetBuild("firefighter")
    extinguisher.AnimState:PlayAnimation("idle_on_loop")
    extinguisher.Transform:SetScale(0.5, 0.5, 0.5)
    extinguisher:RemoveComponent("inventoryitem")
    extinguisher:RemoveComponent("equippable")
    extinguisher:RemoveComponent("insulator")
    extinguisher:RemoveComponent("fueled")
    extinguisher:RemoveComponent("deployable")
    extinguisher:AddComponent("workable")
    extinguisher.components.workable:SetWorkAction(ACTIONS.HAMMER)
    extinguisher.components.workable:SetWorkLeft(3)
    extinguisher.components.workable:SetOnFinishCallback(function(extinguisher)
        SpawnPrefab("collapse_big").Transform:SetPosition(extinguisher.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        extinguisher:Remove()
    end )
    extinguisher:AddComponent("inventoryitem")
    extinguisher.components.inventoryitem:ChangeImageName("firesuppressor")
    extinguisher:AddComponent("equippable")
    extinguisher.components.equippable.equipslot = EQUIPSLOTS.HANDS
    extinguisher.components.equippable:SetOnEquip(function(extinguisher, owner)
        extinguisher.task = extinguisher:DoPeriodicTask(1, function(extinguisher)
            local waterring = SpawnPrefab("groundpoundring_fx")
            waterring.Transform:SetPosition(owner.Transform:GetWorldPosition())
            waterring.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            local pos = Vector3(extinguisher.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
            for k,v in pairs(ents) do
                if v.components.burnable and v.components.burnable:IsBurning() then
                   if v.prefab == "cactus" or v.prefab == "berrybush" or v.prefab == "berrybush2" or v.prefab == "carrot_planted" or v.prefab == "cave_banana_tree" or v.prefab == "cave_fern" or v.prefab == "deciduoustree" or v.prefab == "deciduoustree_normal" or v.prefab == "deciduoustree_tall" or v.prefab == "deciduoustree_short" or v.prefab == "evergreen" or v.prefab == "evergreen_normal" or v.prefab == "evergreen_tall" or v.prefab == "evergreen_short" or v.prefab == "evergreen_sparse" or v.prefab == "evergreen_sparse_normal" or v.prefab == "evergreen_sparse_tall" or v.prefab == "evergreen_sparse_short" or v.prefab == "flower" or v.prefab == "flower_evil" or v.prefab == "grass" or v.prefab == "marsh_bush" or v.prefab == "red_mushroom" or v.prefab == "green_mushroom" or v.prefab == "blue_mushroom" or v.prefab == "mushtree_tall" or v.prefab == "mushtree_medium" or v.prefab == "mushtree_small" or v.prefab == "sapling" or v.prefab == "flower_cave" or v.prefab == "flower_cave_double" or v.prefab == "flower_cave_triple" or v.prefab == "lichen" or v.prefab == "livingtree" or v.prefab == "marsh_tree" or v.prefab == "reeds" then
                      if v.components.propagator then v.components.propagator.spreading = false end
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      SpawnPrefab(v.prefab).Transform:SetPosition(v.Transform:GetWorldPosition())
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/common/fireOut")
                      v:Remove()
                   end
                   if v.prefab == "treasurechest" or v.prefab == "slow_farmplot" or v.prefab == "fast_farmplot" or v.prefab == "tent" or v.prefab == "wall_wood" or v.prefab == "wall_hay" or v.prefab == "cookpot" or v.prefab == "beebox" or v.prefab == "homesign" or v.prefab == "researchlab" or v.prefab == "researchlab2" or v.prefab == "researchlab3" or v.prefab == "researchlab4" or v.prefab == "meatrack" or v.prefab == "pighouse" or v.prefab == "rabbithouse" or v.prefab == "pottedfern" or v.prefab == "rainometer" or v.prefab == "winterometer" or v.prefab == "resurrectionstatue" or v.prefab == "siestahut" then
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/common/fireOut")
                      v.components.burnable:Extinguish(true)
                   end
                end
            end
        end )
    end )
    extinguisher.components.equippable:SetOnUnequip(function(extinguisher, owner)
        if extinguisher.task then extinguisher.task:Cancel() extinguisher.task = nil end
    end )
    extinguisher:AddTag("extinguishers")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy2
local function onsave2(inst, data)
    if inst:HasTag("extinguishers") then
       data.extinguishers = true
    end
end
local function onload2(inst, data)
  if data and data.extinguishers then
    inst.AnimState:SetBank("firefighter")
    inst.AnimState:SetBuild("firefighter")
    inst.AnimState:PlayAnimation("idle_on_loop")
    inst.Transform:SetScale(0.5, 0.5, 0.5)
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("insulator")
    inst:RemoveComponent("fueled")
    inst:RemoveComponent("deployable")
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:ChangeImageName("firesuppressor")
    inst:AddComponent("equippable")
    inst.components.equippable.equipslot = EQUIPSLOTS.HANDS
    inst.components.equippable:SetOnEquip(function(inst, owner)
        inst.task = inst:DoPeriodicTask(1, function(inst)
            local waterring = SpawnPrefab("groundpoundring_fx")
            waterring.Transform:SetPosition(owner.Transform:GetWorldPosition())
            waterring.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            local pos = Vector3(inst.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
            for k,v in pairs(ents) do
                if v.components.burnable and v.components.burnable:IsBurning() then
                   if v.prefab == "cactus" or v.prefab == "berrybush" or v.prefab == "berrybush2" or v.prefab == "carrot_planted" or v.prefab == "cave_banana_tree" or v.prefab == "cave_fern" or v.prefab == "deciduoustree" or v.prefab == "deciduoustree_normal" or v.prefab == "deciduoustree_tall" or v.prefab == "deciduoustree_short" or v.prefab == "evergreen" or v.prefab == "evergreen_normal" or v.prefab == "evergreen_tall" or v.prefab == "evergreen_short" or v.prefab == "evergreen_sparse" or v.prefab == "evergreen_sparse_normal" or v.prefab == "evergreen_sparse_tall" or v.prefab == "evergreen_sparse_short" or v.prefab == "flower" or v.prefab == "flower_evil" or v.prefab == "grass" or v.prefab == "marsh_bush" or v.prefab == "red_mushroom" or v.prefab == "green_mushroom" or v.prefab == "blue_mushroom" or v.prefab == "mushtree_tall" or v.prefab == "mushtree_medium" or v.prefab == "mushtree_small" or v.prefab == "sapling" or v.prefab == "flower_cave" or v.prefab == "flower_cave_double" or v.prefab == "flower_cave_triple" or v.prefab == "lichen" or v.prefab == "livingtree" or v.prefab == "marsh_tree" or v.prefab == "reeds" then
                      if v.components.propagator then v.components.propagator.spreading = false end
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      SpawnPrefab(v.prefab).Transform:SetPosition(v.Transform:GetWorldPosition())
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/common/fireOut")
                      v:Remove()
                   end
                   if v.prefab == "treasurechest" or v.prefab == "slow_farmplot" or v.prefab == "fast_farmplot" or v.prefab == "tent" or v.prefab == "wall_wood" or v.prefab == "wall_hay" or v.prefab == "cookpot" or v.prefab == "beebox" or v.prefab == "homesign" or v.prefab == "researchlab" or v.prefab == "researchlab2" or v.prefab == "researchlab3" or v.prefab == "researchlab4" or v.prefab == "meatrack" or v.prefab == "pighouse" or v.prefab == "rabbithouse" or v.prefab == "pottedfern" or v.prefab == "rainometer" or v.prefab == "winterometer" or v.prefab == "resurrectionstatue" or v.prefab == "siestahut" then
                      SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/common/fireOut")
                      v.components.burnable:Extinguish(true)
                   end
                end
            end
        end )
    end )
    inst.components.equippable:SetOnUnequip(function(inst, owner)
        if inst.task then inst.task:Cancel() inst.task = nil end
    end )
    inst:AddTag("extinguishers")
  end
end
    inst.OnSave = onsave2
    inst.OnLoad = onload2

    即可用寒冬背心种随身灭火器，装备随身灭火器，可向外吹出强气流，靠近着火的建筑、植物，会自动灭火，让你对燃烧的基地不再束手无策。不想要随身灭火器了，用锤子砸掉即可。夏日背心在穿戴选项（画着帽子）下，用1个蓝色象鼻、8个蛛丝制造、2个牛毛制造




二八一.菜市场（在兔房买卖农产品）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rabbithouse.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if item.prefab == "cave_banana" or item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "berries" or item.prefab == "cactus_meat" or item.prefab == "watermelon" or item.prefab == "acorn" or item.prefab == "goldnugget" then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item.prefab == "cave_banana" or item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "berries" or item.prefab == "cactus_meat" or item.prefab == "watermelon" or item.prefab == "acorn" then
       local goldnugget = SpawnPrefab("goldnugget")
       giver.components.inventory:GiveItem(goldnugget)
    end
    if item.prefab == "goldnugget" then
       local names = {"cave_banana","carrot","corn","pumpkin","eggplant","durian","pomegranate","dragonfruit","berries","cactus_meat","watermelon","acorn"}
       local name = names[math.random(#names)]
       local veggie = SpawnPrefab(name)
       giver.components.inventory:GiveItem(veggie)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可将种出来的农产品卖给兔房（拿着农产品左键点兔房），获得1个黄金，黄金会自动打入账户（主角物品条）。也可以给兔房黄金，买入随机品种的农产品，可以买卖的农产品包括香蕉、胡萝卜、茄子、南瓜、玉米、榴莲、石榴、火龙果、浆果、仙人掌肉、西瓜、橡果




二八二.肉食店（在猪房买卖肉类）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pighouse.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if item.prefab == "meat" or item.prefab == "smallmeat" or item.prefab == "fish" or item.prefab == "eel" or item.prefab == "drumstick" or item.prefab == "bird_egg" or item.prefab == "froglegs" or item.prefab == "monstermeat" or item.prefab == "goldnugget" then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item.prefab == "meat" or item.prefab == "smallmeat" or item.prefab == "fish" or item.prefab == "eel" or item.prefab == "drumstick" or item.prefab == "bird_egg" or item.prefab == "froglegs" or item.prefab == "monstermeat" then
       local goldnugget = SpawnPrefab("goldnugget")
       giver.components.inventory:GiveItem(goldnugget)
    end
    if item.prefab == "goldnugget" then
       local names = {"meat","smallmeat","fish","eel","drumstick","bird_egg","froglegs","monstermeat"}
       local name = names[math.random(#names)]
       local meat = SpawnPrefab(name)
       giver.components.inventory:GiveItem(meat)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可将各种肉类卖给猪房（拿着肉类左键点猪房），获得1个黄金，黄金会自动打入账户（主角物品条）。也可以给猪房黄金，买入随机品种的肉类，可以买卖的肉类包括大肉、小肉、鱼、鳗鱼、鸡腿、鸟蛋、蛙腿、疯肉




二八三.流动商贩（在猪村、兔村摆地摊）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pigman.lua文件，在local function OnEat(inst, food)的下一行插入以下内容：

    if food.components.edible and food.components.edible.foodtype == "MEAT" then
       for k = 1, 2 do
           local gold = SpawnPrefab("goldnugget")
           gold.Transform:SetPosition(inst.Transform:GetWorldPosition())		
	end
    end


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bunnyman.lua文件，在inst:AddComponent("eater")的下一行插入以下内容：

local function OnEat(inst, food)
    if food.components.edible and food.components.edible.foodtype == "VEGGIE" then
       for k = 1, 2 do
           local gold = SpawnPrefab("goldnugget")
           gold.Transform:SetPosition(inst.Transform:GetWorldPosition())		
	end
    end
end
    inst.components.eater:SetOnEatFn(OnEat)

    即可在猪村将肉类（包括鱼、鸡蛋、蛙腿等）放在地上，在兔村将蔬菜（包括农产品、香蕉、浆果等）放在地上，它们会自动来买，每个肉类或蔬菜付2个黄金（扔在地上）。如果地图上没有猪村（地上）、兔村（地下一层），可以自己建造猪房、兔房形成




二八四.杂货收购行（将料理、帽子、绳子等杂货卖给帐篷换黄金）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rope.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddComponent("tradable")


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\boards.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddComponent("tradable")


    3.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cutstone.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddComponent("tradable")


    4.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tent.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if item:HasTag("hat") then
       return true
    end
    if item:HasTag("preparedfood") and item.prefab ~= "wetgoop" then
       return true
    end
    if item.prefab == "rope" or item.prefab == "boards" or item.prefab == "cutstone" or item.prefab == "foliage" or item.prefab == "honey" or item.prefab == "lightbulb" or item.prefab == "manrabbit_tail" or item.prefab == "pigskin" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "slurper_pelt" or item.prefab == "wormlight" then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item:HasTag("hat") then
       for k = 1, 3 do
           local goldnugget = SpawnPrefab("goldnugget")
           giver.components.inventory:GiveItem(goldnugget)
       end
    end
    if item:HasTag("preparedfood") and item.prefab ~= "wetgoop" then
       for k = 1, 5 do
           local goldnugget = SpawnPrefab("goldnugget")
           giver.components.inventory:GiveItem(goldnugget)
       end
    end
    if item.prefab == "rope" or item.prefab == "boards" or item.prefab == "cutstone" or item.prefab == "foliage" or item.prefab == "honey" or item.prefab == "lightbulb" or item.prefab == "manrabbit_tail" or item.prefab == "pigskin" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "slurper_pelt" or item.prefab == "wormlight" then
       local goldnugget = SpawnPrefab("goldnugget")
       giver.components.inventory:GiveItem(goldnugget)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可将杂货卖给帐篷换黄金（拿着物品对帐篷点鼠标左键），其中料理收购价5个黄金，帽子3个黄金，绳子、木板、石砖、叶子、蜂蜜、荧光果、兔人尾巴、猪皮、花瓣、噩梦花瓣、啜食者皮、虫子果都是1个黄金




二八五.收藏品黑市（在鱼人房买收藏品卖给猪王赚差价）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\mermhouse.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if GetPlayer().components.inventory:Has("goldnugget", 4) then
       if item.prefab == "goldnugget" then
          return true
       end
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    local names = {"trinket_1","trinket_2","trinket_3","trinket_4","trinket_5","trinket_6","trinket_7","trinket_8","trinket_9","trinket_10","trinket_11","trinket_12"}
    inst.name = names[math.random(#names)]
    local trinket = SpawnPrefab(inst.name)
    if item.prefab == "goldnugget" then
       giver.components.inventory:ConsumeByName("goldnugget", 3)
       giver.components.inventory:GiveItem(trinket)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可在鱼人房用黄金买入收藏品（拿着黄金对鱼人房点鼠标左键），4个黄金买1个，品种随机，收藏品会直接装进主角物品栏。拿到猪王那里卖出（拿着收藏品对猪王点鼠标左键），卖出价2-8个黄金（扔在地上），晚上猪王睡觉时不会交易。黑市交易有一定风险，会遭到流氓（鱼人）攻击，有些收藏品买卖会亏钱。身上黄金不足4个时无法买入




二八六.收藏品期货市场（制造栏增加期货市场选项，炒作收藏品）

    1.用记事本打开游戏目录\data\DLC0001\scripts\constants.lua文件，在DRESS = {str = "DRESS", sort=9, icon = "tab_dress.tex"},的下一行插入MARKET = {str = "MARKET", sort = 12, icon = "tab_book.tex"},


    2.用记事本打开游戏目录\data\scripts\strings.lua文件，在ANCIENT = "Ancient",的下一行插入MARKET = "Market",


    3.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在require "tuning"的下一行插入以下内容：

----MARKET----
Recipe("trinket_1", {Ingredient("goldnugget", math.random(4,8))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_2", {Ingredient("goldnugget", math.random(6,12))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_3", {Ingredient("goldnugget", math.random(4,8))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_4", {Ingredient("goldnugget", math.random(5,10))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_5", {Ingredient("goldnugget", math.random(4,8))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_6", {Ingredient("goldnugget", math.random(5,10))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_7", {Ingredient("goldnugget", math.random(4,8))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_8", {Ingredient("goldnugget", math.random(8,16))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_9", {Ingredient("goldnugget", math.random(7,14))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_10", {Ingredient("goldnugget", math.random(2,4))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_11", {Ingredient("goldnugget", math.random(5,10))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)
Recipe("trinket_12", {Ingredient("goldnugget", math.random(8,16))}, RECIPETABS.MARKET, TECH.NONE,nil,nil,true)


    4.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\trinkets.lua文件，在inst:AddComponent("inspectable")的下一行插入inst:AddTag("trinket")


    5.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\scienceprototyper.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function SpawnLootPrefab(inst, lootprefab)
    local player = GetPlayer()
    local loot = SpawnPrefab(lootprefab)
    player.components.inventory:GiveItem(loot)
    return loot
end
local function ShouldAcceptItem(inst, item)
    if item:HasTag("trinket") then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    local recipe = GetRecipe(item.prefab)
    local loot = {}
    if item:HasTag("trinket") then 
        for k,v in ipairs(recipe.ingredients) do
            if not string.find(v.type, "gem") then
                local amt = math.ceil(v.amount * 1)
                for n = 1, amt do
                    table.insert(loot, v.type)
                end
            end
        end
    end
    if #loot <= 0 then
        return
    end
    for k,v in pairs(loot) do
        SpawnLootPrefab(item, v)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可在主角制造栏添加收藏品期货按钮（画着3本书），收藏品价格随每次读档而改变，在低价时买入（直接从造制造栏买入），在高价时卖出（拿着收藏品对科学机器点鼠标左键），获得当时标价的黄金（自动装入主角物品栏），从而赚取差价。如果同时修改了“手动存档”、“快速读档”（见本修改技巧），就可以在不退出游戏情况下，按F5存档，再按F6读档刷新价格。本条可以与“收藏品黑市”同时修改




二八七.巨型超市（在主角制造栏中增加商店选项，用黄金买珍贵物品）

    1.用记事本打开游戏目录\data\DLC0001\scripts\constants.lua文件，将ANCIENT = {str = "ANCIENT", sort = 10, icon = "tab_crafting_table.tex"}替换为以下内容：

    ANCIENT = {str = "ANCIENT", sort = 10, icon = "tab_crafting_table.tex"},
    SHOP = {str = "SHOP", sort = 11, icon = "tab_gemology.tex"}


    2.用记事本打开游戏目录\data\scripts\strings.lua文件，在ANCIENT = "Ancient",的下一行插入SHOP = "Shop",


    3.用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在----GEMS----的下一行插入以下内容：

----SHOP----
Recipe("nightmarefuel", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("livinglog", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("gears", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("marble", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("petals_evil", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("boneshard", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("ice", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("slurtle_shellpieces", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("pigskin", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("silk", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("spidergland", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("tentaclespots", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("tentaclespike", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("feather_crow", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("feather_robin", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("feather_robin_winter", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("stinger", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("honeycomb", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("butterflywings", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("houndstooth", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("horn", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("tallbirdegg", {Ingredient("goldnugget", 1+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("manrabbit_tail", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("slurper_pelt", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("lightninggoathorn", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("batwing", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("trunk_summer", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("trunk_winter", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("walrus_tusk", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("deerclops_eyeball", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("minotaurhorn", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("dragon_scales", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("bearger_fur", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("goose_feather", {Ingredient("goldnugget", 1+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("coontail", {Ingredient("goldnugget", 1+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("poop", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("beardhair", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("mandrake", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("lightbulb", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("cactus_meat", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("cactus_flower", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("wormlight", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("lureplantbulb", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("fireflies", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("redgem", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("bluegem", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("orangegem", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("yellowgem", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("greengem", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("thulecite_pieces", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("red_cap", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("green_cap", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("blue_cap", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("monstermeat", {Ingredient("goldnugget", math.random(2))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("honey", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("butter", {Ingredient("goldnugget", math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("butterflymuffin", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("frogglebunwich", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("taffy", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("pumpkincookie", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("stuffedeggplant", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("fishsticks", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("honeynuggets", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("honeyham", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("dragonpie", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("kabobs", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("mandrakesoup", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("baconeggs", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("meatballs", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("bonestew", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("perogies", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("turkeydinner", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("ratatouille", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("jammypreserves", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("fruitmedley", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("fishtacos", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("waffles", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("unagi", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("flowersalad", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("icecream", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("watermelonicle", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("trailmix", {Ingredient("goldnugget", 4+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("hotchili", {Ingredient("goldnugget", 5+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("guacamole", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("krampus_sack", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("slurtlehat", {Ingredient("goldnugget", 3+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)
Recipe("armorsnurtleshell", {Ingredient("goldnugget", 8+math.random(3))}, RECIPETABS.SHOP, TECH.NONE,nil,nil,true)

    即可在主角制造栏中增加商店选项（制造栏最底下画着宝石戒指），用黄金购买珍贵物品，包括坎普斯背包、珍贵材料、料理等。每次读档后，超市价格都会有一定浮动，趁打折时多买一些吧。如果同时修改了“菜市场”、“肉食店”、“流动商贩”、“杂货收购行”、“收藏品黑市”、“收藏品期货市场”（见本修改技巧），即可通过出售农产品、肉类、杂货、收藏品换取购物的黄金，形成饥荒世界完整的金钱交易体系。不要与“制造坎普斯背包”一同修改




二八八.刮刮乐（给路牌黄金买刮刮乐彩票中大奖）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\homesign.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function ShouldAcceptItem(inst, item)
    if item.prefab == "goldnugget" then
       return true
    end
    return false
end
local function OnGetItemFromPlayer(inst, giver, item)
    if item.prefab == "goldnugget" then
       local papyrus = SpawnPrefab("papyrus")
       papyrus:AddComponent("lootdropper")
       papyrus.components.inspectable.getstatus = function(papyrus)
           if math.random()<.01 then
               for k = 1, 50 do
               papyrus.components.lootdropper:SpawnLootPrefab("goldnugget")
           end
           elseif math.random()<.05 then
               for k = 1, 10 do
               papyrus.components.lootdropper:SpawnLootPrefab("goldnugget")
           end
           elseif math.random()<.15 then
               for k = 1, 2 do
               papyrus.components.lootdropper:SpawnLootPrefab("goldnugget")
           end
           elseif math.random()<.3 then
               papyrus.components.lootdropper:SpawnLootPrefab("goldnugget")
           else
               papyrus.components.lootdropper:SpawnLootPrefab("ash")
           end
           SpawnPrefab("collapse_small").Transform:SetPosition(papyrus.Transform:GetWorldPosition())
           papyrus.components.stackable:Get():Remove()
       end
       giver.components.inventory:GiveItem(papyrus)
    end
end
    inst:AddComponent("trader")
    inst.components.trader.onaccept = OnGetItemFromPlayer
    inst.components.trader:SetAcceptTest(ShouldAcceptItem)

    即可给路牌黄金买刮刮乐彩票（拿黄金对路牌按鼠标左键），彩票（1张纸）直接装入主角物品栏，对物品栏中的纸按鼠标右键即可刮奖，一等奖50个黄金，二等奖10个黄金，三等奖2个黄金，四等奖1个黄金，末等奖只有一团灰。存档退出时，身上不要留彩票，因为再读档后会过期作废（不能再刮奖）




二八九.自动取款机（用活木头种自动取款机，存入的黄金每天给3%利息）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\livinglog.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "goldnugget" then
       return true
    end
    return false
end
local slotpos = {}
for y = 2, 0, -1 do
    for x = 0, 8 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
local function OnDeploy (inst, pt)
    local bank = SpawnPrefab("livinglog")
    bank.Transform:SetPosition(pt.x, pt.y, pt.z)
    bank.Transform:SetScale(1.5, 1.5, 1.5)
    bank.AnimState:SetBank("ruins_vase")
    bank.AnimState:SetBuild("ruins_vase")
    bank.AnimState:PlayAnimation("idle")
    bank:RemoveComponent("stackable")
    bank:RemoveComponent("fuel")
    bank:RemoveComponent("edible")
    bank:RemoveComponent("inventoryitem")
    bank:RemoveComponent("repairer")
    bank:RemoveComponent("burnable")
    bank:RemoveComponent("propagator")
    bank:RemoveComponent("deployable")
    bank.components.container.canbeopened = true
    bank:AddComponent("workable")
    bank.components.workable:SetWorkAction(ACTIONS.HAMMER)
    bank.components.workable:SetWorkLeft(3)
    bank.components.workable:SetOnFinishCallback(function(bank)
        SpawnPrefab("collapse_big").Transform:SetPosition(bank.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        bank:Remove()
    end )
    bank:ListenForEvent( "daytime", function()
        local num_found = 0
        for k,v in pairs(bank.components.container.slots) do
            if v and v.prefab == "goldnugget" then
               num_found = num_found + v.components.stackable:StackSize()
            end
        end
        local Interests = math.floor(num_found/100*3)
        for k = 1, Interests do
            bank.components.container:ConsumeByName("goldnugget", -1)
        end
    end, GetWorld())
    bank:AddTag("banks")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("banks") then
        data.banks = true
    end
end
local function onload(inst, data)
  if data and data.banks then
    inst.Transform:SetScale(1.5, 1.5, 1.5)
    inst.AnimState:SetBank("ruins_vase")
    inst.AnimState:SetBuild("ruins_vase")
    inst.AnimState:PlayAnimation("idle")
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("repairer")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:ListenForEvent( "daytime", function()
        local num_found = 0
        for k,v in pairs(inst.components.container.slots) do
            if v and v.prefab == "goldnugget" then
               num_found = num_found + v.components.stackable:StackSize()
            end
        end
        local Interests = math.floor(num_found/100*3)
        for k = 1, Interests do
            inst.components.container:ConsumeByName("goldnugget", -1)
        end
    end, GetWorld())
    inst:AddTag("banks")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-100,200,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.itemtestfn = itemtest

    即可用活木头种自动取款机，鼠标左键点击打开格子，再点击关闭，只能用于存取黄金。将黄金放入取款机，每日天亮时将给予3%利息，不足1个黄金的零头自动抹去（比如存90个黄金，利息为2.7，则只给2个黄金）。土豪们，这是饥荒世界提供的金融服务，将巨款存进去，躺着吃利息吧。如果不想要自动取款机了，用锤子砸掉即可，记住之前把钱取出来哦




二九０.逝者的赌局（绳子种人骨，用黄金下注猪拳击手生死战）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rope.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local skeleton = SpawnPrefab("skeleton")
    if skeleton then
        skeleton:PushEvent("growfromrope")
		skeleton.Transform:SetPosition(pt.x, pt.y, pt.z)
        inst.components.stackable:Get():Remove()
    end
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\skeleton.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function game(inst)
    local light = inst.entity:AddLight()
    light:Enable(true)
    local num_found = 0
    for k,v in pairs(inst.components.container.slots) do
        if v and v.prefab == "goldnugget" then
           num_found = num_found + v.components.stackable:StackSize()
        end
    end
    inst.components.container:Close(GetPlayer())
    inst.components.container.canbeopened = false
    GetPlayer().components.playercontroller:Enable(false)
    local bonuspoint1 = math.random(5)
    local bonuspoint2 = math.random(5)
    local pt = Vector3(inst.Transform:GetWorldPosition())
    local red = SpawnPrefab("pigman")
    red.Transform:SetPosition(pt.x+4+3, 0, pt.z+4-3)
    red.components.health:SetMaxHealth(100 * bonuspoint1)
    red.components.health:DoDelta(200 * bonuspoint1)
    red.AnimState:SetMultColour(255/255,0/255,0/255,1)
    red.AnimState:OverrideSymbol("swap_hat", "hat_football", "swap_hat")
    red.AnimState:Show("hat")
    local blue = SpawnPrefab("pigman")
    blue.Transform:SetPosition(pt.x+4-3, 0, pt.z+4+3)
    blue.components.health:SetMaxHealth(100 * bonuspoint2)
    blue.components.health:DoDelta(200 * bonuspoint2)
    blue.AnimState:SetMultColour(0/255,100/255,255/255,1)
    blue.AnimState:OverrideSymbol("swap_hat", "hat_football", "swap_hat")
    blue.AnimState:Show("hat")
    red.components.combat.target = blue
    blue.components.combat.target = red
    TheCamera:SetTarget(red)
    red:ListenForEvent("death", function()
        inst:DoTaskInTime(3, function() blue:Remove()
           GetPlayer().components.sanity:DoDelta(-10)
           GetPlayer().AnimState:PlayAnimation("hit")
           GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
           inst.components.container:DestroyContents()
           inst.components.container.canbeopened = true
           GetPlayer().components.playercontroller:Enable(true)
           TheCamera:SetTarget(GetPlayer())
           light:Enable(false)
        end )
    end )
    blue:ListenForEvent("death", function()
        inst:DoTaskInTime(3, function() red:Remove()
           GetPlayer().components.sanity:DoDelta(10)
           for k = 1, num_found do
               inst.components.container:ConsumeByName("goldnugget", -1)
           end
           GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
           inst.components.container.canbeopened = true
           GetPlayer().components.playercontroller:Enable(true)
           TheCamera:SetTarget(GetPlayer())
           light:Enable(false)
        end )
    end )
end
local slotpos = { Vector3(0,-75,0)}
local widgetbuttoninfo = { text = "GO",
      position = Vector3(0, -165, 0),
      fn = function(inst) if not inst.components.container:IsEmpty() then game(inst) end
end }
local function itemtest(inst, item, slot)
    if item.prefab == "goldnugget" then
       return true
    end
    return false
end
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,200,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    local light = inst.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(50)
    light:Enable(false)
    light:SetColour(180/255, 195/255, 50/255)
    MakeMediumBurnable(inst)

    即可用绳子种人骨头，鼠标左键点人骨，出现1个格子及GO按钮，在格子中放入黄金后（赌金随意）按GO按钮，红、蓝两个猪拳手出击对战，如果红方获胜，你就赢得1倍奖金（在人骨的格子里领取），并增加10点脑。如果蓝方获胜，格子里的赌金将被收走（逝者获胜），同时减10点脑。平局（双方同时死）判定为逝者获胜。比赛中主角无法走动及攻击（防止作弊），但可以边吃东西边看比赛。人骨最好种在远离猪房、兔房的空旷处，以免干扰比赛。不想要人骨了，烧掉即可。逝者的赌局全天开放，不要沉迷赌博哦




二九一.小酒馆（用剃刀种小酒馆，听音乐、喝烧酒、吃料理、小憩一下）

    用记事本打开游戏目录\data\scripts\prefabs\razor.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function bar(inst)
    local pt = inst:GetPosition()
    local waiter = SpawnPrefab("razor")
    waiter.Transform:SetPosition(pt.x, pt.y, pt.z)
    waiter.AnimState:SetBank("wilson")
    waiter.AnimState:SetBuild("wes")
    waiter.AnimState:Hide("ARM_carry")
    waiter.AnimState:Show("ARM_normal")
    waiter.Transform:SetFourFaced()
    waiter.AnimState:PlayAnimation("idle")
    waiter:AddTag("waiter")
    waiter:RemoveComponent("inventoryitem")
    waiter:RemoveComponent("shaver")
    waiter:RemoveComponent("deployable")
    waiter:AddComponent("trader")
    waiter.components.trader:SetAcceptTest(function(waiter, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 1) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    waiter.components.trader.onaccept = function(waiter, giver, item)
        waiter.AnimState:PlayAnimation("idle_onemanband1_loop",true)
        waiter:DoTaskInTime(5, function() waiter.AnimState:PlayAnimation("idle") end )
        GetPlayer().components.sanity:DoDelta(3)
    end
    local bar = SpawnPrefab("razor")
    bar.Transform:SetPosition(pt.x+0.8, 0, pt.z+0.8)
    bar.AnimState:SetBank("ruins_table")
    bar.AnimState:SetBuild("ruins_table")
    bar.AnimState:PlayAnimation("idle")
    bar:AddTag("goodbye")
    bar:RemoveComponent("inventoryitem")
    bar:RemoveComponent("shaver")
    bar:RemoveComponent("deployable")
    bar:AddComponent("trader")
    bar.components.trader:SetAcceptTest(function(bar, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    bar.components.trader.onaccept = function(bar, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        waiter.AnimState:PlayAnimation("give")
        local wine = SpawnPrefab("razor")
        wine.AnimState:SetBank("ruins_vase")
        wine.AnimState:SetBuild("ruins_vase")
        wine.AnimState:PlayAnimation("idle")
        wine.Transform:SetScale(0.5, 0.5, 0.5)
        wine.Physics:SetActive(false)
        wine:AddTag("goodbye")
        wine.components.inventoryitem.canbepickedup = false
        local follower = wine.entity:AddFollower()
        follower:FollowSymbol( bar.GUID, "swap_object", -100, -170, 0 )
        wine.components.inspectable.getstatus = function(wine)
            wine:Remove()
            wine = nil
            GetPlayer().sg:GoToState("eat")
            GetPlayer().components.sanity:DoDelta(-5)
            GetPlayer().components.health:DoDelta(20)
        end
    end
    local icebox = SpawnPrefab("razor")
    icebox.Transform:SetPosition(pt.x-1.6+0.8, 0, pt.z+1.6+0.8)
    icebox.AnimState:SetBank("icebox")
    icebox.AnimState:SetBuild("ice_box")
    icebox.AnimState:PlayAnimation("closed")
    icebox.AnimState:SetMultColour(255/255,255/255,255/255,1)
    icebox:AddTag("goodbye")
    icebox:RemoveComponent("inventoryitem")
    icebox:RemoveComponent("shaver")
    icebox:RemoveComponent("deployable")
    icebox:AddComponent("trader")
    icebox.components.trader:SetAcceptTest(function(icebox, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    icebox.components.trader.onaccept = function(icebox, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        waiter.AnimState:PlayAnimation("give")
        local names = {"butterflymuffin","frogglebunwich","taffy","pumpkincookie","stuffedeggplant","fishsticks","honeynuggets","honeyham","dragonpie","kabobs","mandrakesoup","baconeggs","meatballs","bonestew","perogies","turkeydinner","ratatouille","jammypreserves","fruitmedley","fishtacos","waffles","unagi","flowersalad","icecream","watermelonicle","trailmix","hotchili","guacamole"}
        local name = names[math.random(#names)]
        local snack = SpawnPrefab(name)
        giver.components.inventory:GiveItem(snack)
    end
    local chair = SpawnPrefab("razor")
    chair.Transform:SetPosition(pt.x+1.5+0.8, 0, pt.z-1.5+0.8)
    chair.AnimState:SetBank("ruins_chair")
    chair.AnimState:SetBuild("ruins_chair")
    chair.AnimState:PlayAnimation("idle")
    chair:AddTag("goodbye")
    chair:RemoveComponent("inventoryitem")
    chair:RemoveComponent("shaver")
    chair:RemoveComponent("deployable")
    chair.components.inspectable.getstatus = function()
        TheFrontEnd:Fade(true,1)
        GetClock():NextPhase()
        GetPlayer().components.hunger:DoDelta(-10)
        GetPlayer().components.sanity:DoDelta(25)
    end
    local music = SpawnPrefab("razor")
    music.Transform:SetPosition(pt.x+1.5-0.8, 0, pt.z-1.5-0.8)
    music.AnimState:SetBank("phonograph")
    music.AnimState:SetBuild("phonograph")
    music.AnimState:PlayAnimation("idle")
    music:AddTag("goodbye")
    music:RemoveComponent("inventoryitem")
    music:RemoveComponent("shaver")
    music:RemoveComponent("deployable")
    music.entity:AddSoundEmitter()
    music:AddComponent("machine")
    music.components.machine.turnonfn = function(music)
        music.AnimState:PlayAnimation("play_loop", true)
        music.SoundEmitter:PlaySound("dontstarve/maxwell/ragtime", "ragtime")
    end
    music.components.machine.turnofffn = function(music)
        music.AnimState:PlayAnimation("idle")
        music.SoundEmitter:KillSound("ragtime")
        music.SoundEmitter:PlaySound("dontstarve/music/gramaphone_end")
    end
    music.components.machine:TurnOff()
    local pot = SpawnPrefab("razor")
    pot.Transform:SetPosition(pt.x-1.5-1.1, 0, pt.z+1.5-1.1)
    pot.AnimState:SetBank("cook_pot")
    pot.AnimState:SetBuild("cook_pot")
    pot.Transform:SetScale(0.8, 0.8, 0.8)
    pot.AnimState:PlayAnimation("cooking_loop", true)
    pot:AddTag("goodbye")
    pot:RemoveComponent("inventoryitem")
    pot:RemoveComponent("shaver")
    pot:RemoveComponent("deployable")
    pot.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    local light = pot.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
end
local function OnDeploy (inst, pt)
    bar(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("waiter") then
        data.waiter = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.waiter then
       bar(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
MakeLargeBurnable(inst)
MakeLargePropagator(inst)

    即可用剃刀种小酒馆，给桌子5个黄金（拿着黄金对桌子点鼠标左键），服务员会为你热1瓶烧酒，左键点桌上的酒瓶即可喝掉，补20点血，但会减5点脑（喝多了会头晕）。给冰箱5个黄金，可以购买料理（直接放入物品栏）。如果你满意酒馆的服务，可以向服务员支付小费（拿着黄金对服务员点鼠标左键），每次1个黄金，补3点脑。如果想休息一下，就用左键点椅子，时间会跳到下一时段，补25点脑，减少10点饥饿。鼠标右键点留声机，可以开关音乐。冬天天冷时，靠近锅会很暖和。不想要小酒馆时，烧掉即可。剃刀在工具选项（画着斧子和镐）下，用2个树枝、2个燧石制造




二九二.野球拳赌场（用火腿短棍种野球拳赌场，与庄家玩剪刀、石头、布赢奖金）

    用记事本打开游戏目录\data\scripts\prefabs\hambat.lua文件，

    1.在Asset("ANIM", "anim/swap_ham_bat.zip"),的下一行插入以下内容：

    Asset("ANIM", "anim/wolfgang.zip"),
    Asset("ANIM", "anim/wolfgang_skinny.zip"),
    Asset("ANIM", "anim/wolfgang_mighty.zip"),
    Asset("ANIM", "anim/player_wolfgang.zip"),


    2.将inst.OnLoad = OnLoad替换为以下内容：

local function game(inst)
    local pt = inst:GetPosition()
    local makers = SpawnPrefab("hambat")
    makers.Transform:SetPosition(pt.x, pt.y, pt.z)
    makers.AnimState:SetBank("wilson")
    makers.AnimState:SetBuild("wolfgang")
    makers.AnimState:Hide("ARM_carry")
    makers.AnimState:Show("ARM_normal")
    makers.Transform:SetFourFaced()
    makers.AnimState:PlayAnimation("idle")
    makers:RemoveComponent("weapon")
    makers:RemoveComponent("edible")
    makers:RemoveComponent("perishable")
    makers:RemoveComponent("inventoryitem")
    makers:RemoveComponent("equippable")
    makers:RemoveTag("show_spoilage")
    makers:AddTag("makers")
    local light = makers.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    local chest1 = SpawnPrefab("hambat")
    chest1.Transform:SetPosition(pt.x-1+2, pt.y, pt.z-1-2)
    chest1.AnimState:SetBank("pandoras_chest_large")
    chest1.AnimState:SetBuild("pandoras_chest_large")
    chest1.AnimState:PlayAnimation("closed")
    chest1.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    chest1:RemoveComponent("weapon")
    chest1:RemoveComponent("edible")
    chest1:RemoveComponent("perishable")
    chest1:RemoveComponent("inventoryitem")
    chest1:RemoveComponent("equippable")
    chest1:RemoveTag("show_spoilage")
    chest1:AddTag("goodbye")
    local chest2 = SpawnPrefab("hambat")
    chest2.Transform:SetPosition(pt.x-1-2, pt.y, pt.z-1+2)
    chest2.AnimState:SetBank("pandoras_chest_large")
    chest2.AnimState:SetBuild("pandoras_chest_large")
    chest2.AnimState:PlayAnimation("closed")
    chest2.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    chest2:RemoveComponent("weapon")
    chest2:RemoveComponent("edible")
    chest2:RemoveComponent("perishable")
    chest2:RemoveComponent("inventoryitem")
    chest2:RemoveComponent("equippable")
    chest2:RemoveTag("show_spoilage")
    chest2:AddTag("goodbye")
    local carpet = SpawnPrefab("hambat")
    carpet.Transform:SetPosition(pt.x+2.5, 0, pt.z+2.5)
    carpet.AnimState:SetBuild("staff_purple_base_ground")
    carpet.AnimState:SetBank("staff_purple_base_ground")
    carpet.AnimState:PlayAnimation("idle")
    carpet.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    carpet.AnimState:SetLayer( LAYER_BACKGROUND )
    carpet.AnimState:SetSortOrder( 3 )
    carpet.Transform:SetRotation( 45 )
    carpet.AnimState:SetMultColour(255/255,0/255,0/255,1)
    carpet.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    carpet:RemoveComponent("weapon")
    carpet:RemoveComponent("edible")
    carpet:RemoveComponent("perishable")
    carpet:RemoveComponent("inventoryitem")
    carpet:RemoveComponent("equippable")
    carpet:RemoveTag("show_spoilage")
    carpet:AddTag("goodbye")
    carpet:AddComponent("trader")
    carpet.components.trader:SetAcceptTest(function(carpet, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 11) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    carpet.components.trader.onaccept = function(carpet, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        makers.AnimState:PlayAnimation("give")
        local gold = SpawnPrefab("hambat")
        gold.Transform:SetPosition(pt.x+2.5, 0, pt.z+2.5)
        gold.AnimState:SetBank("goldnugget")
        gold.AnimState:SetBuild("gold_nugget")
        gold.AnimState:PlayAnimation("idle")
        gold.AnimState:PlayAnimation("sparkle")
        gold.AnimState:PushAnimation("idle")
        gold:RemoveComponent("weapon")
        gold:RemoveComponent("edible")
        gold:RemoveComponent("perishable")
        gold:RemoveComponent("inventoryitem")
        gold:RemoveComponent("equippable")
        gold:RemoveTag("show_spoilage")
        gold:AddTag("goodbye")
        local rock = SpawnPrefab("hambat")
        rock.Transform:SetPosition(pt.x+4+1.8, 0, pt.z+4-1.8)
        rock.AnimState:SetBank("rocks")
        rock.AnimState:SetBuild("rocks")
        rock.AnimState:PlayAnimation("f1")
        rock:RemoveComponent("weapon")
        rock:RemoveComponent("edible")
        rock:RemoveComponent("perishable")
        rock:RemoveComponent("inventoryitem")
        rock:RemoveComponent("equippable")
        rock:RemoveTag("show_spoilage")
        rock:AddTag("goodbye")
        rock.Transform:SetScale(1.2, 1.2, 1.2)
        rock.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        local shears = SpawnPrefab("hambat")
        shears.Transform:SetPosition(pt.x+4, 0, pt.z+4)
        shears.AnimState:SetBank("razor")
        shears.AnimState:SetBuild("razor")
        shears.AnimState:PlayAnimation("idle")
        shears:RemoveComponent("weapon")
        shears:RemoveComponent("edible")
        shears:RemoveComponent("perishable")
        shears:RemoveComponent("inventoryitem")
        shears:RemoveComponent("equippable")
        shears:RemoveTag("show_spoilage")
        shears:AddTag("goodbye")
        shears.Transform:SetScale(1.2, 1.2, 1.2)
        shears.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        local colth = SpawnPrefab("hambat")
        colth.Transform:SetPosition(pt.x+3.8-1.9, 0, pt.z+3.8+1.9)
        colth.AnimState:SetBank("blueprint")
        colth.AnimState:SetBuild("blueprint")
        colth.AnimState:PlayAnimation("idle")
        colth:RemoveComponent("weapon")
        colth:RemoveComponent("edible")
        colth:RemoveComponent("perishable")
        colth:RemoveComponent("inventoryitem")
        colth:RemoveComponent("equippable")
        colth:RemoveTag("show_spoilage")
        colth:AddTag("goodbye")
        colth.Transform:SetScale(1.2, 1.2, 1.2)
        colth.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        local names = {"rocks","razor","blueprint"}
        local goldnugget = SpawnPrefab("goldnugget")
        rock.components.inspectable.getstatus = function(rock)
            makers.AnimState:PlayAnimation("give")
            local name = names[math.random(#names)]
            local fist = SpawnPrefab(name)
            fist.Transform:SetPosition(pt.x+0.7, 0, pt.z+0.7)
            fist:AddTag("goodbye")
            fist.Transform:SetScale(1.2, 1.2, 1.2)
            fist.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            fist.components.inventoryitem.canbepickedup = false
            shears:Remove() colth:Remove()
            GetPlayer():DoTaskInTime(3, function() rock:Remove() fist:Remove() gold:Remove() end )
            if fist.prefab == "rocks" then
               makers.AnimState:SetBuild("wolfgang")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 10 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                  end
               end )
            end
            if fist.prefab == "razor" then
               makers.AnimState:SetBuild("wolfgang_skinny")
               makers.AnimState:PlayAnimation("hit")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 20 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  end
               end )
            end
            if fist.prefab == "blueprint" then
               makers.AnimState:SetBuild("wolfgang_mighty")
               makers.AnimState:PlayAnimation("idle_onemanband1_loop",true)
               GetPlayer():DoTaskInTime(3, function() 
                  makers.AnimState:PlayAnimation("idle")
                  SpawnPrefab("collapse_small").Transform:SetPosition(pt.x+2.5, 0, pt.z+2.5)
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
               end )
            end
        end
        shears.components.inspectable.getstatus = function(shears)
            makers.AnimState:PlayAnimation("give")
            local name = names[math.random(#names)]
            local fist = SpawnPrefab(name)
            fist.Transform:SetPosition(pt.x+0.7, 0, pt.z+0.7)
            fist:AddTag("goodbye")
            fist.Transform:SetScale(1.2, 1.2, 1.2)
            fist.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            fist.components.inventoryitem.canbepickedup = false
            rock:Remove() colth:Remove()
            GetPlayer():DoTaskInTime(3, function() shears:Remove() fist:Remove() gold:Remove() end )
            if fist.prefab == "razor" then
               makers.AnimState:SetBuild("wolfgang")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 10 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                  end
               end )
            end
            if fist.prefab == "blueprint" then
               makers.AnimState:SetBuild("wolfgang_skinny")
               makers.AnimState:PlayAnimation("hit")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 20 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  end
               end )
            end
            if fist.prefab == "rocks" then
               makers.AnimState:SetBuild("wolfgang_mighty")
               makers.AnimState:PlayAnimation("idle_onemanband1_loop",true)
               GetPlayer():DoTaskInTime(3, function() 
                  makers.AnimState:PlayAnimation("idle")
                  SpawnPrefab("collapse_small").Transform:SetPosition(pt.x+2.5, 0, pt.z+2.5)
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
               end )
            end
        end
        colth.components.inspectable.getstatus = function(colth)
            makers.AnimState:PlayAnimation("give")
            local name = names[math.random(#names)]
            local fist = SpawnPrefab(name)
            fist.Transform:SetPosition(pt.x+0.7, 0, pt.z+0.7)
            fist:AddTag("goodbye")
            fist.Transform:SetScale(1.2, 1.2, 1.2)
            fist.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            fist.components.inventoryitem.canbepickedup = false
            shears:Remove() rock:Remove()
            GetPlayer():DoTaskInTime(3, function() colth:Remove() fist:Remove() gold:Remove() end )
            if fist.prefab == "blueprint" then
               makers.AnimState:SetBuild("wolfgang")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 10 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                  end
               end )
            end
            if fist.prefab == "rocks" then
               makers.AnimState:SetBuild("wolfgang_skinny")
               makers.AnimState:PlayAnimation("hit")
               GetPlayer():DoTaskInTime(3, function() 
                  for k = 1, 20 do
                      GetPlayer().components.inventory:GiveItem(goldnugget)
                      GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                  end
               end )
            end
            if fist.prefab == "razor" then
               makers.AnimState:SetBuild("wolfgang_mighty")
               makers.AnimState:PlayAnimation("idle_onemanband1_loop",true)
               GetPlayer():DoTaskInTime(3, function() 
                  makers.AnimState:PlayAnimation("idle")
                  SpawnPrefab("collapse_small").Transform:SetPosition(pt.x+2.5, 0, pt.z+2.5)
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
               end )
            end
        end
    end
end
local function OnDeploy (inst, pt)
    game(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("makers") then
        data.makers = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.makers then
       game(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
MakeLargeBurnable(inst)
MakeLargePropagator(inst)

    即可用火腿短棍种野球拳赌场，给红色三角10个黄金（拿着黄金对红色三角点鼠标左键），会出现石头、剪子、布选项，用鼠标左键点击要出的选项（比如点石头），庄家会同时出拳。野球拳的规则是，石头赢剪子输布、剪子赢布输石头、布赢石头输剪子。如果胜利则获得本金加10个黄金（共20个黄金），打平退还本金，输了就输掉本金。庄家不会与穷光蛋对赌，在付了10个黄金的本金后，身上至少须保有1个黄金。不想要野球拳赌场时，烧掉即可。火腿短棍在战斗选项（画着两把剑）下，用1个猪皮、2个树枝、2个大肉制造




二九三.网上宠宠店（将鸟、兔子、昆虫、鼹鼠放入网店销售箱在线销售）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rabbit.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = 999


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\birds.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = 999


    3.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\mole.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = 999


    4.用记事本打开游戏目录\data\scripts\prefabs\bugnet.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function netsell(inst)
    inst.AnimState:SetBloomEffectHandle( "shaders/anim.ksh" )
    inst:DoTaskInTime(3, function() inst.AnimState:SetBloomEffectHandle( "" ) end )
    if inst.components.container:Has("goldnugget", 10) then
       if inst.components.container:Has("bee", 3) then
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("bee", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum)
       end
       if inst.components.container:Has("killerbee", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("killerbee", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*2)
       end
       if inst.components.container:Has("butterfly", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("butterfly", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum)
       end
       if inst.components.container:Has("fireflies", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("fireflies", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*2)
       end
       if inst.components.container:Has("crow", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("crow", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*3)
       end
       if inst.components.container:Has("robin", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("robin", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*3)
       end
       if inst.components.container:Has("robin_winter", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("robin_winter", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*3)
       end
       if inst.components.container:Has("rabbit", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("rabbit", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*2)
       end
       if inst.components.container:Has("mole", 3) then 
          local sellnum = math.random(1,3)
          inst.components.container:ConsumeByName("mole", sellnum)
          inst.components.container:ConsumeByName("goldnugget", -sellnum*5)
       end
    end
end
local function OnDeploy (inst, pt)
    if GetPlayer().components.inventory:Has("goldnugget", 200) then 
       GetPlayer().components.inventory:ConsumeByName("goldnugget", 200)
       local sellbox = SpawnPrefab("bugnet")
       sellbox.Transform:SetPosition(pt.x, pt.y, pt.z)
       sellbox.AnimState:SetBank("bee_box")
       sellbox.AnimState:SetBuild("bee_box")
       sellbox.AnimState:PlayAnimation("idle")
       sellbox.AnimState:SetMultColour(0/255,255/255,0/255,1)
       sellbox.Transform:SetScale(1.2, 1.2, 1.2)
       sellbox:AddTag("sellbox")
       sellbox.components.container.canbeopened = true
       sellbox:RemoveComponent("weapon")
       sellbox:RemoveComponent("tool")
       sellbox:RemoveComponent("finiteuses")
       sellbox:RemoveComponent("inventoryitem")
       sellbox:RemoveComponent("equippable")
       sellbox:AddTag("fridge")
       MakeLargeBurnable(sellbox)
       inst:Remove()
    end
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("sellbox") then
        data.sellbox = true
    end
end
local function onload(inst, data)
    if data and data.sellbox then
       inst.AnimState:SetBank("bee_box")
       inst.AnimState:SetBuild("bee_box")
       inst.AnimState:PlayAnimation("idle")
       inst.AnimState:SetMultColour(0/255,255/255,0/255,1)
       inst.Transform:SetScale(1.2, 1.2, 1.2)
       inst:AddTag("sellbox")
       inst.components.container.canbeopened = true
       inst:RemoveComponent("weapon")
       inst:RemoveComponent("tool")
       inst:RemoveComponent("finiteuses")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("equippable")
       inst:AddTag("fridge")
       MakeLargeBurnable(inst)
    end
end
local function itemtest(inst, item, slot)
    if item.prefab == "goldnugget" or item.prefab == "bee" or item.prefab == "killerbee" or item.prefab == "butterfly" or item.prefab == "fireflies" or item.prefab == "crow" or item.prefab == "robin" or item.prefab == "robin_winter" or item.prefab == "rabbit" or item.prefab == "mole" then
       return true
    end
    return false
end
local slotpos = {Vector3(75,150,0)}
for y = 2, 0, -1 do
    for x = 0, 4 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(-100,200,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.itemtestfn = itemtest
    inst:DoPeriodicTask(30, function() if inst:HasTag("sellbox") then netsell(inst) end end )

    即可用捕虫网种网店销售箱，将花费200个黄金，身上黄金数不足时，不给网店销售箱。左键点网店销售箱会打开格子，在箱子最顶上的格子里放入10个黄金的保证金，并放入小宠物后（几个品种都可以，但一个品种至少3只），即可在线销售。网店销售箱亮灯时，是在联网结算，打开箱子可看到商品库存的减少、黄金数量的上升，可以取出黄金用于消费，但最顶上的格子里必须保留至少10个黄金的保证金。鼹鼠定价5个黄金，鸟定价3个黄金，杀人蜂、萤火虫、兔子定价2个黄金，蜜蜂、蝴蝶定价1个黄金，当某种商品库存不足3只时，该品种将无人购买，请及时检查并补货。千万不要将黄金放在下面的商品格中，而将最顶上的保证金格子空着，这代表所有商品定价0个黄金，小心被哄抢哦。从此经营自己的网上宠宠店，捕捉小宠物在线销售吧。不需要网店销售箱时，烧掉即可，记得取出黄金和商品哦




二九四.采矿场（用多功能工具种采矿场，打工赚黄金，买卖宝石）

    用记事本打开游戏目录\data\scripts\prefabs\axe_pickaxe.lua文件，

    1.在Asset("ANIM", "anim/swap_multitool_axe_pickaxe.zip"),的下一行插入以下内容：

	Asset("ANIM", "anim/wolfgang.zip"),
	Asset("ANIM", "anim/wolfgang_skinny.zip"),
	Asset("ANIM", "anim/wolfgang_mighty.zip"),
	Asset("ANIM", "anim/player_wolfgang.zip"),
	Asset("SOUND", "sound/wolfgang.fsb"),

    
    2.在inst:AddComponent("inspectable")的下一行插入以下内容：

local function mining(inst)
    local pt = inst:GetPosition()
    local boss = SpawnPrefab("multitool_axe_pickaxe")
    boss.Transform:SetPosition(pt.x, pt.y, pt.z)
    boss.AnimState:SetBank("wilson")
    boss.AnimState:SetBuild("wolfgang")
    boss.AnimState:Hide("ARM_carry")
    boss.AnimState:Show("ARM_normal")
    boss.Transform:SetFourFaced()
    boss.AnimState:OverrideSymbol("swap_hat", "hat_miner", "swap_hat")
    boss.AnimState:Show("HAT")
    boss.AnimState:Show("HAT_HAIR")
    boss.AnimState:Hide("HAIR_NOHAT")
    boss.AnimState:Hide("HAIR")
    boss.AnimState:PlayAnimation("idle")
    boss:AddTag("boss")
    boss:RemoveComponent("weapon")
    boss:RemoveComponent("tool")
    boss:RemoveComponent("finiteuses")
    boss:RemoveComponent("inventoryitem")
    boss:RemoveComponent("equippable")
    boss:RemoveComponent("deployable")
    boss:RemoveTag("sharp")
    local light = boss.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(5)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    boss:AddComponent("trader")
    boss.components.trader:SetAcceptTest(function(boss, item) 
        if item.prefab == "goldnugget" then
           return true
        end
        if item.prefab == "purplegem" or item.prefab == "bluegem" or item.prefab == "redgem" or item.prefab == "orangegem" or item.prefab == "yellowgem" or item.prefab == "greengem" then
           return true
        end
        return false
    end )
    boss.components.trader.onaccept = function(boss, giver, item)
        boss.AnimState:PlayAnimation("give")
        if item.prefab == "goldnugget" then
           SpawnPrefab("pickaxe").Transform:SetPosition(pt.x+0.5, 0, pt.z+0.5)
        end
        if item.prefab == "purplegem" or item.prefab == "bluegem" or item.prefab == "redgem" or item.prefab == "orangegem" or item.prefab == "yellowgem" or item.prefab == "greengem" then
           SpawnPrefab("goldnugget").Transform:SetPosition(pt.x+0.5, 0, pt.z+0.5)
        end
    end
    boss.components.inspectable.getstatus = function(boss)
        boss.AnimState:PlayAnimation("give")
        local rock = SpawnPrefab("multitool_axe_pickaxe")
        rock.Transform:SetPosition(pt.x+1.5, 0, pt.z+1.5)
        rock.AnimState:SetBank("rock")
        rock.AnimState:SetBuild("rock")
        rock.AnimState:PlayAnimation("full")
        rock.Transform:SetScale(0.5, 0.5, 0.5)
        rock:AddTag("goodbye")
        rock:RemoveComponent("weapon")
        rock:RemoveComponent("tool")
        rock:RemoveComponent("finiteuses")
        rock:RemoveComponent("inventoryitem")
        rock:RemoveComponent("equippable")
        rock:RemoveComponent("deployable")
        rock:RemoveTag("sharp")
        rock:AddComponent("workable")
        rock.components.workable:SetWorkAction(ACTIONS.MINE)
        rock.components.workable:SetWorkLeft(30)
        rock.components.workable:SetOnWorkCallback(function(rock, worker, workleft)
            if rock.components.workable.workleft <= 0 then
               rock.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
               boss.AnimState:PlayAnimation("give")
               for k = 1, 3 do
                   SpawnPrefab("goldnugget").Transform:SetPosition(pt.x+0.5, 0, pt.z-0.5)
               end
               rock:Remove()
            else
               if rock.components.workable.workleft < 10 then
                  rock.AnimState:PlayAnimation("low")
               elseif rock.components.workable.workleft < 20 then
                  rock.AnimState:PlayAnimation("med")
               else
                  rock.AnimState:PlayAnimation("full")
               end
            end
        end) 
    end
    local mountain = SpawnPrefab("multitool_axe_pickaxe")
    mountain.Transform:SetPosition(pt.x-2, 0, pt.z-2)
    mountain.AnimState:SetBank("rock2")
    mountain.AnimState:SetBuild("rock2")
    mountain.AnimState:PlayAnimation("full")
    mountain.Transform:SetScale(2, 2, 2)
    mountain:AddTag("goodbye")
    mountain:RemoveComponent("weapon")
    mountain:RemoveComponent("tool")
    mountain:RemoveComponent("finiteuses")
    mountain:RemoveComponent("inventoryitem")
    mountain:RemoveComponent("equippable")
    mountain:RemoveComponent("deployable")
    mountain:RemoveTag("sharp")
    local miner = SpawnPrefab("multitool_axe_pickaxe")
    miner.Transform:SetPosition(pt.x+3-2, 0, pt.z-3-2)
    miner.AnimState:SetBank("wilson")
    miner.AnimState:SetBuild("wes")
    miner.Transform:SetFourFaced()
    miner.AnimState:OverrideSymbol("swap_hat", "hat_miner", "swap_hat")
    miner.AnimState:Show("HAT")
    miner.AnimState:Show("HAT_HAIR")
    miner.AnimState:Hide("HAIR_NOHAT")
    miner.AnimState:Hide("HAIR")
    miner.AnimState:OverrideSymbol("swap_object", "swap_pickaxe", "swap_pickaxe")
    miner.AnimState:Show("ARM_carry") 
    miner.AnimState:Hide("ARM_normal") 
    miner.AnimState:PlayAnimation("pickaxe_pre")
    miner.AnimState:PlayAnimation("pickaxe_loop", true)
    miner.Transform:SetRotation( 270 )
    miner:AddTag("goodbye")
    miner:RemoveComponent("weapon")
    miner:RemoveComponent("tool")
    miner:RemoveComponent("finiteuses")
    miner:RemoveComponent("inventoryitem")
    miner:RemoveComponent("equippable")
    miner:RemoveComponent("deployable")
    miner:RemoveTag("sharp")
    miner:DoPeriodicTask(30, function()
        miner.AnimState:PlayAnimation("pickaxe_pre")
        miner.AnimState:PlayAnimation("pickaxe_loop", true)
        miner.Transform:SetRotation( 270 )
    end )
    miner:AddComponent("trader")
    miner.components.trader:SetAcceptTest(function(miner, item) 
        if item.prefab == "goldnugget" then
           return true
        end
        return false
    end )
    miner.components.trader.onaccept = function(miner, giver, item)
        miner.AnimState:PlayAnimation("give")
        miner.Transform:SetRotation(GetPlayer().Transform:GetRotation() - 180)
        local names = {"purplegem","bluegem","redgem","orangegem","yellowgem","greengem"}
        local name = names[math.random(#names)]
        local gem = SpawnPrefab(name)
        GetPlayer().components.inventory:GiveItem(gem)
    end
end
local function OnDeploy (inst, pt)
    mining(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("boss") then
        data.boss = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.boss then
       mining(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
MakeLargeBurnable(inst)
MakeLargePropagator(inst)

    即可用多功能工具种采矿场，鼠标左键点工头（大力士），他会拿出要你加工的石头，用镐将石头凿碎，即可获得3个黄金的工钱（工头会扔在地上）。可以向工头购买镐（拿着黄金对工头点鼠标左键），每把1个黄金。也可以将自己的宝石卖给工头（拿着宝石对工头点鼠标左键），每颗1个黄金。当然也可以私下向矿工（维斯）购买宝石（拿着黄金对矿工点鼠标左键），同样每颗1个黄金（宝石将直接放入主角物品栏），颜色随机。不想要采矿场时，烧掉即可。多功能工具在远古选项（画着远古祭坛）下，用1把黄金斧头、1把黄金镐、2个铥矿石制造，制造时需要靠近远古祭坛




二九五.雇佣兵工厂（用大理石盔甲种兵工厂，打工赚黄金，购买机械雇佣兵）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rook.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("retinue") then
        data.retinue = true
    end
    if inst:HasTag("highretinue") then
        data.highretinue = true
    end
    if inst:HasTag("letgo") then
        data.letgo = true
    end
end
local function onload(inst, data)
    if data and data.retinue then
       inst.components.health:SetMaxHealth(1000)
       inst.components.combat:SetDefaultDamage(100)
       inst:RemoveTag("monster")
       inst:AddTag("retinue")
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "chessjunk.png" )
       inst.components.locomotor:Stop()
       inst:SetBrain(nil)
       inst.components.follower:SetLeader(nil)
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("letgo") then
              local brain = require "brains/rookbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
              inst:AddTag("letgo")
           else
              inst.components.locomotor:Stop()
              inst:SetBrain(nil)
              inst.components.follower:SetLeader(nil)
              inst:RemoveTag("letgo")
           end
       end
       inst:AddComponent("trader")
       inst.components.trader:SetAcceptTest(function(inst, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 50) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       inst.components.trader.onaccept = function(inst, giver, item)
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 49)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst.components.health:SetMaxHealth(2000)
           inst.components.health:DoDelta(2000)
           inst.components.combat:SetDefaultDamage(200)
           inst:AddTag("highretinue")
           inst.components.locomotor.walkspeed = 15
           inst.components.locomotor.runspeed =  20
       end
       inst.Physics:SetCollisionCallback(function(inst, other)
           if other and other.components.workable and other.components.workable.workleft > 0 then
              SpawnPrefab("collapse_small").Transform:SetPosition(other:GetPosition():Get())
              other.components.workable:Destroy(inst)
           end
       end)
       inst.components.locomotor.walkspeed = 10
       inst.components.locomotor.runspeed =  15
       inst.components.combat:SetAttackPeriod( 1 )
       inst.components.combat:SetRetargetFunction(3, function(inst)
          if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                  if guy.components.health and not guy.components.health:IsDead() then
                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                  end
              end)
          end
      end )
      inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
      if data and data.highretinue then
         inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
         inst.components.health:SetMaxHealth(2000)
         inst.components.combat:SetDefaultDamage(200)
         inst:AddTag("highretinue")
         inst.components.locomotor.walkspeed = 15
         inst.components.locomotor.runspeed =  20
      end
      if data and data.letgo then
         local brain = require "brains/rookbrain"
         inst:SetBrain(brain)
         inst:RestartBrain()
         inst.components.follower:SetLeader(GetPlayer())
         inst:AddTag("letgo")
      end
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload


    2.用记事本打开游戏目录\data\scripts\prefabs\bishop.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("retinue") then
        data.retinue = true
    end
    if inst:HasTag("highretinue") then
        data.highretinue = true
    end
    if inst:HasTag("letgo") then
        data.letgo = true
    end
end
local function onload(inst, data)
    if data and data.retinue then
       inst.components.health:SetMaxHealth(500)
       inst.components.combat:SetDefaultDamage(30)
       inst:RemoveTag("monster")
       inst:AddTag("retinue")
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "chessjunk.png" )
       inst.components.locomotor:Stop()
       inst:SetBrain(nil)
       inst.components.follower:SetLeader(nil)
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("letgo") then
              local brain = require "brains/rookbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
              inst:AddTag("letgo")
           else
              inst.components.locomotor:Stop()
              inst:SetBrain(nil)
              inst.components.follower:SetLeader(nil)
              inst:RemoveTag("letgo")
           end
       end
       inst:AddComponent("trader")
       inst.components.trader:SetAcceptTest(function(inst, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 30) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       inst.components.trader.onaccept = function(inst, giver, item)
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 29)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst.components.health:SetMaxHealth(1000)
           inst.components.health:DoDelta(1000)
           inst.components.combat:SetDefaultDamage(60)
           inst:AddTag("highretinue")
           inst.components.locomotor.walkspeed = 15
       end
       inst.components.locomotor.walkspeed = 10
       inst.components.combat:SetAttackPeriod( 0.5 )
       inst.components.combat:SetRetargetFunction(3, function(inst)
          if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                  if guy.components.health and not guy.components.health:IsDead() then
                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                  end
              end)
          end
      end )
      inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
      if data and data.highretinue then
         inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
         inst.components.health:SetMaxHealth(1000)
         inst.components.combat:SetDefaultDamage(60)
         inst:AddTag("highretinue")
         inst.components.locomotor.walkspeed = 15
      end
      if data and data.letgo then
         local brain = require "brains/rookbrain"
         inst:SetBrain(brain)
         inst:RestartBrain()
         inst.components.follower:SetLeader(GetPlayer())
         inst:AddTag("letgo")
      end
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload


    3.用记事本打开游戏目录\data\scripts\prefabs\knight.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function onsave(inst, data)
    if inst:HasTag("retinue") then
        data.retinue = true
    end
    if inst:HasTag("highretinue") then
        data.highretinue = true
    end
    if inst:HasTag("letgo") then
        data.letgo = true
    end
end
local function onload(inst, data)
    if data and data.retinue then
       inst.components.health:SetMaxHealth(500)
       inst.components.combat:SetDefaultDamage(15)
       inst:RemoveTag("monster")
       inst:AddTag("retinue")
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "chessjunk.png" )
       inst.components.locomotor:Stop()
       inst:SetBrain(nil)
       inst.components.follower:SetLeader(nil)
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("letgo") then
              local brain = require "brains/rookbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
              inst:AddTag("letgo")
           else
              inst.components.locomotor:Stop()
              inst:SetBrain(nil)
              inst.components.follower:SetLeader(nil)
              inst:RemoveTag("letgo")
           end
       end
       inst:AddComponent("trader")
       inst.components.trader:SetAcceptTest(function(inst, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 15) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       inst.components.trader.onaccept = function(inst, giver, item)
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 14)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst.components.health:SetMaxHealth(1000)
           inst.components.health:DoDelta(1000)
           inst.components.combat:SetDefaultDamage(30)
           inst:AddTag("highretinue")
           inst.components.locomotor.walkspeed = 15
       end
       inst.components.locomotor.walkspeed = 10
       inst.components.combat:SetAttackPeriod( 0.5 )
       inst.components.combat:SetRetargetFunction(3, function(inst)
          if not inst.components.health:IsDead() then
              return FindEntity(inst, 20, function(guy)
                  if guy.components.health and not guy.components.health:IsDead() then
                     return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                  end
              end)
          end
      end )
      inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
      if data and data.highretinue then
         inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
         inst.components.health:SetMaxHealth(1000)
         inst.components.combat:SetDefaultDamage(30)
         inst:AddTag("highretinue")
         inst.components.locomotor.walkspeed = 15
      end
      if data and data.letgo then
         local brain = require "brains/rookbrain"
         inst:SetBrain(brain)
         inst:RestartBrain()
         inst.components.follower:SetLeader(GetPlayer())
         inst:AddTag("letgo")
      end
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload


    4.用记事本打开游戏目录\data\scripts\prefabs\armor_marble.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function repairshop(inst)
    local pt = inst:GetPosition()
    local repairboss = SpawnPrefab("armormarble")
    repairboss.Transform:SetPosition(pt.x, pt.y, pt.z)
    repairboss.AnimState:SetBank("wilson")
    repairboss.AnimState:SetBuild("wx78")
    repairboss.AnimState:OverrideSymbol("swap_hat", "hat_top", "swap_hat")
    repairboss.AnimState:Show("HAT")
    repairboss.AnimState:Show("HAT_HAIR")
    repairboss.AnimState:Hide("HAIR_NOHAT")
    repairboss.AnimState:Hide("HAIR")
    repairboss.AnimState:OverrideSymbol("swap_body", "armor_marble", "swap_body")
    repairboss.AnimState:OverrideSymbol("swap_object", "swap_hammer", "swap_hammer")
    repairboss.AnimState:Show("ARM_carry") 
    repairboss.AnimState:Hide("ARM_normal") 
    repairboss.Transform:SetFourFaced()
    repairboss.AnimState:PlayAnimation("idle")
    repairboss:AddTag("repairboss")
    repairboss.components.inventoryitem.canbepickedup = false
    local light = repairboss.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    repairboss:AddComponent("trader")
    repairboss.components.trader:SetAcceptTest(function(repairboss, item) 
        if item.prefab == "goldnugget" then
           return true
        end
        return false
    end )
    repairboss.components.trader.onaccept = function(repairboss, giver, item)
        repairboss.AnimState:PlayAnimation("give")
        SpawnPrefab("hammer").Transform:SetPosition(pt.x+0.5, 0, pt.z+0.5)
    end
    repairboss.components.inspectable.getstatus = function(repairboss)
        repairboss.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_stone")
        local chessjunk = SpawnPrefab("armormarble")
        chessjunk.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
        chessjunk.AnimState:SetBank("chessmonster_ruins")
        chessjunk.AnimState:SetBuild("chessmonster_ruins")
        chessjunk.AnimState:PlayAnimation("idle3")
        chessjunk:AddTag("goodbye")
        chessjunk.components.inventoryitem.canbepickedup = false
        chessjunk:AddComponent("workable")
        chessjunk.components.workable:SetWorkAction(ACTIONS.HAMMER)
        chessjunk.components.workable:SetWorkLeft(30)
        chessjunk.components.workable:SetOnWorkCallback(function(chessjunk, worker, workleft)
            if chessjunk.components.workable.workleft <= 0 then
               GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/chessjunk_break")
               chessjunk:Remove()
               local goods = SpawnPrefab("armormarble")
               goods.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
               goods:AddTag("goodbye")
               goods.components.inventoryitem.canbepickedup = false
               if math.random()<.33 then
                  goods.AnimState:SetBank("rook")
                  goods.AnimState:SetBuild("rook_nightmare")
                  goods.AnimState:PlayAnimation("idle")
                  goods.Transform:SetScale(0.66, 0.66, 0.66)
               elseif math.random()<.66 then
                  goods.AnimState:SetBank("bishop")
                  goods.AnimState:SetBuild("bishop_nightmare")
                  goods.AnimState:PlayAnimation("idle_loop", true)
               else
                  goods.AnimState:SetBank("knight")
                  goods.AnimState:SetBuild("knight_nightmare")
                  goods.AnimState:PlayAnimation("idle_loop", true)
               end
               GetPlayer():DoTaskInTime(2, function()
                   repairboss.AnimState:PlayAnimation("give")
                   GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
                   for k = 1, 3 do
                       SpawnPrefab("goldnugget").Transform:SetPosition(pt.x+0.5, 0, pt.z-0.5)
                   end
                   goods:Remove()
               end )
            else
               if chessjunk.components.workable.workleft < 10 then
                  chessjunk.AnimState:PlayAnimation("idle1")
               elseif chessjunk.components.workable.workleft < 20 then
                  chessjunk.AnimState:PlayAnimation("idle2")
               else
                  chessjunk.AnimState:PlayAnimation("idle3")
               end
            end
        end) 
    end
    local chessjunk1 = SpawnPrefab("armormarble")
    chessjunk1.Transform:SetPosition(pt.x-3, 0, pt.z-3)
    chessjunk1.AnimState:SetBank("rook")
    chessjunk1.AnimState:SetBuild("rook_nightmare")
    chessjunk1.Transform:SetFourFaced()
    chessjunk1.AnimState:PlayAnimation("idle")
    chessjunk1.Transform:SetScale(0.66, 0.66, 0.66)
    chessjunk1:AddTag("goodbye")
    chessjunk1.components.inventoryitem.canbepickedup = false
    chessjunk1:AddComponent("trader")
    chessjunk1.components.trader:SetAcceptTest(function(chessjunk1, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 50) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    chessjunk1.components.trader.onaccept = function(chessjunk1, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 49)
        repairboss.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        local retinue1 = SpawnPrefab("rook_nightmare")
        retinue1.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
        retinue1.components.follower:SetLeader(GetPlayer())
        retinue1.components.health:SetMaxHealth(1000)
        retinue1.components.combat:SetDefaultDamage(100)
        retinue1:RemoveTag("monster")
        retinue1:AddTag("retinue")
        retinue1:AddTag("letgo")
	local minimap = retinue1.entity:AddMiniMapEntity()
	minimap:SetIcon( "chessjunk.png" )
        retinue1.components.inspectable.getstatus = function(retinue1)
            if not retinue1:HasTag("letgo") then
               local brain = require "brains/rookbrain"
               retinue1:SetBrain(brain)
               retinue1:RestartBrain()
               retinue1.components.follower:SetLeader(GetPlayer())
               retinue1:AddTag("letgo")
            else
               retinue1.components.locomotor:Stop()
               retinue1.components.follower:SetLeader(nil)
               retinue1:SetBrain(nil)
               retinue1:RemoveTag("letgo")
            end
        end
        retinue1:AddComponent("trader")
        retinue1.components.trader:SetAcceptTest(function(retinue1, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 50) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        retinue1.components.trader.onaccept = function(retinue1, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 49)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            retinue1.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            retinue1.components.health:SetMaxHealth(2000)
            retinue1.components.health:DoDelta(2000)
            retinue1.components.combat:SetDefaultDamage(200)
            retinue1:AddTag("highretinue")
            retinue1.components.locomotor.walkspeed = 15
            retinue1.components.locomotor.runspeed =  20
        end
        retinue1.Physics:SetCollisionCallback(function(retinue1, other)
            if other and other.components.workable and other.components.workable.workleft > 0 then
               SpawnPrefab("collapse_small").Transform:SetPosition(other:GetPosition():Get())
               other.components.workable:Destroy(retinue1)
            end
        end)
        retinue1.components.locomotor.walkspeed = 10
        retinue1.components.locomotor.runspeed =  15
        retinue1.components.combat:SetAttackPeriod( 1 )
        retinue1.components.combat:SetRetargetFunction(3, function(retinue1)
           if not retinue1.components.health:IsDead() then
               return FindEntity(retinue1, 20, function(guy)
                   if guy.components.health and not guy.components.health:IsDead() then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end)
           end
        end )
        retinue1.components.combat:SetKeepTargetFunction(function(retinue1, target) return target and target:IsValid() end )
    end
    local chessjunk2 = SpawnPrefab("armormarble")
    chessjunk2.Transform:SetPosition(pt.x-3+2.3, 0, pt.z-3-2.3)
    chessjunk2.AnimState:SetBank("bishop")
    chessjunk2.AnimState:SetBuild("bishop_nightmare")
    chessjunk2.Transform:SetFourFaced()
    chessjunk2.AnimState:PlayAnimation("idle_loop", true)
    chessjunk2:AddTag("goodbye")
    chessjunk2.components.inventoryitem.canbepickedup = false
    chessjunk2:AddComponent("trader")
    chessjunk2.components.trader:SetAcceptTest(function(chessjunk2, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 30) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    chessjunk2.components.trader.onaccept = function(chessjunk2, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 29)
        repairboss.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        local retinue2 = SpawnPrefab("bishop_nightmare")
        retinue2.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
        retinue2.components.follower:SetLeader(GetPlayer())
        retinue2.components.health:SetMaxHealth(500)
        retinue2.components.combat:SetDefaultDamage(30)
        retinue2:RemoveTag("monster")
        retinue2:AddTag("retinue")
        retinue2:AddTag("letgo")
	local minimap = retinue2.entity:AddMiniMapEntity()
	minimap:SetIcon( "chessjunk.png" )
        retinue2.components.inspectable.getstatus = function(retinue2)
            if not retinue2:HasTag("letgo") then
               local brain = require "brains/rookbrain"
               retinue2:SetBrain(brain)
               retinue2:RestartBrain()
               retinue2.components.follower:SetLeader(GetPlayer())
               retinue2:AddTag("letgo")
            else
               retinue2.components.locomotor:Stop()
               retinue2.components.follower:SetLeader(nil)
               retinue2:SetBrain(nil)
               retinue2:RemoveTag("letgo")
            end
        end
        retinue2:AddComponent("trader")
        retinue2.components.trader:SetAcceptTest(function(retinue2, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 30) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        retinue2.components.trader.onaccept = function(retinue2, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 29)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            retinue2.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            retinue2.components.health:SetMaxHealth(1000)
            retinue2.components.health:DoDelta(1000)
            retinue2.components.combat:SetDefaultDamage(60)
            retinue2:AddTag("highretinue")
            retinue2.components.locomotor.walkspeed = 15
        end
        retinue2.components.locomotor.walkspeed = 10
        retinue2.components.combat:SetAttackPeriod( 0.5 )
        retinue2.components.combat:SetRetargetFunction(3, function(retinue2)
           if not retinue2.components.health:IsDead() then
               return FindEntity(retinue2, 20, function(guy)
                   if guy.components.health and not guy.components.health:IsDead() then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end)
           end
        end )
        retinue2.components.combat:SetKeepTargetFunction(function(retinue2, target) return target and target:IsValid() end )
    end
    local chessjunk3 = SpawnPrefab("armormarble")
    chessjunk3.Transform:SetPosition(pt.x-3-2, 0, pt.z-3+2)
    chessjunk3.AnimState:SetBank("knight")
    chessjunk3.AnimState:SetBuild("knight_nightmare")
    chessjunk3.Transform:SetFourFaced()
    chessjunk3.AnimState:PlayAnimation("idle_loop", true)
    chessjunk3:AddTag("goodbye")
    chessjunk3.components.inventoryitem.canbepickedup = false
    chessjunk3:AddComponent("trader")
    chessjunk3.components.trader:SetAcceptTest(function(chessjunk3, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 15) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    chessjunk3.components.trader.onaccept = function(chessjunk3, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 14)
        repairboss.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        local retinue3 = SpawnPrefab("knight_nightmare")
        retinue3.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
        retinue3.components.follower:SetLeader(GetPlayer())
        retinue3.components.health:SetMaxHealth(500)
        retinue3.components.combat:SetDefaultDamage(15)
        retinue3:RemoveTag("monster")
        retinue3:AddTag("retinue")
        retinue3:AddTag("letgo")
	local minimap = retinue3.entity:AddMiniMapEntity()
	minimap:SetIcon( "chessjunk.png" )
        retinue3.components.inspectable.getstatus = function(retinue3)
            if not retinue3:HasTag("letgo") then
               local brain = require "brains/rookbrain"
               retinue3:SetBrain(brain)
               retinue3:RestartBrain()
               retinue3.components.follower:SetLeader(GetPlayer())
               retinue3:AddTag("letgo")
            else
               retinue3.components.locomotor:Stop()
               retinue3.components.follower:SetLeader(nil)
               retinue3:SetBrain(nil)
               retinue3:RemoveTag("letgo")
            end
        end
        retinue3:AddComponent("trader")
        retinue3.components.trader:SetAcceptTest(function(retinue3, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 15) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        retinue3.components.trader.onaccept = function(retinue3, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 14)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
            retinue3.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            retinue3.components.health:SetMaxHealth(1000)
            retinue3.components.health:DoDelta(1000)
            retinue3.components.combat:SetDefaultDamage(30)
            retinue3:AddTag("highretinue")
            retinue3.components.locomotor.walkspeed = 15
        end
        retinue3.components.locomotor.walkspeed = 10
        retinue3.components.combat:SetAttackPeriod( 0.5 )
        retinue3.components.combat:SetRetargetFunction(3, function(retinue3)
           if not retinue3.components.health:IsDead() then
               return FindEntity(retinue3, 20, function(guy)
                   if guy.components.health and not guy.components.health:IsDead() then
                      return guy.components.combat.target == GetPlayer() or GetPlayer().components.combat.target == guy or guy:HasTag("monster")
                   end
               end)
           end
       end )
       retinue3.components.combat:SetKeepTargetFunction(function(retinue3, target) return target and target:IsValid() end )
    end
    local garbage1 = SpawnPrefab("armormarble")
    garbage1.Transform:SetPosition(pt.x+4-1, 0, pt.z-4-1)
    garbage1.AnimState:SetBank("researchlab2")
    garbage1.AnimState:SetBuild("researchlab2")
    garbage1.AnimState:PlayAnimation("proximity_loop", true)
    garbage1:AddTag("goodbye")
    garbage1.components.inventoryitem.canbepickedup = false
    local garbage2 = SpawnPrefab("armormarble")
    garbage2.Transform:SetPosition(pt.x+4+1, 0, pt.z-4+1)
    garbage2.AnimState:SetBank("researchlab2")
    garbage2.AnimState:SetBuild("researchlab2")
    garbage2.AnimState:PlayAnimation("proximity_loop", true)
    garbage2:AddTag("goodbye")
    garbage2.components.inventoryitem.canbepickedup = false
    local garbage3 = SpawnPrefab("armormarble")
    garbage3.Transform:SetPosition(pt.x+4+3, 0, pt.z-4+3)
    garbage3.AnimState:SetBank("researchlab2")
    garbage3.AnimState:SetBuild("researchlab2")
    garbage3.AnimState:PlayAnimation("proximity_loop", true)
    garbage3:AddTag("goodbye")
    garbage3.components.inventoryitem.canbepickedup = false
end
local function OnDeploy (inst, pt)
    repairshop(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("repairboss") then
        data.repairboss = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.repairboss then
       repairshop(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
MakeLargeBurnable(inst)
MakeLargePropagator(inst)

    即可用大理石盔甲种雇佣兵工厂，鼠标左键点老板（机器人），他会拿出要你加工的零件，用锤子将零件砸成机械兵，即可获得3个黄金的工钱（老板会扔在地上）。可以向老板购买锤子（拿着黄金对老板点鼠标左键），每把1个黄金。拿着黄金对老板背后的机械兵点鼠标左键，可以购买相应品种的机械雇佣兵，其中机械犀牛每只50个黄金，机械主教每只30个黄金，机械马每只15个黄金，打造你的铁甲战团吧。鼠标左键点雇佣兵，可停止跟随，再次点击可继续跟随，点击时手中不要拿武器，以免误伤。忘记将雇佣军驻扎在何处时，可以打开小地图查找，将显示为机器零件的图标。拥有机械雇佣兵后，可以进一步为它们升级，拿着黄金对自己的机械兵点鼠标左键（同样犀牛50个黄金、主教30个黄金、马15个黄金），可将它们升级为超级机械雇佣兵（身上发亮），攻防及行军速度都将大幅提高。大战之后，给雇佣兵黄金（数量同上），可以将它们的血补满。不想要雇佣兵工厂时，烧掉即可。大理石盔甲在战斗选项（画着两把剑）下，用12块大理石、4条绳子制造




二九六.企鹅养殖场（用蜂巢种企鹅养殖场，买小企鹅，养大后卖出赚黄金）

    用记事本打开游戏目录\data\scripts\prefabs\honeycomb.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function penguinshop(inst)
    local pt = inst:GetPosition()
    local peddler = SpawnPrefab("honeycomb")
    peddler.Transform:SetPosition(pt.x, pt.y, pt.z)
    peddler.AnimState:SetBank("wilson")
    peddler.AnimState:SetBuild("willow")
    peddler.AnimState:OverrideSymbol("swap_hat", "hat_straw", "swap_hat")
    peddler.AnimState:Show("HAT")
    peddler.AnimState:Show("HAT_HAIR")
    peddler.AnimState:Hide("HAIR_NOHAT")
    peddler.AnimState:Hide("HAIR")
    peddler.AnimState:OverrideSymbol("swap_body", "armor_grass", "swap_body")
    peddler.AnimState:Hide("ARM_carry") 
    peddler.AnimState:Show("ARM_normal") 
    peddler.Transform:SetFourFaced()
    peddler.AnimState:PlayAnimation("idle")
    peddler:AddTag("peddler")
    peddler:RemoveComponent("stackable")
    peddler:RemoveComponent("tradable")
    peddler:RemoveComponent("inventoryitem")
    local light = peddler.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    MakeLargeBurnable(peddler)
    MakeLargePropagator(peddler)
    peddler.components.inspectable.getstatus = function(peddler)
        peddler.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/get_gold")
        local pos = Vector3(peddler.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("penguin_2") then
               for k = 1, 20 do
                   SpawnPrefab("goldnugget").Transform:SetPosition(v.Transform:GetWorldPosition())
               end
               v:Remove()
            end
        end
    end
    peddler:AddComponent("trader")
    peddler.components.trader:SetAcceptTest(function(peddler, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 10) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    peddler.components.trader.onaccept = function(peddler, giver, item)
        peddler.AnimState:PlayAnimation("give")
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        local penguin = SpawnPrefab("honeycomb")
        penguin.Transform:SetPosition(pt.x+3.1, 0, pt.z+3.1)
        penguin.AnimState:SetBank("penguin")
        penguin.AnimState:SetBuild("penguin_build")
        penguin.Transform:SetFourFaced()
        penguin.AnimState:PlayAnimation("idle_loop", true)
        penguin.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
	penguin.entity:AddSoundEmitter()
	local minimap = penguin.entity:AddMiniMapEntity()
	minimap:SetIcon( "penguin.png" )
        MakeCharacterPhysics(penguin, 50, .5)
        penguin:AddComponent("follower")
        penguin.components.follower:SetLeader(GetPlayer())
        local brain = require "brains/abigailbrain"
        penguin:SetBrain(brain)
        penguin:AddComponent("locomotor")
        penguin.components.locomotor.walkspeed = 0.75
        penguin.components.locomotor.directdrive = false
        penguin:SetStateGraph("SGpenguin")
        penguin:AddComponent("combat")
        penguin.components.combat.hiteffectsymbol = "body"
        penguin.components.combat:SetAttackPeriod(1)
        penguin.components.combat:SetRange(2.5)
        penguin.components.combat:SetDefaultDamage(1)
        penguin:ListenForEvent("attacked", function(penguin, data) penguin.components.combat:SetTarget(data.attacker) end )
        penguin:AddComponent("health")
        penguin.components.health:SetMaxHealth(50)
        penguin.Transform:SetScale(0.7, 0.7, 0.7)
        penguin:RemoveComponent("stackable")
        penguin:RemoveComponent("tradable")
        penguin:RemoveComponent("inventoryitem")
        penguin:AddTag("retinue")
        penguin:AddTag("penguin_1")
        penguin:AddComponent("lootdropper")
        penguin.components.lootdropper:SetLoot({"smallmeat", "smallmeat"})
        penguin.components.inspectable.getstatus = function(penguin)
            if not penguin:HasTag("retinue") then
               local brain = require "brains/abigailbrain"
               penguin:SetBrain(brain)
               penguin.components.follower:SetLeader(GetPlayer())
               penguin.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
               penguin:AddTag("retinue")
            else
               local brain = require "brains/leifbrain"
               penguin:SetBrain(brain)
               penguin.components.follower:SetLeader(nil)
               penguin.AnimState:SetBloomEffectHandle("")
               penguin:RemoveTag("retinue")
            end
        end
        penguin:DoTaskInTime(math.random(480,560), function()
            if not penguin:HasTag("penguin_2") then
               penguin.AnimState:PlayAnimation("taunt")
               penguin.Transform:SetScale(1, 1, 1)
               penguin:AddTag("penguin_2")
               penguin.components.lootdropper:SetLoot({"meat", "meat", "drumstick", "drumstick"})
            end
        end )
        penguin:DoPeriodicTask(math.random(120,180), function()
            if penguin:HasTag("penguin_2") then
               SpawnPrefab("bird_egg").Transform:SetPosition(penguin.Transform:GetWorldPosition())
            end
        end)
    end
    local ice = SpawnPrefab("honeycomb")
    ice.Transform:SetPosition(pt.x+1, 0, pt.z+1)
    ice.AnimState:SetBank("penguin_ice")
    ice.AnimState:SetBuild("penguin_ice")
    ice.AnimState:PlayAnimation("idle")
    ice.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    ice.AnimState:SetLayer( LAYER_BACKGROUND )
    ice.AnimState:SetSortOrder( 1 )
    ice.Transform:SetRotation( 225 )
    ice:RemoveComponent("stackable")
    ice:RemoveComponent("tradable")
    ice:RemoveComponent("inventoryitem")
    ice:AddTag("goodbye")
    ice:AddTag("NOCLICK")
    MakeLargeBurnable(ice)
    MakeLargePropagator(ice)
    local model1 = SpawnPrefab("honeycomb")
    model1.Transform:SetPosition(pt.x+2-1, 0, pt.z-2-1)
    model1.AnimState:SetBank("penguin")
    model1.AnimState:SetBuild("penguin_build")
    model1.Transform:SetFourFaced()
    model1.AnimState:PlayAnimation("idle_loop", true)
    model1.Transform:SetRotation( 270 )
    model1.Transform:SetScale(2, 2, 2)
    model1:RemoveComponent("stackable")
    model1:RemoveComponent("tradable")
    model1:RemoveComponent("inventoryitem")
    model1.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    model1:AddTag("goodbye")
    MakeLargeBurnable(model1)
    MakeLargePropagator(model1)
    local model2 = SpawnPrefab("honeycomb")
    model2.Transform:SetPosition(pt.x-2-1, 0, pt.z+2-1)
    model2.AnimState:SetBank("penguin")
    model2.AnimState:SetBuild("penguin_build")
    model2.Transform:SetFourFaced()
    model2.AnimState:PlayAnimation("idle_loop", true)
    model2.Transform:SetRotation( 90 )
    model2.Transform:SetScale(2, 2, 2)
    model2:RemoveComponent("stackable")
    model2:RemoveComponent("tradable")
    model2:RemoveComponent("inventoryitem")
    model2.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    model2:AddTag("goodbye")
    MakeLargeBurnable(model2)
    MakeLargePropagator(model2)
end

local function OnDeploy (inst, pt)
    penguinshop(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("peddler") then data.peddler = true end
    if inst:HasTag("goodbye") then data.goodbye = true end
    if inst:HasTag("penguin_1") then data.penguin_1 = true end
    if inst:HasTag("penguin_2") then data.penguin_2 = true end
    if inst:HasTag("retinue") then data.retinue = true end
end
local function onload(inst, data)
    if data and data.peddler then
       penguinshop(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.penguin_1 then
        inst.AnimState:SetBank("penguin")
        inst.AnimState:SetBuild("penguin_build")
        inst.Transform:SetFourFaced()
        inst.AnimState:PlayAnimation("idle_loop", true)
	inst.entity:AddSoundEmitter()
	local minimap = inst.entity:AddMiniMapEntity()
	minimap:SetIcon( "penguin.png" )
        MakeCharacterPhysics(inst, 50, .5)
        inst:AddComponent("follower")
        inst.components.follower:SetLeader(nil)
        local brain = require "brains/leifbrain"
        inst:SetBrain(brain)
        inst:AddComponent("locomotor")
        inst.components.locomotor.walkspeed = 0.75
        inst.components.locomotor.directdrive = false
        inst:SetStateGraph("SGpenguin")
        inst:AddComponent("combat")
        inst.components.combat.hiteffectsymbol = "body"
        inst.components.combat:SetAttackPeriod(1)
        inst.components.combat:SetRange(2.5)
        inst.components.combat:SetDefaultDamage(1)
        inst:ListenForEvent("attacked", function(inst, data) inst.components.combat:SetTarget(data.attacker) end )
        inst:AddComponent("health")
        inst.components.health:SetMaxHealth(50)
        inst.Transform:SetScale(0.7, 0.7, 0.7)
        inst:RemoveComponent("stackable")
        inst:RemoveComponent("tradable")
        inst:RemoveComponent("inventoryitem")
        inst:AddTag("penguin_1")
        inst:AddComponent("lootdropper")
        inst.components.lootdropper:SetLoot({"smallmeat", "smallmeat"})
        inst.components.inspectable.getstatus = function(inst)
            if not inst:HasTag("retinue") then
               local brain = require "brains/abigailbrain"
               inst:SetBrain(brain)
               inst.components.follower:SetLeader(GetPlayer())
               inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
               inst:AddTag("retinue")
            else
               local brain = require "brains/leifbrain"
               inst:SetBrain(brain)
               inst.components.follower:SetLeader(nil)
               inst.AnimState:SetBloomEffectHandle("")
               inst:RemoveTag("retinue")
            end
        end
        inst:DoTaskInTime(math.random(480,560), function()
            if not inst:HasTag("penguin_2") then
               inst.AnimState:PlayAnimation("taunt")
               inst.Transform:SetScale(1, 1, 1)
               inst:AddTag("penguin_2")
               inst.components.lootdropper:SetLoot({"meat", "meat", "drumstick", "drumstick"})
            end
        end )
        inst:DoPeriodicTask(math.random(120,180), function()
            if inst:HasTag("penguin_2") then
               SpawnPrefab("bird_egg").Transform:SetPosition(inst.Transform:GetWorldPosition())
            end
        end)
    end
    if data and data.penguin_2 then
        inst.Transform:SetScale(1, 1, 1)
        inst:AddTag("penguin_2")
        inst.components.lootdropper:SetLoot({"meat", "meat", "drumstick", "drumstick"})
    end
    if data and data.retinue then
        local brain = require "brains/abigailbrain"
        inst:SetBrain(brain)
        inst.components.follower:SetLeader(GetPlayer())
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        inst:AddTag("retinue")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用蜂巢种企鹅养殖场（手里拿着1个蜂巢对地面点鼠标右键，如果拿着多个蜂巢，则不会种出来），拿着黄金对老板点鼠标左键，可以购买小企鹅，每只10个黄金。小企鹅会跟着你，鼠标左键点企鹅可停止跟随，再点则继续跟随（手里不要拿武器，以免误杀）。把它们带到你建造的企鹅圈，圈养起来吧，如果有淘气的企鹅啄墙，把它带离墙边即可。1-2天后，小企鹅长成大企鹅，并会下蛋，你可以继续养它们获得企鹅蛋，也可以带它们去企鹅养殖场，让它们停在冰面上，鼠标左键点老板，即可卖掉冰面上的大企鹅，收购价每只20个黄金。保护好你的企鹅群，从此作一个快乐的养鹅人吧。如果企鹅走失，可以打开小地图查找，将显示企鹅图标。杀掉小企鹅，会掉2个小肉（修改过“巨型超市”则增加掉落1-2个黄金），杀掉大企鹅会掉2个大肉和2个企鹅腿。不想要企鹅养殖场时烧掉即可




二九七.临时工市场（用噩梦花瓣种临时工市场，雇临时工帮你采摘、收获、砍树、开矿）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\petals_evil.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createworker(inst)
    local pt = inst:GetPosition()
    local shopsign = SpawnPrefab("petals_evil")
    shopsign.Transform:SetPosition(pt.x, pt.y, pt.z)
    shopsign.AnimState:SetBank("sign_home")
    shopsign.AnimState:SetBuild("sign_home")
    shopsign.AnimState:PlayAnimation("idle")
    shopsign.Transform:SetScale(2, 2, 2)
    shopsign:AddTag("shopsign")
    shopsign:RemoveComponent("stackable")
    shopsign:RemoveComponent("tradable")
    shopsign:RemoveComponent("fuel")
    shopsign:RemoveComponent("inventoryitem")
    shopsign:RemoveComponent("edible")
    shopsign:RemoveComponent("perishable")
    shopsign:RemoveComponent("burnable")
    shopsign:RemoveComponent("propagator")
    shopsign:RemoveComponent("deployable")
    MakeLargeBurnable(shopsign)
    MakeLargePropagator(shopsign)
    local light = shopsign.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(5)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    shopsign:DoPeriodicTask(6, function(shopsign)
        shopsign.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        shopsign:DoTaskInTime(3, function() shopsign.AnimState:SetBloomEffectHandle("") end )
    end )
    shopsign.components.inspectable.getstatus = function(shopsign)
       local pos = Vector3(shopsign.Transform:GetWorldPosition())
       local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
       for k,v in pairs(ents) do
           if v:HasTag("workerman") then
              v:Remove()
           end
       end
       local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
       local worker1 = SpawnPrefab("petals_evil")
       worker1.Transform:SetPosition(pt.x+1+3, 0, pt.z+1-3)
       worker1.AnimState:SetBank("wilson")
       worker1.buildname = names[math.random(#names)]
       worker1.AnimState:SetBuild(worker1.buildname)
       worker1.Transform:SetFourFaced()
       worker1.AnimState:OverrideSymbol("swap_hat", "hat_bee", "swap_hat")
       worker1.AnimState:Show("HAT")
       worker1.AnimState:Show("HAT_HAIR")
       worker1.AnimState:Hide("HAIR_NOHAT")
       worker1.AnimState:Hide("HAIR")
       worker1.AnimState:Show("ARM_normal") 
       worker1.AnimState:Hide("ARM_carry") 
       worker1.AnimState:PlayAnimation("idle")
       local minimap = worker1.entity:AddMiniMapEntity()
       minimap:SetIcon( "mushroom_tree_med.png" )
       local sound = worker1.entity:AddSoundEmitter()
       local shadow = worker1.entity:AddDynamicShadow()
       MakeCharacterPhysics(worker1, 75, .5)
       shadow:SetSize( 1.3, .6 )
       worker1:AddComponent("health")
       worker1.components.health:SetMaxHealth(1000)
       worker1.components.health:SetInvincible(true)
       worker1.components.health.nofadeout = true
       worker1:AddComponent("combat")
       worker1:AddComponent("follower")
       worker1:AddComponent("knownlocations")
       worker1:AddComponent("locomotor")
       worker1.components.locomotor.walkspeed = 5
       worker1.components.locomotor.runspeed = 12
       worker1:SetStateGraph("SGshadowwaxwell")
       worker1:RemoveComponent("stackable")
       worker1:RemoveComponent("tradable")
       worker1:RemoveComponent("fuel")
       worker1:RemoveComponent("inventoryitem")
       worker1:RemoveComponent("edible")
       worker1:RemoveComponent("perishable")
       worker1:RemoveComponent("burnable")
       worker1:RemoveComponent("propagator")
       worker1:RemoveComponent("deployable")
       MakeLargeBurnable(worker1)
       MakeLargePropagator(worker1)
       worker1:AddTag("workerman")
       worker1:AddComponent("trader")
       worker1.components.trader:SetAcceptTest(function(worker1, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 20) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       worker1.components.trader.onaccept = function(worker1, giver, item)
           worker1:AddTag("myworker")
           worker1:RemoveTag("workerman")
           worker1:RemoveComponent("burnable")
           worker1:RemoveComponent("propagator")
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 19)
           worker1.task1 = worker1:DoPeriodicTask(0.5, function(worker1)
               local target = FindEntity(worker1, 10, function(guy) 
                   return guy.components.pickable and guy.components.pickable:CanBePicked() and guy.prefab ~= "flower" and guy.prefab ~= "red_mushroom" and guy.prefab ~= "green_mushroom" and guy.prefab ~= "blue_mushroom" and guy.prefab ~= "flint"
               end )
               if target then
                  worker1.components.locomotor:Stop()
                  worker1:SetBrain(nil)
                  worker1.components.follower:SetLeader(nil)
                  local pt1 = target:GetPosition()
                  worker1.components.locomotor:GoToPoint(pt1)
                  worker1.task2 = worker1:DoPeriodicTask(.25, function(worker1)
                      local target2 = FindEntity(worker1, 0.8, function(guy) 
                          return guy.components.pickable and guy.components.pickable:CanBePicked() and guy.prefab ~= "flower" and guy.prefab ~= "red_mushroom" and guy.prefab ~= "green_mushroom" and guy.prefab ~= "blue_mushroom" and guy.prefab ~= "flint"
                      end )
                      if target2 then
                         worker1.AnimState:PlayAnimation("pickup")
                         target2.components.pickable:Pick(GetPlayer())
                      end
                  end )
               else
                  worker1.components.follower:SetLeader(GetPlayer())
                  local brain = require "brains/chesterbrain"
                  worker1:SetBrain(brain)
                  worker1:RestartBrain()
                  if worker1.task2 then worker1.task2:Cancel() worker1.task2 = nil end
               end
           end )
       end
       worker1:ListenForEvent( "nighttime", function() worker1:Remove() end, GetWorld())
       local worker2 = SpawnPrefab("petals_evil")
       worker2.Transform:SetPosition(pt.x+1+1, 0, pt.z+1-1)
       worker2.AnimState:SetBank("wilson")
       worker2.buildname = names[math.random(#names)]
       worker2.AnimState:SetBuild(worker2.buildname)
       worker2.Transform:SetFourFaced()
       worker2.AnimState:OverrideSymbol("swap_hat", "hat_straw", "swap_hat")
       worker2.AnimState:Show("HAT")
       worker2.AnimState:Show("HAT_HAIR")
       worker2.AnimState:Hide("HAIR_NOHAT")
       worker2.AnimState:Hide("HAIR")
       worker2.AnimState:Show("ARM_normal") 
       worker2.AnimState:Hide("ARM_carry") 
       worker2.AnimState:PlayAnimation("idle")
       local minimap = worker2.entity:AddMiniMapEntity()
       minimap:SetIcon( "mushroom_tree_med.png" )
       local sound = worker2.entity:AddSoundEmitter()
       local shadow = worker2.entity:AddDynamicShadow()
       MakeCharacterPhysics(worker2, 75, .5)
       shadow:SetSize( 1.3, .6 )
       worker2:AddComponent("health")
       worker2.components.health:SetMaxHealth(1000)
       worker2.components.health:SetInvincible(true)
       worker2.components.health.nofadeout = true
       worker2:AddComponent("combat")
       worker2:AddComponent("follower")
       worker2:AddComponent("knownlocations")
       worker2:AddComponent("locomotor")
       worker2.components.locomotor.walkspeed = 5
       worker2.components.locomotor.runspeed = 12
       worker2:SetStateGraph("SGshadowwaxwell")
       worker2:RemoveComponent("stackable")
       worker2:RemoveComponent("tradable")
       worker2:RemoveComponent("fuel")
       worker2:RemoveComponent("inventoryitem")
       worker2:RemoveComponent("edible")
       worker2:RemoveComponent("perishable")
       worker2:RemoveComponent("burnable")
       worker2:RemoveComponent("propagator")
       worker2:RemoveComponent("deployable")
       MakeLargeBurnable(worker2)
       MakeLargePropagator(worker2)
       worker2:AddTag("workerman")
       worker2:AddComponent("trader")
       worker2.components.trader:SetAcceptTest(function(worker2, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 20) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       worker2.components.trader.onaccept = function(worker2, giver, item)
           worker2:AddTag("myworker")
           worker2:RemoveTag("workerman")
           worker2:RemoveComponent("burnable")
           worker2:RemoveComponent("propagator")
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 19)
           worker2.task1 = worker2:DoPeriodicTask(0.5, function(worker2)
               local target = FindEntity(worker2, 10, function(guy) 
                   return guy.components.crop and guy.components.crop.matured
               end )
               if target then
                  worker2.components.locomotor:Stop()
                  worker2:SetBrain(nil)
                  worker2.components.follower:SetLeader(nil)
                  local pt1 = target:GetPosition()
                  worker2.components.locomotor:GoToPoint(pt1)
                  worker2.task2 = worker2:DoPeriodicTask(.25, function(worker2)
                      local target2 = FindEntity(worker2, 0.8, function(guy) 
                          return guy.components.crop and guy.components.crop.matured
                      end )
                      if target2 then
                         worker2.AnimState:PlayAnimation("pickup")
                         target2.components.crop:Harvest(GetPlayer())
                      end
                      local target3 = FindEntity(worker2, 0.8, function(guy) 
                          return guy.components.grower and guy.components.grower:IsEmpty()
                      end )
                      if target3 then
                         target3.components.grower.cycles_left = target3.components.grower.max_cycles_left
                      end
                  end )
               else
                  worker2.components.follower:SetLeader(GetPlayer())
                  local brain = require "brains/chesterbrain"
                  worker2:SetBrain(brain)
                  worker2:RestartBrain()
                  if worker2.task2 then worker2.task2:Cancel() worker2.task2 = nil end
                  if worker2.task3 then worker2.task3:Cancel() worker2.task3 = nil end
               end
           end )
       end
       worker2:ListenForEvent( "nighttime", function() worker2:Remove() end, GetWorld())
       local worker3 = SpawnPrefab("petals_evil")
       worker3.Transform:SetPosition(pt.x+1-1, 0, pt.z+1+1)
       worker3.AnimState:SetBank("wilson")
       worker3.buildname = names[math.random(#names)]
       worker3.AnimState:SetBuild(worker3.buildname)
       worker3.Transform:SetFourFaced()
       worker3.AnimState:OverrideSymbol("swap_object", "swap_axe", "swap_axe")
       worker3.AnimState:Show("ARM_carry") 
       worker3.AnimState:Hide("ARM_normal") 
       worker3.AnimState:PlayAnimation("idle")
       local minimap = worker3.entity:AddMiniMapEntity()
       minimap:SetIcon( "mushroom_tree_med.png" )
       local sound = worker3.entity:AddSoundEmitter()
       local shadow = worker3.entity:AddDynamicShadow()
       MakeCharacterPhysics(worker3, 75, .5)
       shadow:SetSize( 1.3, .6 )
       worker3:AddComponent("health")
       worker3.components.health:SetMaxHealth(1000)
       worker3.components.health:SetInvincible(true)
       worker3.components.health.nofadeout = true
       worker3:AddComponent("combat")
       worker3:AddComponent("follower")
       worker3:AddComponent("knownlocations")
       worker3:AddComponent("locomotor")
       worker3.components.locomotor.walkspeed = 5
       worker3.components.locomotor.runspeed = 12
       worker3:SetStateGraph("SGshadowwaxwell")
       worker3:RemoveComponent("stackable")
       worker3:RemoveComponent("tradable")
       worker3:RemoveComponent("fuel")
       worker3:RemoveComponent("inventoryitem")
       worker3:RemoveComponent("edible")
       worker3:RemoveComponent("perishable")
       worker3:RemoveComponent("burnable")
       worker3:RemoveComponent("propagator")
       worker3:RemoveComponent("deployable")
       MakeLargeBurnable(worker3)
       MakeLargePropagator(worker3)
       worker3:AddTag("workerman")
       worker3:AddComponent("trader")
       worker3.components.trader:SetAcceptTest(function(worker3, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 20) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       worker3.components.trader.onaccept = function(worker3, giver, item)
           worker3:AddTag("myworker")
           worker3:RemoveTag("workerman")
           worker3:RemoveComponent("burnable")
           worker3:RemoveComponent("propagator")
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 19)
           worker3.task1 = worker3:DoPeriodicTask(0.5, function(worker3)
               local target = FindEntity(worker3, 15, function(guy) 
                   return guy:HasTag("tree") and guy.components.workable and guy.components.workable.workleft > 0
               end )
               if target then
                  worker3.components.locomotor:Stop()
                  worker3:SetBrain(nil)
                  worker3.components.follower:SetLeader(nil)
                  local pt1 = target:GetPosition()
                  worker3.components.locomotor:GoToPoint(pt1)
                  worker3.task2 = worker3:DoPeriodicTask(.25, function(worker3)
                      local target2 = FindEntity(worker3, 2, function(guy) 
                          return guy:HasTag("tree") and guy.components.workable and guy.components.workable.workleft > 0
                      end )
                      if target2 then
                         worker3.AnimState:PlayAnimation("pickup")
                         target2.components.workable:Destroy(worker3)
                      end
                  end )
               else
                  worker3.components.follower:SetLeader(GetPlayer())
                  local brain = require "brains/chesterbrain"
                  worker3:SetBrain(brain)
                  worker3:RestartBrain()
                  if worker3.task2 then worker3.task2:Cancel() worker3.task2 = nil end
               end
           end )
       end
       worker3:ListenForEvent( "nighttime", function() worker3:Remove() end, GetWorld())
       local worker4 = SpawnPrefab("petals_evil")
       worker4.Transform:SetPosition(pt.x+1-3, 0, pt.z+1+3)
       worker4.AnimState:SetBank("wilson")
       worker4.buildname = names[math.random(#names)]
       worker4.AnimState:SetBuild(worker4.buildname)
       worker4.Transform:SetFourFaced()
       worker4.AnimState:OverrideSymbol("swap_hat", "hat_miner", "swap_hat")
       worker4.AnimState:Show("HAT")
       worker4.AnimState:Show("HAT_HAIR")
       worker4.AnimState:Hide("HAIR_NOHAT")
       worker4.AnimState:Hide("HAIR")
       worker4.AnimState:OverrideSymbol("swap_object", "swap_pickaxe", "swap_pickaxe")
       worker4.AnimState:Show("ARM_carry") 
       worker4.AnimState:Hide("ARM_normal") 
       worker4.AnimState:PlayAnimation("idle")
       local minimap = worker4.entity:AddMiniMapEntity()
       minimap:SetIcon( "mushroom_tree_med.png" )
       local sound = worker4.entity:AddSoundEmitter()
       local shadow = worker4.entity:AddDynamicShadow()
       MakeCharacterPhysics(worker4, 75, .5)
       shadow:SetSize( 1.3, .6 )
       worker4:AddComponent("health")
       worker4.components.health:SetMaxHealth(1000)
       worker4.components.health:SetInvincible(true)
       worker4.components.health.nofadeout = true
       worker4:AddComponent("combat")
       worker4:AddComponent("follower")
       worker4:AddComponent("knownlocations")
       worker4:AddComponent("locomotor")
       worker4.components.locomotor.walkspeed = 5
       worker4.components.locomotor.runspeed = 12
       worker4:SetStateGraph("SGshadowwaxwell")
       worker4:RemoveComponent("stackable")
       worker4:RemoveComponent("tradable")
       worker4:RemoveComponent("fuel")
       worker4:RemoveComponent("inventoryitem")
       worker4:RemoveComponent("edible")
       worker4:RemoveComponent("perishable")
       worker4:RemoveComponent("burnable")
       worker4:RemoveComponent("propagator")
       worker4:RemoveComponent("deployable")
       MakeLargeBurnable(worker4)
       MakeLargePropagator(worker4)
       worker4:AddTag("workerman")
       worker4:AddComponent("trader")
       worker4.components.trader:SetAcceptTest(function(worker4, item) 
           if GetPlayer().components.inventory:Has("goldnugget", 20) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
           return false
       end )
       worker4.components.trader.onaccept = function(worker4, giver, item)
           worker4:AddTag("myworker")
           worker4:RemoveTag("workerman")
           worker4:RemoveComponent("burnable")
           worker4:RemoveComponent("propagator")
           GetPlayer().components.inventory:ConsumeByName("goldnugget", 19)
           worker4.task1 = worker4:DoPeriodicTask(0.5, function(worker4)
               local target = FindEntity(worker4, 15, function(guy) 
                   return guy.prefab == "rock1" or guy.prefab == "rock2" or guy.prefab == "rock_flintless" or guy.prefab == "rock_flintless_med" or guy.prefab == "rock_flintless_low" or guy.prefab == "rock_ice"
               end )
               if target then
                  worker4.components.locomotor:Stop()
                  worker4:SetBrain(nil)
                  worker4.components.follower:SetLeader(nil)
                  local pt1 = target:GetPosition()
                  worker4.components.locomotor:GoToPoint(pt1)
                  worker4.task2 = worker4:DoPeriodicTask(.25, function(worker4)
                      local target2 = FindEntity(worker4, 2, function(guy) 
                          return guy.prefab == "rock1" or guy.prefab == "rock2" or guy.prefab == "rock_flintless" or guy.prefab == "rock_flintless_med" or guy.prefab == "rock_flintless_low" or guy.prefab == "rock_ice"
                      end )
                      if target2 then
                         worker4.AnimState:PlayAnimation("pickup")
                         target2.components.workable:Destroy(worker4)
                      end
                  end )
               else
                  worker4.components.follower:SetLeader(GetPlayer())
                  local brain = require "brains/chesterbrain"
                  worker4:SetBrain(brain)
                  worker4:RestartBrain()
                  if worker4.task2 then worker4.task2:Cancel() worker4.task2 = nil end
               end
           end )
       end
       worker4:ListenForEvent( "nighttime", function() worker4:Remove() end, GetWorld())
    end
    local shopsign1 = SpawnPrefab("petals_evil")
    shopsign1.Transform:SetPosition(pt.x+2+3, 0, pt.z+2-3)
    shopsign1.AnimState:SetBank("sign_home")
    shopsign1.AnimState:SetBuild("sign_home")
    shopsign1.AnimState:PlayAnimation("idle")
    shopsign1.Transform:SetScale(0.5, 0.5, 0.5)
    shopsign1:RemoveComponent("stackable")
    shopsign1:RemoveComponent("tradable")
    shopsign1:RemoveComponent("fuel")
    shopsign1:RemoveComponent("inventoryitem")
    shopsign1:RemoveComponent("edible")
    shopsign1:RemoveComponent("perishable")
    shopsign1:RemoveComponent("burnable")
    shopsign1:RemoveComponent("propagator")
    shopsign1:RemoveComponent("deployable")
    MakeLargeBurnable(shopsign1)
    MakeLargePropagator(shopsign1)
    shopsign1:AddTag("goodbye")
    local shopsign2 = SpawnPrefab("petals_evil")
    shopsign2.Transform:SetPosition(pt.x+2+1, 0, pt.z+2-1)
    shopsign2.AnimState:SetBank("sign_home")
    shopsign2.AnimState:SetBuild("sign_home")
    shopsign2.AnimState:PlayAnimation("idle")
    shopsign2.Transform:SetScale(0.5, 0.5, 0.5)
    shopsign2:RemoveComponent("stackable")
    shopsign2:RemoveComponent("tradable")
    shopsign2:RemoveComponent("fuel")
    shopsign2:RemoveComponent("inventoryitem")
    shopsign2:RemoveComponent("edible")
    shopsign2:RemoveComponent("perishable")
    shopsign2:RemoveComponent("burnable")
    shopsign2:RemoveComponent("propagator")
    shopsign2:RemoveComponent("deployable")
    MakeLargeBurnable(shopsign2)
    MakeLargePropagator(shopsign2)
    shopsign2:AddTag("goodbye")
    local shopsign3 = SpawnPrefab("petals_evil")
    shopsign3.Transform:SetPosition(pt.x+2-1, 0, pt.z+2+1)
    shopsign3.AnimState:SetBank("sign_home")
    shopsign3.AnimState:SetBuild("sign_home")
    shopsign3.AnimState:PlayAnimation("idle")
    shopsign3.Transform:SetScale(0.5, 0.5, 0.5)
    shopsign3:RemoveComponent("stackable")
    shopsign3:RemoveComponent("tradable")
    shopsign3:RemoveComponent("fuel")
    shopsign3:RemoveComponent("inventoryitem")
    shopsign3:RemoveComponent("edible")
    shopsign3:RemoveComponent("perishable")
    shopsign3:RemoveComponent("burnable")
    shopsign3:RemoveComponent("propagator")
    shopsign3:RemoveComponent("deployable")
    MakeLargeBurnable(shopsign3)
    MakeLargePropagator(shopsign3)
    shopsign3:AddTag("goodbye")
    local shopsign4 = SpawnPrefab("petals_evil")
    shopsign4.Transform:SetPosition(pt.x+2-3, 0, pt.z+2+3)
    shopsign4.AnimState:SetBank("sign_home")
    shopsign4.AnimState:SetBuild("sign_home")
    shopsign4.AnimState:PlayAnimation("idle")
    shopsign4.Transform:SetScale(0.5, 0.5, 0.5)
    shopsign4:RemoveComponent("stackable")
    shopsign4:RemoveComponent("tradable")
    shopsign4:RemoveComponent("fuel")
    shopsign4:RemoveComponent("inventoryitem")
    shopsign4:RemoveComponent("edible")
    shopsign4:RemoveComponent("perishable")
    shopsign4:RemoveComponent("burnable")
    shopsign4:RemoveComponent("propagator")
    shopsign4:RemoveComponent("deployable")
    MakeLargeBurnable(shopsign4)
    MakeLargePropagator(shopsign4)
    shopsign4:AddTag("goodbye")
end
local function OnDeploy (inst, pt)
    createworker(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("shopsign") then
        data.shopsign = true
    end
    if inst:HasTag("workerman") then
        data.workerman = true
    end
    if inst:HasTag("myworker") then
        data.myworker = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
end
local function onload(inst, data)
    if data and data.shopsign then
       createworker(inst)
       inst:Remove()
    end
    if data and data.workerman then
       inst:Remove()
    end
    if data and data.myworker then
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用噩梦花瓣种临时工市场（拿着1个噩梦花瓣对地面点鼠标右键，如果拿着多个噩梦花瓣，则不会种出来），鼠标左键点击大招牌，会有4种临时工来应聘，从左到右分别是采摘工（采摘植物）、农民（收获农田并施肥）、伐木工（砍树）、矿工（开矿），想雇佣什么工种，就拿着黄金对他点鼠标左键，每人每天20个黄金。再次点大招牌，可以换不同的应聘人员供你选择。雇佣临时工后，他会跟随你，把他带到工作场所，会自动开始干活，干完后继续跟随。可打开小地图查询临时工的位置，显示为红色蘑菇树的图标。临时工会在每天黑夜来临时下班，想让你花费的工资更值得，就尽可能早点雇佣他们。如果想提早解雇临时工，就存档退出再读档，他们就被遣散了。不想要临时工市场时，烧掉即可




二九八.我的果汁店（用治疗药膏种果汁店，自己制作果汁，顾客上门购买）

    用记事本打开游戏目录\data\scripts\prefabs\healingsalve.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "cave_banana" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,32+4,0), Vector3(0,-(32+4),0), Vector3(0,-(64+32+8+4),0)}
local widgetbuttoninfo = {
    text = "Start",
    position = Vector3(0, -165, 0),
    fn = function(inst)
      if inst:HasTag("juicer") and inst.components.container:Has("cave_banana", 1) and inst.components.container:Has("pomegranate", 1) and inst.components.container:Has("dragonfruit", 1) then
         inst.components.container:ConsumeByName("cave_banana", 1)
         inst.components.container:ConsumeByName("pomegranate", 1)
         inst.components.container:ConsumeByName("dragonfruit", 1)
         GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
         local sweets = SpawnPrefab("healingsalve")
         sweets.AnimState:SetBank("food")
         sweets.AnimState:SetBuild("cook_pot_food")
         sweets.AnimState:PlayAnimation("fruitmedley", false)
         sweets:RemoveComponent("stackable")
         sweets:RemoveComponent("deployable")
         sweets.components.healer:SetHealthAmount(TUNING.HEALING_SUPERHUGE)
         sweets.components.inventoryitem:ChangeImageName("fruitmedley")
         sweets.Transform:SetScale(1.2, 1.2, 1.2)
         sweets:AddTag("sweets")
         GetPlayer().components.inventory:GiveItem(sweets)
      end
    end }
    inst:AddComponent("container")
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,180,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.canbeopened = false
local function sweetshop(inst)
    local pt = inst:GetPosition()
    local shop = SpawnPrefab("healingsalve")
    shop.Transform:SetPosition(pt.x, pt.y, pt.z)
    shop.AnimState:SetBank("rabbithouse")
    shop.AnimState:SetBuild("rabbit_house")
    shop.AnimState:PlayAnimation("idle", true)
    shop.Transform:SetScale(0.8, 0.8, 0.8)
    shop:RemoveComponent("stackable")
    shop:RemoveComponent("inventoryitem")
    shop:RemoveComponent("healer")
    shop:RemoveComponent("deployable")
    local light = shop.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(5)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    MakeLargeBurnable(shop)
    MakeLargePropagator(shop)
    shop:AddTag("shop")
    shop:DoPeriodicTask(2, function(shop)
        shop.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        shop:DoTaskInTime(1, function() shop.AnimState:SetBloomEffectHandle("") end )
    end )
    shop:AddComponent("trader")
    shop.components.trader:SetAcceptTest(function(shop, item) 
        if item.prefab == "goldnugget" then
           return true
        end
        return false
    end )
    shop.components.trader.onaccept = function(shop, giver, item)
        local names = {"cave_banana","pomegranate","dragonfruit"}
        local name = names[math.random(#names)]
        local veggie = SpawnPrefab(name)
        if item.prefab == "goldnugget" then
           giver.components.inventory:GiveItem(veggie)
        end
    end
    local counter = SpawnPrefab("healingsalve")
    counter.Transform:SetPosition(pt.x+2+1.8, 0, pt.z+2-1.8)
    counter.AnimState:SetBank("winter_meter")
    counter.AnimState:SetBuild("winter_meter")
    counter.AnimState:SetPercent("meter", 0)
    counter.Transform:SetScale(1.2, 1.2, 1.2)
    counter.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    counter.AnimState:SetLayer( LAYER_BACKGROUND )
    counter.AnimState:SetSortOrder( 1 )
    counter.Transform:SetRotation( 135 )
    counter.AnimState:SetMultColour(255/255,255/255,255/255,0)
    counter:RemoveComponent("stackable")
    counter:RemoveComponent("inventoryitem")
    counter:RemoveComponent("healer")
    counter:RemoveComponent("deployable")
    MakeLargeBurnable(counter)
    MakeLargePropagator(counter)
    counter:AddTag("NOCLICK")
    counter:AddTag("goodbye")
    local juicer = SpawnPrefab("healingsalve")
    juicer.Transform:SetPosition(pt.x+1-2, 0, pt.z+1+2)
    juicer.AnimState:SetBank("researchlab2")
    juicer.AnimState:SetBuild("researchlab2")
    juicer.AnimState:PlayAnimation("idle")
    juicer.Transform:SetScale(0.8, 0.8, 0.8)
    juicer.AnimState:SetMultColour(255/255,105/255,0/255,1)
    juicer:RemoveComponent("stackable")
    juicer:RemoveComponent("inventoryitem")
    juicer:RemoveComponent("healer")
    juicer:RemoveComponent("deployable")
    juicer.components.container.canbeopened = true
    MakeLargeBurnable(juicer)
    MakeLargePropagator(juicer)
    juicer:AddTag("juicer")
    juicer:AddTag("goodbye")
    local sweetsign = SpawnPrefab("healingsalve")
    sweetsign.Transform:SetPosition(pt.x+1+2, 0, pt.z+1-2)
    sweetsign.AnimState:SetBank("sign_home")
    sweetsign.AnimState:SetBuild("sign_home")
    sweetsign.AnimState:PlayAnimation("idle")
    sweetsign.Transform:SetScale(0.8, 0.8, 0.8)
    sweetsign.AnimState:SetMultColour(255/255,0/255,0/255,1)
    MakeLargeBurnable(sweetsign)
    MakeLargePropagator(sweetsign)
    sweetsign:AddTag("goodbye")
    sweetsign:RemoveComponent("stackable")
    sweetsign:RemoveComponent("inventoryitem")
    sweetsign:RemoveComponent("healer")
    sweetsign:RemoveComponent("deployable")
    sweetsign:ListenForEvent( "nighttime", function()
        sweetsign:RemoveTag("openshop")
        GetPlayer().SoundEmitter:KillSound("beavermusic")
        sweetsign.AnimState:SetMultColour(255/255,0/255,0/255,1)
        local pos = Vector3(sweetsign.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
        for k,v in pairs(ents) do
            if v:HasTag("customers") then
               v:Remove()
            end
        end
    end, GetWorld())
    sweetsign.components.inspectable.getstatus = function(sweetsign)
      if not sweetsign:HasTag("openshop") then
        local target0 = FindEntity(sweetsign, 10, function(guy) 
            return guy:HasTag("sweets") and guy.components.inventoryitem and not guy.components.inventoryitem:IsHeld()
        end )
        if target0 then
           sweetsign:AddTag("openshop")
           GetPlayer().SoundEmitter:PlaySound("dontstarve/music/music_hoedown", "beavermusic")
           sweetsign.AnimState:SetMultColour(0/255,255/255,0/255,1)
           for k = 1, math.random(8,16) do
               local pt1 = sweetsign:GetPosition()
               local customer = SpawnPrefab("healingsalve")
               customer.Transform:SetPosition(pt1.x+(math.random(30)-math.random(30)), 0, pt1.z+(math.random(30)-math.random(30)))
               customer.AnimState:SetBank("wilson")
               local names = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
               local buildname = names[math.random(#names)]
               customer.AnimState:SetBuild(buildname)
               local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter"}
               local hat = hats[math.random(#hats)]
               customer.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
               local armors = {"armor_grass","armor_marble","armor_onemanband","armor_ruins","armor_sanity","armor_slurper","armor_slurtleshell","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_wood"}
               local armor = armors[math.random(#armors)]
               customer.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
               customer.AnimState:Show("HAT")
               customer.AnimState:Show("HAT_HAIR")
               customer.AnimState:Hide("HAIR_NOHAT")
               customer.AnimState:Hide("HAIR")
               customer.AnimState:Hide("ARM_carry")
               customer.AnimState:Show("ARM_normal")
               customer.AnimState:PlayAnimation("idle")
               customer.Transform:SetFourFaced()
               local sound = customer.entity:AddSoundEmitter()
               local shadow = customer.entity:AddDynamicShadow()
               shadow:SetSize( 1.3, .6 )
               customer:RemoveComponent("stackable")
               customer:RemoveComponent("inventoryitem")
               customer:RemoveComponent("healer")
               customer:RemoveComponent("deployable")
               customer:AddComponent("locomotor")
               customer.components.locomotor.walkspeed = 4
               customer.components.locomotor.runspeed = 8
               customer:SetStateGraph("SGshadowwaxwell")
               local brain = require "brains/frogbrain"
               customer:SetBrain(brain)
               customer:AddComponent("health")
               customer.components.health:SetMaxHealth(1000)
               customer.components.health:SetInvincible(true)
               customer.components.health.nofadeout = true
               customer:AddComponent("combat")
               customer:AddComponent("knownlocations")
               customer:AddTag("customers")
               customer:AddTag("goodbye")
               customer.task1 = customer:DoPeriodicTask(3, function(customer)
                   if math.random() < 0.1 then
                      local target = FindEntity(customer, 100, function(guy) 
                          return guy:HasTag("sweets") and guy.components.inventoryitem and not guy.components.inventoryitem:IsHeld()
                      end )
                      if target then
                         customer.components.locomotor:Stop()
                         customer:SetBrain(nil)
                         customer.components.locomotor:GoToEntity(target)
                         customer.task2 = customer:DoPeriodicTask(.25, function(customer)
                             local target2 = FindEntity(customer, 1, function(guy) 
                                 return guy:HasTag("sweets") and guy.components.inventoryitem and not guy.components.inventoryitem:IsHeld()
                             end )
                             if target2 then
                                customer.AnimState:PlayAnimation("pickup")
                                for k = 1, 6 do
                                    SpawnPrefab("goldnugget").Transform:SetPosition(target2.Transform:GetWorldPosition())
                                end
                                target2:Remove()
                                local brain = require "brains/frogbrain"
                                customer:SetBrain(brain)
                                customer:RestartBrain()
                                if customer.task2 then customer.task2:Cancel() customer.task2 = nil end
                             end
                         end )
                         customer:DoTaskInTime(8, function(customer)
                             local brain = require "brains/frogbrain"
                             customer:SetBrain(brain)
                             customer:RestartBrain()
                             if customer.task2 then customer.task2:Cancel() customer.task2 = nil end
                         end )
                      else
                         local brain = require "brains/frogbrain"
                         customer:SetBrain(brain)
                         customer:RestartBrain()
                         if customer.task2 then customer.task2:Cancel() customer.task2 = nil end
                      end
                   end
               end )
           end
        end
      else
        sweetsign:RemoveTag("openshop")
        GetPlayer().SoundEmitter:KillSound("beavermusic")
        sweetsign.AnimState:SetMultColour(255/255,0/255,0/255,1)
        local pos = Vector3(sweetsign.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
        for k,v in pairs(ents) do
            if v:HasTag("customers") then
               v:Remove()
            end
        end
      end
    end
end
local function OnDeploy (inst, pt)
    sweetshop(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("shop") then
        data.shop = true
    end
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("sweets") then
        data.sweets = true
    end
end
local function onload(inst, data)
    if data and data.shop then
       sweetshop(inst)
       inst:Remove()
    end
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.sweets then
       inst.AnimState:SetBank("food")
       inst.AnimState:SetBuild("cook_pot_food")
       inst.AnimState:PlayAnimation("fruitmedley", false)
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("deployable")
       inst.components.healer:SetHealthAmount(TUNING.HEALING_SUPERHUGE)
       inst.components.inventoryitem:ChangeImageName("fruitmedley")
       inst.Transform:SetScale(1.2, 1.2, 1.2)
       inst:AddTag("sweets")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用治疗药膏种我的果汁店（手里拿着1个治疗药膏对地面点鼠标右键，如果拿着多个治疗药膏，则不会种出来），拿着黄金对库房（大胡萝卜）点鼠标左键，可以购入果汁原料，分别是火龙果、香蕉、石榴，每个水果1个黄金，当然你也可以用自己种的水果。将三种水果放入右边的榨汁机（拿着水果对榨汁机点鼠标左键），然后按Start按钮，将开始榨汁，榨完后果汁自动装入主角物品栏。将果汁放在柜台上（地上半透明的长方形），点左边的牌子就可以开张了（柜台上没有果汁则无法开张），会有顾客上门购买，每份售价6个黄金。想打烊，就再次点击牌子即可。黑夜来临时会自动打烊，回家休息吧，当然你也可以再次点牌子开张，但夜里的顾客都昏昏欲睡。出售的果汁自己也可以喝（在物品栏里对果汁点鼠标右键），可大幅补充生命值。不想要果汁店时，烧掉即可，记得先打烊哦。治疗药膏在生存选项（画着绳套）下，用2个灰、1个石头、1个蜘蛛腺体制造




二九九.跳蚤市场（用木炭种跳蚤市场摊位，上百种商品30秒刷新一次，全场一律3个黄金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\charcoal.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createfleashop(inst)
    local pt = inst:GetPosition()
    local seller = SpawnPrefab("charcoal")
    seller.Transform:SetPosition(pt.x, pt.y, pt.z)
    seller.AnimState:SetBank("wilson")
    local buildnames = {"wilson","wendy","wes","wickerbottom","willow","wolfgang","wx78"}
    local buildname = buildnames[math.random(#buildnames)]
    seller.AnimState:SetBuild(buildname)
    local hats = {"hat_bee","hat_beefalo","hat_bush","hat_earmuffs","hat_feather","hat_flower","hat_football","hat_miner","hat_ruins","hat_slurper","hat_slurtle","hat_spider","hat_straw","hat_top","hat_walrus","hat_winter","hat_rain","hat_watermelon","hat_ice","hat_catcoon","hat_wathgrithr"}
    local hat = hats[math.random(#hats)]
    seller.AnimState:OverrideSymbol("swap_hat", hat, "swap_hat")
    local armors = {"armor_grass","armor_marble","armor_onemanband","armor_ruins","armor_sanity","armor_slurper","armor_slurtleshell","armor_sweatervest","armor_trunkvest_summer","armor_trunkvest_winter","armor_wood","torso_rain"}
    local armor = armors[math.random(#armors)]
    seller.AnimState:OverrideSymbol("swap_body", armor, "swap_body")
    seller.AnimState:Show("HAT")
    seller.AnimState:Show("HAT_HAIR")
    seller.AnimState:Hide("HAIR_NOHAT")
    seller.AnimState:Hide("HAIR")
    seller.AnimState:Hide("ARM_carry")
    seller.AnimState:Show("ARM_normal")
    seller.AnimState:PlayAnimation("idle")
    seller.Transform:SetFourFaced()
    seller:RemoveComponent("stackable")
    seller:RemoveComponent("fuel")
    seller:RemoveComponent("inventoryitem")
    seller:RemoveComponent("burnable")
    seller:RemoveComponent("propagator")
    seller:RemoveComponent("deployable")
    seller:RemoveComponent("bait")
    seller:RemoveTag("molebait")
    seller:AddComponent("talker")
    seller:AddComponent("workable")
    seller.components.workable:SetWorkAction(ACTIONS.HAMMER)
    seller.components.workable:SetWorkLeft(3)
    seller.components.workable:SetOnFinishCallback(function(seller)
        SpawnPrefab("collapse_big").Transform:SetPosition(seller.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos = Vector3(seller.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 6)
        for k,v in pairs(ents) do
            if v:HasTag("commodity") then
               v:Remove()
            end
            if v:HasTag("fleas") then
               v:Remove()
            end
        end
        seller:Remove()
    end )
    seller:AddTag("sellers")
    local flea = SpawnPrefab("charcoal")
    flea.Transform:SetPosition(pt.x+2.8+1.2, 0, pt.z-2.8+1.2)
    flea.AnimState:SetBank("winter_meter")
    flea.AnimState:SetBuild("winter_meter")
    flea.AnimState:SetPercent("meter", 0)
    flea.Transform:SetScale(1.5, 1.5, 1.5)
    flea.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    flea.AnimState:SetLayer( LAYER_BACKGROUND )
    flea.AnimState:SetSortOrder( 1 )
    flea.Transform:SetRotation( 135 )
    flea.AnimState:SetMultColour(255/255,255/255,255/255,0)
    flea:RemoveComponent("stackable")
    flea:RemoveComponent("fuel")
    flea:RemoveComponent("inventoryitem")
    flea:RemoveComponent("burnable")
    flea:RemoveComponent("propagator")
    flea:RemoveComponent("deployable")
    flea:RemoveComponent("bait")
    flea:RemoveTag("molebait")
    flea:AddTag("NOCLICK")
    flea:AddTag("fleas")
    local light = flea.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(5)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    for k = 0,4 do
        local names = {"amulet","blueamulet","purpleamulet","orangeamulet","greenamulet","yellowamulet","armorgrass","armormarble","armorruins","armor_sanity","armorslurper","armorsnurtleshell","armorwood","axe","goldenaxe","multitool_axe_pickaxe","bandage","batbat","bedroll_furry","bedroll_straw","trunkvest_summer","blowdart_sleep","blowdart_fire","blowdart_pipe","boomerang","bugnet","butter","cane","compass","deerclops_eyeball","diviningrod","eyeturret_item","fishingrod","gunpowder","hambat","hammer","footballhat","strawhat","tophat","flowerhat","beefalohat","featherhat","beehat","walrushat","earmuffshat","winterhat","minerhat","spiderhat","bushhat","slurtlehat","ruinshat","healingsalve","heatrock","nightsword","lantern","panflute","pickaxe","goldenpickaxe","pitchfork","razor","ruins_bat","shovel","goldenshovel","spear","icestaff","firestaff","telestaff","orangestaff","greenstaff","yellowstaff","sweatervest","teleportato_ring","teleportato_box","teleportato_crank","teleportato_potato","tentaclespike","torch","trunkvest_winter","umbrella","fertilizer","bell","spear_wathgrithr","grass_umbrella","rainhat","icehat","watermelonhat","catcoonhat","wathgrithrhat","raincoat","molehat","armordragonfly","beargervest","featherfan","staff_tornado","nightstick","eyebrellahat","reflectivevest","hawaiianshirt"}
        local name = names[math.random(#names)]
        local commodity = SpawnPrefab(name)
        commodity.Transform:SetPosition(pt.x+2+1.3-k*1, 0, pt.z-2+1.3+k*1)
        commodity.components.inventoryitem.canbepickedup = false
        commodity.persists = false
        commodity:AddComponent("trader")
        commodity.components.trader:SetAcceptTest(function(commodity, item) 
            if GetPlayer().components.inventory:Has("goldnugget", 3) then
               if item.prefab == "goldnugget" then
                  return true
               end
            end
            return false
        end )
        commodity.components.trader.onaccept = function(commodity, giver, item)
            GetPlayer().components.inventory:ConsumeByName("goldnugget", 2)
            commodity.components.inventoryitem.canbepickedup = true
            commodity:RemoveTag("commodity")
            GetPlayer().components.inventory:GiveItem(commodity)
            commodity:RemoveComponent("trader")
            commodity.persists = true
        end
        commodity:AddTag("commodity")
    end
    seller:DoPeriodicTask(30, function(seller)
        seller.components.talker:Say("everythings, 3 golds", 5, false)
        seller.AnimState:PlayAnimation("give")
        local pos = Vector3(seller.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 6)
        for k,v in pairs(ents) do
            if v:HasTag("commodity") then
               v:Remove()
            end
        end
        for k = 0,4 do
            local names = {"amulet","blueamulet","purpleamulet","orangeamulet","greenamulet","yellowamulet","armorgrass","armormarble","armorruins","armor_sanity","armorslurper","armorsnurtleshell","armorwood","axe","goldenaxe","multitool_axe_pickaxe","bandage","batbat","bedroll_furry","bedroll_straw","trunkvest_summer","blowdart_sleep","blowdart_fire","blowdart_pipe","boomerang","bugnet","butter","cane","compass","deerclops_eyeball","diviningrod","eyeturret_item","fishingrod","gunpowder","hambat","hammer","footballhat","strawhat","tophat","flowerhat","beefalohat","featherhat","beehat","walrushat","earmuffshat","winterhat","minerhat","spiderhat","bushhat","slurtlehat","ruinshat","healingsalve","heatrock","nightsword","lantern","panflute","pickaxe","goldenpickaxe","pitchfork","razor","ruins_bat","shovel","goldenshovel","spear","icestaff","firestaff","telestaff","orangestaff","greenstaff","yellowstaff","sweatervest","teleportato_ring","teleportato_box","teleportato_crank","teleportato_potato","tentaclespike","torch","trunkvest_winter","umbrella","fertilizer","bell","spear_wathgrithr","grass_umbrella","rainhat","icehat","watermelonhat","catcoonhat","wathgrithrhat","raincoat","molehat","armordragonfly","beargervest","featherfan","staff_tornado","nightstick","eyebrellahat","reflectivevest","hawaiianshirt"}
            local name = names[math.random(#names)]
            local commodity = SpawnPrefab(name)
            commodity.Transform:SetPosition(pt.x+2+1.3-k*1, 0, pt.z-2+1.3+k*1)
            commodity.components.inventoryitem.canbepickedup = false
            commodity.persists = false
            commodity:AddTag("commodity")
            commodity:AddComponent("trader")
            commodity.components.trader:SetAcceptTest(function(commodity, item) 
                if GetPlayer().components.inventory:Has("goldnugget", 3) then
                   if item.prefab == "goldnugget" then
                      return true
                   end
                end
                return false
            end )
            commodity.components.trader.onaccept = function(commodity, giver, item)
                GetPlayer().components.inventory:ConsumeByName("goldnugget", 2)
                commodity.components.inventoryitem.canbepickedup = true
                commodity:RemoveTag("commodity")
                GetPlayer().components.inventory:GiveItem(commodity)
                commodity:RemoveComponent("trader")
                commodity.persists = true
            end
        end
    end)
end
local function OnDeploy (inst, pt)
   createfleashop(inst)
   inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("sellers") then
        data.sellers = true
    end
    if inst:HasTag("fleas") then
        data.fleas = true
    end
end
local function onload(inst, data)
    if data and data.sellers then
       createfleashop(inst)
       inst:Remove()
    end
    if data and data.fleas then
       inst:Remove()
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可拿着1个木炭对空地点鼠标右键，种出跳蚤市场的摊位（手里拿多个木炭不会种出来），每30秒展示5种商品，看上哪件，就拿着黄金对那件商品点鼠标左键购买，全场一律3个黄金。店主为随机人物，可以种多个跳蚤市场摊位，形成商品一条街（摊位间不要太近，否则影响展示商品）。不想要跳蚤市场时，用锤子砸店主即可（暴力拆迁）




三００.小诊所（用毛皮铺盖种小诊所，可买药、住院、做手术）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bedroll_furry.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function createhospital(inst)
    local pt = inst:GetPosition()
    local nurse = SpawnPrefab("bedroll_furry")
    nurse.Transform:SetPosition(pt.x, pt.y, pt.z)
    nurse.AnimState:SetBank("wilson")
    nurse.AnimState:SetBuild("wendy")
    nurse.AnimState:OverrideSymbol("swap_body", "armor_sweatervest", "swap_body")
    nurse.AnimState:Hide("ARM_carry")
    nurse.AnimState:Show("ARM_normal")
    nurse.Transform:SetFourFaced()
    nurse.AnimState:PlayAnimation("idle")
    nurse:RemoveComponent("inventoryitem")
    nurse:RemoveComponent("finiteuses")
    nurse:RemoveComponent("fuel")
    nurse:RemoveComponent("sleepingbag")
    nurse:RemoveComponent("deployable")
    MakeLargeBurnable(nurse)
    MakeLargePropagator(nurse)
    nurse:AddTag("nurse")
    local light = nurse.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(5)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    nurse:AddComponent("trader")
    nurse.components.trader:SetAcceptTest(function(nurse, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    nurse.components.trader.onaccept = function(nurse, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        GetPlayer().components.playercontroller:Enable(false)
        nurse.AnimState:OverrideSymbol("swap_object", "swap_hammer", "swap_hammer")
        nurse.AnimState:Hide("ARM_normal")
        nurse.AnimState:Show("ARM_carry")
        nurse.task = nurse:DoPeriodicTask(1, function(nurse)
            nurse.Transform:SetRotation(GetPlayer().Transform:GetRotation() - 180)
            nurse.AnimState:PlayAnimation("pickaxe_pre")
            nurse.AnimState:PlayAnimation("pickaxe_loop", false)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
            GetPlayer().sg:GoToState("hit")
        end )
        nurse:DoTaskInTime(5, function()
            TheFrontEnd:Fade(false,1)
            if nurse.task then nurse.task:Cancel() nurse.task = nil end
            nurse.Transform:SetRotation(0)
            nurse:DoTaskInTime(1, function()
                nurse.AnimState:Hide("ARM_carry")
                nurse.AnimState:Show("ARM_normal")
                nurse.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                nurse:DoTaskInTime(3, function() nurse.AnimState:PlayAnimation("idle") end )
                TheFrontEnd:Fade(true,1)
                GetPlayer().components.health:DoDelta(GetPlayer().components.health.maxhealth)
                if GetPlayer():HasTag("poisoning") or GetPlayer():HasTag("fever") then
                   if GetPlayer():HasTag("poisoning") then GetPlayer():RemoveTag("poisoning") end
                   if GetPlayer():HasTag("fever") then GetPlayer():RemoveTag("fever") end
                   if GetPlayer().poison then GetPlayer().poison:Cancel() GetPlayer().poison = nil end
                   if GetPlayer().fever then GetPlayer().fever:Cancel() GetPlayer().fever = nil end
                   GetPlayer().AnimState:SetMultColour(255/255,255/255,255/255,1)
                   GetPlayer().components.locomotor.walkspeed = TUNING.WILSON_WALK_SPEED
                   GetPlayer().components.locomotor.runspeed = TUNING.WILSON_RUN_SPEED
                   GetPlayer().components.combat:SetAttackPeriod(TUNING.WILSON_ATTACK_PERIOD)
                end
                GetPlayer().sg:GoToState("wakeup")
                GetPlayer().components.playercontroller:Enable(true)
            end )
        end )
    end
    local medicinebox = SpawnPrefab("bedroll_furry")
    medicinebox.Transform:SetPosition(pt.x+1.2, 0, pt.z-1.2)
    medicinebox.AnimState:SetBank("icebox")
    medicinebox.AnimState:SetBuild("ice_box")
    medicinebox.AnimState:PlayAnimation("closed")
    medicinebox.Transform:SetScale(0.5, 0.5, 0.5)
    medicinebox:RemoveComponent("inventoryitem")
    medicinebox:RemoveComponent("finiteuses")
    medicinebox:RemoveComponent("fuel")
    medicinebox:RemoveComponent("sleepingbag")
    medicinebox:RemoveComponent("deployable")
    MakeLargeBurnable(medicinebox)
    MakeLargePropagator(medicinebox)
    medicinebox:AddTag("goodbye")
    medicinebox:AddComponent("trader")
    medicinebox.components.trader:SetAcceptTest(function(medicinebox, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    medicinebox.components.trader.onaccept = function(medicinebox, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        local medicine = SpawnPrefab("bedroll_furry")
        medicine.AnimState:SetBank("carrot")
        medicine.AnimState:SetBuild("carrot")
        medicine.AnimState:PlayAnimation("cooked")
        medicine.components.inventoryitem:ChangeImageName("carrot_cooked")
        medicine:RemoveComponent("finiteuses")
        medicine:RemoveComponent("fuel")
        medicine:RemoveComponent("sleepingbag")
        medicine:RemoveComponent("burnable")
        medicine:RemoveComponent("propagator")
        medicine:RemoveComponent("deployable")
        medicine:AddComponent("edible")
        medicine.components.edible.healthvalue = GetPlayer().components.health.maxhealth *0.5
        medicine.components.edible.hungervalue = 0
        medicine.components.edible.sanityvalue = GetPlayer().components.sanity.max *0.5
        medicine.components.edible.foodtype = "VEGGIE"
        medicine:AddTag("medicine")
        GetPlayer().components.inventory:GiveItem(medicine)
    end
    local hospital = SpawnPrefab("bedroll_furry")
    hospital.Transform:SetPosition(pt.x-2, 0, pt.z-2)
    hospital.AnimState:SetBank("tent")
    hospital.AnimState:SetBuild("tent")
    hospital.AnimState:PlayAnimation("idle", true)
    hospital.Transform:SetScale(1.2, 1.2, 1.2)
    hospital:RemoveComponent("inventoryitem")
    hospital:RemoveComponent("finiteuses")
    hospital:RemoveComponent("fuel")
    hospital:RemoveComponent("sleepingbag")
    hospital:RemoveComponent("deployable")
    MakeLargeBurnable(hospital)
    MakeLargePropagator(hospital)
    hospital:AddTag("goodbye")
    hospital:AddComponent("trader")
    hospital.components.trader:SetAcceptTest(function(hospital, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 5) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    hospital.components.trader.onaccept = function(hospital, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 4)
        GetPlayer().components.playercontroller:Enable(false)
        TheFrontEnd:Fade(false,1)
        hospital:DoTaskInTime(2, function()
            TheFrontEnd:Fade(true,1)
            GetPlayer().components.sanity:DoDelta(GetPlayer().components.sanity.max)
            GetPlayer().components.playercontroller:Enable(true)
        end )
    end
end
local function OnDeploy (inst, pt)
    createhospital(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("nurse") then
        data.nurse = true
    end
    if inst:HasTag("medicine") then
        data.medicine = true
    end
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.nurse then
       createhospital(inst)
       inst:Remove()
    end
    if data and data.medicine then
       inst.AnimState:SetBank("carrot")
       inst.AnimState:SetBuild("carrot")
       inst.AnimState:PlayAnimation("cooked")
       inst.components.inventoryitem:ChangeImageName("carrot_cooked")
       inst:RemoveComponent("finiteuses")
       inst:RemoveComponent("fuel")
       inst:RemoveComponent("sleepingbag")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveComponent("deployable")
       inst:AddComponent("edible")
       inst.components.edible.healthvalue = GetPlayer().components.health.maxhealth *0.5
       inst.components.edible.hungervalue = 0
       inst.components.edible.sanityvalue = GetPlayer().components.sanity.max *0.5
       inst.components.edible.foodtype = "VEGGIE"
       inst:AddTag("medicine")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用毛皮铺盖种小诊所，给护士5个黄金（拿着黄金对护士点鼠标左键），会为你麻醉并做手术，将生命值恢复到最大，如果同时修改了“小病小灾”，也可治愈感冒和食物中毒。给帐篷5个黄金可以住院，将脑值恢复到最大。给左侧的药箱5个黄金，可以买一份药，吃了可补一半的生命和脑值。不想要小诊所时，烧掉即可。毛皮铺盖在生存选项（画着绳套）下，用1个草席卷、2个兔人尾巴制造




三０一.斗蜘蛛（用啜食者皮种斗蜘蛛场，购买迷你蜘蛛与庄家PK，赢奖金）

    用记事本打开游戏目录\data\scripts\prefabs\slurperpelt.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local colours=
{
    {198/255,43/255,43/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {233/255,208/255,69/255},
    {109/255,50/255,163/255},
    {222/255,126/255,39/255},
}
local function boxing(inst)
    local pt = inst:GetPosition()
    local boxer = SpawnPrefab("slurper_pelt")
    boxer.Transform:SetPosition(pt.x, pt.y, pt.z)
    boxer.AnimState:SetBank("wilson")
    boxer.AnimState:SetBuild("wes")
    boxer.AnimState:OverrideSymbol("swap_hat", "hat_top", "swap_hat")
    boxer.AnimState:Show("HAT")
    boxer.AnimState:Show("HAT_HAIR")
    boxer.AnimState:Hide("HAIR_NOHAT")
    boxer.AnimState:Hide("HAIR")
    boxer.AnimState:Hide("ARM_carry")
    boxer.AnimState:Show("ARM_normal")
    boxer.Transform:SetFourFaced()
    boxer.AnimState:PlayAnimation("idle")
    boxer:RemoveComponent("stackable")
    boxer:RemoveComponent("tradable")
    boxer:RemoveComponent("inventoryitem")
    boxer:RemoveComponent("edible")
    boxer:RemoveComponent("deployable")
    MakeLargeBurnable(boxer)
    MakeLargePropagator(boxer)
    boxer:AddTag("boxer")
    boxer:AddComponent("trader")
    boxer.components.trader:SetAcceptTest(function(boxer, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 100) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    boxer.components.trader.onaccept = function(boxer, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 99)
        boxer.AnimState:PlayAnimation("give")
        local cricket = SpawnPrefab("slurper_pelt")
        cricket.Transform:SetPosition(pt.x+1.5, 0, pt.z+1.5)
        cricket.AnimState:SetBank("spider_queen")
        cricket.AnimState:SetBuild("spider_queen_build")
        cricket.AnimState:PlayAnimation("idle", true)
        cricket.Transform:SetFourFaced()
        cricket.entity:AddSoundEmitter()
        cricket.Transform:SetScale(0.3, 0.3, 0.3)
        cricket.colour_idx = math.random(#colours)
        cricket.AnimState:SetMultColour(colours[cricket.colour_idx][1],colours[cricket.colour_idx][2],colours[cricket.colour_idx][3],1)
        cricket.components.inventoryitem:ChangeImageName("spidereggsack")
        cricket:RemoveComponent("stackable")
        cricket:RemoveComponent("tradable")
        cricket:RemoveComponent("edible")
        cricket:RemoveComponent("burnable")
        cricket:RemoveComponent("propagator")
        cricket:RemoveComponent("deployable")
        local brain = require "brains/abigailbrain"
        cricket:SetBrain(brain)
        cricket:AddComponent("lootdropper")
        cricket.components.lootdropper:SetLoot({"silk"})
        cricket:AddComponent("locomotor")
        cricket.components.locomotor.walkspeed = 5
        cricket.components.locomotor.runspeed = 8
        cricket:SetStateGraph("SGspiderqueen")
        cricket:AddComponent("follower")
        cricket.components.follower:SetLeader(GetPlayer())
        cricket.health_num = math.random(100,300)
        cricket.damage_num = math.random(20,50)
        cricket:AddComponent("health")
        cricket.components.health:SetMaxHealth(cricket.health_num)
        cricket:AddComponent("trader")
        cricket.components.trader:SetAcceptTest(function(cricket, item) 
            if item.prefab == "smallmeat" then
               return cricket.components.health:GetPercent() < 1
            end
            return false
        end )
        cricket.components.trader.onaccept = function(cricket, giver, item)
            cricket.components.health:DoDelta(300)
        end
        cricket:AddComponent("combat")
        cricket.components.combat:SetRetargetFunction(1, function(cricket)
            if not cricket.components.health:IsDead() then
                return FindEntity(cricket, 20, function(guy)
                    if guy.components.health and not guy.components.health:IsDead() then
                       return guy:HasTag("cricket") or guy:HasTag("cricket0")
                    end
                end )
            end
        end )
        cricket.components.combat:SetKeepTargetFunction(function(cricket, target) return target and target:IsValid() end )
        cricket.components.combat:SetAttackPeriod(2)
        cricket.components.combat:SetRange(1, 2)
        cricket.components.combat:SetDefaultDamage(cricket.damage_num)
        cricket:AddTag("cricket")
    end
    boxer.components.inspectable.getstatus = function(boxer)
        if not boxer:HasTag("startgame") then
           if GetPlayer().components.inventory:Has("goldnugget", 100) then
              local target0 = FindEntity(boxer, 30, function(guy) 
                  return guy:HasTag("cricket") and guy.components.inventoryitem and not guy.components.inventoryitem:IsHeld()
              end )
              if target0 then
                 boxer:AddTag("startgame")
                 boxer.AnimState:PlayAnimation("give")
                 GetPlayer().components.playercontroller:Enable(false)
                 TheCamera:SetTarget(target0)
                 target0:RemoveComponent("inventoryitem")
                 boxer.task = boxer:DoPeriodicTask(1, function(boxer)
                     if target0.components.health:IsDead() then
                        if boxer.task then boxer.task:Cancel() boxer.task = nil end
                        GetPlayer().components.inventory:ConsumeByName("goldnugget", 100)
                        TheCamera:SetTarget(GetPlayer())
                        GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                        boxer.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                        boxer:DoTaskInTime(2, function()
                            boxer.AnimState:PlayAnimation("idle")
                            local target1 = FindEntity(boxer, 30, function(guy) 
                                return guy:HasTag("cricket0")
                            end )
                            if target1 then
                               target1:Remove()
                            end
                            boxer:RemoveTag("startgame")
                            GetPlayer().components.playercontroller:Enable(true)
                        end )
                     end
                 end )
                 local cricket0 = SpawnPrefab("slurper_pelt")
                 cricket0.Transform:SetPosition(pt.x+1.5, 0, pt.z+1.5)
                 cricket0.AnimState:SetBank("spider_queen")
                 cricket0.AnimState:SetBuild("spider_queen_build")
                 cricket0.AnimState:PlayAnimation("idle", true)
                 cricket0.Transform:SetFourFaced()
                 cricket0.entity:AddSoundEmitter()
                 cricket0.Transform:SetScale(0.3, 0.3, 0.3)
                 cricket0:RemoveComponent("stackable")
                 cricket0:RemoveComponent("tradable")
                 cricket0:RemoveComponent("inventoryitem")
                 cricket0:RemoveComponent("edible")
                 cricket0:RemoveComponent("burnable")
                 cricket0:RemoveComponent("propagator")
                 cricket0:RemoveComponent("deployable")
                 local brain = require "brains/abigailbrain"
                 cricket0:SetBrain(brain)
                 cricket0:AddComponent("lootdropper")
                 cricket0.components.lootdropper:SetLoot({"silk"})
                 cricket0:AddComponent("locomotor")
                 cricket0.components.locomotor.walkspeed = 5
                 cricket0.components.locomotor.runspeed = 8
                 cricket0:SetStateGraph("SGspiderqueen")
                 cricket0:AddComponent("follower")
                 cricket0.components.follower:SetLeader(boxer)
                 cricket0:AddComponent("health")
                 cricket0.components.health:SetMaxHealth(math.random(110,330))
                 cricket0:AddComponent("combat")
                 cricket0.components.combat:SetRetargetFunction(1, function(cricket0)
                     if not cricket0.components.health:IsDead() then
                         return FindEntity(cricket0, 20, function(guy)
                             if guy.components.health and not guy.components.health:IsDead() then
                                return guy:HasTag("cricket")
                             end
                         end )
                     end
                 end )
                 cricket0.components.combat:SetKeepTargetFunction(function(cricket0, target) return target and target:IsValid() end )
                 cricket0.components.combat:SetAttackPeriod(2)
                 cricket0.components.combat:SetRange(1, 2)
                 cricket0.components.combat:SetDefaultDamage(math.random(22,55))
                 cricket0:ListenForEvent("death", function()
                     boxer.AnimState:PlayAnimation("give")
                     if boxer.task then boxer.task:Cancel() boxer.task = nil end
                     for k = 1, 100 do
                         local goldnugget = SpawnPrefab("goldnugget")
                         GetPlayer().components.inventory:GiveItem(goldnugget)
                     end
                     boxer:RemoveTag("startgame")
                     GetPlayer().components.playercontroller:Enable(true)
                     TheCamera:SetTarget(GetPlayer())
                     target0:AddComponent("inventoryitem")
                     target0.components.inventoryitem:ChangeImageName("spidereggsack")
                 end )
                 cricket0:AddTag("cricket0")
                 cricket0:AddTag("goodbye")
              end
           end
        end
    end
    local advert = SpawnPrefab("slurper_pelt")
    advert.Transform:SetPosition(pt.x-2, 0, pt.z-2)
    advert.AnimState:SetBank("barrel")
    advert.AnimState:SetBuild("monkey_barrel")
    advert.AnimState:PlayAnimation("idle", true)
    advert.Transform:SetScale(1.5, 1.5, 1.5)
    advert:RemoveComponent("stackable")
    advert:RemoveComponent("tradable")
    advert:RemoveComponent("inventoryitem")
    advert:RemoveComponent("edible")
    advert:RemoveComponent("deployable")
    MakeLargeBurnable(advert)
    MakeLargePropagator(advert)
    advert:AddTag("lightningrod")
    local light = advert.entity:AddLight()
    light:SetFalloff(1)
    light:SetIntensity(.8)
    light:SetRadius(10)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    advert:DoPeriodicTask(6, function(advert)
        advert.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        advert:DoTaskInTime(3, function(advert) advert.AnimState:SetBloomEffectHandle("") end )
    end )
    advert:AddTag("goodbye")
end
local function OnDeploy (inst, pt)
    boxing(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodbye") then
        data.goodbye = true
    end
    if inst:HasTag("boxer") then
        data.boxer = true
    end
    if inst:HasTag("cricket") then
        data.cricket = true
    end
    data.colour_idx = inst.colour_idx
    data.health_num = inst.health_num
    data.damage_num = inst.damage_num
end
local function onload(inst, data)
    if data and data.goodbye then
       inst:Remove()
    end
    if data and data.boxer then
       boxing(inst)
       inst:Remove()
    end
    if data and data.cricket then
        inst.AnimState:SetBank("spider_queen")
        inst.AnimState:SetBuild("spider_queen_build")
        inst.AnimState:PlayAnimation("idle", true)
        inst.Transform:SetFourFaced()
        inst.entity:AddSoundEmitter()
        inst.Transform:SetScale(0.3, 0.3, 0.3)
        inst.colour_idx = math.random(#colours)
        inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
        inst.components.inventoryitem:ChangeImageName("spidereggsack")
        inst:RemoveComponent("stackable")
        inst:RemoveComponent("tradable")
        inst:RemoveComponent("edible")
        inst:RemoveComponent("burnable")
        inst:RemoveComponent("propagator")
        inst:RemoveComponent("deployable")
        local brain = require "brains/abigailbrain"
        inst:SetBrain(brain)
        inst:AddComponent("lootdropper")
        inst.components.lootdropper:SetLoot({"silk"})
        inst:AddComponent("locomotor")
        inst.components.locomotor.walkspeed = 5
        inst.components.locomotor.runspeed = 8
        inst:SetStateGraph("SGspiderqueen")
        inst:AddComponent("follower")
        inst.components.follower:SetLeader(GetPlayer())
        inst.health_num = math.random(100,300)
        inst.damage_num = math.random(20,50)
        inst:AddComponent("health")
        inst.components.health:SetMaxHealth(inst.health_num)
        inst:AddComponent("trader")
        inst.components.trader:SetAcceptTest(function(inst, item) 
            if item.prefab == "smallmeat" then
               return inst.components.health:GetPercent() < 1
            end
            return false
        end )
        inst.components.trader.onaccept = function(inst, giver, item)
            inst.components.health:DoDelta(300)
        end
        inst:AddComponent("combat")
        inst.components.combat:SetRetargetFunction(1, function(inst)
            if not inst.components.health:IsDead() then
                return FindEntity(inst, 20, function(guy)
                    if guy.components.health and not guy.components.health:IsDead() then
                       return guy:HasTag("cricket") or guy:HasTag("cricket0")
                    end
                end )
            end
        end )
        inst.components.combat:SetKeepTargetFunction(function(inst, target) return target and target:IsValid() end )
        inst.components.combat:SetAttackPeriod(2)
        inst.components.combat:SetRange(1, 2)
        inst.components.combat:SetDefaultDamage(inst.damage_num)
        inst:AddTag("cricket")
    end
    if data and data.colour_idx then
       inst.colour_idx = math.min(#colours, data.colour_idx)
       inst.AnimState:SetMultColour(colours[inst.colour_idx][1],colours[inst.colour_idx][2],colours[inst.colour_idx][3],1)
    end
    if data and data.health_num then
       inst.health_num = data.health_num
       inst.components.health:SetMaxHealth(inst.health_num)
       inst.components.health:DoDelta(inst.components.health.maxhealth)
    end
    if data and data.damage_num then
       inst.damage_num = data.damage_num
       inst.components.combat:SetDefaultDamage(inst.damage_num)
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用啜食者皮种斗蜘蛛场（拿着1个啜食者皮对地面点鼠标右键，如果拿着多个啜食者皮，则不会种出来），给庄家100个黄金（拿着黄金对庄家点鼠标左键），可购买迷你蜘蛛，鼠标左键点蜘蛛，可将其放入物品栏，显示为蜘蛛卵的图标。如果想与庄家比赛，主角身上至少有100个黄金，将自己的一只蜘蛛放在庄家面前，鼠标左键点庄家，庄家会拿出另一只蜘蛛与你的蜘蛛PK。如果你赢了，将赢得100个黄金的奖金，如果输了就输掉100个黄金，并损失掉自己的蜘蛛。为防止作弊，比赛中主角操作将暂停，比赛结束后恢复。每只迷你蜘蛛的血量、攻击力都不同，如果你买到厉害的蜘蛛，一定要用心呵护，因为它就是你的摇钱树，给蜘蛛喂一块小肉（拿着小肉对蜘蛛点鼠标左键），可以为其补满血。你也可以多买几只蜘蛛，内部PK，挑选出好的品种，再与庄家对赌，会增大你的胜率。不想要斗蜘蛛场了，烧掉即可。啜食者皮可以打啜食者获得，也可在“巨型超市”中，花1-3个黄金购得




三０二.经营动物园（用黄油种动物园，买卖、繁殖小动物，赚门票钱）

    用记事本打开游戏目录\data\scripts\prefabs\butter.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local slotpos = { Vector3(0,-100,0)}
local function itemtest(inst, item, slot)
    if item.prefab == "carrot" then
       return true
    end
    return false
end
local widgetbuttoninfo = {
    text = "Sell",
    position = Vector3(0, -30, 0),
    fn = function(inst)
        local target = FindEntity(inst, 9, function(guy) 
            return guy:HasTag("zoobaby")
        end )
        if target then
           for k = 1,20 do
               local pt5 = target:GetPosition()
               SpawnPrefab("goldnugget").Transform:SetPosition(pt5.x, 0, pt5.z)
               GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
               target:Remove()
           end
        end
end }
local function OnDeploy (inst, pt)
    local brand = SpawnPrefab("butter")
    brand.Transform:SetPosition(pt.x, pt.y, pt.z)
    brand.AnimState:SetBank("sign_home")
    brand.AnimState:SetBuild("sign_home")
    brand.AnimState:PlayAnimation("idle")
    brand.Transform:SetScale(0.8, 0.8, 0.8)
    brand.AnimState:SetMultColour(0/255,255/255,0/255,1)
    brand:RemoveComponent("stackable")
    brand:RemoveComponent("inventoryitem")
    brand:RemoveComponent("edible")
    brand:RemoveComponent("perishable")
    brand:RemoveComponent("deployable")
    brand:RemoveComponent("container")
    brand:AddTag("brand")
    local slotpos1 = { Vector3(0,-75,0)}
    brand:AddComponent("container")
    brand.components.container:SetNumSlots(#slotpos1)
    brand.components.container.widgetslotpos = slotpos1
    brand.components.container.widgetpos = Vector3(0,180,0)
    brand.components.container.side_align_tip = 160
    brand.components.container.acceptsstacks = false
    brand.components.container.itemtestfn = function(brand, item, slot)
        if item.prefab == "charcoal" or item.prefab == "trunk_summer" or item.prefab == "trunk_winter" or item.prefab == "walrus_tusk" or item.prefab == "cave_banana" then
           return true
        end
        return false
    end
    brand.components.container.widgetbuttoninfo = {
        text = "Buy",
        position = Vector3(0, -145, 0),
        fn = function(brand)
            if GetPlayer().components.inventory:Has("goldnugget", 30) then
               if brand.components.container:Has("charcoal", 1) then
                  brand.components.container:ConsumeByName("charcoal", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = brand:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("krampus")
                  zoobaby.AnimState:SetBuild("krampus_build")
                  zoobaby.AnimState:PlayAnimation("idle", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.AnimState:Hide("SACK")
                  zoobaby.AnimState:Show("ARM")
                  zoobaby.Transform:SetScale(0.7,0.7,0.7)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkrampus")
                  zoobaby:AddTag("zoobaby1")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if brand.components.container:Has("trunk_summer", 1) then
                  brand.components.container:ConsumeByName("trunk_summer", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = brand:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("koalefant")
                  zoobaby.AnimState:SetBuild("koalefant_summer_build")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.5,0.5,0.5)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkoalefant")
                  zoobaby:AddTag("zoobaby2")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if brand.components.container:Has("trunk_winter", 1) then
                  brand.components.container:ConsumeByName("trunk_winter", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = brand:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("koalefant")
                  zoobaby.AnimState:SetBuild("koalefant_winter_build")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.5,0.5,0.5)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkoalefant")
                  zoobaby:AddTag("zoobaby3")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if brand.components.container:Has("walrus_tusk", 1) then
                  brand.components.container:ConsumeByName("walrus_tusk", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = brand:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("walrus")
                  zoobaby.AnimState:SetBuild("walrus_baby_build")
                  zoobaby.AnimState:PlayAnimation("idle_happy")
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.8,0.8,0.8)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGwalrus")
                  zoobaby:AddTag("zoobaby4")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if brand.components.container:Has("cave_banana", 1) then
                  brand.components.container:ConsumeByName("cave_banana", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = brand:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("kiki")
                  zoobaby.AnimState:SetBuild("kiki_basic")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
	          zoobaby.soundtype = ""
                  zoobaby.Transform:SetScale(1.2,1.2,1.2)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGmonkey")
                  zoobaby:AddTag("zoobaby5")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
            end
    end }
    local zooroom = SpawnPrefab("butter")
    zooroom.Transform:SetPosition(pt.x-7, 0, pt.z-7)
    zooroom.AnimState:SetBank("rabbithouse")
    zooroom.AnimState:SetBuild("rabbit_house")
    zooroom.AnimState:PlayAnimation("idle", true)
    zooroom.Transform:SetScale(0.4, 0.4, 0.4)
    zooroom:RemoveComponent("stackable")
    zooroom:RemoveComponent("inventoryitem")
    zooroom:RemoveComponent("edible")
    zooroom:RemoveComponent("perishable")
    zooroom:RemoveComponent("deployable")
    zooroom.components.container.canbeopened = true
    zooroom.entity:AddLight()
    zooroom.Light:SetFalloff(1)
    zooroom.Light:SetIntensity(.8)
    zooroom.Light:SetRadius(15)
    zooroom.Light:SetColour(180/255, 195/255, 50/255)
    zooroom.Light:Enable(true)
    zooroom:AddTag("zooroom")
    zooroom:DoPeriodicTask(180, function(zooroom)
        local target = FindEntity(zooroom, 9, function(guy) 
            return guy:HasTag("zoobaby")
        end )
        if target then
           local target1 = FindEntity(zooroom, 9, function(guy) 
               return guy.prefab == "poop"
           end )
           if not target1 then
              for k = 1,math.random(5,10) do
                  local pt2 = zooroom:GetPosition()
                  SpawnPrefab("goldnugget").Transform:SetPosition(pt2.x+7.5, 0, pt2.z+7.5)
              end
           else
              for k = 1,math.random(1,3) do
                  local pt2 = zooroom:GetPosition()
                  SpawnPrefab("goldnugget").Transform:SetPosition(pt2.x+7.5, 0, pt2.z+7.5)
              end
           end
           if zooroom.components.container:Has("carrot", 3) then
              zooroom.components.container:ConsumeByName("carrot", 3)
              if math.random()<0.1 then
                 if target:HasTag("zoobaby1") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("krampus")
                    zoobaby.AnimState:SetBuild("krampus_build")
                    zoobaby.AnimState:PlayAnimation("idle", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.AnimState:Hide("SACK")
                    zoobaby.AnimState:Show("ARM")
                    zoobaby.Transform:SetScale(0.7,0.7,0.7)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkrampus")
                    zoobaby:AddTag("zoobaby1")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby2") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("koalefant")
                    zoobaby.AnimState:SetBuild("koalefant_summer_build")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.5,0.5,0.5)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkoalefant")
                    zoobaby:AddTag("zoobaby2")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby3") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("koalefant")
                    zoobaby.AnimState:SetBuild("koalefant_winter_build")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.5,0.5,0.5)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkoalefant")
                    zoobaby:AddTag("zoobaby3")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby4") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("walrus")
                    zoobaby.AnimState:SetBuild("walrus_baby_build")
                    zoobaby.AnimState:PlayAnimation("idle_happy")
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.8,0.8,0.8)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGwalrus")
                    zoobaby:AddTag("zoobaby4")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby5") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("kiki")
                    zoobaby.AnimState:SetBuild("kiki_basic")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
	            zoobaby.soundtype = ""
                    zoobaby.Transform:SetScale(1.2,1.2,1.2)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGmonkey")
                    zoobaby:AddTag("zoobaby5")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
              end
           else
              target.components.health:Kill()
           end
        end
    end )
    zooroom:AddComponent("workable")
    zooroom.components.workable:SetWorkAction(ACTIONS.HAMMER)
    zooroom.components.workable:SetWorkLeft(3)
    zooroom.components.workable:SetOnFinishCallback(function(zooroom)
        local pos = Vector3(zooroom.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("zoofence") or v:HasTag("brand") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               v:Remove()
            end
        end
        zooroom:Remove()
    end )
    local pt0 = Vector3(zooroom.Transform:GetWorldPosition())
    for k = 1, 40 do
        local result_offset = FindValidPositionByFan(1 * 2 * PI, 8, 40, function(offset)
            local x,y,z = (pt0 + offset):Get()
            local ents = TheSim:FindEntities(x,y,z , 1)
            return not next(ents) 
        end)
        if result_offset then
           local zoofence = SpawnPrefab("butter")
           zoofence.AnimState:SetBank("wall")
           zoofence.AnimState:SetBuild("wall_wood")
           zoofence.AnimState:PlayAnimation("1_2", false)
           MakeObstaclePhysics(zoofence, .5)
           zoofence:RemoveComponent("stackable")
           zoofence:RemoveComponent("inventoryitem")
           zoofence:RemoveComponent("edible")
           zoofence:RemoveComponent("perishable")
           zoofence:RemoveComponent("deployable")
           zoofence:RemoveComponent("container")
           zoofence:AddTag("zoofence")
           zoofence.Transform:SetPosition((pt0 + result_offset):Get())
           zoofence.components.inspectable.getstatus = function(zoofence)
               zoofence.Transform:SetScale(1, 0.1, 1)
               zoofence.Physics:SetActive(false)
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               zoofence:DoTaskInTime(5, function(zoofence)
                   zoofence.Transform:SetScale(1, 1, 1)
                   zoofence.Physics:SetActive(true)
                   GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               end )
           end
        end
    end
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,180,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.canbeopened = false
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
local function onsave(inst, data)
    if inst:HasTag("brand") then
        data.brand = true
    end
    if inst:HasTag("zooroom") then
        data.zooroom = true
    end
    if inst:HasTag("zoofence") then
        data.zoofence = true
    end
    if inst:HasTag("zoobaby1") then
        data.zoobaby1 = true
    end
    if inst:HasTag("zoobaby2") then
        data.zoobaby2 = true
    end
    if inst:HasTag("zoobaby3") then
        data.zoobaby3 = true
    end
    if inst:HasTag("zoobaby4") then
        data.zoobaby4 = true
    end
    if inst:HasTag("zoobaby5") then
        data.zoobaby5 = true
    end
    if inst:HasTag("followme") then
        data.followme = true
    end
end
local function onload(inst, data)
  if data and data.brand then
    inst.AnimState:SetBank("sign_home")
    inst.AnimState:SetBuild("sign_home")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.AnimState:SetMultColour(0/255,255/255,0/255,1)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    inst:AddTag("brand")
    local slotpos1 = { Vector3(0,-75,0)}
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos1)
    inst.components.container.widgetslotpos = slotpos1
    inst.components.container.widgetpos = Vector3(0,180,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.acceptsstacks = false
    inst.components.container.itemtestfn = function(inst, item, slot)
        if item.prefab == "charcoal" or item.prefab == "trunk_summer" or item.prefab == "trunk_winter" or item.prefab == "walrus_tusk" or item.prefab == "cave_banana" then
           return true
        end
        return false
    end
    inst.components.container.widgetbuttoninfo = {
        text = "Buy",
        position = Vector3(0, -145, 0),
        fn = function(inst)
            if GetPlayer().components.inventory:Has("goldnugget", 30) then
               if inst.components.container:Has("charcoal", 1) then
                  inst.components.container:ConsumeByName("charcoal", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = inst:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("krampus")
                  zoobaby.AnimState:SetBuild("krampus_build")
                  zoobaby.AnimState:PlayAnimation("idle", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.AnimState:Hide("SACK")
                  zoobaby.AnimState:Show("ARM")
                  zoobaby.Transform:SetScale(0.7,0.7,0.7)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkrampus")
                  zoobaby:AddTag("zoobaby1")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if inst.components.container:Has("trunk_summer", 1) then
                  inst.components.container:ConsumeByName("trunk_summer", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = inst:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("koalefant")
                  zoobaby.AnimState:SetBuild("koalefant_summer_build")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.5,0.5,0.5)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkoalefant")
                  zoobaby:AddTag("zoobaby2")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if inst.components.container:Has("trunk_winter", 1) then
                  inst.components.container:ConsumeByName("trunk_winter", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = inst:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("koalefant")
                  zoobaby.AnimState:SetBuild("koalefant_winter_build")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.5,0.5,0.5)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGkoalefant")
                  zoobaby:AddTag("zoobaby3")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if inst.components.container:Has("walrus_tusk", 1) then
                  inst.components.container:ConsumeByName("walrus_tusk", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = inst:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("walrus")
                  zoobaby.AnimState:SetBuild("walrus_baby_build")
                  zoobaby.AnimState:PlayAnimation("idle_happy")
	          zoobaby.entity:AddSoundEmitter()
                  zoobaby.Transform:SetScale(0.8,0.8,0.8)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGwalrus")
                  zoobaby:AddTag("zoobaby4")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
               if inst.components.container:Has("cave_banana", 1) then
                  inst.components.container:ConsumeByName("cave_banana", 1)
                  local zoobaby = SpawnPrefab("butter")
                  local pt1 = inst:GetPosition()
                  zoobaby.Transform:SetPosition(pt1.x-6, 0, pt1.z-6)
                  zoobaby.AnimState:SetBank("kiki")
                  zoobaby.AnimState:SetBuild("kiki_basic")
                  zoobaby.AnimState:PlayAnimation("idle_loop", true)
	          zoobaby.entity:AddSoundEmitter()
	          zoobaby.soundtype = ""
                  zoobaby.Transform:SetScale(1.2,1.2,1.2)
                  zoobaby:AddComponent("locomotor")
                  zoobaby.components.locomotor.walkspeed = 3
                  zoobaby.components.locomotor.runspeed = 6
                  zoobaby:SetStateGraph("SGmonkey")
                  zoobaby:AddTag("zoobaby5")
                  local brain = require "brains/frogbrain"
                  zoobaby:SetBrain(brain)
                  zoobaby.Transform:SetFourFaced()
                  MakeCharacterPhysics(zoobaby, 15, .5)
                  zoobaby:AddComponent("knownlocations")
                  zoobaby:AddComponent("combat")
                  zoobaby:AddComponent("health")
                  zoobaby.components.health:SetMaxHealth(100)
                  zoobaby:RemoveComponent("stackable")
                  zoobaby:RemoveComponent("inventoryitem")
                  zoobaby:RemoveComponent("edible")
                  zoobaby:RemoveComponent("perishable")
                  zoobaby:RemoveComponent("deployable")
                  zoobaby:RemoveComponent("container")
                  local minimap = zoobaby.entity:AddMiniMapEntity()
                  minimap:SetIcon("monkey_barrel.png")
                  zoobaby:AddComponent("follower")
                  zoobaby.components.inspectable.getstatus = function(zoobaby)
                      if not zoobaby:HasTag("followme") then
                         local brain = require "brains/abigailbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(GetPlayer())
                         zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                         zoobaby:AddTag("followme")
                      else
                         local brain = require "brains/frogbrain"
                         zoobaby:SetBrain(brain)
                         zoobaby:RestartBrain()
                         zoobaby.components.follower:SetLeader(nil)
                         zoobaby.AnimState:SetBloomEffectHandle("")
                         zoobaby:RemoveTag("followme")
                      end
                  end
                  zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                      SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                  end )
                  zoobaby:AddComponent("lootdropper")
                  zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                  zoobaby:AddTag("zoobaby")
                  GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
                  GetPlayer().components.inventory:ConsumeByName("goldnugget", 30)
               end
            end
    end }
  end
  if data and data.zooroom then
    inst.AnimState:SetBank("rabbithouse")
    inst.AnimState:SetBuild("rabbit_house")
    inst.AnimState:PlayAnimation("idle", true)
    inst.Transform:SetScale(0.4, 0.4, 0.4)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst.entity:AddLight()
    inst.Light:SetFalloff(1)
    inst.Light:SetIntensity(.8)
    inst.Light:SetRadius(15)
    inst.Light:SetColour(180/255, 195/255, 50/255)
    inst.Light:Enable(true)
    inst:AddTag("zooroom")
    inst:DoPeriodicTask(180, function(inst)
        local target = FindEntity(inst, 9, function(guy) 
            return guy:HasTag("zoobaby")
        end )
        if target then
           local target1 = FindEntity(inst, 9, function(guy) 
               return guy.prefab == "poop"
           end )
           if not target1 then
              for k = 1,math.random(5,10) do
                  local pt2 = inst:GetPosition()
                  SpawnPrefab("goldnugget").Transform:SetPosition(pt2.x+7.5, 0, pt2.z+7.5)
              end
           else
              for k = 1,math.random(1,3) do
                  local pt2 = inst:GetPosition()
                  SpawnPrefab("goldnugget").Transform:SetPosition(pt2.x+7.5, 0, pt2.z+7.5)
              end
           end
           if inst.components.container:Has("carrot", 3) then
              inst.components.container:ConsumeByName("carrot", 3)
              if math.random()<0.1 then
                 if target:HasTag("zoobaby1") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("krampus")
                    zoobaby.AnimState:SetBuild("krampus_build")
                    zoobaby.AnimState:PlayAnimation("idle", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.AnimState:Hide("SACK")
                    zoobaby.AnimState:Show("ARM")
                    zoobaby.Transform:SetScale(0.7,0.7,0.7)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkrampus")
                    zoobaby:AddTag("zoobaby1")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby2") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("koalefant")
                    zoobaby.AnimState:SetBuild("koalefant_summer_build")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.5,0.5,0.5)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkoalefant")
                    zoobaby:AddTag("zoobaby2")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby3") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("koalefant")
                    zoobaby.AnimState:SetBuild("koalefant_winter_build")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.5,0.5,0.5)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGkoalefant")
                    zoobaby:AddTag("zoobaby3")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby4") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("walrus")
                    zoobaby.AnimState:SetBuild("walrus_baby_build")
                    zoobaby.AnimState:PlayAnimation("idle_happy")
                    zoobaby.entity:AddSoundEmitter()
                    zoobaby.Transform:SetScale(0.8,0.8,0.8)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGwalrus")
                    zoobaby:AddTag("zoobaby4")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
                 if target:HasTag("zoobaby5") then
                    local zoobaby = SpawnPrefab("butter")
                    local pt4 = target:GetPosition()
                    zoobaby.Transform:SetPosition(pt4.x, 0, pt4.z)
                    zoobaby.AnimState:SetBank("kiki")
                    zoobaby.AnimState:SetBuild("kiki_basic")
                    zoobaby.AnimState:PlayAnimation("idle_loop", true)
                    zoobaby.entity:AddSoundEmitter()
	            zoobaby.soundtype = ""
                    zoobaby.Transform:SetScale(1.2,1.2,1.2)
                    zoobaby:AddComponent("locomotor")
                    zoobaby.components.locomotor.walkspeed = 3
                    zoobaby.components.locomotor.runspeed = 6
                    zoobaby:SetStateGraph("SGmonkey")
                    zoobaby:AddTag("zoobaby5")
                    local brain = require "brains/frogbrain"
                    zoobaby:SetBrain(brain)
                    zoobaby.Transform:SetFourFaced()
                    MakeCharacterPhysics(zoobaby, 15, .5)
                    zoobaby:AddComponent("knownlocations")
                    zoobaby:AddComponent("combat")
                    zoobaby:AddComponent("health")
                    zoobaby.components.health:SetMaxHealth(100)
                    zoobaby:RemoveComponent("stackable")
                    zoobaby:RemoveComponent("inventoryitem")
                    zoobaby:RemoveComponent("edible")
                    zoobaby:RemoveComponent("perishable")
                    zoobaby:RemoveComponent("deployable")
                    zoobaby:RemoveComponent("container")
                    local minimap = zoobaby.entity:AddMiniMapEntity()
                    minimap:SetIcon("monkey_barrel.png")
                    zoobaby:AddComponent("follower")
                    zoobaby.components.inspectable.getstatus = function(zoobaby)
                        if not zoobaby:HasTag("followme") then
                           local brain = require "brains/abigailbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(GetPlayer())
                           zoobaby.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
                           zoobaby:AddTag("followme")
                        else
                           local brain = require "brains/frogbrain"
                           zoobaby:SetBrain(brain)
                           zoobaby:RestartBrain()
                           zoobaby.components.follower:SetLeader(nil)
                           zoobaby.AnimState:SetBloomEffectHandle("")
                           zoobaby:RemoveTag("followme")
                        end
                    end
                    zoobaby:DoPeriodicTask(math.random(360, 480), function(zoobaby)
                        SpawnPrefab("poop").Transform:SetPosition(zoobaby.Transform:GetWorldPosition())
                    end )
                    zoobaby:AddComponent("lootdropper")
                    zoobaby.components.lootdropper:SetLoot({"smallmeat"})
                    zoobaby:AddTag("zoobaby")
                 end
              end
           else
              target.components.health:Kill()
           end
        end
    end )
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        local pos = Vector3(inst.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("zoofence") or v:HasTag("brand") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               v:Remove()
            end
        end
        inst:Remove()
    end )
  end
  if data and data.zoofence then
    inst.AnimState:SetBank("wall")
    inst.AnimState:SetBuild("wall_wood")
    inst.AnimState:PlayAnimation("1_2", false)
    MakeObstaclePhysics(inst, .5)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    inst:AddTag("zoofence")
    inst.components.inspectable.getstatus = function(inst)
        inst.Transform:SetScale(1, 0.1, 1)
        inst.Physics:SetActive(false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:DoTaskInTime(5, function(inst)
            inst.Transform:SetScale(1, 1, 1)
            inst.Physics:SetActive(true)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        end )
    end
  end
  if data and data.zoobaby1 then
    inst.AnimState:SetBank("krampus")
    inst.AnimState:SetBuild("krampus_build")
    inst.AnimState:PlayAnimation("idle", true)
    inst.entity:AddSoundEmitter()
    inst.AnimState:Hide("SACK")
    inst.AnimState:Show("ARM")
    inst.Transform:SetScale(0.7,0.7,0.7)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 6
    inst:SetStateGraph("SGkrampus")
    inst:AddTag("zoobaby1")
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 15, .5)
    inst:AddComponent("knownlocations")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(100)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("monkey_barrel.png")
    inst:AddComponent("follower")
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("followme") then
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBloomEffectHandle("")
           inst:RemoveTag("followme")
        end
    end
    inst:DoPeriodicTask(math.random(360, 480), function(inst)
        SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddTag("zoobaby")
  end
  if data and data.zoobaby2 then
    inst.AnimState:SetBank("koalefant")
    inst.AnimState:SetBuild("koalefant_summer_build")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.entity:AddSoundEmitter()
    inst.Transform:SetScale(0.5,0.5,0.5)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 6
    inst:SetStateGraph("SGkoalefant")
    inst:AddTag("zoobaby2")
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 15, .5)
    inst:AddComponent("knownlocations")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(100)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("monkey_barrel.png")
    inst:AddComponent("follower")
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("followme") then
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBloomEffectHandle("")
           inst:RemoveTag("followme")
        end
    end
    inst:DoPeriodicTask(math.random(360, 480), function(inst)
        SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddTag("zoobaby")
  end
  if data and data.zoobaby3 then
    inst.AnimState:SetBank("koalefant")
    inst.AnimState:SetBuild("koalefant_winter_build")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.entity:AddSoundEmitter()
    inst.Transform:SetScale(0.5,0.5,0.5)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 6
    inst:SetStateGraph("SGkoalefant")
    inst:AddTag("zoobaby3")
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 15, .5)
    inst:AddComponent("knownlocations")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(100)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("monkey_barrel.png")
    inst:AddComponent("follower")
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("followme") then
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBloomEffectHandle("")
           inst:RemoveTag("followme")
        end
    end
    inst:DoPeriodicTask(math.random(360, 480), function(inst)
        SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddTag("zoobaby")
  end
  if data and data.zoobaby4 then
    inst.AnimState:SetBank("walrus")
    inst.AnimState:SetBuild("walrus_baby_build")
    inst.AnimState:PlayAnimation("idle_happy")
    inst.entity:AddSoundEmitter()
    inst.Transform:SetScale(0.8,0.8,0.8)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 6
    inst:SetStateGraph("SGwalrus")
    inst:AddTag("zoobaby4")
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 15, .5)
    inst:AddComponent("knownlocations")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(100)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("monkey_barrel.png")
    inst:AddComponent("follower")
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("followme") then
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBloomEffectHandle("")
           inst:RemoveTag("followme")
        end
    end
    inst:DoPeriodicTask(math.random(360, 480), function(inst)
        SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddTag("zoobaby")
  end
  if data and data.zoobaby5 then
    inst.AnimState:SetBank("kiki")
    inst.AnimState:SetBuild("kiki_basic")
    inst.AnimState:PlayAnimation("idle_loop", true)
    inst.entity:AddSoundEmitter()
    inst.soundtype = ""
    inst.Transform:SetScale(1.2,1.2,1.2)
    inst:AddComponent("locomotor")
    inst.components.locomotor.walkspeed = 3
    inst.components.locomotor.runspeed = 6
    inst:SetStateGraph("SGmonkey")
    inst:AddTag("zoobaby5")
    local brain = require "brains/frogbrain"
    inst:SetBrain(brain)
    inst.Transform:SetFourFaced()
    MakeCharacterPhysics(inst, 15, .5)
    inst:AddComponent("knownlocations")
    inst:AddComponent("combat")
    inst:AddComponent("health")
    inst.components.health:SetMaxHealth(100)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("perishable")
    inst:RemoveComponent("deployable")
    inst:RemoveComponent("container")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon("monkey_barrel.png")
    inst:AddComponent("follower")
    inst.components.inspectable.getstatus = function(inst)
        if not inst:HasTag("followme") then
           local brain = require "brains/abigailbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(GetPlayer())
           inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           inst:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           inst:SetBrain(brain)
           inst:RestartBrain()
           inst.components.follower:SetLeader(nil)
           inst.AnimState:SetBloomEffectHandle("")
           inst:RemoveTag("followme")
        end
    end
    inst:DoPeriodicTask(math.random(360, 480), function(inst)
        SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
    end )
    inst:AddComponent("lootdropper")
    inst.components.lootdropper:SetLoot({"smallmeat"})
    inst:AddTag("zoobaby")
  end
  if data and data.followme then
     local brain = require "brains/abigailbrain"
     inst:SetBrain(brain)
     inst:RestartBrain()
     inst.components.follower:SetLeader(GetPlayer())
     inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
     inst:AddTag("followme")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在开阔的空地上，用黄油种动物园，在身上有30个黄金时，用鼠标左键点牌子，可打开格子，放入木炭点Buy按钮，可买一只小龙，花费30个黄金；放入夏象鼻点Buy按钮，可买小红象；放入冬象鼻点Buy按钮，可买小蓝象；放入海象牙点Buy按钮，可买小海象；放入香蕉点Buy按钮，可买猴子。鼠标左键点木栅栏，可开门，5秒后自动关门。鼠标左键点中间的胡萝卜房可打开格子，放入小动物爱吃的胡萝卜（每天消耗9个），当格子里的胡萝卜不足3个时，圈里的动物将陆续饿死。当动物园里有动物时，每天都能收到15-30个黄金的门票钱（放在牌子前面），动物会产便便，如果不及时清扫，门票钱将下降为正常的1/3。如果食物充足，小动物还有一定概率会繁殖，点胡萝卜房格子上方的Sell按钮，可卖掉圈舍中的动物，每只20个黄金。如果动物跑出圈舍，或想带领动物转场，就用鼠标左键点动物（手里不要拿武器），它会跟随你，再次用鼠标左键点动物，可以取消跟随。动物在小地图上显示为猴子的图标。不想要动物园时，用锤子砸掉胡萝卜房即可。黄油可以打蝴蝶获得，如果修改了“巨型超市”，也可花1-3个黄金购得




三０三.良种山羊（用闪电羊角种良种山羊，会生小羊，能跟随、产羊奶）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\lightninggoathorn.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local goodgoat = SpawnPrefab("lightninggoathorn")
    goodgoat.Transform:SetPosition(pt.x, pt.y, pt.z)
    goodgoat.AnimState:SetBank("lightning_goat")
    goodgoat.AnimState:SetBuild("lightning_goat_build")
    goodgoat.AnimState:PlayAnimation("idle_loop", true)
    goodgoat.Transform:SetFourFaced()
    goodgoat.entity:AddSoundEmitter()
    local shadow = goodgoat.entity:AddDynamicShadow()
    shadow:SetSize(1.75,.75)
    MakeCharacterPhysics(goodgoat, 100, 1)
    goodgoat.entity:AddLight()
    goodgoat.Light:Enable(false)
    local minimap = goodgoat.entity:AddMiniMapEntity()
    minimap:SetIcon( "toothtrap.png" )
    goodgoat:RemoveComponent("stackable")
    goodgoat:RemoveComponent("inventoryitem")
    goodgoat:RemoveComponent("deployable")
    goodgoat:AddComponent("knownlocations")
    goodgoat:AddComponent("leader")
    goodgoat:AddComponent("follower")
    goodgoat.components.follower:SetLeader(GetPlayer())
    goodgoat.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    goodgoat:AddTag("followme")
    goodgoat:AddComponent("locomotor")
    goodgoat.components.locomotor.walkspeed = 4
    goodgoat.components.locomotor.runspeed = 8
    goodgoat:SetStateGraph("SGlightninggoat")
    local brain = require "brains/chesterbrain"
    goodgoat:SetBrain(brain)
    goodgoat:AddComponent("health")
    goodgoat.components.health:SetMaxHealth(200)
    goodgoat:AddComponent("combat")
    goodgoat.components.combat.hiteffectsymbol = "lightning_goat_body"
    goodgoat.components.combat:SetAttackPeriod(1)
    goodgoat.components.combat:SetRange(1, 2)
    goodgoat.components.combat:SetDefaultDamage(10)
    goodgoat:AddComponent("lootdropper")
    goodgoat.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat"})
    goodgoat:ListenForEvent("attacked", function(goodgoat, data)
        if data.attacker ~= GetPlayer() then
           goodgoat.components.combat:SetTarget(data.attacker)
           goodgoat.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("goodgoats") and not dude.components.health:IsDead() end, 10)
        else
           goodgoat.components.health:Kill()
        end
    end )
    goodgoat.components.inspectable.getstatus = function(goodgoat)
        if not goodgoat:HasTag("followme") then
           local brain = require "brains/chesterbrain"
           goodgoat:SetBrain(brain)
           goodgoat:RestartBrain()
           goodgoat.components.follower:SetLeader(GetPlayer())
           goodgoat.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           goodgoat:AddTag("followme")
        else
           local brain = require "brains/frogbrain"
           goodgoat:SetBrain(brain)
           goodgoat:RestartBrain()
           goodgoat.components.follower:SetLeader(nil)
           goodgoat.AnimState:SetBloomEffectHandle("")
           goodgoat:RemoveTag("followme")
        end
    end
    goodgoat:DoPeriodicTask(math.random(180, 360), function(goodgoat)
        SpawnPrefab("goatmilk").Transform:SetPosition(goodgoat.Transform:GetWorldPosition())
    end )
    goodgoat:ListenForEvent( "nighttime", function()
        if math.random()<.3 then
           local pt0 = goodgoat:GetPosition()
           local smallgoat = SpawnPrefab("lightninggoathorn")
           smallgoat.Transform:SetPosition(pt0.x, pt0.y, pt0.z)
           smallgoat.AnimState:SetBank("lightning_goat")
           smallgoat.AnimState:SetBuild("lightning_goat_build")
           smallgoat.AnimState:PlayAnimation("idle_loop", true)
           smallgoat.Transform:SetFourFaced()
           smallgoat.Transform:SetScale(0.6, 0.6, 0.6)
           smallgoat.entity:AddSoundEmitter()
           local shadow = smallgoat.entity:AddDynamicShadow()
           shadow:SetSize(1,.5)
           MakeCharacterPhysics(smallgoat, 60, 0.6)
           smallgoat.entity:AddLight()
           smallgoat.Light:Enable(false)
           local minimap = smallgoat.entity:AddMiniMapEntity()
           minimap:SetIcon( "toothtrap.png" )
           smallgoat:RemoveComponent("stackable")
           smallgoat:RemoveComponent("inventoryitem")
           smallgoat:RemoveComponent("deployable")
           smallgoat:AddComponent("knownlocations")
           smallgoat:AddComponent("follower")
           smallgoat:AddComponent("locomotor")
           smallgoat.components.locomotor.walkspeed = 4
           smallgoat.components.locomotor.runspeed = 8
           smallgoat:SetStateGraph("SGlightninggoat")
           smallgoat:AddComponent("health")
           smallgoat.components.health:SetMaxHealth(100)
           smallgoat:AddComponent("combat")
           smallgoat.components.combat.hiteffectsymbol = "lightning_goat_body"
           smallgoat.components.combat:SetAttackPeriod(1)
           smallgoat.components.combat:SetRange(1, 2)
           smallgoat.components.combat:SetDefaultDamage(5)
           smallgoat:AddComponent("lootdropper")
           smallgoat.components.lootdropper:SetLoot({"meat","meat","meat","lightninggoathorn"})
           smallgoat:ListenForEvent("attacked", function(smallgoat, data)
               if data.attacker ~= GetPlayer() then
                  smallgoat.components.combat:SetTarget(data.attacker)
                  smallgoat.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("goodgoats") and not dude.components.health:IsDead() end, 10)
               else
                  smallgoat.components.health:Kill()
               end
           end )
           smallgoat:DoPeriodicTask(math.random(180, 360), function(smallgoat)
               SpawnPrefab("poop").Transform:SetPosition(smallgoat.Transform:GetWorldPosition())
           end )
           smallgoat:DoTaskInTime(1, function(smallgoat)
               local mama = FindEntity(smallgoat, 100, function(guy)
                   return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
               end)
               if mama then
                  local brain = require "brains/chesterbrain"
                  smallgoat:SetBrain(brain)
                  smallgoat:RestartBrain()
                  smallgoat.components.follower:SetLeader(mama)
               else
                  local brain = require "brains/frogbrain"
                  smallgoat:SetBrain(brain)
                  smallgoat:RestartBrain()
                  smallgoat.components.follower:SetLeader(nil)
	       end
           end )
           smallgoat.components.inspectable.getstatus = function(smallgoat)
               local mama = FindEntity(smallgoat, 100, function(guy)
                   return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
               end)
               if mama then
                  local brain = require "brains/chesterbrain"
                  smallgoat:SetBrain(brain)
                  smallgoat:RestartBrain()
                  smallgoat.components.follower:SetLeader(mama)
               else
                  local brain = require "brains/frogbrain"
                  smallgoat:SetBrain(brain)
                  smallgoat:RestartBrain()
                  smallgoat.components.follower:SetLeader(nil)
	       end
           end
           smallgoat:AddTag("smallgoats")
        end
    end , GetWorld())
    goodgoat:AddTag("goodgoats")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("goodgoats") then
        data.goodgoats = true
    end
    if inst:HasTag("followme") then
        data.followme = true
    end
    if inst:HasTag("smallgoats") then
        data.smallgoats = true
    end
end
local function onload(inst, data)
    if data and data.goodgoats then
       inst.AnimState:SetBank("lightning_goat")
       inst.AnimState:SetBuild("lightning_goat_build")
       inst.AnimState:PlayAnimation("idle_loop", true)
       inst.Transform:SetFourFaced()
       inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize(1.75,.75)
       MakeCharacterPhysics(inst, 100, 1)
       inst.entity:AddLight()
       inst.Light:Enable(false)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "toothtrap.png" )
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("deployable")
       inst:AddComponent("knownlocations")
       inst:AddComponent("leader")
       inst:AddComponent("follower")
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 4
       inst.components.locomotor.runspeed = 8
       inst:SetStateGraph("SGlightninggoat")
       local brain = require "brains/frogbrain"
       inst:SetBrain(brain)
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(200)
       inst:AddComponent("combat")
       inst.components.combat.hiteffectsymbol = "lightning_goat_body"
       inst.components.combat:SetAttackPeriod(1)
       inst.components.combat:SetRange(1, 2)
       inst.components.combat:SetDefaultDamage(10)
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"meat","meat","meat","meat","meat","meat"})
       inst:ListenForEvent("attacked", function(inst, data)
           if data.attacker ~= GetPlayer() then
              inst.components.combat:SetTarget(data.attacker)
              inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("goodgoats") and not dude.components.health:IsDead() end, 10)
           else
              inst.components.health:Kill()
           end
       end )
       inst.components.inspectable.getstatus = function(inst)
           if not inst:HasTag("followme") then
              local brain = require "brains/chesterbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(GetPlayer())
              inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
              inst:AddTag("followme")
           else
              local brain = require "brains/frogbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(nil)
              inst.AnimState:SetBloomEffectHandle("")
              inst:RemoveTag("followme")
           end
       end
       inst:DoPeriodicTask(math.random(180, 360), function(inst)
           SpawnPrefab("goatmilk").Transform:SetPosition(inst.Transform:GetWorldPosition())
       end )
       inst:ListenForEvent( "nighttime", function()
           if math.random()<.3 then
              local pt0 = inst:GetPosition()
              local smallgoat = SpawnPrefab("lightninggoathorn")
              smallgoat.Transform:SetPosition(pt0.x, pt0.y, pt0.z)
              smallgoat.AnimState:SetBank("lightning_goat")
              smallgoat.AnimState:SetBuild("lightning_goat_build")
              smallgoat.AnimState:PlayAnimation("idle_loop", true)
              smallgoat.Transform:SetFourFaced()
              smallgoat.Transform:SetScale(0.6, 0.6, 0.6)
              smallgoat.entity:AddSoundEmitter()
              local shadow = smallgoat.entity:AddDynamicShadow()
              shadow:SetSize(1,.5)
              MakeCharacterPhysics(smallgoat, 60, 0.6)
              smallgoat.entity:AddLight()
              smallgoat.Light:Enable(false)
              local minimap = smallgoat.entity:AddMiniMapEntity()
              minimap:SetIcon( "toothtrap.png" )
              smallgoat:RemoveComponent("stackable")
              smallgoat:RemoveComponent("inventoryitem")
              smallgoat:RemoveComponent("deployable")
              smallgoat:AddComponent("knownlocations")
              smallgoat:AddComponent("follower")
              smallgoat:AddComponent("locomotor")
              smallgoat.components.locomotor.walkspeed = 4
              smallgoat.components.locomotor.runspeed = 8
              smallgoat:SetStateGraph("SGlightninggoat")
              smallgoat:AddComponent("health")
              smallgoat.components.health:SetMaxHealth(100)
              smallgoat:AddComponent("combat")
              smallgoat.components.combat.hiteffectsymbol = "lightning_goat_body"
              smallgoat.components.combat:SetAttackPeriod(1)
              smallgoat.components.combat:SetRange(1, 2)
              smallgoat.components.combat:SetDefaultDamage(5)
              smallgoat:AddComponent("lootdropper")
              smallgoat.components.lootdropper:SetLoot({"meat","meat","meat","lightninggoathorn"})
              smallgoat:ListenForEvent("attacked", function(smallgoat, data)
                  if data.attacker ~= GetPlayer() then
                     smallgoat.components.combat:SetTarget(data.attacker)
                     smallgoat.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("goodgoats") and not dude.components.health:IsDead() end, 10)
                  else
                     smallgoat.components.health:Kill()
                  end
              end )
              smallgoat:DoPeriodicTask(math.random(180, 360), function(smallgoat)
                  SpawnPrefab("poop").Transform:SetPosition(smallgoat.Transform:GetWorldPosition())
              end )
              smallgoat:DoTaskInTime(1, function(smallgoat)
                  local mama = FindEntity(smallgoat, 100, function(guy)
                      return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
                  end)
                  if mama then
                     local brain = require "brains/chesterbrain"
                     smallgoat:SetBrain(brain)
                     smallgoat:RestartBrain()
                     smallgoat.components.follower:SetLeader(mama)
                  else
                     local brain = require "brains/frogbrain"
                     smallgoat:SetBrain(brain)
                     smallgoat:RestartBrain()
                     smallgoat.components.follower:SetLeader(nil)
	          end
              end )
              smallgoat.components.inspectable.getstatus = function(smallgoat)
                  local mama = FindEntity(smallgoat, 100, function(guy)
                      return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
                  end)
                  if mama then
                     local brain = require "brains/chesterbrain"
                     smallgoat:SetBrain(brain)
                     smallgoat:RestartBrain()
                     smallgoat.components.follower:SetLeader(mama)
                  else
                     local brain = require "brains/frogbrain"
                     smallgoat:SetBrain(brain)
                     smallgoat:RestartBrain()
                     smallgoat.components.follower:SetLeader(nil)
	          end
              end
              smallgoat:AddTag("smallgoats")
           end
       end , GetWorld())
       inst:AddTag("goodgoats")
    end
    if data and data.followme then
       local brain = require "brains/chesterbrain"
       inst:SetBrain(brain)
       inst:RestartBrain()
       inst.components.follower:SetLeader(GetPlayer())
       inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
       inst:AddTag("followme")
    end
    if data and data.smallgoats then
       inst.AnimState:SetBank("lightning_goat")
       inst.AnimState:SetBuild("lightning_goat_build")
       inst.AnimState:PlayAnimation("idle_loop", true)
       inst.Transform:SetFourFaced()
       inst.Transform:SetScale(0.6, 0.6, 0.6)
       inst.entity:AddSoundEmitter()
       local shadow = inst.entity:AddDynamicShadow()
       shadow:SetSize(1,.5)
       MakeCharacterPhysics(inst, 60, 0.6)
       inst.entity:AddLight()
       inst.Light:Enable(false)
       local minimap = inst.entity:AddMiniMapEntity()
       minimap:SetIcon( "toothtrap.png" )
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("inventoryitem")
       inst:RemoveComponent("deployable")
       inst:AddComponent("knownlocations")
       inst:AddComponent("follower")
       inst:AddComponent("locomotor")
       inst.components.locomotor.walkspeed = 4
       inst.components.locomotor.runspeed = 8
       inst:SetStateGraph("SGlightninggoat")
       inst:AddComponent("health")
       inst.components.health:SetMaxHealth(100)
       inst:AddComponent("combat")
       inst.components.combat.hiteffectsymbol = "lightning_goat_body"
       inst.components.combat:SetAttackPeriod(1)
       inst.components.combat:SetRange(1, 2)
       inst.components.combat:SetDefaultDamage(5)
       inst:AddComponent("lootdropper")
       inst.components.lootdropper:SetLoot({"meat","meat","meat","lightninggoathorn"})
       inst:ListenForEvent("attacked", function(inst, data)
           if data.attacker ~= GetPlayer() then
              inst.components.combat:SetTarget(data.attacker)
              inst.components.combat:ShareTarget(data.attacker, 30, function(dude) return dude:HasTag("goodgoats") and not dude.components.health:IsDead() end, 10)
           else
              inst.components.health:Kill()
           end
       end )
       inst:DoPeriodicTask(math.random(180, 360), function(inst)
           SpawnPrefab("poop").Transform:SetPosition(inst.Transform:GetWorldPosition())
       end )
       inst:DoTaskInTime(1, function(inst)
           local mama = FindEntity(inst, 100, function(guy)
               return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
           end)
           if mama then
              local brain = require "brains/chesterbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(mama)
           else
              local brain = require "brains/frogbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(nil)
           end
       end )
       inst.components.inspectable.getstatus = function(inst)
           local mama = FindEntity(inst, 100, function(guy)
               return guy:HasTag("goodgoats") and guy.components.leader and guy.components.health and not guy.components.health:IsDead()
           end)
           if mama then
              local brain = require "brains/chesterbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(mama)
           else
              local brain = require "brains/frogbrain"
              inst:SetBrain(brain)
              inst:RestartBrain()
              inst.components.follower:SetLeader(nil)
	   end
       end
       inst:AddTag("smallgoats")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用闪电羊角种良种山羊，鼠标左键点山羊（手里不要拿武器，以免误伤）可跟随，再次点击取消跟随。良种山羊每天可产1-2份羊奶，夜里还有一定概率生下小羊，杀掉良种山羊可得6块大肉。小羊只跟随大羊，如果你杀掉了小羊的妈妈，它会乱跑，这时带一只大羊，用鼠标左键点小羊，可让它认新的妈妈。小羊会产便便，不会长大，可作为你的肉食来源，屠宰后得到3块大肉和闪电羊角，其中闪电羊角可用于再种良种山羊，逐步壮大你的羊群。良种山羊在小地图上显示为犬牙陷阱图标。闪电羊角可打闪电羊获得，如修改了“巨型超市”，也可花1-3个黄金购得




三０四.商业采矿机（用晶体管种商业采矿机，20个黄金租用一次，收购采出的矿石，赔钱、赚钱天注定）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\transistor.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makeluckypit(inst)
    local pt = inst:GetPosition()
    local luckypit = SpawnPrefab("transistor")
    luckypit.Transform:SetPosition(pt.x, pt.y, pt.z)
    luckypit.AnimState:SetBank("coldfirepit")
    luckypit.AnimState:SetBuild("coldfirepit")
    luckypit.AnimState:PlayAnimation("idle",false)
    luckypit.entity:AddSoundEmitter()
    luckypit.Transform:SetScale(1.5,1.5,1.5)
    luckypit:RemoveComponent("stackable")
    luckypit:RemoveComponent("inventoryitem")
    luckypit:RemoveComponent("deployable")
    luckypit:AddComponent("workable")
    luckypit.components.workable:SetWorkAction(ACTIONS.HAMMER)
    luckypit.components.workable:SetWorkLeft(3)
    luckypit.components.workable:SetOnFinishCallback(function(luckypit)
        SpawnPrefab("collapse_big").Transform:SetPosition(luckypit.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        luckypit:Remove()
    end )
    luckypit:AddComponent("trader")
    luckypit.components.trader:SetAcceptTest(function(luckypit, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 20) then
           if not luckypit:HasTag("domining") then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
        end
        if item.prefab == "rocks" or item.prefab == "nitre" or item.prefab == "flint" or item.prefab == "redgem" or item.prefab == "bluegem" or item.prefab == "purplegem" or item.prefab == "greengem" or item.prefab == "orangegem" or item.prefab == "yellowgem" or item.prefab == "thulecite" or item.prefab == "ice" then
           return true
        end
        return false
    end )
    luckypit.components.trader.onaccept = function(luckypit, giver, item)
        if item.prefab == "goldnugget" then
           giver.components.inventory:ConsumeByName("goldnugget", 19)
           GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
           luckypit:AddTag("domining")
           luckypit.task = luckypit:DoPeriodicTask(1, function()
               local pt0 = luckypit:GetPosition()
               luckypit.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
               luckypit:DoTaskInTime(0.5, function() luckypit.AnimState:SetBloomEffectHandle("") end )
               SpawnPrefab("collapse_small").Transform:SetPosition(pt0.x, 1, pt0.z)
               luckypit.SoundEmitter:PlaySound("dontstarve/wilson/rock_break")
               GetPlayer().components.playercontroller:ShakeCamera(luckypit, "FULL", 0.7, 0.02, .5, 40)
               local ores = {"rocks","nitre","flint","redgem","bluegem","purplegem","greengem","orangegem","yellowgem","thulecite","ice","goldnugget","ash"}
               local ore = ores[math.random(#ores)]
               local myore = SpawnPrefab(ore)
               myore.Transform:SetPosition(pt0.x, 0, pt0.z)
               myore.components.inventoryitem.canbepickedup = false
	       myore:AddComponent("complexprojectile")
	       myore.components.complexprojectile.yOffset = 2.5
               myore.components.complexprojectile:Launch(Point(pt0.x+(math.random(10)-math.random(10)), 0, pt0.z+(math.random(10)-math.random(10))))
	       myore.components.complexprojectile:SetOnHit(function()
                   SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(myore.Transform:GetWorldPosition())
                   myore:RemoveComponent("complexprojectile")
                   myore.components.inventoryitem.canbepickedup = true
               end )
           end )
           luckypit:DoTaskInTime(math.random(10,60), function()
               SpawnPrefab("collapse_big").Transform:SetPosition(luckypit.Transform:GetWorldPosition())
               luckypit.SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
               if luckypit.task then luckypit.task:Cancel() luckypit.task = nil end
               luckypit:RemoveTag("domining")
           end )
        end
        if item.prefab == "thulecite" then
           for k = 1, 3 do
               local goldnugget = SpawnPrefab("goldnugget")
               giver.components.inventory:GiveItem(goldnugget)
           end
        end
        if item.prefab == "rocks" or item.prefab == "nitre" or item.prefab == "flint" or item.prefab == "redgem" or item.prefab == "bluegem" or item.prefab == "purplegem" or item.prefab == "greengem" or item.prefab == "orangegem" or item.prefab == "yellowgem" or item.prefab == "ice" then
           local goldnugget = SpawnPrefab("goldnugget")
           giver.components.inventory:GiveItem(goldnugget)
        end
    end
    luckypit:AddTag("luckypit")
end
local function OnDeploy (inst, pt)
    makeluckypit(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("luckypit") then
       data.luckypit = true
    end
end
local function onload(inst, data)
  if data and data.luckypit then
     makeluckypit(inst)
     inst:Remove()
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用晶体管种商业采矿机（拿着1个晶体管对地面点鼠标右键，如果拿着多个，则不会种出来），给它20个黄金（拿着黄金对采矿机点鼠标左键）可租用一次，采出的矿石数量不确定，还有一定概率采出灰。你可以将矿石留下自用，也可以卖给商业采矿机（拿着矿石对采矿机点鼠标左键），除铥矿石可卖3个黄金外，其余每个矿石可卖1个黄金，能否平衡你支付的租金，就要看天意了，开启矿业大亨的生涯吧。不想要商业采矿机了，用锤子砸掉即可。晶体管在精炼选项（画着白色宝石）下，用2个黄金、1个石砖制造




三０五.环保公司（用草种环保公司，将接收的垃圾搬到粉碎区，点铃粉碎后得黄金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cutgrass.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makegrinder(inst)
    local pt = inst:GetPosition()
    local redmark = SpawnPrefab("cutgrass")
    redmark.Transform:SetPosition(pt.x, pt.y, pt.z)
    redmark.AnimState:SetBank("gridplacer")
    redmark.AnimState:SetBuild("gridplacer")
    redmark.AnimState:PlayAnimation("anim", true)
    redmark.Transform:SetScale(1.5, 1.5, 1.5)
    redmark.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    redmark.AnimState:SetLayer( LAYER_BACKGROUND )
    redmark.AnimState:SetSortOrder( 3 )
    redmark.Transform:SetRotation( 45 )
    redmark.AnimState:SetMultColour(255/255,0/255,0/255,1)
    redmark.AnimState:SetLightOverride(1)
    redmark:AddTag("NOCLICK")
    redmark:RemoveComponent("stackable")
    redmark:RemoveComponent("edible")
    redmark:RemoveComponent("tradable")
    redmark:RemoveComponent("fuel")
    redmark:RemoveComponent("burnable")
    redmark:RemoveComponent("propagator")
    redmark:RemoveComponent("repairer")
    redmark:RemoveComponent("inventoryitem")
    redmark:RemoveComponent("deployable")
    redmark:RemoveTag("cattoy")
    redmark:AddTag("redmark")
    local yellowmark = SpawnPrefab("cutgrass")
    yellowmark.Transform:SetPosition(pt.x-12.5, 0, pt.z+12.5)
    yellowmark.AnimState:SetBank("gridplacer")
    yellowmark.AnimState:SetBuild("gridplacer")
    yellowmark.AnimState:PlayAnimation("anim", true)
    yellowmark.Transform:SetScale(2, 2, 2)
    yellowmark.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
    yellowmark.AnimState:SetLayer( LAYER_BACKGROUND )
    yellowmark.AnimState:SetSortOrder( 3 )
    yellowmark.Transform:SetRotation( 45 )
    yellowmark.AnimState:SetMultColour(255/255,255/255,0/255,1)
    yellowmark.AnimState:SetLightOverride(1)
    yellowmark:AddTag("NOCLICK")
    yellowmark:RemoveComponent("stackable")
    yellowmark:RemoveComponent("edible")
    yellowmark:RemoveComponent("tradable")
    yellowmark:RemoveComponent("fuel")
    yellowmark:RemoveComponent("burnable")
    yellowmark:RemoveComponent("propagator")
    yellowmark:RemoveComponent("repairer")
    yellowmark:RemoveComponent("inventoryitem")
    yellowmark:RemoveComponent("deployable")
    yellowmark:RemoveTag("cattoy")
    yellowmark:ListenForEvent( "daytime", function()
        for k = 1,math.random(6,12) do
            local pt1 = yellowmark:GetPosition()
            local trash = SpawnPrefab("cutgrass")
            trash.Transform:SetPosition(pt1.x+(math.random(6)-math.random(6)), 0, pt1.z+(math.random(6)-math.random(6)))
            trash.AnimState:SetBank("fertilizer")
            trash.AnimState:SetBuild("fertilizer")
            trash.AnimState:PlayAnimation("idle")
            trash.Transform:SetScale(1.5, 1.5, 1.5)
            trash.AnimState:SetMultColour(0/255,255/255,0/255,1)
            trash.components.inventoryitem:ChangeImageName("fertilizer")
            trash:RemoveComponent("stackable")
            trash:RemoveComponent("edible")
            trash:RemoveComponent("tradable")
            trash:RemoveComponent("fuel")
            trash:RemoveComponent("burnable")
            trash:RemoveComponent("propagator")
            trash:RemoveComponent("repairer")
            trash:RemoveComponent("deployable")
            trash:RemoveTag("cattoy")
            trash:AddComponent("named")
            trash.components.named:SetName("Refuse")
            trash.flies = trash:SpawnChild("flies")
            trash.components.inventoryitem:SetOnDroppedFn(function() trash.flies = trash:SpawnChild("flies") end )
            trash.components.inventoryitem:SetOnPickupFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            trash.components.inventoryitem:SetOnPutInInventoryFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            MakeSmallBurnable(trash)
            MakeSmallPropagator(trash)
            trash:AddTag("trash")
        end
    end , GetWorld() )
    yellowmark:ListenForEvent( "nighttime", function()
        for k = 1,math.random(3,5) do
            local pt1 = yellowmark:GetPosition()
            local trash = SpawnPrefab("cutgrass")
            trash.Transform:SetPosition(pt1.x+(math.random(6)-math.random(6)), 0, pt1.z+(math.random(6)-math.random(6)))
            trash.AnimState:SetBank("fertilizer")
            trash.AnimState:SetBuild("fertilizer")
            trash.AnimState:PlayAnimation("idle")
            trash.Transform:SetScale(1.5, 1.5, 1.5)
            trash.AnimState:SetMultColour(0/255,255/255,0/255,1)
            trash.components.inventoryitem:ChangeImageName("fertilizer")
            trash:RemoveComponent("stackable")
            trash:RemoveComponent("edible")
            trash:RemoveComponent("tradable")
            trash:RemoveComponent("fuel")
            trash:RemoveComponent("burnable")
            trash:RemoveComponent("propagator")
            trash:RemoveComponent("repairer")
            trash:RemoveComponent("deployable")
            trash:RemoveTag("cattoy")
            trash:AddComponent("named")
            trash.components.named:SetName("Refuse")
            trash.flies = trash:SpawnChild("flies")
            trash.components.inventoryitem:SetOnDroppedFn(function() trash.flies = trash:SpawnChild("flies") end )
            trash.components.inventoryitem:SetOnPickupFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            trash.components.inventoryitem:SetOnPutInInventoryFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            MakeSmallBurnable(trash)
            MakeSmallPropagator(trash)
            trash:AddTag("trash")
        end
    end , GetWorld() )
    yellowmark:ListenForEvent( "dusktime", function()
        for k = 1,math.random(5,7) do
            local pt1 = yellowmark:GetPosition()
            local trash = SpawnPrefab("cutgrass")
            trash.Transform:SetPosition(pt1.x+(math.random(6)-math.random(6)), 0, pt1.z+(math.random(6)-math.random(6)))
            trash.AnimState:SetBank("fertilizer")
            trash.AnimState:SetBuild("fertilizer")
            trash.AnimState:PlayAnimation("idle")
            trash.Transform:SetScale(1.5, 1.5, 1.5)
            trash.AnimState:SetMultColour(0/255,255/255,0/255,1)
            trash.components.inventoryitem:ChangeImageName("fertilizer")
            trash:RemoveComponent("stackable")
            trash:RemoveComponent("edible")
            trash:RemoveComponent("tradable")
            trash:RemoveComponent("fuel")
            trash:RemoveComponent("burnable")
            trash:RemoveComponent("propagator")
            trash:RemoveComponent("repairer")
            trash:RemoveComponent("deployable")
            trash:RemoveTag("cattoy")
            trash:AddComponent("named")
            trash.components.named:SetName("Refuse")
            trash.flies = trash:SpawnChild("flies")
            trash.components.inventoryitem:SetOnDroppedFn(function() trash.flies = trash:SpawnChild("flies") end )
            trash.components.inventoryitem:SetOnPickupFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            trash.components.inventoryitem:SetOnPutInInventoryFn(function() if trash.flies then trash.flies:Remove() trash.flies = nil end end )
            MakeSmallBurnable(trash)
            MakeSmallPropagator(trash)
            trash:AddTag("trash")
        end
    end , GetWorld() )
    yellowmark:AddTag("yellowmark")
    local footbell = SpawnPrefab("cutgrass")
    footbell.Transform:SetPosition(pt.x-5, 0, pt.z+5)
    footbell.AnimState:SetBank("bell")
    footbell.AnimState:SetBuild("bell")
    footbell.AnimState:PlayAnimation("idle")
    footbell.AnimState:SetMultColour(255/255,255/255,0/255,1)
    footbell.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    footbell:RemoveComponent("stackable")
    footbell:RemoveComponent("edible")
    footbell:RemoveComponent("tradable")
    footbell:RemoveComponent("fuel")
    footbell:RemoveComponent("burnable")
    footbell:RemoveComponent("propagator")
    footbell:RemoveComponent("repairer")
    footbell:RemoveComponent("inventoryitem")
    footbell:RemoveComponent("deployable")
    footbell:RemoveTag("cattoy")
    footbell:AddComponent("named")
    footbell.components.named:SetName("Bell")
    footbell:AddTag("footbell")
    footbell:AddComponent("workable")
    footbell.components.workable:SetWorkAction(ACTIONS.HAMMER)
    footbell.components.workable:SetWorkLeft(3)
    footbell.components.workable:SetOnFinishCallback(function()
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(footbell.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        local pos2 = Vector3(footbell.Transform:GetWorldPosition())
        local ents2 = TheSim:FindEntities(pos2.x,pos2.y,pos2.z, 30)
        for k,v in pairs(ents2) do
            if v:HasTag("redmark") or v:HasTag("yellowmark") or v:HasTag("trash") or v:HasTag("footfoot") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               v:Remove()
            end
        end
        footbell:Remove()
    end )
    footbell.components.inspectable.getstatus = function()
        GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
        local foot = SpawnPrefab("cutgrass")
        foot.Transform:SetPosition(pt.x, 10, pt.z)
        foot.AnimState:SetBank("foot")
        foot.AnimState:SetBuild("foot_build")
        foot.AnimState:PlayAnimation("idle")
        foot.Transform:SetFourFaced()
        foot.Transform:SetRotation( 270 )
        foot:RemoveComponent("stackable")
        foot:RemoveComponent("edible")
        foot:RemoveComponent("tradable")
        foot:RemoveComponent("fuel")
        foot:RemoveComponent("burnable")
        foot:RemoveComponent("propagator")
        foot:RemoveComponent("repairer")
        foot:RemoveComponent("inventoryitem")
        foot:RemoveComponent("deployable")
        foot:RemoveTag("cattoy")
        foot:AddTag("footfoot")
        foot.falling = foot:DoPeriodicTask(.01, function() foot.Physics:SetMotorVelOverride(0,-55,0) end)
        foot:DoTaskInTime(0.1, function()
            if foot.falling then foot.falling:Cancel() foot.falling = nil end
            GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
            GetPlayer().components.playercontroller:ShakeCamera(foot, "FULL", 0.5, 0.05, 2, 40)
            SpawnPrefab("collapse_big").Transform:SetPosition(pt.x, 0, pt.z)
            local pos = Vector3(foot.Transform:GetWorldPosition())
            local ents = TheSim:FindEntities(pos.x,0,pos.z, 5)
            for k,v in pairs(ents) do
                if v:HasTag("trash") and v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
                   SpawnPrefab("goldnugget").Transform:SetPosition(v.Transform:GetWorldPosition())
                   v:Remove()
                end
                if v:HasTag("player") then
                   v.AnimState:PlayAnimation("hit")
                   v.components.health:DoDelta(-5)
                end
            end
            foot:DoTaskInTime(0.5, function()
                GetPlayer().SoundEmitter:PlaySound("dontstarve/common/stone_drop")
                SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(foot.Transform:GetWorldPosition())
                foot:Remove()
            end )
        end )
    end
end
local function OnDeploy (inst, pt)
    makegrinder(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("redmark") then
        data.redmark = true
    end
    if inst:HasTag("yellowmark") then
        data.yellowmark = true
    end
    if inst:HasTag("trash") then
        data.trash = true
    end
    if inst:HasTag("footbell") then
        data.footbell = true
    end
    if inst:HasTag("footfoot") then
        data.footfoot = true
    end
end
local function onload(inst, data)
    if data and data.redmark then
       makegrinder(inst)
       inst:Remove()
    end
    if data and data.yellowmark then
       inst:Remove()
    end
    if data and data.footbell then
       inst:Remove()
    end
    if data and data.footfoot then
       inst:Remove()
    end
    if data and data.trash then
       inst.AnimState:SetBank("fertilizer")
       inst.AnimState:SetBuild("fertilizer")
       inst.AnimState:PlayAnimation("idle")
       inst.Transform:SetScale(1.5, 1.5, 1.5)
       inst.AnimState:SetMultColour(0/255,255/255,0/255,1)
       inst.components.inventoryitem:ChangeImageName("fertilizer")
       inst:RemoveComponent("stackable")
       inst:RemoveComponent("edible")
       inst:RemoveComponent("tradable")
       inst:RemoveComponent("fuel")
       inst:RemoveComponent("burnable")
       inst:RemoveComponent("propagator")
       inst:RemoveComponent("repairer")
       inst:RemoveComponent("deployable")
       inst:RemoveTag("cattoy")
       inst:AddComponent("named")
       inst.components.named:SetName("Refuse")
       inst.flies = inst:SpawnChild("flies")
       inst.components.inventoryitem:SetOnDroppedFn(function() inst.flies = inst:SpawnChild("flies") end )
       inst.components.inventoryitem:SetOnPickupFn(function() if inst.flies then inst.flies:Remove() inst.flies = nil end end )
       inst.components.inventoryitem:SetOnPutInInventoryFn(function() if inst.flies then inst.flies:Remove() inst.flies = nil end end )
       MakeSmallBurnable(inst)
       MakeSmallPropagator(inst)
       inst:AddTag("trash")
    end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在开阔的空地上，用草种环保公司（拿着1个草对地面点鼠标右键，如果拿着多个，则不会种出来），每天白天、傍晚、黑夜都会有垃圾被送到黄区，将它们搬到红区后，鼠标左键点地上的铃，可将垃圾粉碎，其中的贵金属（黄金）将留在地上，这就是环保公司的收入来源。粉碎垃圾时，不要站在红区附近，会被砸伤（减5点血）。黄区的垃圾如不及时清理，会越来越多，如果实在处理不过来，可以将垃圾烧掉，但那样就没有收入了。这是饥荒世界唯一一家环保公司，整块大陆的清洁就仰赖你了，承担起这肮脏而又崇高的事业吧。不想要环保公司了，用锤子砸掉铃即可




三０六.生鲜售卖机（用木板种生鲜售卖机，放入生鲜产品，每天清晨自动卖出换黄金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\boards.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    local vending = SpawnPrefab("boards")
    vending.Transform:SetPosition(pt.x, pt.y, pt.z)
    vending.AnimState:SetBank("icebox")
    vending.AnimState:SetBuild("ice_box")
    vending.AnimState:PlayAnimation("closed")
    vending.Transform:SetScale(1.3, 1.3, 1.3)
    vending.AnimState:SetMultColour(255/255,255/255,0/255,1)
    vending:RemoveComponent("stackable")
    vending:RemoveComponent("tradable")
    vending:RemoveComponent("edible")
    vending:RemoveComponent("inventoryitem")
    vending:RemoveComponent("repairer")
    vending:RemoveComponent("fuel")
    vending:RemoveComponent("burnable")
    vending:RemoveComponent("propagator")
    vending:RemoveComponent("deployable")
    vending.components.container.canbeopened = true
    vending:DoPeriodicTask(2, function(vending)
        vending.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        vending:DoTaskInTime(1, function() vending.AnimState:SetBloomEffectHandle("") end )
    end )
    vending:AddComponent("workable")
    vending.components.workable:SetWorkAction(ACTIONS.HAMMER)
    vending.components.workable:SetWorkLeft(3)
    vending.components.workable:SetOnFinishCallback(function(vending)
        SpawnPrefab("collapse_big").Transform:SetPosition(vending.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        vending:Remove()
    end )
    vending:ListenForEvent( "daytime", function()
        local num_found = 0
        for k,v in pairs(vending.components.container.slots) do
            if v and v.prefab ~= "goldnugget" and v.prefab ~= "spoiled_food" then
               num_found = num_found + v.components.stackable:StackSize()
               v:Remove()
            end
        end
        for k = 1, num_found do
            local goldnugget = SpawnPrefab("goldnugget")
            vending.components.container:GiveItem(goldnugget)
        end
    end, GetWorld())
    vending:AddTag("vendings")
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("vendings") then
        data.vendings = true
    end
end
local function onload(inst, data)
  if data and data.vendings then
    inst.AnimState:SetBank("icebox")
    inst.AnimState:SetBuild("ice_box")
    inst.AnimState:PlayAnimation("closed")
    inst.Transform:SetScale(1.3, 1.3, 1.3)
    inst.AnimState:SetMultColour(255/255,255/255,0/255,1)
    inst:RemoveComponent("stackable")
    inst:RemoveComponent("tradable")
    inst:RemoveComponent("edible")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("repairer")
    inst:RemoveComponent("fuel")
    inst:RemoveComponent("burnable")
    inst:RemoveComponent("propagator")
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst:DoPeriodicTask(2, function(inst)
        inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        inst:DoTaskInTime(1, function() inst.AnimState:SetBloomEffectHandle("") end )
    end )
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
        SpawnPrefab("collapse_big").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:ListenForEvent( "daytime", function()
        local num_found = 0
        for k,v in pairs(inst.components.container.slots) do
            if v and v.prefab ~= "goldnugget" and v.prefab ~= "spoiled_food" then
               num_found = num_found + v.components.stackable:StackSize()
               v:Remove()
            end
        end
        for k = 1, num_found do
            local goldnugget = SpawnPrefab("goldnugget")
            inst.components.container:GiveItem(goldnugget)
        end
    end, GetWorld())
    inst:AddTag("vendings")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
local slotpos = {}
for y = 3, 0, -1 do
    for x = 0, 2 do
        table.insert(slotpos, Vector3(75*x-75*2+75, 75*y-75*2+75,0))
    end
end
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,100,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.canbeopened = false
    inst.components.container.onopenfn = function(inst) inst.AnimState:PlayAnimation("open") GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst.components.container.onclosefn = function(inst) inst.AnimState:PlayAnimation("close") GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold") end
    inst.components.container.itemtestfn = function(inst, item, slot)
        if item.prefab == "cave_banana" or item.prefab == "carrot" or item.prefab == "corn" or item.prefab == "pumpkin" or item.prefab == "eggplant" or item.prefab == "durian" or item.prefab == "pomegranate" or item.prefab == "dragonfruit" or item.prefab == "berries" or item.prefab == "cactus_meat" or item.prefab == "watermelon" or item.prefab == "acorn" or item.prefab == "meat" or item.prefab == "smallmeat" or item.prefab == "fish" or item.prefab == "eel" or item.prefab == "drumstick" or item.prefab == "bird_egg" or item.prefab == "froglegs" or item.prefab == "monstermeat" or item.prefab == "spoiled_food" or item.prefab == "butter" or item.prefab == "butterflywings" or item.prefab == "cutlichen" or item.prefab == "foliage" or item.prefab == "honey" or item.prefab == "lightbulb" or item.prefab == "red_cap" or item.prefab == "green_cap" or item.prefab == "blue_cap" or item.prefab == "petals" or item.prefab == "petals_evil" or item.prefab == "goatmilk" or item.prefab == "goldnugget" then
           return true
        end
        return false
    end
    inst:AddTag("fridge")

    即可用木板种生鲜售卖机，鼠标左键点售卖机，可打开格子，将蔬菜和肉类等生鲜产品放入格子中，每天清晨将全部卖出，每个售价1个黄金，结算的黄金在售卖机中领取。有了生鲜售卖机，不用发愁过剩的产品不好销售了。可以出售的生鲜产品包括香蕉、胡萝卜、玉米、南瓜、茄子、榴莲、石榴、火龙果、浆果、仙人掌肉、西瓜、橡果、大肉、小肉、鱼、鳗鱼、鸡腿、鸟蛋、蛙腿、疯肉、黄油、蝴蝶翅膀、苔藓、叶子、蜂蜜、荧光果、红蘑菇、绿蘑菇、蓝蘑菇、花瓣、噩梦花瓣。不想要生鲜售卖机了，用锤子砸掉即可。不要与“用木板种鱼人房”一同修改




三０七.炸弹客（用红色护身符种炸弹客，购买遥控炸弹，放在地上按键盘Delete键引爆）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_DELETE, function()
    GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
    inst:DoTaskInTime(0.1, function() 
        local pos = Vector3(inst.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 100)
        for k,v in pairs(ents) do
            if v:HasTag("bomballright") and v.components.inventoryitem and not v.components.inventoryitem:IsHeld() then
               local pos1 = Vector3(v.Transform:GetWorldPosition())
               local ents1 = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 15)
               for k,i in pairs(ents1) do
                   if i.components.combat and i.components.health and not i.components.health:IsDead() and not i:HasTag("player") then
                      SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(i.Transform:GetWorldPosition())
                      i.components.health:Kill()
                   end
                   if i.components.workable and i.components.workable.workleft > 0 and not i.components.inventoryitem then
                      SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(i.Transform:GetWorldPosition())
                      i.components.workable:Destroy(v)
                   end
               end
               GetPlayer().SoundEmitter:PlaySound("dontstarve_DLC001/creatures/glommer/foot_ground")
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               SpawnPrefab("explode_small").Transform:SetPosition(v.Transform:GetWorldPosition())
               SpawnPrefab("groundpoundring_fx").Transform:SetPosition(v.Transform:GetWorldPosition())
               GetClock():DoLightningLighting()
               GetPlayer().components.playercontroller:ShakeCamera(v, "FULL", 0.7, 0.02, .5, 40)
               v:Remove()
            end
        end
    end )
end )


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\amulet.lua文件，在inst.AnimState:PlayAnimation("redamulet")的下一行插入以下内容：

local function makebomber(inst)
    local pt = inst:GetPosition()
    local bomber = SpawnPrefab("amulet")
    bomber.Transform:SetPosition(pt.x, pt.y, pt.z)
    bomber.AnimState:SetBank("wilson")
    bomber.AnimState:SetBuild("wx78")
    bomber.AnimState:OverrideSymbol("swap_hat", "hat_catcoon", "swap_hat")
    bomber.AnimState:OverrideSymbol("swap_body", "swap_krampus_sack", "backpack")
    bomber.AnimState:OverrideSymbol("swap_body", "swap_krampus_sack", "swap_body")
    bomber.AnimState:Show("HAT")
    bomber.AnimState:Show("HAT_HAIR")
    bomber.AnimState:Hide("HAIR_NOHAT")
    bomber.AnimState:Hide("HAIR")
    bomber.AnimState:Hide("ARM_carry")
    bomber.AnimState:Show("ARM_normal")
    bomber.Transform:SetFourFaced()
    bomber.AnimState:PlayAnimation("idle")
    bomber:RemoveComponent("equippable")
    bomber:RemoveComponent("inventoryitem")
    bomber:RemoveComponent("finiteuses")
    bomber:RemoveComponent("deployable")
    MakeLargeBurnable(bomber)
    MakeLargePropagator(bomber)
    bomber:AddComponent("trader")
    bomber.components.trader:SetAcceptTest(function(bomber, item) 
        if GetPlayer().components.inventory:Has("goldnugget", 10) then
           if item.prefab == "goldnugget" then
              return true
           end
        end
        return false
    end )
    bomber.components.trader.onaccept = function(bomber, giver, item)
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        bomber.AnimState:PlayAnimation("give")
        local bomb = SpawnPrefab("amulet")
        bomb.AnimState:SetBank("bee_mine_maxwell")
        bomb.AnimState:SetBuild("bee_mine_maxwell")
        bomb.AnimState:PlayAnimation("idle")
        bomb.Transform:SetScale(0.8, 0.8, 0.8)
        bomb.AnimState:SetMultColour(255/255,255/255,0/255,1)
        bomb.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
        bomb:AddComponent("named")
        bomb.components.named:SetName("Bomb")
        local minimap = bomb.entity:AddMiniMapEntity()
        minimap:SetIcon( "beemine.png" )
        bomb:RemoveComponent("equippable")
        bomb:RemoveComponent("inventoryitem")
        bomb:RemoveComponent("finiteuses")
        bomb:RemoveComponent("deployable")
        bomb:AddComponent("inventoryitem")
        bomb.components.inventoryitem:ChangeImageName("beemine")
        bomb.components.inventoryitem:SetOnDroppedFn(function()
            bomb:AddTag("bomballright")
        end )
        bomb.components.inventoryitem:SetOnPickupFn(function()
            bomb:RemoveTag("bomballright")
        end )
        bomb.components.inventoryitem:SetOnPutInInventoryFn(function()
            bomb:RemoveTag("bomballright")
        end )
        bomb:AddTag("bomb")
        GetPlayer().components.inventory:GiveItem(bomb)
    end
    bomber:AddTag("bomber")
    for k = 1, 11 do
        local result_offset = FindValidPositionByFan(1 * 2 * PI, 2, 11, function(offset)
            local x,y,z = (pt + offset):Get()
            local ents = TheSim:FindEntities(x,y,z , 1)
            return not next(ents) 
        end)
        if result_offset then
           local bombbye = SpawnPrefab("amulet")
           bombbye.Transform:SetPosition((pt + result_offset):Get())
           bombbye.AnimState:SetBank("bee_mine_maxwell")
           bombbye.AnimState:SetBuild("bee_mine_maxwell")
           bombbye.AnimState:PlayAnimation("idle")
           bombbye.Transform:SetScale(0.8, 0.8, 0.8)
           bombbye.AnimState:SetMultColour(255/255,255/255,0/255,1)
           bombbye.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
           bombbye:RemoveComponent("equippable")
           bombbye:RemoveComponent("inventoryitem")
           bombbye:RemoveComponent("finiteuses")
           bombbye:RemoveComponent("deployable")
           MakeLargeBurnable(bombbye)
           MakeLargePropagator(bombbye)
           bombbye:AddTag("NOCLICK")
           bombbye:AddTag("bombbye")
        end
    end
end
local function OnDeploy (inst, pt)
    makebomber(inst)
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("bomber") then
       data.bomber = true
    end
    if inst:HasTag("bombbye") then
       data.bombbye = true
    end
    if inst:HasTag("bomb") then
       data.bomb = true
    end
    if inst:HasTag("bomballright") then
       data.bomballright = true
    end
end
local function onload(inst, data)
  if data and data.bomber then
    makebomber(inst)
    inst:Remove()
  end
  if data and data.bombbye then
    inst:Remove()
  end
  if data and data.bomb then
    inst.AnimState:SetBank("bee_mine_maxwell")
    inst.AnimState:SetBuild("bee_mine_maxwell")
    inst.AnimState:PlayAnimation("idle")
    inst.Transform:SetScale(0.8, 0.8, 0.8)
    inst.AnimState:SetMultColour(255/255,255/255,0/255,1)
    inst.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
    inst:AddComponent("named")
    inst.components.named:SetName("Bomb")
    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "beemine.png" )
    inst:RemoveComponent("equippable")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("finiteuses")
    inst:RemoveComponent("deployable")
    inst:AddComponent("inventoryitem")
    inst.components.inventoryitem:ChangeImageName("beemine")
    inst.components.inventoryitem:SetOnDroppedFn(function()
        inst:AddTag("bomballright")
    end )
    inst.components.inventoryitem:SetOnPickupFn(function()
        inst:RemoveTag("bomballright")
    end )
    inst.components.inventoryitem:SetOnPutInInventoryFn(function()
        inst:RemoveTag("bomballright")
    end )
    inst:AddTag("bomb")
  end
  if data and data.bomballright then
    inst:AddTag("bomballright")
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可用红色护身符种炸弹客，给炸弹客10个黄金（拿着黄金对炸弹客点鼠标左键），可购买遥控炸弹，将炸弹放在地上，按键盘Delete键可遥控引爆，能炸死除主角外的任何生物，炸毁建筑、树木等。遥控炸弹在小地图上显示为炸弹图标，引爆时不要让同伴靠近。不想要炸弹客了，烧掉即可（拿着火炬对其点鼠标右键）。红色护身符在魔法选项（画着红骷髅）下，用3个黄金、2个噩梦燃料、1个红宝石制造




三０八.百变存钱罐（用鱼竿种百变存钱罐，每天获得3个黄金的零花钱，可变外型、防雷击、照明、补脑）

    用记事本打开游戏目录\data\scripts\prefabs\fishingrod.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function itemtest(inst, item, slot)
    if item.prefab == "goldnugget" then
       return true
    end
    return false
end
local slotpos = { Vector3(0,-75,0)}
local widgetbuttoninfo = {
    text = "Change",
    position = Vector3(0, -15, 0),
    fn = function(inst)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/characters/wx78/levelup")
        inst:RemoveTag("doll_1") inst:RemoveTag("doll_2") inst:RemoveTag("doll_3") inst:RemoveTag("doll_4") inst:RemoveTag("doll_5") inst:RemoveTag("doll_6") inst:RemoveTag("doll_7") inst:RemoveTag("doll_8") inst:RemoveTag("doll_9") inst:RemoveTag("doll_10")
        if math.random()<.08 then
           inst:AddTag("doll_1")
           inst.AnimState:SetBank("bearger")
           inst.AnimState:SetBuild("bearger_build")
           inst.AnimState:PlayAnimation("idle_loop")
           inst.Transform:SetScale(0.2,0.2,0.2)
        elseif math.random()<.16 then
           inst:AddTag("doll_2")
           inst.AnimState:SetBank("lightning_goat")
           inst.AnimState:SetBuild("lightning_goat_build")
           inst.AnimState:PlayAnimation("idle_loop")
           inst.Transform:SetScale(0.6,0.6,0.6)
        elseif math.random()<.24 then
           inst:AddTag("doll_3")
           inst.AnimState:SetBank("leif")
           inst.AnimState:SetBuild("leif_build")
           inst.AnimState:PlayAnimation("idle_loop")
           inst.Transform:SetScale(0.35,0.35,0.35)
        elseif math.random()<.32 then
           inst:AddTag("doll_4")
           inst.AnimState:SetBank("beefalo")
           inst.AnimState:SetBuild("beefalo_build")
           inst.AnimState:PlayAnimation("idle_loop")
           inst.Transform:SetScale(0.5,0.5,0.5)
        elseif math.random()<.4 then
           inst:AddTag("doll_5")
           inst.AnimState:SetBank("rook")
           inst.AnimState:SetBuild("rook_build")
           inst.AnimState:PlayAnimation("idle")
           inst.Transform:SetScale(0.3,0.3,0.3)
        elseif math.random()<.48 then
           inst:AddTag("doll_6")
           inst.AnimState:SetBank("deerclops")
           inst.AnimState:SetBuild("deerclops_build")
           inst.AnimState:PlayAnimation("idle_loop")
           inst.Transform:SetScale(0.35,0.35,0.35)
        elseif math.random()<.56 then
           inst:AddTag("doll_7")
           inst.AnimState:SetBank("rook")
           inst.AnimState:SetBuild("rook_rhino")
           inst.AnimState:PlayAnimation("idle")
           inst.Transform:SetScale(0.3,0.3,0.3)
        elseif math.random()<.64 then
           inst:AddTag("doll_8")
           inst.AnimState:SetBank("Pig_King")
           inst.AnimState:SetBuild("Pig_King")
           inst.AnimState:PlayAnimation("idle")
           inst.Transform:SetScale(0.4,0.4,0.4)
        elseif math.random()<.72 then
           inst:AddTag("doll_9")
           inst.AnimState:SetBank("goosemoose")
           inst.AnimState:SetBuild("goosemoose_build")
           inst.AnimState:PlayAnimation("idle")
           inst.Transform:SetScale(0.3,0.3,0.3)
        elseif math.random()<.95 then
           inst:AddTag("doll_10")
           inst.AnimState:SetBank("dragonfly")
           inst.AnimState:SetBuild("dragonfly_build")
           inst.AnimState:PlayAnimation("idle")
           inst.Transform:SetScale(0.3,0.3,0.3)
        else
           inst.AnimState:SetBank("trinkets")
           inst.AnimState:SetBuild("trinkets")
           inst.AnimState:PlayAnimation(tostring(4))
           inst.Transform:SetScale(1.5,1.5,1.5)
        end
    end }
local function OnDeploy (inst, pt)
    local doll = SpawnPrefab("fishingrod")
    doll.Transform:SetPosition(pt.x, pt.y, pt.z)
    doll.AnimState:SetBank("trinkets")
    doll.AnimState:SetBuild("trinkets")
    doll.AnimState:PlayAnimation(tostring(4))
    doll.Transform:SetFourFaced()
    doll.Transform:SetScale(1.5,1.5,1.5)
    local light = doll.entity:AddLight()
    light:SetFalloff(0.5)
    light:SetIntensity(.8)
    light:SetRadius(3.0)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    MakeObstaclePhysics(doll, 0.5)
    doll:RemoveComponent("fishingrod")
    doll:RemoveComponent("finiteuses")
    doll:RemoveComponent("inventoryitem")
    doll:RemoveComponent("equippable")
    if doll.components.weapon then doll:RemoveComponent("weapon") end
    doll:RemoveComponent("deployable")
    doll.components.container.canbeopened = true
    doll:AddComponent("named")
    doll.components.named:SetName("Piggy bank")
    doll:AddComponent("sanityaura")
    doll.components.sanityaura.aura = TUNING.SANITYAURA_MED
    doll:AddTag("lightningrod")
    doll:ListenForEvent("lightningstrike", function()
        doll.AnimState:SetBloomEffectHandle( "shaders/anim.ksh" )
        doll:DoTaskInTime(60, function()
            doll.AnimState:SetBloomEffectHandle("")
        end )
    end )
    doll:AddComponent("workable")
    doll.components.workable:SetWorkAction(ACTIONS.HAMMER)
    doll.components.workable:SetWorkLeft(3)
    doll.components.workable:SetOnFinishCallback(function(doll)
	doll.Light:Enable(false)
	doll.components.container:DropEverything()
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(doll.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        doll:Remove()
    end )
    doll:ListenForEvent( "daytime", function()
        for k = 1, 3 do
            local goldnugget = SpawnPrefab("goldnugget")
            doll.components.container:GiveItem(goldnugget)
        end
    end, GetWorld())
    doll:AddTag("scarytoprey")
    doll:AddTag("dolls")
    inst:Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("dolls") then
       data.dolls = true
    end
    if inst:HasTag("doll_1") then
       data.doll_1 = true
    end
    if inst:HasTag("doll_2") then
       data.doll_2 = true
    end
    if inst:HasTag("doll_3") then
       data.doll_3 = true
    end
    if inst:HasTag("doll_4") then
       data.doll_4 = true
    end
    if inst:HasTag("doll_5") then
       data.doll_5 = true
    end
    if inst:HasTag("doll_6") then
       data.doll_6 = true
    end
    if inst:HasTag("doll_7") then
       data.doll_7 = true
    end
    if inst:HasTag("doll_8") then
       data.doll_8 = true
    end
    if inst:HasTag("doll_9") then
       data.doll_9 = true
    end
    if inst:HasTag("doll_10") then
       data.doll_10 = true
    end
end
local function onload(inst, data)
  if data and data.dolls then
    inst.AnimState:SetBank("trinkets")
    inst.AnimState:SetBuild("trinkets")
    inst.AnimState:PlayAnimation(tostring(4))
    inst.Transform:SetFourFaced()
    inst.Transform:SetScale(1.5,1.5,1.5)
    local light = inst.entity:AddLight()
    light:SetFalloff(0.5)
    light:SetIntensity(.8)
    light:SetRadius(3.0)
    light:SetColour(180/255, 195/255, 50/255)
    light:Enable(true)
    MakeObstaclePhysics(inst, 0.5)
    inst:RemoveComponent("fishingrod")
    inst:RemoveComponent("finiteuses")
    inst:RemoveComponent("inventoryitem")
    inst:RemoveComponent("equippable")
    if inst.components.weapon then inst:RemoveComponent("weapon") end
    inst:RemoveComponent("deployable")
    inst.components.container.canbeopened = true
    inst:AddComponent("named")
    inst.components.named:SetName("Piggy bank")
    inst:AddComponent("sanityaura")
    inst.components.sanityaura.aura = TUNING.SANITYAURA_MED
    inst:AddTag("lightningrod")
    inst:ListenForEvent("lightningstrike", function()
        inst.AnimState:SetBloomEffectHandle( "shaders/anim.ksh" )
        inst:DoTaskInTime(60, function()
            inst.AnimState:SetBloomEffectHandle("")
        end )
    end )
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.HAMMER)
    inst.components.workable:SetWorkLeft(3)
    inst.components.workable:SetOnFinishCallback(function(inst)
	inst.Light:Enable(false)
	inst.components.container:DropEverything()
        SpawnPrefab("ground_chunks_breaking").Transform:SetPosition(inst.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        inst:Remove()
    end )
    inst:ListenForEvent( "daytime", function()
        for k = 1, 3 do
            local goldnugget = SpawnPrefab("goldnugget")
            inst.components.container:GiveItem(goldnugget)
        end
    end, GetWorld())
    inst:AddTag("scarytoprey")
    inst:AddTag("dolls")
  end
  if data and data.doll_1 then
     inst:AddTag("doll_1")
     inst.AnimState:SetBank("bearger")
     inst.AnimState:SetBuild("bearger_build")
     inst.AnimState:PlayAnimation("idle_loop")
     inst.Transform:SetScale(0.2,0.2,0.2)
  end
  if data and data.doll_2 then
     inst:AddTag("doll_2")
     inst.AnimState:SetBank("lightning_goat")
     inst.AnimState:SetBuild("lightning_goat_build")
     inst.AnimState:PlayAnimation("idle_loop")
     inst.Transform:SetScale(0.6,0.6,0.6)
    end
  if data and data.doll_3 then
     inst:AddTag("doll_3")
     inst.AnimState:SetBank("leif")
     inst.AnimState:SetBuild("leif_build")
     inst.AnimState:PlayAnimation("idle_loop")
     inst.Transform:SetScale(0.35,0.35,0.35)
  end
  if data and data.doll_4 then
     inst:AddTag("doll_4")
     inst.AnimState:SetBank("beefalo")
     inst.AnimState:SetBuild("beefalo_build")
     inst.AnimState:PlayAnimation("idle_loop")
     inst.Transform:SetScale(0.5,0.5,0.5)
  end
  if data and data.doll_5 then
     inst:AddTag("doll_5")
     inst.AnimState:SetBank("rook")
     inst.AnimState:SetBuild("rook_build")
     inst.AnimState:PlayAnimation("idle")
     inst.Transform:SetScale(0.3,0.3,0.3)
  end
  if data and data.doll_6 then
     inst:AddTag("doll_6")
     inst.AnimState:SetBank("deerclops")
     inst.AnimState:SetBuild("deerclops_build")
     inst.AnimState:PlayAnimation("idle_loop")
     inst.Transform:SetScale(0.35,0.35,0.35)
  end
  if data and data.doll_7 then
     inst:AddTag("doll_7")
     inst.AnimState:SetBank("rook")
     inst.AnimState:SetBuild("rook_rhino")
     inst.AnimState:PlayAnimation("idle")
     inst.Transform:SetScale(0.3,0.3,0.3)
  end
  if data and data.doll_8 then
     inst:AddTag("doll_8")
     inst.AnimState:SetBank("Pig_King")
     inst.AnimState:SetBuild("Pig_King")
     inst.AnimState:PlayAnimation("idle")
     inst.Transform:SetScale(0.4,0.4,0.4)
  end
  if data and data.doll_9 then
     inst:AddTag("doll_9")
     inst.AnimState:SetBank("goosemoose")
     inst.AnimState:SetBuild("goosemoose_build")
     inst.AnimState:PlayAnimation("idle")
     inst.Transform:SetScale(0.3,0.3,0.3)
  end
  if data and data.doll_10 then
     inst:AddTag("doll_10")
     inst.AnimState:SetBank("dragonfly")
     inst.AnimState:SetBuild("dragonfly_build")
     inst.AnimState:PlayAnimation("idle")
     inst.Transform:SetScale(0.3,0.3,0.3)
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload
    inst:AddComponent("container")
    inst.components.container:SetNumSlots(#slotpos)
    inst.components.container.widgetslotpos = slotpos
    inst.components.container.widgetpos = Vector3(0,150,0)
    inst.components.container.side_align_tip = 160
    inst.components.container.itemtestfn = itemtest
    inst.components.container.widgetbuttoninfo = widgetbuttoninfo
    inst.components.container.canbeopened = false

    即可用鱼竿种百变存钱罐，鼠标左键点存钱罐可打开格子，每天将获得3个黄金的零花钱，在格子中拿取。点格子上方的“Change”按钮，可使存钱罐改换为巨鹿、猪王、熊等造型。百变存钱罐放在家中，可防雷击、照明，靠近会补脑，并且可以吓阻火鸡、兔子等小动物，让它们不敢偷吃你扔在地上的食物。不想要百变存钱罐了，用锤子砸掉即可，里面的黄金会掉在地上。鱼竿在生存选项（画着绳套）下，用2个树枝、2个蛛丝制造




三０九.度假营地（按键盘B键租赁度假营地，各种设施一应俱全，再按B键退房）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_B, function()
    if not inst:HasTag("campsite") then
       if inst.components.inventory:Has("goldnugget", 50) then
          inst.components.inventory:ConsumeByName("goldnugget", 50)
          GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
          inst:AddTag("campsite")
          local pt = inst:GetPosition()
          local pt0 = Vector3(inst.Transform:GetWorldPosition())
          for k = 1, 50 do
              local result_offset = FindValidPositionByFan(1 * 2 * PI, 8.5, 50, function(offset)
                  local x,y,z = (pt0 + offset):Get()
                  local ents = TheSim:FindEntities(x,y,z , 1)
                  return not next(ents) 
              end )
              if result_offset then
                 local wall = SpawnPrefab("wall_wood")
                 wall.Transform:SetScale(0.65,0.65,0.65)
                 MakeObstaclePhysics(wall, .25)
                 wall:RemoveComponent("workable")
                 wall.components.health:SetInvincible(true)
                 wall.persists = false
                 wall:AddTag("tempbuilding")
                 wall.Transform:SetPosition((pt0 + result_offset):Get())
                 wall.components.inspectable.getstatus = function(wall)
                     wall.Transform:SetScale(0.65, 0.1, 0.65)
                     wall.Physics:SetActive(false)
                     GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                     wall:DoTaskInTime(5, function(wall)
                         wall.Transform:SetScale(0.65, 0.65, 0.65)
                         wall.Physics:SetActive(true)
                         GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
                     end )
                 end
              end
          end
          local building1 = SpawnPrefab("tent")
          building1.Transform:SetPosition(pt.x-4, 0, pt.z-4)
          building1.AnimState:SetMultColour(255/255,105/255,0/255,1)
          building1.persists = false
          building1:AddTag("tempbuilding")
          local building2 = SpawnPrefab("ancient_altar")
          building2.Transform:SetPosition(pt.x-4+2.5, 0, pt.z-4-2.5)
          building2.Transform:SetScale(0.45,0.45,0.45)
          building2.persists = false
          building2:AddTag("NOCLICK")
          building2:AddTag("tempbuilding")
          local building3 = SpawnPrefab("lightning_rod")
          building3.Transform:SetPosition(pt.x-4-2.4, 0, pt.z-4+2.4)
          building3.Transform:SetScale(0.7,0.7,0.7)
          building3.persists = false
          building3:AddTag("NOCLICK")
          building3:AddTag("tempbuilding")
          local building4 = SpawnPrefab("ruins_table")
          building4.Transform:SetPosition(pt.x+3.3, 0, pt.z-3.3)
          building4.persists = false
          building4:AddTag("NOCLICK")
          building4:AddTag("tempbuilding")
          local building5 = SpawnPrefab("ruins_chair")
          building5.Transform:SetPosition(pt.x+4.9, 0, pt.z-4.9)
          building5.persists = false
          building5:AddTag("NOCLICK")
          building5:AddTag("tempbuilding")
          local building6 = SpawnPrefab("cookpot")
          building6.Transform:SetPosition(pt.x+4.3, 0, pt.z+4.3)
          building6.Transform:SetScale(0.7,0.7,0.7)
          building6.persists = false
          building6:AddTag("tempbuilding")
          local building7 = SpawnPrefab("icebox")
          building7.Transform:SetPosition(pt.x+4.5-1.3, 0, pt.z+4.5+1.3)
          building7.persists = false
          building7:AddTag("tempbuilding")
          for k = 1, 3 do
              local foodnames = {"butterflymuffin","frogglebunwich","taffy","pumpkincookie","stuffedeggplant","fishsticks","honeynuggets","honeyham","dragonpie","kabobs","mandrakesoup","baconeggs","meatballs","bonestew","perogies","turkeydinner","ratatouille","jammypreserves","fruitmedley","fishtacos","waffles","unagi","flowersalad","icecream","watermelonicle","trailmix","hotchili","guacamole"}
              local foodname = foodnames[math.random(#foodnames)]
              local food = SpawnPrefab(foodname)
              building7.components.container:GiveItem(food)
          end
          local building8 = SpawnPrefab("dragonflychest")
          building8.Transform:SetPosition(pt.x+3.8+3, 0, pt.z-3.8+3)
          building8.persists = false
          building8:AddTag("tempbuilding")
          local lantern = SpawnPrefab("lantern")
          building8.components.container:GiveItem(lantern)
          if not GetSeasonManager():IsSummer() then
             local building9 = SpawnPrefab("firepit")
             building9.Transform:SetPosition(pt.x, 0, pt.z)
             building9:RemoveAllEventCallbacks()
             building9:ListenForEvent("onextinguish", function(building9)
                 if building9.components.cooker then
                    building9:RemoveComponent("cooker")
                 end
                 if building9.components.fueled then
                    building9.components.fueled:InitializeFuelLevel(0)
                 end
             end )
             building9:ListenForEvent("onignite", function(building9)
                 if not building9.components.cooker then
                    building9:AddComponent("cooker")
                 end
             end )
             building9.persists = false
             building9:AddTag("tempbuilding")
             for k = 1, 10 do
                 local log = SpawnPrefab("log")
                 building8.components.container:GiveItem(log)
             end
          else
             local building9 = SpawnPrefab("coldfirepit")
             building9.Transform:SetPosition(pt.x, 0, pt.z)
             building9.persists = false
             building9:AddTag("tempbuilding")
             for k = 1, 10 do
                 local nitre = SpawnPrefab("nitre")
                 building8.components.container:GiveItem(nitre)
             end
          end
          local building10 = SpawnPrefab("firesuppressor")
          building10.Transform:SetPosition(pt.x-4+3, 0, pt.z+4+3)
          building10.Transform:SetScale(0.8,0.8,0.8)
          building10.persists = false
          building10:AddTag("tempbuilding")
          local building11 = SpawnPrefab("eyeturret")
          building11.Transform:SetPosition(pt.x-4+1, 0, pt.z+4+1)
          building11.components.combat:SetAttackPeriod(0.5)
          if building11.components.machine then building11:RemoveComponent("machine") end
          building11.persists = false
          building11:AddTag("tempbuilding")
          local building12 = SpawnPrefab("pumpkin_lantern")
          building12.Transform:SetPosition(pt.x-4-2, 0, pt.z+4-2)
          building12.Transform:SetScale(1.5,1.5,1.5)
          building12.components.inventoryitem.canbepickedup = false
          building12.persists = false
          building12:AddTag("NOCLICK")
          building12:AddTag("tempbuilding")
       end
    else
       GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
       inst:RemoveTag("campsite")
       local pos = Vector3(inst.Transform:GetWorldPosition())
       local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 3000)
       for k,v in pairs(ents) do
           if v:HasTag("tempbuilding") then
              v:Remove()
           end
       end
    end
end )

    即可在身上有50个黄金时，在空旷的地方，按键盘B键租赁度假营地（身上黄金不足时无法租赁），再次按B键退房。度假营地外有围墙保护（鼠标左键点围墙可开门，5秒后自动关门），内有火堆、帐篷、锅、箱子、冰箱、南瓜灯等生活设施，还配有眼睛炮塔、灭火器、避雷针等安全设备，其中箱子里有火堆燃料（夏天为硝石，其余季节为木头），还提供一盏提灯供你外出使用，冰箱里有3份料理（品种随机），让你在野外也可以品尝新鲜美味。由于环保原因，度假营地为临时设施，存档退出后再读档，度假营地将消失，记得之前取出箱子中的私人物品哦




三一０.疯狂躲避球（用浣熊尾巴种躲避球场，在圈内60秒不被球打到，赢50个黄金）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\coontail.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function makecourt(inst)
    local pt = inst:GetPosition()
    local caddie = SpawnPrefab("coontail")
    caddie.Transform:SetPosition(pt.x, pt.y, pt.z)
    caddie.AnimState:SetBank("wilson")
    caddie.AnimState:SetBuild("wes")
    caddie.AnimState:OverrideSymbol("swap_hat", "hat_football", "swap_hat")
    caddie.AnimState:OverrideSymbol("swap_body", "armor_sweatervest", "swap_body")
    caddie.AnimState:Show("HAT")
    caddie.AnimState:Show("HAT_HAIR")
    caddie.AnimState:Hide("HAIR_NOHAT")
    caddie.AnimState:Hide("HAIR")
    caddie.AnimState:Hide("ARM_carry")
    caddie.AnimState:Show("ARM_normal")
    caddie.Transform:SetFourFaced()
    caddie.AnimState:PlayAnimation("idle")
    caddie:RemoveComponent("inventoryitem")
    caddie:RemoveComponent("stackable")
    caddie:RemoveComponent("deployable")
    caddie:RemoveTag("cattoy")
    caddie:AddComponent("workable")
    caddie.components.workable:SetWorkAction(ACTIONS.HAMMER)
    caddie.components.workable:SetWorkLeft(1)
    caddie.components.workable:SetOnFinishCallback(function(caddie)
        SpawnPrefab("collapse_big").Transform:SetPosition(caddie.Transform:GetWorldPosition())
        GetPlayer().SoundEmitter:PlaySound("dontstarve/common/destroy_wood")
        GetPlayer().SoundEmitter:KillSound("beavermusic")
        local pos = Vector3(caddie.Transform:GetWorldPosition())
        local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 10)
        for k,v in pairs(ents) do
            if v:HasTag("border") or v:HasTag("landmine") then
               SpawnPrefab("collapse_big").Transform:SetPosition(v.Transform:GetWorldPosition())
               v:Remove()
            end
        end
        caddie:Remove()
    end )
    caddie:AddComponent("named")
    caddie.components.named:SetName("Pitcher")
    caddie:AddComponent("talker")
    caddie:AddComponent("trader")
    caddie.components.trader:SetAcceptTest(function(caddie, item)
        if not caddie:HasTag("startgame") then
           if GetPlayer().components.inventory:Has("goldnugget", 10) then
              if item.prefab == "goldnugget" then
                 return true
              end
           end
        end
        return false
    end )
    caddie.components.trader.onaccept = function(caddie, giver, item)
        caddie:AddTag("startgame")
        GetPlayer().components.inventory:ConsumeByName("goldnugget", 9)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/HUD/research_available")
        caddie.components.talker:Say("Are you ready ?", 3, false)
        GetPlayer().SoundEmitter:PlaySound("dontstarve/music/music_hoedown", "beavermusic")
        for k = 1, 10 do
            local landmine = SpawnPrefab("coontail")
            landmine.Transform:SetPosition(pt.x+(math.random(7)-math.random(7)), 0, pt.z+(math.random(7)-math.random(7)))
            landmine.AnimState:SetBank("bee_mine")
            landmine.AnimState:SetBuild("bee_mine")
            landmine.AnimState:PlayAnimation("idle")
            landmine.Transform:SetScale(1.2, 1.2, 1.2)
            landmine.AnimState:SetMultColour(255/255,105/255,0/255,1)
            landmine.AnimState:SetBloomEffectHandle("shaders/anim.ksh")
            landmine:RemoveComponent("inventoryitem")
            landmine:RemoveComponent("stackable")
            landmine:RemoveComponent("deployable")
            landmine:RemoveTag("cattoy")
            landmine.persists = false
	    landmine:DoPeriodicTask(0.01, function()
                local pos0 = Vector3(landmine.Transform:GetWorldPosition())
                local ents0 = TheSim:FindEntities(pos0.x,pos0.y,pos0.z, 1)
                for k,v in pairs(ents0) do
                    if v and v:HasTag("player") and not v:HasTag("pain")then
                       v:AddTag("pain")
                       v.sg:GoToState("hit")
                       if v.components.health then v.components.health:DoDelta(-3) end
                       v:DoTaskInTime(0.5, function() v:RemoveTag("pain") end )
                    end
                end
	    end )
            landmine:AddTag("landmine")
        end
        caddie:DoTaskInTime(3, function()
            caddie.components.talker:Say("Go !", 1, false)
            GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
            caddie.task = caddie:DoPeriodicTask(0.4, function(caddie)
                local target = FindEntity(caddie, 9, function(guy) 
                    return guy:HasTag("player")
                end )
                if target then
                   caddie.Transform:SetRotation(GetPlayer().Transform:GetRotation() - 180)
                   caddie.AnimState:PlayAnimation("give")
                   local dodgeball = SpawnPrefab("coontail")
                   dodgeball.AnimState:SetBank("bulb")
                   dodgeball.AnimState:SetBuild("bulb")
                   dodgeball.AnimState:PlayAnimation("idle")
                   dodgeball.Transform:SetPosition(pt.x, 0, pt.z)
                   dodgeball:RemoveComponent("inventoryitem")
                   dodgeball:RemoveComponent("stackable")
                   dodgeball:RemoveComponent("deployable")
                   dodgeball:RemoveTag("cattoy")
                   dodgeball.persists = false
	           dodgeball:AddComponent("complexprojectile")
	           dodgeball.components.complexprojectile.yOffset = 1
                   if math.random()<.5 then
                      local targetpos = target:GetPosition()
                      dodgeball.components.complexprojectile:Launch(targetpos)
                   else
                      dodgeball.components.complexprojectile:Launch(Point(pt.x+(math.random(9)-math.random(9)), 0, pt.z+(math.random(9)-math.random(9))))
                   end
	           dodgeball.components.complexprojectile:SetOnHit(function()
                       SpawnPrefab("small_puff").Transform:SetPosition(dodgeball.Transform:GetWorldPosition())
                       dodgeball:Remove()
                   end )
	           dodgeball:DoPeriodicTask(0.01, function()
                       local pos = Vector3(dodgeball.Transform:GetWorldPosition())
                       local ents = TheSim:FindEntities(pos.x,pos.y,pos.z, 1)
                       for k,v in pairs(ents) do
                           if v and v:HasTag("player") then
                              v.sg:GoToState("hit")
                              if caddie.task then caddie.task:Cancel() caddie.task = nil end
                              if caddie.task2 then caddie.task2:Cancel() caddie.task2 = nil end
                              caddie.Transform:SetRotation( 0 )
                              caddie.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                              caddie:DoTaskInTime(2, function() caddie.AnimState:PlayAnimation("idle") end )
                              caddie.components.talker:Say("Game over !", 3, false)
                              GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                              GetPlayer().SoundEmitter:KillSound("beavermusic")
                              SpawnPrefab("collapse_small").Transform:SetPosition(dodgeball.Transform:GetWorldPosition())
                              dodgeball:Remove()
                              local pos1 = Vector3(caddie.Transform:GetWorldPosition())
                              local ents1 = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 10)
                              for k,v in pairs(ents1) do
                                  if v:HasTag("landmine") then
                                     v:Remove()
                                  end
                              end
                              caddie:RemoveTag("startgame")
                           end
                       end
	           end )
                else
                   if caddie.task then caddie.task:Cancel() caddie.task = nil end
                   if caddie.task2 then caddie.task2:Cancel() caddie.task2 = nil end
                   caddie.Transform:SetRotation( 0 )
                   caddie.AnimState:PlayAnimation("idle_onemanband1_loop",true)
                   caddie:DoTaskInTime(2, function() caddie.AnimState:PlayAnimation("idle") end )
                   caddie.components.talker:Say("Game over !", 3, false)
                   GetPlayer().SoundEmitter:PlaySound("dontstarve/creatures/eyeballturret/shotexplo")
                   GetPlayer().SoundEmitter:KillSound("beavermusic")
                   local pos1 = Vector3(caddie.Transform:GetWorldPosition())
                   local ents1 = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 10)
                   for k,v in pairs(ents1) do
                       if v:HasTag("landmine") then
                          v:Remove()
                       end
                   end
                   caddie:RemoveTag("startgame")
                end
            end )
        end )
        caddie.task2 = caddie:DoTaskInTime(63, function()
            if caddie:HasTag("startgame") then
               if caddie.task then caddie.task:Cancel() caddie.task = nil end
               if caddie.task2 then caddie.task2:Cancel() caddie.task2 = nil end
               caddie.Transform:SetRotation( 0 )
               caddie.AnimState:PlayAnimation("give")
               caddie.components.talker:Say("You win !", 3, false)
               GetPlayer().SoundEmitter:KillSound("beavermusic")
               caddie:StartThread(function()
                   for k = 1, 10 do
                       GetPlayer().SoundEmitter:PlaySound("dontstarve/wilson/equip_item_gold")
                       Sleep(0.15)
                   end
               end )
               for k = 1, 50 do
                   local goldnugget = SpawnPrefab("goldnugget")
                   GetPlayer().components.inventory:GiveItem(goldnugget)
               end
               local pos1 = Vector3(caddie.Transform:GetWorldPosition())
               local ents1 = TheSim:FindEntities(pos1.x,pos1.y,pos1.z, 10)
               for k,v in pairs(ents1) do
                   if v:HasTag("landmine") then
                      v:Remove()
                   end
               end
               caddie:RemoveTag("startgame")
            end
        end )
    end
    caddie:AddTag("caddie")
    for k = 1, 50 do
        local result_offset = FindValidPositionByFan(1 * 2 * PI, 8.5, 50, function(offset)
            local x,y,z = (pt + offset):Get()
            local ents = TheSim:FindEntities(x,y,z , 1)
            return not next(ents) 
        end)
        if result_offset then
           local border = SpawnPrefab("coontail")
           border.Transform:SetPosition((pt + result_offset):Get())
           border.AnimState:SetBank("bulb")
           border.AnimState:SetBuild("bulb")
           border.AnimState:PlayAnimation("idle")
           border.Transform:SetScale(1.2, 1.2, 1.2)
           border.AnimState:SetMultColour(255/255,0/255,0/255,1)
           border.AnimState:SetOrientation( ANIM_ORIENTATION.OnGround )
           border.AnimState:SetLayer( LAYER_BACKGROUND )
           border.AnimState:SetSortOrder( 1 )
           border:RemoveComponent("inventoryitem")
           border:RemoveComponent("stackable")
           border:RemoveComponent("deployable")
           border:RemoveTag("cattoy")
           border:DoPeriodicTask(2, function(shopsign)
               border.AnimState:SetMultColour(0/255,255/255,0/255,1)
               border:DoTaskInTime(1, function() border.AnimState:SetMultColour(255/255,0/255,0/255,1) end )
           end )
           border:AddTag("NOCLICK")
           border:AddTag("border")
        end
    end
end
local function OnDeploy (inst, pt)
    makecourt(inst)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy
local function onsave(inst, data)
    if inst:HasTag("caddie") then
       data.caddie = true
    end
    if inst:HasTag("border") then
       data.border = true
    end
end
local function onload(inst, data)
  if data and data.caddie then
     makecourt(inst)
     inst:Remove()
  end
  if data and data.border then
     inst:Remove()
  end
end
    inst.OnSave = onsave
    inst.OnLoad = onload

    即可在空旷的地上，用浣熊尾巴种躲避球场（拿着1个浣熊尾巴对地面点鼠标右键，如果拿着多个，则不会种出来）。给投手10个黄金玩一次（拿着黄金对投手点鼠标左键），他会不断向你扔球，在不跑出圆圈边界、不被砸到的情况下，坚持60秒，就可赢得50个黄金的奖励。球场内会随机出现障碍物，碰到会被扎伤（减3点血），绕着点跑吧。不想要躲避球场了，用锤子砸投手即可




三一一.快速孵化高鸟蛋（游戏中1小时孵出小高鸟）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将SMALLBIRD_HATCH_TIME = total_day_time * 3, -- must be content for this amount of cumulative time to hatch替换为以下内容：

SMALLBIRD_HATCH_TIME = seg_time*1,

    即可在游戏中1小时孵出小高鸟




三一二.青年高鸟不长大，增加血量及攻击力，喂食可重新认人

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\smallbird.lua文件，

    1.在--print("smallbird - OnGetItemFromPlayer")的下一行插入以下内容：

        local player = GetPlayer()
        if player and player.components.leader then
                player.components.leader:AddFollower(inst)
        end


    2.将inst.components.combat:SetDefaultDamage(TUNING.TEENBIRD_DAMAGE)替换为inst.components.combat:SetDefaultDamage(TUNING.TEENBIRD_DAMAGE*5)


    3.将return TUNING.TEENBIRD_GROW_TIME替换为return TUNING.TEENBIRD_GROW_TIME*1000


    4.将inst.components.health:SetMaxHealth(TUNING.TEENBIRD_HEALTH)替换为inst.components.health:SetMaxHealth(TUNING.TEENBIRD_HEALTH*100)

    即可让青年高鸟18000天不长大，血量30000，攻击力180，如果不认主角了，喂食即可重新认人




三一三.喂自养高鸟产便便

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\smallbird.lua文件，在local function OnEat(inst, food)的下一行插入以下内容：

    if food.components.edible then
       local poo = SpawnPrefab("poop")
       poo.Transform:SetPosition(inst.Transform:GetWorldPosition())		
    end

    即可喂自养高鸟产便便




三一四.自养高鸟不用喂食

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\smallbird.lua文件，在inst:AddComponent("hunger")的下一行插入以下内容：

    inst.components.hunger.burning = false

    即可让自养高鸟不用喂食，因为它不会自动掉饥饿值，除非受伤才须靠喂食补血




三一五.牙齿陷阱不伤害自养高鸟

    用记事本打开游戏目录\data\scripts\prefabs\trap_teeth.lua文件，将if target then替换为if target and not target:HasTag("smallbird") then

    即可让牙齿陷阱不伤害自养高鸟




三一六.主角带肉不被兔人攻击

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\bunnyman.lua文件，将if guy:HasTag("player")替换为if guy:HasTag("monster")

    即可让兔人不攻击带肉的主角，注意替换的只是一句中的一部分，语句其他部分不要动




三一七.快速刷兔人（兔人死后兔房立刻生新兔人）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\rabbithouse.lua文件，将inst.components.spawner:Configure( "bunnyman", TUNING.TOTAL_DAY_TIME)替换为inst.components.spawner:Configure( "bunnyman", TUNING.TOTAL_DAY_TIME*0)

    即可打死一个兔人，兔房就立刻重生一个




三一八.快速刷猪人（猪死后猪房立刻生新猪）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pighouse.lua文件，将inst.components.spawner:Configure( "pigman", TUNING.TOTAL_DAY_TIME*4)替换为inst.components.spawner:Configure( "pigman", TUNING.TOTAL_DAY_TIME*0)

    即可打死一个猪人，猪房就立刻重生一个




三一九.猪人永久跟随

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pigman.lua文件，

    1.将inst.components.follower:AddLoyaltyTime(item.components.edible:GetHunger() * TUNING.PIG_LOYALTY_PER_HUNGER)替换为--inst.components.follower:AddLoyaltyTime(item.components.edible:GetHunger() * TUNING.PIG_LOYALTY_PER_HUNGER)


    2.将inst.components.follower.maxfollowtime = TUNING.PIG_LOYALTY_MAXTIME替换为--inst.components.follower.maxfollowtime = TUNING.PIG_LOYALTY_MAXTIME

    即可让猪人永久跟随，饿了也不会离开。但晚上一样需要给它点火，它会呆在火旁，到白天继续跟随




三二０.猪守卫不主动攻击主角

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\pigman.lua文件，

    1.将return guy:HasTag("character") and not guy:HasTag("guard")替换为return guy:HasTag("character") and not guy:HasTag("guard") and not guy:HasTag("player")


    2.删除下列内容：

        if not GetClock():IsDay() and home and home.components.burnable and home.components.burnable:IsBurning() then
            local lightThief = FindEntity(home, home.components.burnable:GetLargestLightRadius(), function(guy)
                return guy:HasTag("player")
                       and guy.LightWatcher:IsInLight()
                       and not (defenseTarget.components.trader and defenseTarget.components.trader:IsTryingToTradeWithMe(guy) ) 
                       and not (inst.components.trader and inst.components.trader:IsTryingToTradeWithMe(guy) ) 
            end)
            if lightThief then
                return lightThief
            end
        end

    即可让猪守卫不主动攻击主角




三二一.修改敌人生命值

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

猪人	    PIG_HEALTH = 250,
疯猪	    WEREPIG_HEALTH = 350,
猪守卫	    PIG_GUARD_HEALTH = 300,
火鸡	    PERD_HEALTH = 50,
鱼人	    MERM_HEALTH = 250,
海象	    WALRUS_HEALTH = 150,
小海象        LITTLE_WALRUS_HEALTH = 100,
企鹅	    PENGUIN_HEALTH = 150,
发条骑士	    KNIGHT_HEALTH = 300,
主教	    BISHOP_HEALTH = 300,
战车	    ROOK_HEALTH = 300,
远古守护者	    MINOTAUR_HEALTH = 2500,
蜗牛龟	    SLURTLE_HEALTH = 600,
黏糊虫	    SNURTLE_HEALTH = 200,
秃鹫	    BUZZARD_HEALTH = 125,
幽灵	    GHOST_HEALTH = 200,
牛	    BEEFALO_HEALTH = 500,
小牛	    BABYBEEFALO_HEALTH = 300,
大象	    KOALEFANT_HEALTH = 500,
蝙蝠	    BAT_HEALTH = 50,
地面小蜘蛛	    SPIDER_HEALTH = 100,
地面绿蜘蛛	    SPIDER_WARRIOR_HEALTH = 200,
洞穴蜘蛛	    SPIDER_HIDER_HEALTH = 150,
喷射蜘蛛	    SPIDER_SPITTER_HEALTH = 175,
树精	    LEIF_HEALTH = 2000,
巨鹿	    DEERCLOPS_HEALTH = 2000,
蜜蜂	    BEE_HEALTH = 100,
虫子	    WORM_HEALTH = 900,
触手	    TENTACLE_HEALTH = 500,
食人花眼睛	    EYEPLANT_HEALTH = 30,
高鸟	    TALLBIRD_HEALTH = 400,
兔子	    RABBIT_HEALTH = 25,
鼹鼠	    MOLE_HEALTH = 30,
青蛙	    FROG_HEALTH = 100,
狗	    HOUND_HEALTH = 150,
火狗	    FIREHOUND_HEALTH = 100,
冰狗	    ICEHOUND_HEALTH = 100,
蚊子		MOSQUITO_HEALTH = 100,
坎普斯	    KRAMPUS_HEALTH = 200,
尖嘴暗影怪	    TERRORBEAK_HEALTH = 400,
爬行暗影怪	    CRAWLINGHORROR_HEALTH = 300,
鸟	    BIRD_HEALTH = 25,
蜘蛛女王	    SPIDERQUEEN_HEALTH = 1250,
兔人	    BUNNYMAN_HEALTH = 200,
龙虾		ROCKY_HEALTH = 1500,
猴子		MONKEY_HEALTH = 125,
鹿鸭		MOOSE_HEALTH = 3000,
小鸭		MOSSLING_HEALTH = 350,
蜻蜓		DRAGONFLY_HEALTH = 2750,
熊		BEARGER_HEALTH = 3000,
座狼	    WARG_HEALTH = 600,

    修改每行后面的数字，即可修改对应的敌人生命值。如将树精生命值提高1倍，就将LEIF_HEALTH = 2000,替换为LEIF_HEALTH = 4000,即可。如将巨鹿生命值降低10倍，就将DEERCLOPS_HEALTH = 2000,替换为DEERCLOPS_HEALTH = 200,即可




三二二.修改敌人攻击力

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

猪人	    PIG_DAMAGE = 33,
疯猪	    WEREPIG_DAMAGE = 40,
猪守卫	    PIG_GUARD_DAMAGE = 33,
火鸡	    PERD_DAMAGE = 20,
鱼人	    MERM_DAMAGE = 30,
海象	    WALRUS_DAMAGE = 33,
小海象        LITTLE_WALRUS_DAMAGE = 22,
企鹅	    PENGUIN_DAMAGE = 33,
发条骑士	    KNIGHT_DAMAGE = 40,
主教	    BISHOP_DAMAGE = 40,
战车	    ROOK_DAMAGE = 45,
远古守护者	    MINOTAUR_DAMAGE = 100,
蜗牛龟	    SLURTLE_DAMAGE = 25,
黏糊虫	    SNURTLE_DAMAGE = 5,
闪电	    LIGHTNING_DAMAGE = 10,
闪电羊	    LIGHTNING_GOAT_DAMAGE = 25,
秃鹫	    BUZZARD_DAMAGE = 15,
尖刺灌木	    MARSHBUSH_DAMAGE = wilson_health*.02,
仙人掌	    CACTUS_DAMAGE = wilson_health*.04,
幽灵	    GHOST_DAMAGE = wilson_health*0.1,
牛	    BEEFALO_DAMAGE = 34,
大象	    KOALEFANT_DAMAGE = 50,
蝙蝠	   	BAT_DAMAGE = 20,
地面小蜘蛛	    SPIDER_DAMAGE = 20,
地面绿蜘蛛	    SPIDER_WARRIOR_DAMAGE = 20,
洞穴蜘蛛	    SPIDER_HIDER_DAMAGE = 20,
喷射蜘蛛	    SPIDER_SPITTER_DAMAGE_MELEE = 20,
树精	    LEIF_DAMAGE = 150,
巨鹿	    DEERCLOPS_DAMAGE = 150,
蜜蜂	    BEE_DAMAGE = 10,
虫子	    WORM_DAMAGE = 75,
触手	    TENTACLE_DAMAGE = 34,
食人花眼睛	    EYEPLANT_DAMAGE = 20,
高鸟	    TALLBIRD_DAMAGE = 50,
青蛙	    FROG_DAMAGE = 10,
狗	    HOUND_DAMAGE = 20,
火狗	    FIREHOUND_DAMAGE = 30,
冰狗	    ICEHOUND_DAMAGE = 30,
蚊子		MOSQUITO_DAMAGE = 3,
坎普斯	    KRAMPUS_DAMAGE = 50,
尖嘴暗影怪	    TERRORBEAK_DAMAGE = 50,
爬行暗影怪	    CRAWLINGHORROR_DAMAGE = 20,
蜘蛛女王	    SPIDERQUEEN_DAMAGE = 80,
兔人	    BUNNYMAN_DAMAGE = 40,
龙虾		ROCKY_DAMAGE = 75,
猴子		MONKEY_MELEE_DAMAGE = 20,
鹿鸭		MOOSE_DAMAGE = 150,
鹿鸭蛋		MOOSE_EGG_DAMAGE = 10,
小鸭		MOSSLING_DAMAGE = 50,
蜻蜓	    DRAGONFLY_DAMAGE = 150,
熊		BEARGER_DAMAGE = 200,
浣熊		CATCOON_DAMAGE = 25,
座狼	    WARG_DAMAGE = 50,

    修改每行后面的数字，即可修改对应的敌人攻击力。如将树精攻击力提高1倍，就将LEIF_DAMAGE = 150,替换为LEIF_DAMAGE = 300,即可。如将巨鹿攻击力降低10倍，就将DEERCLOPS_DAMAGE = 150,替换为DEERCLOPS_DAMAGE = 15,即可




三二三.修改敌人攻击节奏

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，分别查找以下内容：

猪人	    PIG_ATTACK_PERIOD = 3,
疯猪	    WEREPIG_ATTACK_PERIOD = 2,
猪守卫	    PIG_GUARD_ATTACK_PERIOD = 1.5,
火鸡	    PERD_ATTACK_PERIOD = 3,
鱼人	    MERM_ATTACK_PERIOD = 3,
海象	    WALRUS_ATTACK_PERIOD = 3,
小海象        LITTLE_WALRUS_ATTACK_PERIOD = 3 * 1.7,
企鹅	    PENGUIN_ATTACK_PERIOD = 3,
发条骑士	    KNIGHT_ATTACK_PERIOD = 2,
主教	    BISHOP_ATTACK_PERIOD = 4,
战车	    ROOK_ATTACK_PERIOD = 2,
远古守护者	    MINOTAUR_ATTACK_PERIOD = 2,
蜗牛龟	    SLURTLE_ATTACK_PERIOD = 4,
闪电羊	    LIGHTNING_GOAT_ATTACK_PERIOD = 2,
秃鹫	    BUZZARD_ATTACK_PERIOD = 2,
蝙蝠	    BAT_ATTACK_PERIOD = 1,
地面小蜘蛛	    SPIDER_ATTACK_PERIOD = 3,
地面绿蜘蛛	    SPIDER_WARRIOR_ATTACK_PERIOD = 4,
洞穴蜘蛛	    SPIDER_HIDER_ATTACK_PERIOD = 3,
喷射蜘蛛	    SPIDER_SPITTER_ATTACK_PERIOD = 5,
树精	    LEIF_ATTACK_PERIOD = 3,
巨鹿	    DEERCLOPS_ATTACK_PERIOD = 3,
蜜蜂	    BEE_ATTACK_PERIOD = 2,
虫子	    WORM_ATTACK_PERIOD = 4,
触手	    TENTACLE_ATTACK_PERIOD = 2,
食人花眼睛	    EYEPLANT_ATTACK_PERIOD = 1,
高鸟	    TALLBIRD_ATTACK_PERIOD = 2,
青蛙	    FROG_ATTACK_PERIOD = 1,
狗	    HOUND_ATTACK_PERIOD = 2,
火狗	    FIREHOUND_ATTACK_PERIOD = 2,
冰狗	    ICEHOUND_ATTACK_PERIOD = 2,
蚊子		MOSQUITO_ATTACK_PERIOD = 7,
坎普斯	    KRAMPUS_ATTACK_PERIOD = 1.2,
尖嘴暗影怪	    TERRORBEAK_ATTACK_PERIOD= 1.5,
爬行暗影怪	    CRAWLINGHORROR_ATTACK_PERIOD= 2.5,
兔人	    BUNNYMAN_ATTACK_PERIOD = 2,
猴子		MONKEY_ATTACK_PERIOD = 2,
鹿鸭		MOOSE_ATTACK_PERIOD = 3,
小鸭		MOSSLING_ATTACK_PERIOD = 3,
蜻蜓	    DRAGONFLY_ATTACK_PERIOD = 2.5,
熊		BEARGER_ATTACK_PERIOD = 3,
浣熊		CATCOON_ATTACK_PERIOD = 2,
蜘蛛女王	    SPIDERQUEEN_ATTACKPERIOD = 3,
座狼	    WARG_ATTACKPERIOD = 3,

    修改每行后面的数字，即可修改对应敌人的攻击节奏，数字越小，攻击节奏越快。如将猪人攻击节奏提高1倍，就将PIG_ATTACK_PERIOD = 3,替换为PIG_ATTACK_PERIOD = 1.5,即可。如将蝙蝠攻击节奏降低1倍，就将BAT_ATTACK_PERIOD = 1,替换为BAT_ATTACK_PERIOD = 2,即可




三二四.打地面蜘蛛巢掉3个蜘蛛卵

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\spiderden.lua文件，

    1.将inst.components.lootdropper:SetLoot({ "silk","silk"})替换为inst.components.lootdropper:SetLoot({ "silk","silk", "spidereggsack", "spidereggsack", "spidereggsack"})


    2.将inst.components.lootdropper:SetLoot({ "silk","silk","silk","silk"})替换为inst.components.lootdropper:SetLoot({ "silk","silk","silk","silk", "spidereggsack", "spidereggsack", "spidereggsack"})


    3.将inst.components.lootdropper:SetLoot({ "silk","silk","silk","silk","silk","silk", "spidereggsack"})替换为inst.components.lootdropper:SetLoot({ "silk","silk","silk","silk","silk","silk", "spidereggsack", "spidereggsack", "spidereggsack"})

    即可无论打大、中、小三种地面蜘蛛巢都掉3个蜘蛛卵，游戏原来只有大蜘蛛巢才有1个蜘蛛卵，很容易让蜘蛛绝种




三二五.增加树精出现概率

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\evergreens.lua文件，将if math.random() <= TUNING.LEIF_PERCENT_CHANCE then替换为if math.random() <= TUNING.LEIF_PERCENT_CHANCE*100 then

    即可增加树精出现概率100倍，调整*100为你想要的倍数




三二六.除掉全部企鹅及企鹅冰（世界从此清静了）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("penguinspawner")替换为--inst:AddComponent("penguinspawner")

    即可除掉全部企鹅及企鹅冰，存档中已经上岸的企鹅请手动消灭，企鹅不会再生




三二七.地面不长食人花

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("lureplantspawner")替换为--inst:AddComponent("lureplantspawner")

    即可让地面不长讨厌的食人花，基地党可以安心了




三二八.下雨不掉青蛙

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("frograin")替换为--inst:AddComponent("frograin")

    即可在下雨时，天上不掉讨厌的青蛙




三二九.下雨不长花

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("flowerspawner")替换为--inst:AddComponent("flowerspawner")

    即可在下雨时，地上不会不断长花，减少游戏卡顿




三三０.打死火狗不着火

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\hound.lua文件，将inst.components.burnable:Ignite()替换为--inst.components.burnable:Ignite()

    即可打死火狗不着火，大片的庄稼再也不怕付之一炬了




三三一.不出现猎犬攻击

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("hounded")替换为--inst:AddComponent("hounded")

    即可不出现猎犬定时攻击，海象的冰狗还会存在，不要担心没有犬牙




三三二.用木板种鱼人房

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\boards.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("mermhouse").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用木板种鱼人房。不要与“生鲜售卖机”一同修改




三三三.用犬牙种海象窝

    用记事本打开游戏目录\data\scripts\prefabs\houndstooth.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("walrus_camp").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用犬牙种海象窝




三三四.海象窝可烧掉

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\walrus_camp.lua文件，在inst:AddComponent("inspectable")的下一行插入MakeLargeBurnable(inst)

    即可烧掉海象窝




三三五.用铥矿碎片种猴子桶

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\thulecite_pieces.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("monkeybarrel").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用铥矿碎片种猴子桶。不要与“小冰山”一同修改




三三六.吃触手皮周围生触手

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\tentaclespots.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

function tentaclesfn(inst, reader)
    local pt = Vector3(reader.Transform:GetWorldPosition())
    local numtentacles = 9
    reader:StartThread(function()
        for k = 1, numtentacles do
            local theta = math.random() * 2 * PI
            local radius = math.random(9, 24)
            local result_offset = FindValidPositionByFan(theta, radius, 12, function(offset)
                local x,y,z = (pt + offset):Get()
                local ents = TheSim:FindEntities(x,y,z , 1)
                return not next(ents) 
            end)
            if result_offset then
                local tentacle = SpawnPrefab("tentacle")
                tentacle.Transform:SetPosition((pt + result_offset):Get())
                GetPlayer().components.playercontroller:ShakeCamera(reader, "FULL", 0.2, 0.02, .25, 40)
                local fx = SpawnPrefab("splash_ocean")
                local pos = pt + result_offset
                fx.Transform:SetPosition(pos.x, pos.y, pos.z)
                tentacle.sg:GoToState("attack_pre")
            end
            Sleep(.33)
        end
    end)
    return true
end
    inst:AddComponent("edible")
    inst.components.edible:SetOnEatenFn(tentaclesfn)

    即可吃触手皮周围生9个触手，这不是用来保护主角的，而是为了不让触手绝种，所以不要在基地周围吃触手皮




三三七.用蜂蜜种野生蜂窝

    用记事本打开游戏目录\data\scripts\prefabs\honey.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("beehive").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用蜂蜜种野生蜂窝




三三八.用蜂刺种杀人蜂窝

    用记事本打开游戏目录\data\scripts\prefabs\stinger.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("wasphive").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用蜂刺种杀人蜂窝，种下赶快跑啊。不要与“人工女友”一同修改




三三九.用猪皮种猪火炬

    用记事本打开游戏目录\data\scripts\prefabs\pigskin.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("pigtorch").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用猪皮种猪火炬，当主角不与火炬在同一屏时，会生出猪守卫。不要与“霸王盔”一同修改




三四０.增大巨鹿出现概率

    用记事本打开游戏目录\data\DLC0001\scripts\tuning_override.lua文件，将下列内容：

										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", false)
										basehassler:OverrideAttackChance("DEERCLOPS", .33)
									elseif difficulty == "often" then
										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", false)
										basehassler:OverrideAttackChance("DEERCLOPS", 1.1)
									elseif difficulty == "always" then
										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", true)
										basehassler:OverrideAttackChance("DEERCLOPS", 1.1)

    替换为：

										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", false)
										basehassler:OverrideAttackChance("DEERCLOPS", 1.1)
									elseif difficulty == "often" then
										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", false)
										basehassler:OverrideAttackChance("DEERCLOPS", 2.1)
									elseif difficulty == "always" then
										basehassler:OverrideAttacksPerSeason("DEERCLOPS", 1)
										basehassler:OverrideAttackDuringOffSeason("DEERCLOPS", true)
										basehassler:OverrideAttackChance("DEERCLOPS", 3.1)

    即可增大巨鹿出现概率




三四一.让游戏中的一天更漫长（1天从真实世界的8分钟修改为16分钟）

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将local seg_time = 30替换为local seg_time = 60

    即可使游戏中的1天从真实世界的8分钟延长为16分钟




三四二.修改白天、黑夜、傍晚占一天的比例

    用记事本打开游戏目录\data\DLC0001\scripts\components\seasonmanager.lua文件，

    1.秋季白天有14个小时：将self.autumnsegs = {day=8,  dusk=6,  night=2}替换为self.autumnsegs = {day=12,  dusk=2,  night=2}


    2.冬季白天有14个小时：将self.wintersegs = {day=5,  dusk=5,  night=6}替换为self.wintersegs = {day=12,  dusk=2,  night=2}


    3.春季白天有14个小时：将self.springsegs = {day=5,  dusk=8,  night=3}替换为self.springsegs = {day=12,  dusk=2,  night=2}


    4.夏季白天有14个小时：将self.summersegs = {day=11, dusk=1,  night=4}替换为self.summersegs = {day=12, dusk=2,  night=2}

    可根据需要自行调节day（白天）、dusk（黑夜）、night（傍晚）后面的数字（小时数），得到想要的时间比例




三四三.温暖之国（最低气温10度，最高气温25度）

    用记事本打开游戏目录\data\DLC0001\scripts\components\temperature.lua文件，将下列内容：

	self.maxtemp = TUNING.MAX_ENTITY_TEMP
	self.mintemp = TUNING.MIN_ENTITY_TEMP

    替换为：

	self.maxtemp = 25
	self.mintemp = 10

    即可将最低气温设定为10度（原来为负20度），最高气温设定为25度（原来为90度），让主角不会冻伤或中暑




三四四.夏季建筑、植物不自燃

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将WILDFIRE_THRESHOLD = 80,替换为WILDFIRE_THRESHOLD = 800,

    即可让建筑、植物在夏季不自燃




三四五.夏天植物、农田不枯萎

    1.草不枯萎：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\grass.lua文件，将inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)替换为--inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)


    2.树苗不枯萎：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\sapling.lua文件，将inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)替换为--inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)


    3.果树丛不枯萎：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\berrybush.lua文件，将inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)替换为--inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.pickable:MakeWitherable() end)


    4.农田不枯萎：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\plant_normal.lua文件，将inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.crop:MakeWitherable() end)替换为--inst.makewitherabletask = inst:DoTaskInTime(TUNING.WITHER_BUFFER_TIME, function(inst) inst.components.crop:MakeWitherable() end)

    即可让植物、农田在夏天不枯萎




三四六.停止刮风（让游戏不再因刮风而卡顿）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，将inst:AddComponent("worldwind")替换为--inst:AddComponent("worldwind")

    即可停止游戏中的刮风设定，好处是游戏不再卡顿，坏处是滚草将停在原地




三四七.闪电不伤主角

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将inst:AddComponent("playerlightningtarget")替换为--inst:AddComponent("playerlightningtarget")

    即可让主角不被闪电劈中




三四八.扩大地图尺寸

    用记事本打开游戏目录\data\DLC0001\scripts\map\forest_map.lua文件，将local min_size = 350替换为local min_size = 800

    即可在开新存档时，将默认地图尺寸（World按钮下的World size的Default选项）放大2倍以上，800的数字可自行调整，注意地图尺寸越大，对计算机配置要求越高




三四九.游戏不自动保存

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将inst:AddComponent("autosaver")替换为--inst:AddComponent("autosaver")

    即可不让游戏自动保存




三五０.手动存档（游戏中按F5保存）

    用记事本打开游戏目录\data\scripts\main.lua文件，在TranslateStringTable( STRINGS )的下一行插入TheInput:AddKeyUpHandler(KEY_F5, function() SaveGameIndex:SaveCurrent() end )

    即可在游戏中按F5手动存档，卡一下就保存完了




三五一.快速读档（游戏中按F6快速读取之前存档）

    用记事本打开游戏目录\data\scripts\main.lua文件，在TranslateStringTable( STRINGS )的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_F6, function() StartNextInstance({reset_action=RESET_ACTION.LOAD_SLOT, save_slot = SaveGameIndex:GetCurrentSaveSlot()}, true) end )

    即可在游戏中随时按F6快速读取之前存档，主要用在主角临死的一刻。按下F6后游戏会卡一下，是在读取中




三五二.死亡自动读档（死亡不删档）

    用记事本打开游戏目录\data\DLC0001\scripts\gamelogic.lua文件，将下列内容：

	    local playtime = GetTimePlaying()
	    playtime = math.floor(playtime*1000)
	    SetTimingStat("time", "scenario", playtime)
	    SendTrackingStats()
	    local days_survived, start_xp, reward_xp, new_xp, capped = CalculatePlayerRewards(wilson)
	    
	    ProfileStatsSet("xp_gain", reward_xp)
	    ProfileStatsSet("xp_total", new_xp)
	    SubmitCompletedLevel() --close off the instance

	    wilson.components.health.invincible = true

	    wilson.profile:Save(function()
		    SaveGameIndex:EraseCurrent(function() 
				    scheduler:ExecuteInTime(3, function() 
						TheFrontEnd:PushScreen(DeathScreen(days_survived, start_xp, nil, capped))
					end)
		    	end)
		    end)

    替换为：

       StartNextInstance({reset_action=RESET_ACTION.LOAD_SLOT, save_slot = SaveGameIndex:GetCurrentSaveSlot()}, true)

    即可死亡自动读档，死后游戏会卡一会儿，不要动，是在读档




三五三.彩色物品栏（每次进游戏物品栏底图呈不同颜色）

    用记事本打开游戏目录\data\scripts\widgets\inventorybar.lua文件，在self.bg = self.root:AddChild(Image(HUD_ATLAS, "inventory_bg.tex"))的下一行插入以下内容：

local colours=
{
    {255/255,0/255,0/255},
    {0/255,255/255,0/255},
    {255/255,255/255,255/255},
    {79/255,153/255,68/255},
    {35/255,105/255,235/255},
    {109/255,50/255,163/255},
}
    local bgcolour = math.random(#colours)
    self.bg:SetTint(colours[bgcolour][1],colours[bgcolour][2],colours[bgcolour][3],1)

    即可在每次进游戏时，物品栏底图呈现不同颜色，让你带着不同心情游戏




三五四.纯净的屏幕（按键盘Enter键隐藏制造栏、背包栏等标识）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_ENTER, function() GetPlayer().HUD:Toggle() end )

    即可按键盘Enter键隐藏制造栏、物品栏、表、背包栏等所有标识，让你的视野更宽阔，更加投入饥荒的世界，再次按Enter键显示标识




三五五.隐藏地图图标（按键盘M键隐藏地图图标，再按M键恢复）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("resurrectable")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_M, function()
    if not inst:HasTag("nomap") then
       inst:AddTag("nomap")
       inst.HUD.controls.mapcontrols.minimapBtn:Hide()
       inst.HUD.controls.mapcontrols.rotleft:Hide()
       inst.HUD.controls.mapcontrols.rotright:Hide()
    else
       inst:RemoveTag("nomap")
       inst.HUD.controls.mapcontrols.minimapBtn:Show()
       inst.HUD.controls.mapcontrols.rotleft:Show()
       inst.HUD.controls.mapcontrols.rotright:Show()
    end
end )

    即可按键盘M键隐藏地图、左右方向图标，以免遮挡视线，再按M键恢复




三五六.地图不显示已探索区域（按键盘Ctrl+2关闭地图显示，再按一次解锁）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("resurrectable")下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_2, function()
    if TheInput:IsKeyDown(KEY_CTRL) then
       local map = TheSim:FindFirstEntityWithTag("minimap")
       if not inst:HasTag("mapoff") then
          inst:AddTag("mapoff")
          map.MiniMap:ClearRevealedAreas(true)
       else
          inst:RemoveTag("mapoff")
          map.MiniMap:ClearRevealedAreas(false)
       end
    end
end )

    即可按键盘Ctrl+2，让小地图全黑，并且不再显示已探索区域，增加探险的难度。再次按Ctrl+2，可解锁小地图显示已探索区域




三五七.定格边框（按键盘P键定格边框，主角可以跑到画面任意位置）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playercontroller")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_P, function() if not TheCamera.cutscene == false then TheCamera:CutsceneMode(false) else TheCamera:CutsceneMode(true) end end )

    即可按键盘P键定格边框，主角可以跑到画面任意位置，包括画外，让拍照（截图）时有更好的构图，再次按P键解锁边框




三五八.冒险视角（按键盘F7键切换30度视角，再按一次返回）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，在inst:AddComponent("playeractionpicker")的下一行插入以下内容：

TheInput:AddKeyUpHandler(KEY_F7, function()
    if not inst:HasTag("goodangle") then
       inst:AddTag("goodangle")
       TheCamera.maxdistpitch = 30
    else
       inst:RemoveTag("goodangle")
       if not GetWorld():IsCave() then
          TheCamera.maxdistpitch = 60
       else
          TheCamera.maxdistpitch = 40
       end
    end
end )

    即可在游戏中按键盘F7键，将游戏视角切换为30度冒险视角（视野更远），再次按F7键返回原本视角




三五九.修复游戏Mods按钮（解决按Mods按钮卡住问题）

    用记事本打开游戏目录\data\DLC0001\scripts\screens\modsscreen.lua文件，

    1.在self.modlinkbutton:SetOnClick( function() self:MoreMods() end )的下一行插入self.cb(true)


    2.将下列内容：

function ModsScreen:StartWorkshopUpdate()
	if TheSim:UpdateWorkshopMods( function() self:WorkshopUpdateComplete() end ) then
		self.updatetask = scheduler:ExecutePeriodic(0, self.ShowWorkshopStatus, nil, 0, self )
	else
		self:WorkshopUpdateComplete()
	end
end

    替换为：

function ModsScreen:StartWorkshopUpdate()
		self:WorkshopUpdateComplete()
end

    即可在主菜单点Mods按钮，直接显示mod信息，如果没有安装mod，则不会进入mod模式




三六０.无限刷洞穴（用石砖种洞穴入口，用铲子可挖掉洞穴入口）

    1.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cutstone.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("cave_entrance").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy


    2.用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cave_entrance.lua文件，将inst:RemoveComponent("workable")替换为以下内容：

local function dig_up(inst, chopper)
    inst:Remove()
end
    inst:AddComponent("workable")
    inst.components.workable:SetWorkAction(ACTIONS.DIG)
    inst.components.workable:SetOnFinishCallback(dig_up)
    inst.components.workable:SetWorkLeft(1)

    即可无限刷洞穴，在地面用石砖种洞穴入口将下到洞穴层，在洞穴层用石砖种洞穴入口将下到远古层，注意不要在远古层再种洞穴入口了。不需要该洞穴时，用铲子将洞口铲掉即可




三六一.洞穴不发生地震

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\cave.lua文件，将inst:AddComponent("quaker")替换为--inst:AddComponent("quaker")

    即可让洞穴不发生地震




三六二.地面也发生地震

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\forest.lua文件，在inst:AddComponent("hunter")的下一行插入inst:AddComponent("quaker")

    即可让地面也发生地震




三六三.地震掉落物品不摔碎

    用记事本打开游戏目录\data\DLC0001\scripts\components\quaker.lua文件，将inst:Remove()替换为--inst:Remove()

    即可让地震掉落的石头、黄金等物品不摔碎




三六四.无限挖坟刷宝物

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\mound.lua文件，将下列内容：

    inst.AnimState:PlayAnimation("dug")
    inst:RemoveComponent("workable")

    替换为：

    --inst.AnimState:PlayAnimation("dug")
    inst.components.workable:SetWorkLeft(1)

    即可无限挖坟刷宝物




三六五.快速找到传送机零件（转送机零件在地图上显示）

    用记事本打开游戏目录\data\scripts\prefabs\teleportato_parts.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    local minimap = inst.entity:AddMiniMapEntity()
    minimap:SetIcon( "teleportato.png" )

    即可在地图上看到传送机零件的位置，显示为传送机底座的图标




三六六.杀小动物不受惩罚（小偷坎普斯不出现）

    用记事本打开游戏目录\data\DLC0001\scripts\prefabs\player_common.lua文件，将inst:AddComponent("kramped")替换为--inst:AddComponent("kramped")

    即可杀小动物不出现小偷坎普斯




三六七.简单制造铃（用1个木头、1个黄金制造铃）

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，将下列内容：

Recipe("bell", {Ingredient("glommerwings", 1), Ingredient("glommerflower", 1)}, RECIPETABS.MAGIC,  TECH.LOST)

    替换为：

Recipe("bell", {Ingredient("log", 1), Ingredient("goldnugget", 1)}, RECIPETABS.MAGIC, TECH.NONE)

    即可不用图纸就能解锁召唤巨人的铃，且只用1个木头、1个黄金制造




三六八.延长燃料燃烧时间

    用记事本打开游戏目录\data\DLC0001\scripts\tuning.lua文件，将以下内容：
	    TINY_FUEL = seg_time*.25,
	    SMALL_FUEL = seg_time * .5,
	    MED_FUEL = seg_time * 1.5,
	    MED_LARGE_FUEL = seg_time * 3,
	    LARGE_FUEL = seg_time * 6,

    替换为：

	    TINY_FUEL = seg_time*1.25,
	    SMALL_FUEL = seg_time * 2.5,
	    MED_FUEL = seg_time * 7.5,
	    MED_LARGE_FUEL = seg_time * 12,
	    LARGE_FUEL = total_day_time*1,

    游戏中seg_time（小时）数不要超过16，会跳出。如果想改超过一天就用total_day_time*1,这样的格式




三六九.使不能堆叠的物品可堆叠

    打开游戏目录\data\DLC0001\scripts\prefabs文件夹，其中的.lua文件为游戏中的物品。举例让牛角可堆叠：用记事本打开游戏目录\data\scripts\prefabs\horn.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("stackable")
    inst.components.stackable.maxsize = TUNING.STACK_SIZE_SMALLITEM

    即可实现不能堆叠的物品可堆叠




三七０.使不可燃物品可作燃料（烧毁不用的道具）

    打开游戏目录\data\DLC0001\scripts\prefabs文件夹，其中的.lua文件为游戏中的物品。举例让普通背包可作燃料被烧毁：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\backpack.lua，在inst:AddComponent("inspectable")的下一行插入以下内容：

    inst:AddComponent("fuel")
    inst.components.fuel.fuelvalue = TUNING.LARGE_FUEL

    即可让不可燃物品可以添在火里作燃料，方便烧毁不用的道具




三七一.让物品不腐坏

    打开游戏目录\data\DLC0001\scripts\prefabs文件夹（部分物品在游戏目录\data\DLC0001\scripts\prefabs文件夹下），其中的.lua文件为游戏中的物品。用记事本打开会腐坏物品的文件，在所有包含perishable的语句前加--即可让该物品不腐坏，注意不要遗漏，否则游戏会跳出。

    例如修改让鸡蛋不腐坏：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\egg.lua文件，依次查找下列内容：

        inst:AddComponent("perishable")
        inst.components.perishable:SetPerishTime(TUNING.PERISH_FAST)
        inst.components.perishable:StartPerishing()
        inst.components.perishable.onperishreplacement = "rottenegg"
    inst.components.perishable:SetPerishTime(TUNING.PERISH_MED)
    inst.components.perishable:SetPerishTime(TUNING.PERISH_FAST)
    inst.components.perishable.onperishreplacement = "spoiled_food"   
 
    在每行前面加--后，变为下列内容：

        --inst:AddComponent("perishable")
        --inst.components.perishable:SetPerishTime(TUNING.PERISH_FAST)
        --inst.components.perishable:StartPerishing()
        --inst.components.perishable.onperishreplacement = "rottenegg"
    --inst.components.perishable:SetPerishTime(TUNING.PERISH_MED)
    --inst.components.perishable:SetPerishTime(TUNING.PERISH_FAST)
    --inst.components.perishable.onperishreplacement = "spoiled_food"   

    即可让鸡蛋不腐坏。下列为部分会腐坏的物品文件名：

    butter.lua	黄油
    butterflywings.lua	蝴蝶翅膀
    egg.lua	鸡蛋
    froglegs.lua	蛙腿
    hambat.lua	火腿短棍
    honey.lua	蜂蜜
    mushrooms.lua	蘑菇
    petals.lua	花瓣
    petals_evil.lua	噩梦花瓣
    seeds.lua	种子
    fish.lua	鱼
    veggies.lua	蔬菜
    meats.lua	肉
    lightbulb	荧光果




三七二.用物品种物品

    打开游戏目录\data\DLC0001\scripts\prefabs文件夹，其中的.lua文件为游戏中的物品。举例用木头种树精：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\log.lua文件，在inst:AddComponent("inspectable")的下一行插入以下内容：

local function OnDeploy (inst, pt)
    SpawnPrefab("leif").Transform:SetPosition(pt.x, pt.y, pt.z)
    inst.components.stackable:Get():Remove()
end
    inst:AddComponent("deployable")
    inst.components.deployable.ondeploy = OnDeploy

    即可用木头种树精，将其中leif（树精）替换为其他物品，即可用木头种其他物品，物品名称见“常用物品中英文名称”。如果你用来种物品的种子物品是不可堆叠的，如牛角等，就将其中inst.components.stackable:Get():Remove()替换为inst:Remove()




三七三.修改主角开局携带物品（举例开局携带3个鸡蛋火腿）

    1.威尔逊：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wilson.lua文件，将return MakePlayerCharacter("wilson", prefabs, assets, fn)替换为return MakePlayerCharacter("wilson", prefabs, assets, fn, {"baconeggs", "baconeggs", "baconeggs",})


    2.麦斯威尔：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\waxwell.lua文件，在"waxwelljournal",的下一行插入以下内容：

	"baconeggs",
	"baconeggs",
	"baconeggs",


    3.温蒂：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wendy.lua文件，在"abigail_flower",的下一行插入以下内容：

	"baconeggs",
	"baconeggs",
	"baconeggs",


    4.伍迪：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\woodie.lua文件，在"lucy",的下一行插入以下内容：

	"baconeggs",
	"baconeggs",
	"baconeggs",


    5.韦斯：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wes.lua文件，在"balloons_empty",的下一行插入以下内容：

	"baconeggs",
	"baconeggs",
	"baconeggs",


    6.图书管理员：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wickerbottom.lua文件，将return MakePlayerCharacter("wickerbottom", nil, assets, fn, {"papyrus", "papyrus"})替换为return MakePlayerCharacter("wickerbottom", nil, assets, fn, {"papyrus", "papyrus", "baconeggs", "baconeggs","baconeggs",})


    7.薇洛：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\willow.lua文件，将下列内容：

local start_inv = 
{
	"lighter",
}

    替换为：

local start_inv = 
{
	"lighter",
	"baconeggs",
	"baconeggs",
	"baconeggs",
}


    8.沃尔夫冈：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wolfgang.lua文件，将return MakePlayerCharacter("wolfgang", nil, assets, fn)替换为return MakePlayerCharacter("wolfgang", nil, assets, fn, {"baconeggs", "baconeggs", "baconeggs",})


    9.wx78：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wx78.lua文件，将return MakePlayerCharacter("wx78", prefabs, assets, fn)替换为return MakePlayerCharacter("wx78", prefabs, assets, fn, {"baconeggs", "baconeggs", "baconeggs",})


    10.瓦丝格雷斯：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\wathgrithr.lua文件，将下列内容：

local start_inv = 
{
	"spear_wathgrithr",	
	"wathgrithrhat",
	"meat",
	"meat",
	"meat",
	"meat",
}

    替换为：

local start_inv = 
{
	"spear_wathgrithr",	
	"wathgrithrhat",
	"meat",
	"meat",
	"meat",
	"meat",
	"baconeggs",
	"baconeggs",
	"baconeggs",
}


    11.韦伯：用记事本打开游戏目录\data\DLC0001\scripts\prefabs\webber.lua文件，将下列内容：

local start_inv = 
{
	"spidereggsack",
	"monstermeat",
	"monstermeat",
}

    替换为：

local start_inv = 
{
	"spidereggsack",
	"monstermeat",
	"monstermeat",
	"baconeggs",
	"baconeggs",
	"baconeggs",
}

    即可修改主角开局携带物品，主角原来携带的专属物品（如伍迪的斧子等）不变。如果想携带4个鸡蛋火腿，就让替换或插入的语句中有4个"baconeggs",即可。可以将其中baconeggs（鸡蛋火腿）改为其他想要的物品（名称见本修改技巧最后一项“常用物品中英文名称”）




三七四.修改制作道具的配方

    用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，以营火（campfire）配方为例：

Recipe("campfire", {Ingredient("cutgrass", 3),Ingredient("log", 2)}, RECIPETABS.LIGHT, TECH.NONE, "campfire_placer")

配方("营火", {成分("草", 3),成分("木头", 2)}, 制造选项.照明, 科技.0, "放置营火")

其中Recipe（配方）后面的campfire（营火）为道具名，Ingredient（成分）后面的cutgrass（草）和3分别是制造道具的材料和数量，还有另一个Ingredient（成分）后面的log（木头）和2也是。只须将材料替换或删掉，及改变数量即可修改制作道具的配方。


    举例1（简化所用材料）：将寒冬背心配方（蓝色象鼻1、蛛丝8、牛毛2）简化为5个草。用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，将以下内容：

Recipe("trunkvest_winter", {Ingredient("trunk_winter", 1),Ingredient("silk", 8), Ingredient("beefalowool", 2)}, RECIPETABS.DRESS,  TECH.SCIENCE_TWO)

    替换为：

Recipe("trunkvest_winter", {Ingredient("cutgrass", 5)}, RECIPETABS.DRESS,  TECH.SCIENCE_TWO)

    即可在游戏中仅以5个草制作寒冬背心


    举例2（添加制造物品）：用1个黄金制造曼德拉草。用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("purplegem", {Ingredient("redgem",1), Ingredient("bluegem", 1)}, RECIPETABS.REFINE, TECH.MAGIC_TWO)下一行插入以下内容：

Recipe("mandrake", {Ingredient("goldnugget", 1)}, RECIPETABS.REFINE,  TECH.SCIENCE_ONE)

    即可在精炼项目下，增加用1个黄金制造曼德拉草


    举例3（一次制造多个物品）：用1个草制造100个木炭。用记事本打开游戏目录\data\DLC0001\scripts\recipes.lua文件，在Recipe("purplegem", {Ingredient("redgem",1), Ingredient("bluegem", 1)}, RECIPETABS.REFINE, TECH.MAGIC_TWO)下一行插入以下内容：

Recipe("charcoal", {Ingredient("cutgrass", 1)}, RECIPETABS.REFINE,  TECH.NONE,nil,nil,nil,100)

    即可在精炼项目下，增加用1个草制造100个木炭


    备注：全部道具配方翻译

--LIGHT（照明）
campfire（营火）：cutgrass（草）3、log（木）2
firepit（石头营火）：log（木）2、rocks（石）12
torch（火炬）：cutgrass（草）2、twigs（树枝）2
coldfire（冷火）：cutgrass（草）3、nitre（硝石）2
coldfirepit（石头冷火）：nitre（硝石）2、cutstone（石砖）5、transistor（晶体管）2
minerhat（矿工帽）：strawhat（草帽）1、goldnugget（黄金）1、fireflies（萤火虫）1
molehat（鼹鼠帽）：mole（鼹鼠）2、transistor（晶体管）2、wormlight（虫子果）1
pumpkin_lantern（南瓜灯）：pumpkin（南瓜）1、fireflies（萤火虫）1
lantern（提灯）：twigs（树枝）3、rope（绳子）2、lightbulb（荧光果）2


--STRUCTURES（建造）
treasurechest（木箱）：boards（木板）3
homesign（标牌）：boards（木板）1
wall_hay_item（干草墙）：cutgrass（草）4、twigs（树枝）2
wall_wood_item（木墙）：boards（木板）2、rope（绳子）1
wall_stone_item（石墙）：cutstone（石砖）2
pighouse（猪人房）：boards（木板）4、cutstone（石砖）3、pigskin（猪皮）4
rabbithouse（兔子房）：boards（木板）4、carrot（胡萝卜）10、manrabbit_tail（兔人尾巴）4
birdcage（鸟笼）：papyrus（纸）2、goldnugget（黄金）6、seeds（种子）2
turf_road（卵石路）：turf_rocky（岩石草皮）1、boards（木板）1
turf_woodfloor（木地板）：boards（木板）1
turf_checkerfloor（棋盘地板）：marble（大理石）1
turf_carpetfloor（地毯地板）：boards（木板）1、beefalowool（牛毛）1
pottedfern（盆栽植物）：foliage（叶子）5、slurtle_shellpieces（蜗牛壳碎片）1
dragonflychest（蜻蜓箱子）：dragon_scales（蜻蜓鳞片）1、boards（木板）4、goldnugget（黄金）10


--FARM（种植）
slow_farmplot（一般农田）：cutgrass（草）8、poop（便便）4、log（木）4
fast_farmplot（高级农田）：cutgrass（草）10、poop（便便）6、rocks（石）4
fertilizer（化肥）：poop（便便）3、boneshard（硬骨头）2、log（木）4
beebox（蜂箱）：boards（木板）2、honeycomb（蜂巢）1、bee（蜜蜂）4
meatrack（晾肉架）：twigs（树枝）3、charcoal（木炭）2、rope（绳子）3
cookpot（煮锅）：cutstone（石砖）3、charcoal（木炭）6、twigs（树枝）6
icebox（冰箱）：goldnugget（黄金）2、gears（齿轮）1、cutstone（石砖）1


--SURVIVAL（生存）
trap（陷阱）：twigs（树枝）2、cutgrass（草）6
birdtrap（捕鸟陷阱）：twigs（树枝）3、silk（蛛丝）4
bugnet（捕虫网）：twigs（树枝）4、silk（蛛丝）2、rope（绳子）1
fishingrod（鱼竿）：twigs（树枝）2、silk（蛛丝）2
grass_umbrella（草伞）：twigs（树枝）4、cutgrass（草）3、petals（花瓣）6
umbrella（伞）：twigs（树枝）6),pigskin（猪皮）1、silk（蛛丝）2
bandage（蜂蜜绷带）：papyrus（纸）1、honey（蜂蜜）2
healingsalve（治疗药膏）：ash（灰）2、rocks（石）1、spidergland（蜘蛛腺体）1
compass（指南针）：goldnugget（黄金）1、papyrus（纸）1
heatrock（保温石）：rocks（石）10、pickaxe（镐）1、flint（燧石）3
backpack（背包）：cutgrass（草）4、twigs（树枝）4
piggyback（猪皮包）：pigskin（猪皮）4、silk（蛛丝）6、rope（绳子）2
bedroll_straw（草席卷）：cutgrass（草）6、rope（绳子）1
bedroll_furry（毛皮铺盖）：bedroll_straw（草席卷）1、manrabbit_tail（兔人尾巴）2
tent（帐篷）：silk（蛛丝）6、twigs（树枝）4、rope（绳子）3
siestahut（午睡小屋）：silk（蛛丝）2、boards（木板）4、rope（绳子）3
featherfan（羽毛扇）：goose_feather（鹿鸭羽毛）5、cutreeds（芦苇）5、rope（绳子）2
icepack（冰包）：bearger_fur（熊皮）1、gears（齿轮）3、transistor（晶体管）3


--TOOLS（工具）
axe（斧头）：twigs（树枝）1、flint（燧石）1
goldenaxe（黄金斧头）：twigs（树枝）4、goldnugget（黄金）2
pickaxe（镐）：twigs（树枝）2、flint（燧石）2
goldenpickaxe（黄金镐）：twigs（树枝）4、goldnugget（黄金）2
shovel（铲子）：twigs（树枝）2、flint（燧石）2
goldenshovel（黄金铲子）：twigs（树枝）4、goldnugget（黄金）2
hammer（锤子）：twigs（树枝）3、rocks（石）3、cutgrass（草）6
pitchfork（草叉）：twigs（树枝）2、flint（燧石）2
razor（剃刀）：twigs（树枝）2、flint（燧石）2


--SCIENCE（科学）
researchlab（科学机器）：goldnugget（黄金）1、log（木）4、rocks（石）4
researchlab2（炼金术引擎）：boards（木板）4、cutstone（石砖）2、transistor（晶体管）2
transistor（晶体管）：goldnugget（黄金）2、cutstone（石砖）2
diviningrod（探矿杖）：twigs（树枝）1、nightmarefuel（噩梦燃料）4、gears（齿轮）1
winterometer（寒冬温度计）：boards（木板）2、goldnugget（黄金）2
rainometer（雨量计）：boards（木板）2、goldnugget（黄金）2、rope（绳子）2
gunpowder（火药）：rottenegg（烂鸡蛋）1、charcoal（木炭）1、nitre（硝石）1
lightning_rod（避雷针）：goldnugget（黄金）4、cutstone（石砖）1
firesuppressor（灭火器）：gears（齿轮）2、ice（冰）15、transistor（晶体管）2


--MAGIC（魔法）
researchlab4（灵子分解器）：rabbit（兔子）4、boards（木板）4、tophat（高礼帽）1
researchlab3（阴影操纵者）：livinglog（活木头）3、purplegem（紫宝石）1、nightmarefuel（噩梦燃料）7
resurrectionstatue（肉块雕像）：boards（木板）4、cookedmeat（熟肉）4、beardhair（胡须）4
panflute（排箫）：cutreeds（芦苇）5、mandrake（曼德拉草）1、rope（绳子）1
bell（铃）：glommerwings（格罗门翅膀）1、glommerflower（格罗门花）1
onemanband（独奏乐器）：goldnugget（黄金）2、nightmarefuel（噩梦燃料）4、pigskin（猪皮）2
nightlight（暗影照明灯）：goldnugget（黄金）8、nightmarefuel（噩梦燃料）2、redgem（红宝石）1
armor_sanity（夜魔盔甲）：nightmarefuel（噩梦燃料）5、papyrus（纸）3
nightsword（暗夜剑）：nightmarefuel（噩梦燃料）5、livinglog（活木头）1
batbat（蝙蝠棒）：batwing（蝙蝠翅膀）5、livinglog（活木头）2、purplegem（紫宝石）1
armorslurper（饥饿腰带）：slurper_pelt（啜食者皮）6、rope（绳子）2、nightmarefuel（噩梦燃料）2
amulet（红色护身符）：goldnugget（黄金）3、nightmarefuel（噩梦燃料）2、redgem（红宝石）1
blueamulet（蓝色护身符）：goldnugget（黄金）3、bluegem（蓝宝石）1
purpleamulet（紫色护身符）：goldnugget（黄金）6、nightmarefuel（噩梦燃料）4、purplegem（紫宝石）2
firestaff（火魔杖）：nightmarefuel（噩梦燃料）2、spear（长矛）1、redgem（红宝石）1
icestaff（冰魔杖）：spear（长矛）1、bluegem（蓝宝石）1
telestaff（传送魔杖）：nightmarefuel（噩梦燃料）4、livinglog（活木头）2、purplegem（紫宝石）2
telebase（传送核心）：nightmarefuel（噩梦燃料）4、livinglog（活木头）4、goldnugget（黄金）8


--REFINE（精炼）
rope（绳子）：cutgrass（草）3
boards（木板）：log（木）4
cutstone（石砖）：rocks（石）3
papyrus（纸）：cutreeds（芦苇）4
transistor（晶体管）：goldnugget（黄金）2、cutstone（石砖）1
nightmarefuel（噩梦燃料）：petals_evil（噩梦花瓣）4
purplegem（紫宝石）：redgem（红宝石）1、bluegem（蓝宝石）1


--WAR（战斗）
spear（矛）：twigs（树枝）2、rope（绳子）1、flint（燧石）1
hambat（火腿短棍）：pigskin（猪皮）1、twigs（树枝）2、meat（大肉）2
nightstick（夜棍）：lightninggoathorn（闪电羊角）1、transistor（晶体管）2
armorgrass（草盔甲）：cutgrass（草）10、twigs（树枝）2
armorwood（木盔甲）：log（木）8、rope（绳子）2
armormarble（大理石盔甲）：marble（大理石）12、rope（绳子）4
footballhat（猪皮帽）：pigskin（猪皮）1、rope（绳子）1
blowdart_sleep（麻醉吹箭）：cutreeds（芦苇）2、stinger（蜂刺）1、feather_crow（乌鸦羽毛）1
blowdart_fire（燃烧吹箭）：cutreeds（芦苇）2、charcoal（木炭）1、feather_robin（红雀羽毛）1
blowdart_pipe（吹箭）：cutreeds（芦苇）2、houndstooth（犬牙）1、feather_robin_winter（雪雀羽毛）1
boomerang（回旋镖）：boards（木板）1、silk（蛛丝）1、charcoal（木炭）1
beemine（蜜蜂地雷）：boards（木板）1、bee（蜜蜂）4、flint（燧石）1
trap_teeth（牙齿陷阱）：log（木）1、rope（绳子）1、houndstooth（犬牙）1
armordragonfly（蜻蜓盔甲）：dragon_scales（蜻蜓鳞片）1、armorwood（木盔甲）1、pigskin（猪皮）3
staff_tornado（龙卷风魔杖）：goose_feather（鹿鸭羽毛）10、lightninggoathorn（闪电羊角）1、gears（齿轮）1


--DRESSUP（穿戴）
sewing_kit（针线包）：log（木）1、silk（蛛丝）8、houndstooth（犬牙）2
flowerhat（花环）：petals（花瓣）12
strawhat（草帽）：cutgrass（草）12
tophat（高礼帽）：silk（蛛丝）6
rainhat（防雨帽）：mole（鼹鼠）2、strawhat（草帽）1、boneshard（硬骨头）1
earmuffshat（兔耳罩）：rabbit（兔子）2、twigs（树枝）1
beefalohat（牛毛帽）：beefalowool（牛毛）8、horn（野牛角）1
winterhat（寒冬帽）：beefalowool（牛毛）4、silk（蛛丝）4
catcoonhat（浣熊帽）：coontail（浣熊尾巴）4、silk（蛛丝）4
watermelonhat（西瓜帽）：watermelon（西瓜）1、twigs（树枝）3
icehat（冰帽）：transistor（晶体管）2、rope（绳子）4、ice（冰）10
beehat（养蜂帽）：silk（蛛丝）8、rope（绳子）1
featherhat（羽毛帽）：feather_crow（乌鸦羽毛）3、feather_robin（红雀羽毛）2、tentaclespots（触手皮）2
bushhat（丛林帽）：strawhat（草帽）1、rope（绳子）1、dug_berrybush（浆果灌木丛）1
raincoat（雨衣）：tentaclespots（触手皮）2、rope（绳子）2、boneshard（硬骨头）2
sweatervest（小巧背心）：houndstooth（犬牙）8、silk（蛛丝）6
trunkvest_summer（夏日背心）：trunk_summer（红色象鼻）1、silk（蛛丝）8
trunkvest_winter（寒冬背心）：trunk_winter（蓝色象鼻）1、silk（蛛丝）8、beefalowool（牛毛）2
reflectivevest（反射背心）：rope（绳子）1、feather_robin（红雀羽毛）4、pigskin（猪皮）2
hawaiianshirt（夏威夷衬衫）：papyrus（纸）3、silk（蛛丝）3、cactus_flower（仙人掌花）5
cane（步行手杖）：goldnugget（黄金）2、walrus_tusk（海象牙）1、twigs（树枝）4
beargervest（熊背心）：bearger_fur（熊皮）1、sweatervest（小巧背心）1、rope（绳子）2
eyebrellahat（眼睛帽）：deerclops_eyeball（巨鹿眼球）1、twigs（树枝）15、boneshard（硬骨头）4


----ANCIENT----（远古）
thulecite（铥矿石）：thulecite_pieces（铥矿碎片）6
wall_ruins_item（铥矿墙）：thulecite（铥矿石）1
nightmare_timepiece（铥矿奖章）：thulecite（铥矿石）2、nightmarefuel（噩梦燃料）2
orangeamulet（橙色护身符）：thulecite（铥矿石）2、nightmarefuel（噩梦燃料）3、orangegem（橙色宝石）1
yellowamulet（黄色护身符）：thulecite（铥矿石）2、nightmarefuel（噩梦燃料）3、yellowgem（黄色宝石）1
greenamulet（绿色护身符）：thulecite（铥矿石）2、nightmarefuel（噩梦燃料）3、greengem（绿色宝石）1
orangestaff（橙色魔杖）：nightmarefuel（噩梦燃料）2、cane（步行手杖）1、orangegem（橙色宝石）2
yellowstaff（黄色魔杖）：nightmarefuel（噩梦燃料）4、livinglog（活木头）2、yellowgem（黄宝石）2
greenstaff（绿色魔杖）：nightmarefuel（噩梦燃料）4、livinglog（活木头）2、greengem（绿色宝石）2
multitool_axe_pickaxe（多功能工具）：goldenaxe（黄金斧头）1、goldenpickaxe（黄金镐）1、thulecite（铥矿石）2

ruinshat（远古王冠）：thulecite（铥矿石）4、nightmarefuel（噩梦燃料）4
armorruins（远古盔甲）：thulecite（铥矿石）6、nightmarefuel（噩梦燃料）4
ruins_bat（远古短棒）：livinglog（活木头）3、thulecite（铥矿石）4、nightmarefuel（噩梦燃料）4
eyeturret_item（眼睛炮塔）：deerclops_eyeball（巨鹿眼球）1、minotaurhorn（远古守护者角）1、thulecite（铥矿石）5




三七五.修改料理食谱（含全部料理精确食谱）

    用记事本打开游戏目录\data\DLC0001\scripts\preparedfoods.lua文件，以奶油松饼（butterflymuffin）食谱为例：

奶油松饼		butterflymuffin =
			{
所用食材		test = function(cooker, names, tags) return names.butterflywings and not tags.meat and tags.veggie end,
优先顺序		priority = 1,
重量			weight = 1,
食物类型		foodtype = "VEGGIE",
补血量			health = TUNING.HEALING_MED,
补饥饿量		hunger = TUNING.CALORIES_LARGE,
保鲜时间		perishtime = TUNING.PERISH_SLOW,
补脑值			sanity = TUNING.SANITY_TINY,
料理时间		cooktime = 2,
			},

    其中：

    所用食材：names.butterflywings（蝴蝶翅膀）、not tags.meat（不放肉）、tags.veggie（蔬菜）

    食物类型："VEGGIE",（蔬菜），可以修改的选项为"MEAT",（肉）

    补血量：TUNING.HEALING_MED,（20点血），可以修改的选项为TUNING.HEALING_TINY,（1点血）、TUNING.HEALING_SMALL,（3点血）、TUNING.HEALING_MEDSMALL,（8点血）、TUNING.HEALING_MEDLARGE,（30点血）、TUNING.HEALING_LARGE,（40点血）、TUNING.HEALING_HUGE,（60点血）、TUNING.HEALING_SUPERHUGE,（100点血）

    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿），可以修改的选项为TUNING.CALORIES_TINY,（9.375点饥饿）、TUNING.CALORIES_SMALL,（12.5点饥饿）、TUNING.CALORIES_MEDSMALL,（18.75点饥饿）、TUNING.CALORIES_MED,（25点饥饿）、TUNING.CALORIES_HUGE,（75点饥饿）、TUNING.CALORIES_SUPERHUGE,（150点饥饿）

    保鲜时间：TUNING.PERISH_SLOW,（15天），可以修改的选项为TUNING.PERISH_ONE_DAY,（1天）、TUNING.PERISH_TWO_DAY,（2天）、TUNING.PERISH_SUPERFAST,（3天）、TUNING.PERISH_FAST,（6天）、TUNING.PERISH_MED,（10天）、TUNING.PERISH_PRESERVED,（20天）、TUNING.PERISH_SUPERSLOW,（40天）

    补脑值：TUNING.SANITY_TINY,（5点脑），可以修改的选项为TUNING.SANITY_SUPERTINY,（1点脑）、TUNING.SANITY_SMALL,（10点脑）、TUNING.SANITY_MED,（15点脑）、TUNING.SANITY_MEDLARGE,（20点脑）、TUNING.SANITY_LARGE,（33点脑）、TUNING.SANITY_HUGE,（50点脑）

    料理时间：2,（2小时），可以自行调整，比如修改为.1,就是0.1个小时



    举例1（简化所用食材）：将曼德拉草汤食谱（至少有1个曼德拉草）简化为4个树枝。用记事本打开游戏目录\data\DLC0001\scripts\preparedfoods.lua文件，将test = function(cooker, names, tags) return names.mandrake end,替换为test = function(cooker, names, tags) return names.twigs >= 4 end,

    即可在游戏中仅以4个树枝煮出曼德拉草汤



    举例2（添加料理品种）：用4个浆果煮出蓝色象鼻（trunk_winter）。用记事本打开游戏目录\data\DLC0001\scripts\preparedfoods.lua文件，在下列内容：

		cooktime = .25,
	},

    的下一行插入以下内容：

	trunk_winter =
	{
		test = function(cooker, names, tags)  return names.berries >= 4 end,
		priority = 1,
		foodtype = "MEAT",
		health = TUNING.HEALING_SUPERHUGE,
		hunger = TUNING.CALORIES_SUPERHUGE,
		perishtime = TUNING.PERISH_SUPERSLOW,
		sanity = TUNING.SANITY_HUGE,
		cooktime = .1,
	},

    即可用4个浆果煮出蓝色象鼻，补血100点、补饥饿150点、保鲜时间40天、补50点脑、料理时间0.1小时。煮熟后会显示开盖的空锅，点空锅即可拿出蓝色象鼻。注意不要将不可食用、不会腐烂的物品添加为料理，比如黄金等，会改变其属性、使其存在保鲜时间。可添加为料理的食物名称见修改技巧最后一项“常用物品中英文名称”



    备注：全部料理精确食谱

butterflymuffin（奶油松饼）
    所用食材：names.butterflywings（蝴蝶翅膀）、not tags.meat（不放肉）、tags.veggie（蔬菜）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

frogglebunwich（青蛙圆面包三明治）
    所用食材：names.froglegs or names.froglegs_cooked（生、熟蛙腿）、tags.veggie（蔬菜）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（8点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

taffy（太妃糖）
    所用食材：tags.sweetener and tags.sweetener >= 3（蜂蜜或蜂巢大于等于3）、not tags.meat（不放肉）
    食物类型："VEGGIE",（蔬菜）
    补血量：-TUNING.HEALING_SMALL,（-3点血）
    补饥饿量：TUNING.CALORIES_SMALL*2,（25点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_MED,（15点脑）
    料理时间：2,（2小时）

pumpkincookie（南瓜饼）
    所用食材：names.pumpkin or names.pumpkin_cooked（生、熟南瓜）、tags.sweetener and tags.sweetener >= 2（蜂蜜或蜂巢大于等于2）
    食物类型："VEGGIE",（蔬菜）
    补血量：0,（0点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：TUNING.SANITY_MED,（15点脑）
    料理时间：2,（2小时）

stuffedeggplant（香酥茄盒）
    所用食材：names.eggplant or names.eggplant_cooked（生、熟茄子）、tags.veggie and tags.veggie > 1（蔬菜大于1）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_BRIEF,（5秒）
    料理时间：2,（2小时）

fishsticks（鱼肉条）
    所用食材：tags.fish（鱼）、names.twigs and (tags.inedible and tags.inedible <= 1)（树枝且树枝小于等于1）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_LARGE,（40点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

honeynuggets（甜蜜金砖）
    所用食材：names.honey（蜂蜜）、tags.meat and tags.meat <= 1.5（肉小于等于1.5，即1大肉、1小肉）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

honeyham（蜜汁火腿）
    所用食材：names.honey（蜂蜜）、tags.meat and tags.meat > 1.5（肉大于1.5，即1大肉、1小肉）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MEDLARGE,（30点血）
    补饥饿量：TUNING.CALORIES_HUGE,（75点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_AVERAGE,（10秒）
    料理时间：2,（2小时）

dragonpie（龙馅饼）
    所用食材：names.dragonfruit or names.dragonfruit_cooked（生、熟火龙果）、not tags.meat（不放肉）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_LARGE,（40点血）
    补饥饿量：TUNING.CALORIES_HUGE,（75点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_AVERAGE,（10秒）
    料理时间：2,（2小时）

kabobs（肉串）
    所用食材：tags.meat（肉）、names.twigs（树枝）、not tags.monster or tags.monster <= 1（没有疯肉或疯肉小于等于1）、tags.inedible and tags.inedible <= 1（树枝小于等于1）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

mandrakesoup（曼德拉草汤）
    所用食材：names.mandrake（曼德拉草）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_SUPERHUGE,（100点血）
    补饥饿量：TUNING.CALORIES_SUPERHUGE,（150点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：3,（3小时）

baconeggs（鸡蛋火腿）
    所用食材：tags.egg and tags.egg > 1（蛋大于1）、tags.meat and tags.meat > 1（肉大于1，即大于1块大肉）、not tags.veggie（不放蔬菜）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_HUGE,（75点饥饿）
    保鲜时间：TUNING.PERISH_PRESERVED,（20天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：2,（2小时）

meatballs（肉丸）
    所用食材：tags.meat（肉）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_SMALL*5,（62.5点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.75,（0.75小时）

bonestew（肉汤）
    所用食材：tags.meat and tags.meat >= 3（肉大于等3，即至少3块大肉）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_SMALL*4,（12点血）
    补饥饿量：TUNING.CALORIES_LARGE*4,（150点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_LONG,（15秒）
    料理时间：.75,（0.75小时）

perogies（半圆小酥饼）
    所用食材：tags.egg（蛋）、tags.meat（肉）、tags.veggie（蔬菜）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_LARGE,（40点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_PRESERVED,（20天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：1,（1小时）

turkeydinner（火鸡正餐）
    所用食材：names.drumstick and names.drumstick > 1（鸡腿大于1）、tags.meat and tags.meat > 1（肉大于1，即至少1块大肉）、tags.veggie or tags.fruit（蔬菜或水果）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_HUGE,（75点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_AVERAGE,（10秒）
    料理时间：3,（3小时）

ratatouille（蹩脚的炖菜）
    所用食材：not tags.meat（不放肉）、tags.veggie（蔬菜）、not tags.inedible（不放树枝）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_MED,（25点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：1,（1小时）

jammypreserves（果酱蜜饯）
    所用食材：tags.fruit（水果）、not tags.meat（不放肉）、not tags.veggie（不放蔬菜）、not tags.inedible（不放树枝）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_SMALL*3,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

fruitmedley（水果拼盘）
    所用食材：tags.fruit and tags.fruit >= 3（水果大于等于3）、not tags.meat（不放肉）、not tags.veggie（不放蔬菜）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_MED,（25点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    温度：TUNING.COLD_FOOD_BONUS_TEMP,（-40度）
    温度持续时间：TUNING.FOOD_TEMP_BRIEF,（5秒）
    料理时间：.5,（0.5小时）

fishtacos（玉米饼包炸鱼）
    所用食材：tags.fish（鱼）、names.corn or names.corn_cooked（生、熟玉米）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

waffles（华夫饼）
    所用食材：names.butter（黄油）、names.berries or names.berries_cooked（生、熟浆果）、tags.egg（蛋）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_HUGE,（60点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

monsterlasagna（怪物千层饼）
    所用食材：tags.monster and tags.monster >= 2（疯肉大于等于2）、not tags.inedible（不放树枝）
    食物类型："MEAT",（肉）
    补血量：-TUNING.HEALING_MED,（-20点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：-TUNING.SANITY_MEDLARGE,（-20点脑）
    料理时间：.5,（0.5小时）

powcake（芝士蛋糕）
    所用食材：names.twigs（树枝）、names.honey（蜂蜜）、names.corn or names.corn_cooked（生、熟玉米）
    食物类型："VEGGIE",（蔬菜）
    补血量：-TUNING.HEALING_SMALL,（-3点血）
    补饥饿量：0,（0点饥饿）
    保鲜时间：9000000,（9000000天）
    补脑值：0,（0点脑）
    料理时间：.5,（0.5小时）

unagi（鳗鱼料理）
    所用食材：names.cutlichen（苔藓）、names.eel or names.eel_cooked（生、熟鳗鱼）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_MEDSMALL,（18.75点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

wetgoop（湿腻焦糊）
    所用食材：true（所有非食谱的组合）
    食物类型：无
    补血量：0,（0点血）
    补饥饿量：0,（0点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：0,（0点脑）
    料理时间：.25,（0.25小时）

flowersalad（花沙拉）
    所用食材：names.cactusflower（仙人掌花）、tags.veggie and tags.veggie >= 2（蔬菜大于等于2）、not tags.meat（不放肉）、not tags.inedible（不放树枝）、not tags.egg（不放蛋）、not tags.sweetener（不放蜂蜜或蜂巢）、not tags.fruit（不放水果）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_LARGE,（40点血）
    补饥饿量：TUNING.CALORIES_SMALL,（12.5点饥饿）
    保鲜时间：TUNING.PERISH_FAST,（6天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

icecream（冰激淋）
    所用食材：tags.frozen（冰）、tags.dairy（乳制品）、tags.sweetener（蜂蜜或蜂巢）、not tags.meat（不放肉）、not tags.veggie（不放蔬菜）、not tags.inedible（不放树枝）、not tags.egg（不放蛋）
    食物类型："VEGGIE",（蔬菜）
    补血量：0,（0点血）
    补饥饿量：TUNING.CALORIES_MEDSMALL,（18.75点饥饿）
    保鲜时间：TUNING.PERISH_SUPERFAST,（3天）
    补脑值：TUNING.SANITY_LARGE,（33点脑）
    温度：TUNING.COLD_FOOD_BONUS_TEMP,（-40度）
    温度持续时间：TUNING.FOOD_TEMP_LONG,（15秒）
    料理时间：.5,（0.5小时）

watermelonicle（西瓜冰）
    所用食材：names.watermelon（西瓜）、tags.frozen（冰）、names.twigs（树枝）、not tags.meat（不放肉）、not tags.veggie（不放蔬菜）、not tags.egg（不放蛋）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_SMALL,（3点血）
    补饥饿量：TUNING.CALORIES_SMALL,（12.5点饥饿）
    保鲜时间：TUNING.PERISH_SUPERFAST,（3天）
    补脑值：TUNING.SANITY_MEDLARGE,（20点脑）
    温度：TUNING.COLD_FOOD_BONUS_TEMP,（-40度）
    温度持续时间：TUNING.FOOD_TEMP_AVERAGE,（10秒）
    料理时间：.5,（0.5小时）

trailmix（干果）
    所用食材：names.acorn_cooked（熟橡果）、tags.seed and tags.seed >= 1（种子大于等于1）、names.berries or names.berries_cooked（浆果或熟浆果）、tags.fruit and tags.fruit >= 1（水果大于等于1）、not tags.meat（不放肉）、not tags.veggie（不放蔬菜）、not tags.egg（不放蛋）、not tags.dairy（不放乳制品）
    食物类型："VEGGIE",（蔬菜）
    补血量：TUNING.HEALING_MEDLARGE,（30点血）
    补饥饿量：TUNING.CALORIES_SMALL,（12.5点饥饿）
    保鲜时间：TUNING.PERISH_SLOW,（15天）
    补脑值：TUNING.SANITY_TINY,（5点脑）
    料理时间：.5,（0.5小时）

hotchili（咖喱）
    所用食材：tags.meat >= 1.5（肉大于等于1.5）、tags.veggie >= 1.5（蔬菜大于等于1.5）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（20点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：0,（0点脑）
    温度：TUNING.HOT_FOOD_BONUS_TEMP,（40度）
    温度持续时间：TUNING.FOOD_TEMP_LONG,（15秒）
    料理时间：.5,（0.5小时）

guacamole（鳄梨酱）
    所用食材：names.mole（鼹鼠）、names.cactus_meat（仙人掌肉）、not tags.fruit（不放水果）
    食物类型："MEAT",（肉）
    补血量：TUNING.HEALING_MED,（8点血）
    补饥饿量：TUNING.CALORIES_LARGE,（37.5点饥饿）
    保鲜时间：TUNING.PERISH_MED,（10天）
    补脑值：0,（0点脑）
    料理时间：.5,（0.5小时）




三七六.常用物品中英文名称

1.材料：

cutgrass	（草）
twigs	（树枝）
log	（木头）
charcoal	（木炭）
ash	（灰）
cutreeds	（采下的芦苇）
lightbulb	（荧光果）
petals	（花瓣）
petals_evil	（噩梦花瓣）
pinecone	（松果）
foliage	（叶子）
cutlichen	（摘下的苔藓）
wormlight	（虫子果）
lureplantbulb	（食人花种子）
flint	（燧石）
nitre	（硝石）
redgem 	（红宝石）
bluegem	（蓝宝石）
purplegem	（紫宝石）
greengem	（绿宝石）
orangegem	（橙宝石）
yellowgem	（黄宝石）
rocks	（岩石）
goldnugget	（黄金）
thulecite	（铥矿石）
thulecite_pieces	（铥矿碎片）
rope	（绳子）
boards	（木板）
cutstone	（石砖）
papyrus	（纸）
houndstooth	（犬牙）
pigskin	（猪皮）
manrabbit_tail	（兔人尾巴）
silk	（蜘蛛丝）
spidergland	（蜘蛛腺体）
spidereggsack	（蜘蛛卵）
beardhair	（胡子）
beefalowool	（牛毛）
honeycomb	（蜂巢）
stinger	（蜂刺）
walrus_tusk	（海象牙）
feather_crow	（乌鸦羽毛）
feather_robin	（红雀羽毛）
feather_robin_winter	（雪雀羽毛）
horn	（牛角）
tentaclespots	（触手皮）
trunk_summer	（夏象鼻）
trunk_winter	（冬象鼻）
slurtleslime	（蜗牛龟粘液）
slurtle_shellpieces	（蜗牛龟壳片）
butterflywings	（蝴蝶翅膀）
mosquitosack	（蚊子血囊）
slurper_pelt	（啜食者皮）
minotaurhorn	（远古守护者角）
deerclops_eyeball	（巨鹿眼球）
lightninggoathorn	（闪电羊角）
glommerwings	（格罗门翅膀）
glommerflower	（格罗门花）
glommerfuel	（格罗门燃料）
livinglog	（活木头）
nightmarefuel	（噩梦燃料）
gears	（齿轮）
transistor（晶体管）
marble	（大理石）
boneshard	（硬骨头）
ice	（冰）
poop	（便便）
guano	（鸟粪）
dragon_scales	（蜻蜓鳞片）
goose_feather	（鹿鸭羽毛）
coontail	（浣熊尾巴）
bearger_fur	（熊皮）



2.工具武器：

axe	（斧子）
goldenaxe	（黄金斧头）
lucy	（露西斧子）
hammer	（锤子）
pickaxe	（镐）
goldenpickaxe	（黄金镐）
shovel	（铲子）
goldenshovel	（黄金铲子）
pitchfork	（草叉）
razor	（剃刀）
bugnet	（捕虫网）
fishingrod	（鱼竿）
multitool_axe_pickaxe	（多功能工具）
cane	（行走手杖）
trap	（陷阱）
birdtrap	（鸟陷阱）
trap_teeth	（牙齿陷阱）
trap_teeth_maxwell	（麦斯威尔的牙齿陷阱）
backpack	（背包）
piggyback	（猪皮包）
krampus_sack	（坎普斯背包）
umbrella	（雨伞）
grass_umbrella（草伞）
heatrock	（保温石）
bedroll_straw	（草席卷）
bedroll_furry	（毛皮铺盖）
torch	（火炬）
lantern	（提灯）
pumpkin_lantern	（南瓜灯）
compass	（指南针）
fertilizer（化肥）
firesuppressor（灭火器）
sewing_kit	（缝纫工具包）
spear	（矛）
boomerang	（回旋镖）
tentaclespike	（狼牙棒）
blowdart_pipe	（吹箭）
blowdart_sleep	（麻醉吹箭）
blowdart_fire	（燃烧吹箭）
hambat	（火腿短棍）
nightsword	（暗影剑）
batbat	（蝙蝠棒）
ruins_bat	（远古短棒）
spear_wathgrithr	（瓦丝格雷斯矛）
panflute	（排箫）
onemanband	（独奏乐器）
gunpowder	（火药）
beemine	（蜜蜂地雷）
bell	（铃）
amulet	（红色护身符）
blueamulet	（蓝色护身符）
purpleamulet	（紫色护身符）
yellowamulet	（黄色护身符）
orangeamulet	（橙色护身符） 
greenamulet	（绿色护身符）
nightmare_timepiece	（铥矿奖章）
icestaff	（冰魔杖）
firestaff	（火魔杖）
telestaff	（传送魔杖）
orangestaff	（橙色魔杖）
greenstaff	（绿色魔杖）
yellowstaff	（黄色魔杖）
diviningrod	（探矿杖）
book_birds	（召唤鸟的书）
book_tentacles	（召唤触手的书）
book_gardening	（催生植物的书）
book_sleep	（催眠的书）
book_brimstone	（召唤闪电的书）
waxwelljournal	（麦斯威尔的日志）
abigail_flower	（阿比盖尔之花）
balloons_empty	（空气球）
balloon	（气球）	
lighter	（薇洛的打火机）
chester_eyebone	（切斯特骨眼）
featherfan	（羽毛扇）
staff_tornado	（龙卷风魔杖）
nightstick	（夜棍）



3.穿戴：

strawhat	（草帽）
flowerhat	（花环）
beefalohat	（牛毛帽）
featherhat	（羽毛帽）
footballhat	（猪皮帽）
tophat	（高礼帽）
earmuffshat	（兔耳罩）
winterhat	（冬帽）
minerhat	（矿工帽）
spiderhat	（蜘蛛帽）
beehat	（蜂帽）
walrushat	（海象帽）
slurtlehat	（蜗牛帽子）
bushhat	（丛林帽）
ruinshat	（远古王冠）
rainhat（防雨帽）
icehat（冰帽）
watermelonhat	（西瓜帽）
catcoonhat	（浣熊帽）
wathgrithrhat	（瓦丝格雷斯帽）
armorwood	（木盔甲）
armorgrass	（草盔甲）
armormarble	（大理石盔甲）
armor_sanity	（夜魔盔甲）
armorsnurtleshell	（蜗牛龟盔甲）
armorruins	（远古盔甲）
sweatervest	（小巧背心）
trunkvest_summer	（夏日背心）
trunkvest_winter	（寒冬背心）
armorslurper	（饥饿腰带）
raincoat（雨衣）
webberskull	（韦伯头骨）
molehat	（鼹鼠帽）
armordragonfly	（蜻蜓盔甲）
beargervest	（熊背心）
eyebrellahat	（眼睛帽）
reflectivevest	（反射背心）
hawaiianshirt	（夏威夷衬衫）



4.建筑：

campfire	（营火）
firepit	（石头营火）
coldfire（冷火）
coldfirepit（石头冷火）
cookpot	（锅）
icebox	（冰箱）
winterometer	（寒冰温度计）
rainometer	（雨量计）
slow_farmplot	（一般农田）
fast_farmplot	（高级农田）
siestahut（午睡小屋）
tent	（帐篷）
homesign	（路牌）
birdcage	（鸟笼）
meatrack	（晾肉架）
lightning_rod	（避雷针）
pottedfern	（盆栽）
nightlight	（暗夜照明灯）
nightmarelight	（影灯）
researchlab	（科学机器）
researchlab2	（炼金术引擎）
researchlab3	（阴影操纵者）
researchlab4	（灵子分解器）
treasurechest	（木箱）
skullchest	（骷髅箱）
pandoraschest	（华丽的箱子）
minotaurchest	（大华丽的箱子）
wall_hay_item	（草墙）
wall_wood_item	（木墙）
wall_stone_item	（石墙）
wall_ruins_item	（铥墙）
wall_hay	（地上的草墙）
wall_wood	（地上的木墙）
wall_stone	（地上的石墙）
wall_ruins	（地上的铥墙）
pighouse	（猪房）
rabbithole	（兔房）
mermhouse	（鱼人房）
resurrectionstatue	（肉块雕像）
resurrectionstone	（重生石）
ancient_altar 	（远古祭坛）
ancient_altar_broken 	（损坏的远古祭坛）
telebase	（传送核心）
gemsocket	（宝石看台）
eyeturret	（固定在地上的眼睛炮塔）
eyeturret_item	（可带走的眼睛炮塔）
cave_exit	（洞穴出口）
turf_woodfloor	（木地板）
turf_carpetfloor	（地毯地板）
turf_checkerfloor	（棋盘地板）
adventure_portal	（冒险之门）
rock_light	（火山坑）
gravestone	（墓碑）
mound	（坟墓土堆）
skeleton	（人骨）
houndbone	（狗骨头）
animal_track	（动物足迹）
dirtpile	（可疑的土堆）
pond	（池塘）
pond_cave	（洞穴池塘）
pighead	（猪头棍）
mermhead	（鱼头棍）
pigtorch	（猪火炬）
rabbithole	（兔子洞）
beebox	（蜂箱）
beehive	（野生蜂窝）
wasphive	（杀人蜂窝）
spiderhole	（洞穴蜘蛛洞）
walrus_camp	（海象窝）
tallbirdnest	（高鸟窝）
houndmound	（猎犬丘）
slurtlehole	（蜗牛窝）
batcave	（蝙蝠洞）
monkeybarrel	（猴子桶）
spiderden	（蜘蛛巢穴）
molehill	（鼹鼠丘）
catcoonden	（浣熊洞）
rock1	（带硝石的岩石）
rock2	（带黄金的岩石）
rock_flintless	（只有石头的岩石）
stalagmite_full	（大圆洞穴石头）
stalagmite_med	（中圆洞穴石头）
stalagmite_low	（小圆洞穴石头）
stalagmite_tall_full	（大高洞穴石头）
stalagmite_tall_med	（中高洞穴石头）
stalagmite_tall_low	（小高洞穴石头）
rock_ice	（冰石）
ruins_statue_head	（远古头像）
ruins_statue_mage	（远古法师雕像）
marblepillar	（大理石柱子）
marbletree	（大理石树）
statueharp	（竖琴雕像）
basalt	（玄武岩）
basalt_pillar	（高玄武岩）
insanityrock	（猪王矮柱石）
sanityrock	（猪王高柱石）
ruins_chair	（远古椅子）
ruins_vase	（远古花瓶）
ruins_table	（远古桌子）
statuemaxwell	（麦斯威尔雕像）
statueglommer	（格罗门雕像）
relic	（废墟）
ruins_rubble	（损毁的废墟）
bishop_nightmare	（损坏的雕像）
rook_nightmare	（损坏的战车）
knight_nightmare	（损坏的骑士）
chessjunk1	（损坏的机械1）
chessjunk2	（损坏的机械2）
chessjunk3	（损坏的机械3）
teleportato_ring	（环状传送机零件）
teleportato_box	（盒状传送机零件）
teleportato_crank	（曲柄状传送机零件）
teleportato_potato	（球状传送机零件）
teleportato_base	（传送机零件底座）
teleportato_checkmate	（传送机零件底座）
wormhole	（虫洞）
wormhole_limited_1	（被限制的虫洞）
stafflight	（小星星）
treasurechest_trap	（箱子陷阱）
icepack	（冰包）
dragonflychest	（蜻蜓箱子）



5.食物：

carrot	（胡萝卜）
carrot_cooked	（熟胡萝卜）
berries	（浆果）
berries_cooked	（熟浆果）
pumpkin	（南瓜）
pumpkin_cooked	（熟南瓜）
dragonfruit	（火龙果）
dragonfruit_cooked	（熟火龙果）
pomegranate	（石榴）
pomegranate_cooked	（熟石榴）
corn	（玉米）
corn_cooked	（熟玉米）
durian	（榴莲）
durian_cooked	（熟榴莲）
eggplant	（茄子）
eggplant_cooked	（熟茄子）
cave_banana	（洞穴香蕉）
cave_banana_cooked	（熟洞穴香蕉）
acorn	（橡果）
acorn_cooked（熟橡果）
cactus_meat	（仙人掌肉）
watermelon（西瓜）
red_cap	（采摘的红蘑菇）
red_cap_cooked	（煮熟的红蘑菇）
green_cap	（采摘的绿蘑菇）
green_cap_cooked	（煮熟的绿蘑菇）
blue_cap_cooked	（煮熟的蓝蘑菇）
blue_cap	（采摘的蓝蘑菇）
seeds	（种子）
seeds_cooked	（熟种子）
carrot_seeds	（胡萝卜种子）
pumpkin_seeds	（南瓜种子）
dragonfruit_seeds	（火龙果种子）
pomegranate_seeds	（石榴种子）
corn_seeds	（玉米种子）
durian_seeds	（榴莲种子）
eggplant_seeds	（茄子种子）
smallmeat	（小肉）
cookedsmallmeat	（小熟肉）
smallmeat_dried	（小干肉）
meat	（大肉）
cookedmeat	（大熟肉）
meat_dried	（大干肉）
drumstick	（鸡腿）
drumstick_cooked	（熟鸡腿）
monstermeat	（疯肉）
cookedmonstermeat	（熟疯肉）
monstermeat_dried	（干疯肉）
plantmeat	（食人花肉）
plantmeat_cooked	（熟食人花肉）
bird_egg	（鸡蛋）
bird_egg_cooked	（煮熟的鸡蛋）
rottenegg	（烂鸡蛋）
tallbirdegg	（高鸟蛋）
tallbirdegg_cooked	（熟高鸟蛋）
tallbirdegg_cracked	（孵化的高鸟蛋）
fish	（鱼）
fish_cooked	（熟鱼）
eel	（鳗鱼）
eel_cooked	（熟鳗鱼）
froglegs	（蛙腿）
froglegs_cooked	（熟蛙腿）
batwing	（蝙蝠翅膀）
batwing_cooked	（熟蝙蝠翅膀）
trunk_cooked	（熟象鼻）
mandrake	（曼德拉草）
cookedmandrake	（熟曼特拉草）
honey	（蜂蜜）
butter	（黄油）
butterflymuffin	（奶油松饼）
frogglebunwich	（青蛙圆面包三明治）
honeyham	（蜜汁火腿）
dragonpie	（龙馅饼）
taffy	（太妃糖）
pumpkincookie	（南瓜饼）
kabobs	（肉串）
powcake	（芝士蛋糕）
mandrakesoup	（曼德拉草汤）
baconeggs	（鸡蛋火腿）
bonestew	（肉汤）
perogies	（半圆小酥饼）
wetgoop	（湿腻焦糊）
ratatouille	（蹩脚的炖菜）
fruitmedley	（水果拼盘）
fishtacos 	（玉米饼包炸鱼）
waffles 	（华夫饼）
turkeydinner	（火鸡正餐）
fishsticks	（鱼肉条）
stuffedeggplant	（香酥茄盒）
honeynuggets	（甜蜜金砖）
meatballs	（肉丸）
jammypreserves	（果酱蜜饯）
monsterlasagna	（怪物千层饼）
unagi	（鳗鱼料理）
bandage	（蜂蜜绷带）
healingsalve	（治疗药膏）
spoiled_food	（腐烂食物）
flowersalad	（花沙拉）
icecream	（冰激淋）
watermelonicle	（西瓜冰）
trailmix	（干果）
hotchili	（咖喱）
guacamole	（鳄梨酱）
goatmilk	（羊奶）



6.植物：

flower	（花）
flower_evil	（噩梦花）
carrot_planted	（长在地上的胡萝卜）
grass	（长在地上的草）
depleted_grass	（草根）
dug_grass	（长草簇）
sapling	（树苗）
dug_sapling	（可种的树苗）
berrybush	（果树丛）
dug_berrybush	（可种的果树丛）
berrybush2	（果树丛2）
dug_berrybush2	（可种的果树丛2）
marsh_bush	（尖刺灌木）
dug_marsh_bush	（可种的尖刺灌木）
reeds	（芦苇）
lichen	（洞穴苔藓）
cave_fern	（蕨类植物）
evergreen	（树）
evergreen_sparse	（无松果的树）
marsh_tree	（针叶树）
cave_banana_tree	（洞穴香蕉树）
livingtree	（活树）
deciduoustree	（橡树）
deciduoustree_tall	（高橡树）
deciduoustree_short	（矮橡树）
red_mushroom	（红蘑菇）
green_mushroom	（绿蘑菇）
blue_mushroom	（蓝蘑菇）
mushtree_tall	（高蘑菇树）
mushtree_medium	（中蘑菇树）
mushtree_small	（小蘑菇树）
flower_cave	（单朵洞穴花）
flower_cave_double	（双朵洞穴花）
flower_cave_triple	（三朵洞穴花）
tumbleweed	（滚草）
cactus	（仙人掌）
cactus_flower	（仙人掌花）
marsh_plant	（水塘边小草）
pond_algae	（水藻）



7.动物：

rabbit	（兔子）
perd	（火鸡）
crow	（乌鸦）
robin	（红雀）
robin_winter	（雪雀）
butterfly	（蝴蝶）
fireflies	（萤火虫）
bee	（蜜蜂）
killerbee	（杀人蜂）
flies	（苍蝇）
mosquito	（蚊子）
frog	（青蛙）
beefalo	（牛）
babybeefalo	（小牛）
lightninggoat	（闪电羊）
pigman	（猪人）
pigguard	（猪守卫）
bunnyman	（兔人）
merm	（鱼人）
spider_hider	（洞穴蜘蛛）
spider_spitter	（喷射蜘蛛）
spider	（地面小蜘蛛）
spider_warrior	（地面绿蜘蛛）
spiderqueen	（蜘蛛女王）
spider_dropper	（白蜘蛛）
hound	（猎狗）
firehound	（红色猎狗）
icehound	（冰狗）
tentacle	（触手）
tentacle_garden	（巨型触手）
leif	（树精）
leif_sparse	（稀有树精）
walrus	（海象）
little_walrus	（小海象）
smallbird	（小高鸟）
teenbird	（青年高鸟）
tallbird	（高鸟）
koalefant_summer	（夏象）
koalefant_winter	（冬象）
penguin	（企鹅）
slurtle	（蜗牛龟）
snurtle	（黏糊虫）
bat	（蝙蝠）
rocky	（龙虾）
monkey	（猴子）
slurper	（缀食者）
buzzard	（秃鹫）
mole	（鼹鼠）
catcoon	（浣熊）
knight	（发条骑士）
bishop	（主教）
rook	（战车）
crawlinghorror	（爬行暗影怪）
terrorbeak	（尖嘴暗影怪）
deerclops	（巨鹿）
minotaur	（远古守护者）
worm	（远古虫子）
abigail	（阿比盖尔）
ghost	（幽灵）
shadowwaxwell	（麦斯威尔黑影小人）
krampus	（坎普斯）
glommer	（格罗门）
chester	（切斯特）
lureplant	（食人花）
eyeplant	（食人花眼睛）
bigfoot	（大脚）
pigking	（猪王）
moose	（鹿鸭）
mossling	（小鸭）
dragonfly	（蜻蜓）
warg	（座狼）
bearger	（熊）
birchnutdrake	（坚果鸭）
mooseegg	（鹿鸭蛋）



8.角色：

wilson	（威尔逊）
waxwell	（麦斯威尔）
wendy	（温蒂）
woodie	（伍迪）
wes	（韦斯）
wickerbottom	（图书管理员）
willow	（薇洛）
wolfgang	（沃尔夫冈）
wx78	（机器人）
wathgrithr	（瓦丝格雷斯）
webber	（韦伯）